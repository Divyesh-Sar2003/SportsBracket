var kb=t=>{throw TypeError(t)};var Ig=(t,e,n)=>e.has(t)||kb("Cannot "+n);var ee=(t,e,n)=>(Ig(t,e,"read from private field"),n?n.call(t):e.get(t)),mt=(t,e,n)=>e.has(t)?kb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),He=(t,e,n,r)=>(Ig(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),$n=(t,e,n)=>(Ig(t,e,"access private method"),n);var Ch=(t,e,n,r)=>({set _(s){He(t,e,s,n)},get _(){return ee(t,e,r)}});function mM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function rN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sN={exports:{}},Jm={},iN={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ud=Symbol.for("react.element"),pM=Symbol.for("react.portal"),gM=Symbol.for("react.fragment"),yM=Symbol.for("react.strict_mode"),vM=Symbol.for("react.profiler"),xM=Symbol.for("react.provider"),wM=Symbol.for("react.context"),_M=Symbol.for("react.forward_ref"),bM=Symbol.for("react.suspense"),EM=Symbol.for("react.memo"),TM=Symbol.for("react.lazy"),Ib=Symbol.iterator;function SM(t){return t===null||typeof t!="object"?null:(t=Ib&&t[Ib]||t["@@iterator"],typeof t=="function"?t:null)}var aN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oN=Object.assign,lN={};function Ac(t,e,n){this.props=t,this.context=e,this.refs=lN,this.updater=n||aN}Ac.prototype.isReactComponent={};Ac.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ac.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cN(){}cN.prototype=Ac.prototype;function Dx(t,e,n){this.props=t,this.context=e,this.refs=lN,this.updater=n||aN}var Mx=Dx.prototype=new cN;Mx.constructor=Dx;oN(Mx,Ac.prototype);Mx.isPureReactComponent=!0;var Ab=Array.isArray,uN=Object.prototype.hasOwnProperty,Ox={current:null},dN={key:!0,ref:!0,__self:!0,__source:!0};function hN(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)uN.call(e,r)&&!dN.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ud,type:t,key:i,ref:o,props:s,_owner:Ox.current}}function NM(t,e){return{$$typeof:Ud,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Lx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ud}function CM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Pb=/\/+/g;function Ag(t,e){return typeof t=="object"&&t!==null&&t.key!=null?CM(""+t.key):e.toString(36)}function of(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ud:case pM:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ag(o,0):r,Ab(s)?(n="",t!=null&&(n=t.replace(Pb,"$&/")+"/"),of(s,e,n,"",function(u){return u})):s!=null&&(Lx(s)&&(s=NM(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Pb,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ab(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Ag(i,l);o+=of(i,e,n,c,s)}else if(c=SM(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Ag(i,l++),o+=of(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function jh(t,e,n){if(t==null)return t;var r=[],s=0;return of(t,r,"","",function(i){return e.call(n,i,s++)}),r}function jM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var or={current:null},lf={transition:null},kM={ReactCurrentDispatcher:or,ReactCurrentBatchConfig:lf,ReactCurrentOwner:Ox};function fN(){throw Error("act(...) is not supported in production builds of React.")}et.Children={map:jh,forEach:function(t,e,n){jh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return jh(t,function(){e++}),e},toArray:function(t){return jh(t,function(e){return e})||[]},only:function(t){if(!Lx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};et.Component=Ac;et.Fragment=gM;et.Profiler=vM;et.PureComponent=Dx;et.StrictMode=yM;et.Suspense=bM;et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kM;et.act=fN;et.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=oN({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ox.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)uN.call(e,c)&&!dN.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ud,type:t.type,key:s,ref:i,props:r,_owner:o}};et.createContext=function(t){return t={$$typeof:wM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xM,_context:t},t.Consumer=t};et.createElement=hN;et.createFactory=function(t){var e=hN.bind(null,t);return e.type=t,e};et.createRef=function(){return{current:null}};et.forwardRef=function(t){return{$$typeof:_M,render:t}};et.isValidElement=Lx;et.lazy=function(t){return{$$typeof:TM,_payload:{_status:-1,_result:t},_init:jM}};et.memo=function(t,e){return{$$typeof:EM,type:t,compare:e===void 0?null:e}};et.startTransition=function(t){var e=lf.transition;lf.transition={};try{t()}finally{lf.transition=e}};et.unstable_act=fN;et.useCallback=function(t,e){return or.current.useCallback(t,e)};et.useContext=function(t){return or.current.useContext(t)};et.useDebugValue=function(){};et.useDeferredValue=function(t){return or.current.useDeferredValue(t)};et.useEffect=function(t,e){return or.current.useEffect(t,e)};et.useId=function(){return or.current.useId()};et.useImperativeHandle=function(t,e,n){return or.current.useImperativeHandle(t,e,n)};et.useInsertionEffect=function(t,e){return or.current.useInsertionEffect(t,e)};et.useLayoutEffect=function(t,e){return or.current.useLayoutEffect(t,e)};et.useMemo=function(t,e){return or.current.useMemo(t,e)};et.useReducer=function(t,e,n){return or.current.useReducer(t,e,n)};et.useRef=function(t){return or.current.useRef(t)};et.useState=function(t){return or.current.useState(t)};et.useSyncExternalStore=function(t,e,n){return or.current.useSyncExternalStore(t,e,n)};et.useTransition=function(){return or.current.useTransition()};et.version="18.3.1";iN.exports=et;var m=iN.exports;const J=rN(m),Vx=mM({__proto__:null,default:J},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IM=m,AM=Symbol.for("react.element"),PM=Symbol.for("react.fragment"),RM=Object.prototype.hasOwnProperty,DM=IM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MM={key:!0,ref:!0,__self:!0,__source:!0};function mN(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)RM.call(e,r)&&!MM.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:AM,type:t,key:i,ref:o,props:s,_owner:DM.current}}Jm.Fragment=PM;Jm.jsx=mN;Jm.jsxs=mN;sN.exports=Jm;var a=sN.exports,pN={exports:{}},Vr={},gN={exports:{}},yN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,F){var $=U.length;U.push(F);e:for(;0<$;){var G=$-1>>>1,oe=U[G];if(0<s(oe,F))U[G]=F,U[$]=oe,$=G;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var F=U[0],$=U.pop();if($!==F){U[0]=$;e:for(var G=0,oe=U.length,de=oe>>>1;G<de;){var xe=2*(G+1)-1,Ne=U[xe],lt=xe+1,le=U[lt];if(0>s(Ne,$))lt<oe&&0>s(le,Ne)?(U[G]=le,U[lt]=$,G=lt):(U[G]=Ne,U[xe]=$,G=xe);else if(lt<oe&&0>s(le,$))U[G]=le,U[lt]=$,G=lt;else break e}}return F}function s(U,F){var $=U.sortIndex-F.sortIndex;return $!==0?$:U.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,p=3,g=!1,T=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(U){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=U)r(u),F.sortIndex=F.expirationTime,e(c,F);else break;F=n(u)}}function E(U){if(v=!1,w(U),!T)if(n(c)!==null)T=!0,H(P);else{var F=n(u);F!==null&&Y(E,F.startTime-U)}}function P(U,F){T=!1,v&&(v=!1,_(N),N=-1),g=!0;var $=p;try{for(w(F),f=n(c);f!==null&&(!(f.expirationTime>F)||U&&!M());){var G=f.callback;if(typeof G=="function"){f.callback=null,p=f.priorityLevel;var oe=G(f.expirationTime<=F);F=t.unstable_now(),typeof oe=="function"?f.callback=oe:f===n(c)&&r(c),w(F)}else r(c);f=n(c)}if(f!==null)var de=!0;else{var xe=n(u);xe!==null&&Y(E,xe.startTime-F),de=!1}return de}finally{f=null,p=$,g=!1}}var R=!1,S=null,N=-1,k=5,A=-1;function M(){return!(t.unstable_now()-A<k)}function I(){if(S!==null){var U=t.unstable_now();A=U;var F=!0;try{F=S(!0,U)}finally{F?j():(R=!1,S=null)}}else R=!1}var j;if(typeof y=="function")j=function(){y(I)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,W=V.port2;V.port1.onmessage=I,j=function(){W.postMessage(null)}}else j=function(){b(I,0)};function H(U){S=U,R||(R=!0,j())}function Y(U,F){N=b(function(){U(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){T||g||(T=!0,H(P))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var $=p;p=F;try{return U()}finally{p=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,F){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var $=p;p=U;try{return F()}finally{p=$}},t.unstable_scheduleCallback=function(U,F,$){var G=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?G+$:G):$=G,U){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=$+oe,U={id:h++,callback:F,priorityLevel:U,startTime:$,expirationTime:oe,sortIndex:-1},$>G?(U.sortIndex=$,e(u,U),n(c)===null&&U===n(u)&&(v?(_(N),N=-1):v=!0,Y(E,$-G))):(U.sortIndex=oe,e(c,U),T||g||(T=!0,H(P))),U},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(U){var F=p;return function(){var $=p;p=F;try{return U.apply(this,arguments)}finally{p=$}}}})(yN);gN.exports=yN;var OM=gN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LM=m,Or=OM;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vN=new Set,Ju={};function Jo(t,e){oc(t,e),oc(t+"Capture",e)}function oc(t,e){for(Ju[t]=e,t=0;t<e.length;t++)vN.add(e[t])}var Ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vy=Object.prototype.hasOwnProperty,VM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rb={},Db={};function FM(t){return Vy.call(Db,t)?!0:Vy.call(Rb,t)?!1:VM.test(t)?Db[t]=!0:(Rb[t]=!0,!1)}function UM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $M(t,e,n,r){if(e===null||typeof e>"u"||UM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dn[t]=new lr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dn[e]=new lr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dn[t]=new lr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dn[t]=new lr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dn[t]=new lr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dn[t]=new lr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dn[t]=new lr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dn[t]=new lr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dn[t]=new lr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fx=/[\-:]([a-z])/g;function Ux(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fx,Ux);Dn[e]=new lr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fx,Ux);Dn[e]=new lr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fx,Ux);Dn[e]=new lr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dn[t]=new lr(t,1,!1,t.toLowerCase(),null,!1,!1)});Dn.xlinkHref=new lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dn[t]=new lr(t,1,!1,t.toLowerCase(),null,!0,!0)});function $x(t,e,n,r){var s=Dn.hasOwnProperty(e)?Dn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($M(e,n,s,r)&&(n=null),r||s===null?FM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ui=LM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kh=Symbol.for("react.element"),Nl=Symbol.for("react.portal"),Cl=Symbol.for("react.fragment"),Bx=Symbol.for("react.strict_mode"),Fy=Symbol.for("react.profiler"),xN=Symbol.for("react.provider"),wN=Symbol.for("react.context"),zx=Symbol.for("react.forward_ref"),Uy=Symbol.for("react.suspense"),$y=Symbol.for("react.suspense_list"),Wx=Symbol.for("react.memo"),ia=Symbol.for("react.lazy"),_N=Symbol.for("react.offscreen"),Mb=Symbol.iterator;function ou(t){return t===null||typeof t!="object"?null:(t=Mb&&t[Mb]||t["@@iterator"],typeof t=="function"?t:null)}var Zt=Object.assign,Pg;function bu(t){if(Pg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pg=e&&e[1]||""}return`
`+Pg+t}var Rg=!1;function Dg(t,e){if(!t||Rg)return"";Rg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Rg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?bu(t):""}function BM(t){switch(t.tag){case 5:return bu(t.type);case 16:return bu("Lazy");case 13:return bu("Suspense");case 19:return bu("SuspenseList");case 0:case 2:case 15:return t=Dg(t.type,!1),t;case 11:return t=Dg(t.type.render,!1),t;case 1:return t=Dg(t.type,!0),t;default:return""}}function By(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cl:return"Fragment";case Nl:return"Portal";case Fy:return"Profiler";case Bx:return"StrictMode";case Uy:return"Suspense";case $y:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wN:return(t.displayName||"Context")+".Consumer";case xN:return(t._context.displayName||"Context")+".Provider";case zx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wx:return e=t.displayName||null,e!==null?e:By(t.type)||"Memo";case ia:e=t._payload,t=t._init;try{return By(t(e))}catch{}}return null}function zM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return By(e);case 8:return e===Bx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ua(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function WM(t){var e=bN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ih(t){t._valueTracker||(t._valueTracker=WM(t))}function EN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bN(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Of(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zy(t,e){var n=e.checked;return Zt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ob(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ua(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TN(t,e){e=e.checked,e!=null&&$x(t,"checked",e,!1)}function Wy(t,e){TN(t,e);var n=Ua(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hy(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hy(t,e.type,Ua(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Lb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hy(t,e,n){(e!=="number"||Of(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Eu=Array.isArray;function Vl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ua(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function qy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Zt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(Eu(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ua(n)}}function SN(t,e){var n=Ua(e.value),r=Ua(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Fb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function NN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?NN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ah,CN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ah=Ah||document.createElement("div"),Ah.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ah.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ed(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Du={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HM=["Webkit","ms","Moz","O"];Object.keys(Du).forEach(function(t){HM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Du[e]=Du[t]})});function jN(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Du.hasOwnProperty(t)&&Du[t]?(""+e).trim():e+"px"}function kN(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=jN(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var qM=Zt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ky(t,e){if(e){if(qM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function Qy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yy=null;function Hx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xy=null,Fl=null,Ul=null;function Ub(t){if(t=zd(t)){if(typeof Xy!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=sp(e),Xy(t.stateNode,t.type,e))}}function IN(t){Fl?Ul?Ul.push(t):Ul=[t]:Fl=t}function AN(){if(Fl){var t=Fl,e=Ul;if(Ul=Fl=null,Ub(t),e)for(t=0;t<e.length;t++)Ub(e[t])}}function PN(t,e){return t(e)}function RN(){}var Mg=!1;function DN(t,e,n){if(Mg)return t(e,n);Mg=!0;try{return PN(t,e,n)}finally{Mg=!1,(Fl!==null||Ul!==null)&&(RN(),AN())}}function td(t,e){var n=t.stateNode;if(n===null)return null;var r=sp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var Zy=!1;if(Ni)try{var lu={};Object.defineProperty(lu,"passive",{get:function(){Zy=!0}}),window.addEventListener("test",lu,lu),window.removeEventListener("test",lu,lu)}catch{Zy=!1}function GM(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Mu=!1,Lf=null,Vf=!1,Jy=null,KM={onError:function(t){Mu=!0,Lf=t}};function QM(t,e,n,r,s,i,o,l,c){Mu=!1,Lf=null,GM.apply(KM,arguments)}function YM(t,e,n,r,s,i,o,l,c){if(QM.apply(this,arguments),Mu){if(Mu){var u=Lf;Mu=!1,Lf=null}else throw Error(ae(198));Vf||(Vf=!0,Jy=u)}}function el(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function MN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $b(t){if(el(t)!==t)throw Error(ae(188))}function XM(t){var e=t.alternate;if(!e){if(e=el(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return $b(s),t;if(i===r)return $b(s),e;i=i.sibling}throw Error(ae(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function ON(t){return t=XM(t),t!==null?LN(t):null}function LN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LN(t);if(e!==null)return e;t=t.sibling}return null}var VN=Or.unstable_scheduleCallback,Bb=Or.unstable_cancelCallback,ZM=Or.unstable_shouldYield,JM=Or.unstable_requestPaint,cn=Or.unstable_now,eO=Or.unstable_getCurrentPriorityLevel,qx=Or.unstable_ImmediatePriority,FN=Or.unstable_UserBlockingPriority,Ff=Or.unstable_NormalPriority,tO=Or.unstable_LowPriority,UN=Or.unstable_IdlePriority,ep=null,Us=null;function nO(t){if(Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(ep,t,void 0,(t.current.flags&128)===128)}catch{}}var vs=Math.clz32?Math.clz32:iO,rO=Math.log,sO=Math.LN2;function iO(t){return t>>>=0,t===0?32:31-(rO(t)/sO|0)|0}var Ph=64,Rh=4194304;function Tu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Tu(l):(i&=o,i!==0&&(r=Tu(i)))}else o=n&~s,o!==0?r=Tu(o):i!==0&&(r=Tu(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vs(e),s=1<<n,r|=t[n],e&=~s;return r}function aO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vs(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=aO(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function ev(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $N(){var t=Ph;return Ph<<=1,!(Ph&4194240)&&(Ph=64),t}function Og(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $d(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vs(e),t[e]=n}function lO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vs(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Gx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vs(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var jt=0;function BN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zN,Kx,WN,HN,qN,tv=!1,Dh=[],Ea=null,Ta=null,Sa=null,nd=new Map,rd=new Map,la=[],cO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zb(t,e){switch(t){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":Ta=null;break;case"mouseover":case"mouseout":Sa=null;break;case"pointerover":case"pointerout":nd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rd.delete(e.pointerId)}}function cu(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=zd(e),e!==null&&Kx(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function uO(t,e,n,r,s){switch(e){case"focusin":return Ea=cu(Ea,t,e,n,r,s),!0;case"dragenter":return Ta=cu(Ta,t,e,n,r,s),!0;case"mouseover":return Sa=cu(Sa,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return nd.set(i,cu(nd.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,rd.set(i,cu(rd.get(i)||null,t,e,n,r,s)),!0}return!1}function GN(t){var e=_o(t.target);if(e!==null){var n=el(e);if(n!==null){if(e=n.tag,e===13){if(e=MN(n),e!==null){t.blockedOn=e,qN(t.priority,function(){WN(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Yy=r,n.target.dispatchEvent(r),Yy=null}else return e=zd(n),e!==null&&Kx(e),t.blockedOn=n,!1;e.shift()}return!0}function Wb(t,e,n){cf(t)&&n.delete(e)}function dO(){tv=!1,Ea!==null&&cf(Ea)&&(Ea=null),Ta!==null&&cf(Ta)&&(Ta=null),Sa!==null&&cf(Sa)&&(Sa=null),nd.forEach(Wb),rd.forEach(Wb)}function uu(t,e){t.blockedOn===e&&(t.blockedOn=null,tv||(tv=!0,Or.unstable_scheduleCallback(Or.unstable_NormalPriority,dO)))}function sd(t){function e(s){return uu(s,t)}if(0<Dh.length){uu(Dh[0],t);for(var n=1;n<Dh.length;n++){var r=Dh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ea!==null&&uu(Ea,t),Ta!==null&&uu(Ta,t),Sa!==null&&uu(Sa,t),nd.forEach(e),rd.forEach(e),n=0;n<la.length;n++)r=la[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<la.length&&(n=la[0],n.blockedOn===null);)GN(n),n.blockedOn===null&&la.shift()}var $l=Ui.ReactCurrentBatchConfig,$f=!0;function hO(t,e,n,r){var s=jt,i=$l.transition;$l.transition=null;try{jt=1,Qx(t,e,n,r)}finally{jt=s,$l.transition=i}}function fO(t,e,n,r){var s=jt,i=$l.transition;$l.transition=null;try{jt=4,Qx(t,e,n,r)}finally{jt=s,$l.transition=i}}function Qx(t,e,n,r){if($f){var s=nv(t,e,n,r);if(s===null)qg(t,e,r,Bf,n),zb(t,r);else if(uO(s,t,e,n,r))r.stopPropagation();else if(zb(t,r),e&4&&-1<cO.indexOf(t)){for(;s!==null;){var i=zd(s);if(i!==null&&zN(i),i=nv(t,e,n,r),i===null&&qg(t,e,r,Bf,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else qg(t,e,r,null,n)}}var Bf=null;function nv(t,e,n,r){if(Bf=null,t=Hx(r),t=_o(t),t!==null)if(e=el(t),e===null)t=null;else if(n=e.tag,n===13){if(t=MN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Bf=t,null}function KN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eO()){case qx:return 1;case FN:return 4;case Ff:case tO:return 16;case UN:return 536870912;default:return 16}default:return 16}}var va=null,Yx=null,uf=null;function QN(){if(uf)return uf;var t,e=Yx,n=e.length,r,s="value"in va?va.value:va.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return uf=s.slice(t,1<r?1-r:void 0)}function df(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mh(){return!0}function Hb(){return!1}function Fr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Mh:Hb,this.isPropagationStopped=Hb,this}return Zt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mh)},persist:function(){},isPersistent:Mh}),e}var Pc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xx=Fr(Pc),Bd=Zt({},Pc,{view:0,detail:0}),mO=Fr(Bd),Lg,Vg,du,tp=Zt({},Bd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==du&&(du&&t.type==="mousemove"?(Lg=t.screenX-du.screenX,Vg=t.screenY-du.screenY):Vg=Lg=0,du=t),Lg)},movementY:function(t){return"movementY"in t?t.movementY:Vg}}),qb=Fr(tp),pO=Zt({},tp,{dataTransfer:0}),gO=Fr(pO),yO=Zt({},Bd,{relatedTarget:0}),Fg=Fr(yO),vO=Zt({},Pc,{animationName:0,elapsedTime:0,pseudoElement:0}),xO=Fr(vO),wO=Zt({},Pc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_O=Fr(wO),bO=Zt({},Pc,{data:0}),Gb=Fr(bO),EO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=SO[t])?!!e[t]:!1}function Zx(){return NO}var CO=Zt({},Bd,{key:function(t){if(t.key){var e=EO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=df(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zx,charCode:function(t){return t.type==="keypress"?df(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?df(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jO=Fr(CO),kO=Zt({},tp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kb=Fr(kO),IO=Zt({},Bd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zx}),AO=Fr(IO),PO=Zt({},Pc,{propertyName:0,elapsedTime:0,pseudoElement:0}),RO=Fr(PO),DO=Zt({},tp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),MO=Fr(DO),OO=[9,13,27,32],Jx=Ni&&"CompositionEvent"in window,Ou=null;Ni&&"documentMode"in document&&(Ou=document.documentMode);var LO=Ni&&"TextEvent"in window&&!Ou,YN=Ni&&(!Jx||Ou&&8<Ou&&11>=Ou),Qb=" ",Yb=!1;function XN(t,e){switch(t){case"keyup":return OO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jl=!1;function VO(t,e){switch(t){case"compositionend":return ZN(e);case"keypress":return e.which!==32?null:(Yb=!0,Qb);case"textInput":return t=e.data,t===Qb&&Yb?null:t;default:return null}}function FO(t,e){if(jl)return t==="compositionend"||!Jx&&XN(t,e)?(t=QN(),uf=Yx=va=null,jl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YN&&e.locale!=="ko"?null:e.data;default:return null}}var UO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!UO[t.type]:e==="textarea"}function JN(t,e,n,r){IN(r),e=zf(e,"onChange"),0<e.length&&(n=new Xx("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Lu=null,id=null;function $O(t){uC(t,0)}function np(t){var e=Al(t);if(EN(e))return t}function BO(t,e){if(t==="change")return e}var eC=!1;if(Ni){var Ug;if(Ni){var $g="oninput"in document;if(!$g){var Zb=document.createElement("div");Zb.setAttribute("oninput","return;"),$g=typeof Zb.oninput=="function"}Ug=$g}else Ug=!1;eC=Ug&&(!document.documentMode||9<document.documentMode)}function Jb(){Lu&&(Lu.detachEvent("onpropertychange",tC),id=Lu=null)}function tC(t){if(t.propertyName==="value"&&np(id)){var e=[];JN(e,id,t,Hx(t)),DN($O,e)}}function zO(t,e,n){t==="focusin"?(Jb(),Lu=e,id=n,Lu.attachEvent("onpropertychange",tC)):t==="focusout"&&Jb()}function WO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return np(id)}function HO(t,e){if(t==="click")return np(e)}function qO(t,e){if(t==="input"||t==="change")return np(e)}function GO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bs=typeof Object.is=="function"?Object.is:GO;function ad(t,e){if(bs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Vy.call(e,s)||!bs(t[s],e[s]))return!1}return!0}function e1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function t1(t,e){var n=e1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=e1(n)}}function nC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rC(){for(var t=window,e=Of();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Of(t.document)}return e}function ew(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function KO(t){var e=rC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nC(n.ownerDocument.documentElement,n)){if(r!==null&&ew(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=t1(n,i);var o=t1(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var QO=Ni&&"documentMode"in document&&11>=document.documentMode,kl=null,rv=null,Vu=null,sv=!1;function n1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sv||kl==null||kl!==Of(r)||(r=kl,"selectionStart"in r&&ew(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vu&&ad(Vu,r)||(Vu=r,r=zf(rv,"onSelect"),0<r.length&&(e=new Xx("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=kl)))}function Oh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Il={animationend:Oh("Animation","AnimationEnd"),animationiteration:Oh("Animation","AnimationIteration"),animationstart:Oh("Animation","AnimationStart"),transitionend:Oh("Transition","TransitionEnd")},Bg={},sC={};Ni&&(sC=document.createElement("div").style,"AnimationEvent"in window||(delete Il.animationend.animation,delete Il.animationiteration.animation,delete Il.animationstart.animation),"TransitionEvent"in window||delete Il.transitionend.transition);function rp(t){if(Bg[t])return Bg[t];if(!Il[t])return t;var e=Il[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sC)return Bg[t]=e[n];return t}var iC=rp("animationend"),aC=rp("animationiteration"),oC=rp("animationstart"),lC=rp("transitionend"),cC=new Map,r1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function to(t,e){cC.set(t,e),Jo(e,[t])}for(var zg=0;zg<r1.length;zg++){var Wg=r1[zg],YO=Wg.toLowerCase(),XO=Wg[0].toUpperCase()+Wg.slice(1);to(YO,"on"+XO)}to(iC,"onAnimationEnd");to(aC,"onAnimationIteration");to(oC,"onAnimationStart");to("dblclick","onDoubleClick");to("focusin","onFocus");to("focusout","onBlur");to(lC,"onTransitionEnd");oc("onMouseEnter",["mouseout","mouseover"]);oc("onMouseLeave",["mouseout","mouseover"]);oc("onPointerEnter",["pointerout","pointerover"]);oc("onPointerLeave",["pointerout","pointerover"]);Jo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Su));function s1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,YM(r,e,void 0,t),t.currentTarget=null}function uC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;s1(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;s1(s,l,u),i=c}}}if(Vf)throw t=Jy,Vf=!1,Jy=null,t}function $t(t,e){var n=e[cv];n===void 0&&(n=e[cv]=new Set);var r=t+"__bubble";n.has(r)||(dC(e,t,2,!1),n.add(r))}function Hg(t,e,n){var r=0;e&&(r|=4),dC(n,t,r,e)}var Lh="_reactListening"+Math.random().toString(36).slice(2);function od(t){if(!t[Lh]){t[Lh]=!0,vN.forEach(function(n){n!=="selectionchange"&&(ZO.has(n)||Hg(n,!1,t),Hg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Lh]||(e[Lh]=!0,Hg("selectionchange",!1,e))}}function dC(t,e,n,r){switch(KN(e)){case 1:var s=hO;break;case 4:s=fO;break;default:s=Qx}n=s.bind(null,e,n,t),s=void 0,!Zy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function qg(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=_o(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}DN(function(){var u=i,h=Hx(n),f=[];e:{var p=cC.get(t);if(p!==void 0){var g=Xx,T=t;switch(t){case"keypress":if(df(n)===0)break e;case"keydown":case"keyup":g=jO;break;case"focusin":T="focus",g=Fg;break;case"focusout":T="blur",g=Fg;break;case"beforeblur":case"afterblur":g=Fg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=qb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=gO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=AO;break;case iC:case aC:case oC:g=xO;break;case lC:g=RO;break;case"scroll":g=mO;break;case"wheel":g=MO;break;case"copy":case"cut":case"paste":g=_O;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Kb}var v=(e&4)!==0,b=!v&&t==="scroll",_=v?p!==null?p+"Capture":null:p;v=[];for(var y=u,w;y!==null;){w=y;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,_!==null&&(E=td(y,_),E!=null&&v.push(ld(y,E,w)))),b)break;y=y.return}0<v.length&&(p=new g(p,T,null,n,h),f.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Yy&&(T=n.relatedTarget||n.fromElement)&&(_o(T)||T[Ci]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(T=n.relatedTarget||n.toElement,g=u,T=T?_o(T):null,T!==null&&(b=el(T),T!==b||T.tag!==5&&T.tag!==6)&&(T=null)):(g=null,T=u),g!==T)){if(v=qb,E="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=Kb,E="onPointerLeave",_="onPointerEnter",y="pointer"),b=g==null?p:Al(g),w=T==null?p:Al(T),p=new v(E,y+"leave",g,n,h),p.target=b,p.relatedTarget=w,E=null,_o(h)===u&&(v=new v(_,y+"enter",T,n,h),v.target=w,v.relatedTarget=b,E=v),b=E,g&&T)t:{for(v=g,_=T,y=0,w=v;w;w=hl(w))y++;for(w=0,E=_;E;E=hl(E))w++;for(;0<y-w;)v=hl(v),y--;for(;0<w-y;)_=hl(_),w--;for(;y--;){if(v===_||_!==null&&v===_.alternate)break t;v=hl(v),_=hl(_)}v=null}else v=null;g!==null&&i1(f,p,g,v,!1),T!==null&&b!==null&&i1(f,b,T,v,!0)}}e:{if(p=u?Al(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var P=BO;else if(Xb(p))if(eC)P=qO;else{P=WO;var R=zO}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=HO);if(P&&(P=P(t,u))){JN(f,P,n,h);break e}R&&R(t,p,u),t==="focusout"&&(R=p._wrapperState)&&R.controlled&&p.type==="number"&&Hy(p,"number",p.value)}switch(R=u?Al(u):window,t){case"focusin":(Xb(R)||R.contentEditable==="true")&&(kl=R,rv=u,Vu=null);break;case"focusout":Vu=rv=kl=null;break;case"mousedown":sv=!0;break;case"contextmenu":case"mouseup":case"dragend":sv=!1,n1(f,n,h);break;case"selectionchange":if(QO)break;case"keydown":case"keyup":n1(f,n,h)}var S;if(Jx)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else jl?XN(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(YN&&n.locale!=="ko"&&(jl||N!=="onCompositionStart"?N==="onCompositionEnd"&&jl&&(S=QN()):(va=h,Yx="value"in va?va.value:va.textContent,jl=!0)),R=zf(u,N),0<R.length&&(N=new Gb(N,t,null,n,h),f.push({event:N,listeners:R}),S?N.data=S:(S=ZN(n),S!==null&&(N.data=S)))),(S=LO?VO(t,n):FO(t,n))&&(u=zf(u,"onBeforeInput"),0<u.length&&(h=new Gb("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=S))}uC(f,e)})}function ld(t,e,n){return{instance:t,listener:e,currentTarget:n}}function zf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=td(t,n),i!=null&&r.unshift(ld(t,i,s)),i=td(t,e),i!=null&&r.push(ld(t,i,s))),t=t.return}return r}function hl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function i1(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=td(n,i),c!=null&&o.unshift(ld(n,c,l))):s||(c=td(n,i),c!=null&&o.push(ld(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var JO=/\r\n?/g,e4=/\u0000|\uFFFD/g;function a1(t){return(typeof t=="string"?t:""+t).replace(JO,`
`).replace(e4,"")}function Vh(t,e,n){if(e=a1(e),a1(t)!==e&&n)throw Error(ae(425))}function Wf(){}var iv=null,av=null;function ov(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lv=typeof setTimeout=="function"?setTimeout:void 0,t4=typeof clearTimeout=="function"?clearTimeout:void 0,o1=typeof Promise=="function"?Promise:void 0,n4=typeof queueMicrotask=="function"?queueMicrotask:typeof o1<"u"?function(t){return o1.resolve(null).then(t).catch(r4)}:lv;function r4(t){setTimeout(function(){throw t})}function Gg(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),sd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);sd(e)}function Na(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function l1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Rc=Math.random().toString(36).slice(2),Os="__reactFiber$"+Rc,cd="__reactProps$"+Rc,Ci="__reactContainer$"+Rc,cv="__reactEvents$"+Rc,s4="__reactListeners$"+Rc,i4="__reactHandles$"+Rc;function _o(t){var e=t[Os];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ci]||n[Os]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=l1(t);t!==null;){if(n=t[Os])return n;t=l1(t)}return e}t=n,n=t.parentNode}return null}function zd(t){return t=t[Os]||t[Ci],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Al(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function sp(t){return t[cd]||null}var uv=[],Pl=-1;function no(t){return{current:t}}function zt(t){0>Pl||(t.current=uv[Pl],uv[Pl]=null,Pl--)}function Lt(t,e){Pl++,uv[Pl]=t.current,t.current=e}var $a={},Qn=no($a),yr=no(!1),Lo=$a;function lc(t,e){var n=t.type.contextTypes;if(!n)return $a;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function vr(t){return t=t.childContextTypes,t!=null}function Hf(){zt(yr),zt(Qn)}function c1(t,e,n){if(Qn.current!==$a)throw Error(ae(168));Lt(Qn,e),Lt(yr,n)}function hC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ae(108,zM(t)||"Unknown",s));return Zt({},n,r)}function qf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$a,Lo=Qn.current,Lt(Qn,t),Lt(yr,yr.current),!0}function u1(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=hC(t,e,Lo),r.__reactInternalMemoizedMergedChildContext=t,zt(yr),zt(Qn),Lt(Qn,t)):zt(yr),Lt(yr,n)}var fi=null,ip=!1,Kg=!1;function fC(t){fi===null?fi=[t]:fi.push(t)}function a4(t){ip=!0,fC(t)}function ro(){if(!Kg&&fi!==null){Kg=!0;var t=0,e=jt;try{var n=fi;for(jt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fi=null,ip=!1}catch(s){throw fi!==null&&(fi=fi.slice(t+1)),VN(qx,ro),s}finally{jt=e,Kg=!1}}return null}var Rl=[],Dl=0,Gf=null,Kf=0,Br=[],zr=0,Vo=null,vi=1,xi="";function go(t,e){Rl[Dl++]=Kf,Rl[Dl++]=Gf,Gf=t,Kf=e}function mC(t,e,n){Br[zr++]=vi,Br[zr++]=xi,Br[zr++]=Vo,Vo=t;var r=vi;t=xi;var s=32-vs(r)-1;r&=~(1<<s),n+=1;var i=32-vs(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,vi=1<<32-vs(e)+s|n<<s|r,xi=i+t}else vi=1<<i|n<<s|r,xi=t}function tw(t){t.return!==null&&(go(t,1),mC(t,1,0))}function nw(t){for(;t===Gf;)Gf=Rl[--Dl],Rl[Dl]=null,Kf=Rl[--Dl],Rl[Dl]=null;for(;t===Vo;)Vo=Br[--zr],Br[zr]=null,xi=Br[--zr],Br[zr]=null,vi=Br[--zr],Br[zr]=null}var Dr=null,Pr=null,qt=!1,ms=null;function pC(t,e){var n=Gr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function d1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dr=t,Pr=Na(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dr=t,Pr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vo!==null?{id:vi,overflow:xi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dr=t,Pr=null,!0):!1;default:return!1}}function dv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hv(t){if(qt){var e=Pr;if(e){var n=e;if(!d1(t,e)){if(dv(t))throw Error(ae(418));e=Na(n.nextSibling);var r=Dr;e&&d1(t,e)?pC(r,n):(t.flags=t.flags&-4097|2,qt=!1,Dr=t)}}else{if(dv(t))throw Error(ae(418));t.flags=t.flags&-4097|2,qt=!1,Dr=t}}}function h1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dr=t}function Fh(t){if(t!==Dr)return!1;if(!qt)return h1(t),qt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ov(t.type,t.memoizedProps)),e&&(e=Pr)){if(dv(t))throw gC(),Error(ae(418));for(;e;)pC(t,e),e=Na(e.nextSibling)}if(h1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pr=Na(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pr=null}}else Pr=Dr?Na(t.stateNode.nextSibling):null;return!0}function gC(){for(var t=Pr;t;)t=Na(t.nextSibling)}function cc(){Pr=Dr=null,qt=!1}function rw(t){ms===null?ms=[t]:ms.push(t)}var o4=Ui.ReactCurrentBatchConfig;function hu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function Uh(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function f1(t){var e=t._init;return e(t._payload)}function yC(t){function e(_,y){if(t){var w=_.deletions;w===null?(_.deletions=[y],_.flags|=16):w.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function s(_,y){return _=Ia(_,y),_.index=0,_.sibling=null,_}function i(_,y,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<y?(_.flags|=2,y):w):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,y,w,E){return y===null||y.tag!==6?(y=ty(w,_.mode,E),y.return=_,y):(y=s(y,w),y.return=_,y)}function c(_,y,w,E){var P=w.type;return P===Cl?h(_,y,w.props.children,E,w.key):y!==null&&(y.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ia&&f1(P)===y.type)?(E=s(y,w.props),E.ref=hu(_,y,w),E.return=_,E):(E=vf(w.type,w.key,w.props,null,_.mode,E),E.ref=hu(_,y,w),E.return=_,E)}function u(_,y,w,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=ny(w,_.mode,E),y.return=_,y):(y=s(y,w.children||[]),y.return=_,y)}function h(_,y,w,E,P){return y===null||y.tag!==7?(y=Do(w,_.mode,E,P),y.return=_,y):(y=s(y,w),y.return=_,y)}function f(_,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ty(""+y,_.mode,w),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case kh:return w=vf(y.type,y.key,y.props,null,_.mode,w),w.ref=hu(_,null,y),w.return=_,w;case Nl:return y=ny(y,_.mode,w),y.return=_,y;case ia:var E=y._init;return f(_,E(y._payload),w)}if(Eu(y)||ou(y))return y=Do(y,_.mode,w,null),y.return=_,y;Uh(_,y)}return null}function p(_,y,w,E){var P=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return P!==null?null:l(_,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case kh:return w.key===P?c(_,y,w,E):null;case Nl:return w.key===P?u(_,y,w,E):null;case ia:return P=w._init,p(_,y,P(w._payload),E)}if(Eu(w)||ou(w))return P!==null?null:h(_,y,w,E,null);Uh(_,w)}return null}function g(_,y,w,E,P){if(typeof E=="string"&&E!==""||typeof E=="number")return _=_.get(w)||null,l(y,_,""+E,P);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case kh:return _=_.get(E.key===null?w:E.key)||null,c(y,_,E,P);case Nl:return _=_.get(E.key===null?w:E.key)||null,u(y,_,E,P);case ia:var R=E._init;return g(_,y,w,R(E._payload),P)}if(Eu(E)||ou(E))return _=_.get(w)||null,h(y,_,E,P,null);Uh(y,E)}return null}function T(_,y,w,E){for(var P=null,R=null,S=y,N=y=0,k=null;S!==null&&N<w.length;N++){S.index>N?(k=S,S=null):k=S.sibling;var A=p(_,S,w[N],E);if(A===null){S===null&&(S=k);break}t&&S&&A.alternate===null&&e(_,S),y=i(A,y,N),R===null?P=A:R.sibling=A,R=A,S=k}if(N===w.length)return n(_,S),qt&&go(_,N),P;if(S===null){for(;N<w.length;N++)S=f(_,w[N],E),S!==null&&(y=i(S,y,N),R===null?P=S:R.sibling=S,R=S);return qt&&go(_,N),P}for(S=r(_,S);N<w.length;N++)k=g(S,_,N,w[N],E),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?N:k.key),y=i(k,y,N),R===null?P=k:R.sibling=k,R=k);return t&&S.forEach(function(M){return e(_,M)}),qt&&go(_,N),P}function v(_,y,w,E){var P=ou(w);if(typeof P!="function")throw Error(ae(150));if(w=P.call(w),w==null)throw Error(ae(151));for(var R=P=null,S=y,N=y=0,k=null,A=w.next();S!==null&&!A.done;N++,A=w.next()){S.index>N?(k=S,S=null):k=S.sibling;var M=p(_,S,A.value,E);if(M===null){S===null&&(S=k);break}t&&S&&M.alternate===null&&e(_,S),y=i(M,y,N),R===null?P=M:R.sibling=M,R=M,S=k}if(A.done)return n(_,S),qt&&go(_,N),P;if(S===null){for(;!A.done;N++,A=w.next())A=f(_,A.value,E),A!==null&&(y=i(A,y,N),R===null?P=A:R.sibling=A,R=A);return qt&&go(_,N),P}for(S=r(_,S);!A.done;N++,A=w.next())A=g(S,_,N,A.value,E),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?N:A.key),y=i(A,y,N),R===null?P=A:R.sibling=A,R=A);return t&&S.forEach(function(I){return e(_,I)}),qt&&go(_,N),P}function b(_,y,w,E){if(typeof w=="object"&&w!==null&&w.type===Cl&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case kh:e:{for(var P=w.key,R=y;R!==null;){if(R.key===P){if(P=w.type,P===Cl){if(R.tag===7){n(_,R.sibling),y=s(R,w.props.children),y.return=_,_=y;break e}}else if(R.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ia&&f1(P)===R.type){n(_,R.sibling),y=s(R,w.props),y.ref=hu(_,R,w),y.return=_,_=y;break e}n(_,R);break}else e(_,R);R=R.sibling}w.type===Cl?(y=Do(w.props.children,_.mode,E,w.key),y.return=_,_=y):(E=vf(w.type,w.key,w.props,null,_.mode,E),E.ref=hu(_,y,w),E.return=_,_=E)}return o(_);case Nl:e:{for(R=w.key;y!==null;){if(y.key===R)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(_,y.sibling),y=s(y,w.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=ny(w,_.mode,E),y.return=_,_=y}return o(_);case ia:return R=w._init,b(_,y,R(w._payload),E)}if(Eu(w))return T(_,y,w,E);if(ou(w))return v(_,y,w,E);Uh(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(_,y.sibling),y=s(y,w),y.return=_,_=y):(n(_,y),y=ty(w,_.mode,E),y.return=_,_=y),o(_)):n(_,y)}return b}var uc=yC(!0),vC=yC(!1),Qf=no(null),Yf=null,Ml=null,sw=null;function iw(){sw=Ml=Yf=null}function aw(t){var e=Qf.current;zt(Qf),t._currentValue=e}function fv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bl(t,e){Yf=t,sw=Ml=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gr=!0),t.firstContext=null)}function Zr(t){var e=t._currentValue;if(sw!==t)if(t={context:t,memoizedValue:e,next:null},Ml===null){if(Yf===null)throw Error(ae(308));Ml=t,Yf.dependencies={lanes:0,firstContext:t}}else Ml=Ml.next=t;return e}var bo=null;function ow(t){bo===null?bo=[t]:bo.push(t)}function xC(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ow(e)):(n.next=s.next,s.next=n),e.interleaved=n,ji(t,r)}function ji(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var aa=!1;function lw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ca(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ut&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ji(t,n)}return s=r.interleaved,s===null?(e.next=e,ow(r)):(e.next=s.next,s.next=e),r.interleaved=e,ji(t,n)}function hf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gx(t,n)}}function m1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xf(t,e,n,r){var s=t.updateQueue;aa=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,l=i;do{var p=l.lane,g=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var T=t,v=l;switch(p=e,g=n,v.tag){case 1:if(T=v.payload,typeof T=="function"){f=T.call(g,f,p);break e}f=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=v.payload,p=typeof T=="function"?T.call(g,f,p):T,p==null)break e;f=Zt({},f,p);break e;case 2:aa=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=g,c=f):h=h.next=g,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Uo|=o,t.lanes=o,t.memoizedState=f}}function p1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ae(191,s));s.call(r)}}}var Wd={},$s=no(Wd),ud=no(Wd),dd=no(Wd);function Eo(t){if(t===Wd)throw Error(ae(174));return t}function cw(t,e){switch(Lt(dd,e),Lt(ud,t),Lt($s,Wd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gy(e,t)}zt($s),Lt($s,e)}function dc(){zt($s),zt(ud),zt(dd)}function _C(t){Eo(dd.current);var e=Eo($s.current),n=Gy(e,t.type);e!==n&&(Lt(ud,t),Lt($s,n))}function uw(t){ud.current===t&&(zt($s),zt(ud))}var Kt=no(0);function Zf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qg=[];function dw(){for(var t=0;t<Qg.length;t++)Qg[t]._workInProgressVersionPrimary=null;Qg.length=0}var ff=Ui.ReactCurrentDispatcher,Yg=Ui.ReactCurrentBatchConfig,Fo=0,Yt=null,xn=null,En=null,Jf=!1,Fu=!1,hd=0,l4=0;function Bn(){throw Error(ae(321))}function hw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bs(t[n],e[n]))return!1;return!0}function fw(t,e,n,r,s,i){if(Fo=i,Yt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ff.current=t===null||t.memoizedState===null?h4:f4,t=n(r,s),Fu){i=0;do{if(Fu=!1,hd=0,25<=i)throw Error(ae(301));i+=1,En=xn=null,e.updateQueue=null,ff.current=m4,t=n(r,s)}while(Fu)}if(ff.current=em,e=xn!==null&&xn.next!==null,Fo=0,En=xn=Yt=null,Jf=!1,e)throw Error(ae(300));return t}function mw(){var t=hd!==0;return hd=0,t}function Is(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?Yt.memoizedState=En=t:En=En.next=t,En}function Jr(){if(xn===null){var t=Yt.alternate;t=t!==null?t.memoizedState:null}else t=xn.next;var e=En===null?Yt.memoizedState:En.next;if(e!==null)En=e,xn=t;else{if(t===null)throw Error(ae(310));xn=t,t={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},En===null?Yt.memoizedState=En=t:En=En.next=t}return En}function fd(t,e){return typeof e=="function"?e(t):e}function Xg(t){var e=Jr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=xn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((Fo&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,Yt.lanes|=h,Uo|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,bs(r,e.memoizedState)||(gr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Yt.lanes|=i,Uo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zg(t){var e=Jr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);bs(i,e.memoizedState)||(gr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function bC(){}function EC(t,e){var n=Yt,r=Jr(),s=e(),i=!bs(r.memoizedState,s);if(i&&(r.memoizedState=s,gr=!0),r=r.queue,pw(NC.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||En!==null&&En.memoizedState.tag&1){if(n.flags|=2048,md(9,SC.bind(null,n,r,s,e),void 0,null),Tn===null)throw Error(ae(349));Fo&30||TC(n,e,s)}return s}function TC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Yt.updateQueue,e===null?(e={lastEffect:null,stores:null},Yt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function SC(t,e,n,r){e.value=n,e.getSnapshot=r,CC(e)&&jC(t)}function NC(t,e,n){return n(function(){CC(e)&&jC(t)})}function CC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bs(t,n)}catch{return!0}}function jC(t){var e=ji(t,1);e!==null&&xs(e,t,1,-1)}function g1(t){var e=Is();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fd,lastRenderedState:t},e.queue=t,t=t.dispatch=d4.bind(null,Yt,t),[e.memoizedState,t]}function md(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Yt.updateQueue,e===null?(e={lastEffect:null,stores:null},Yt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function kC(){return Jr().memoizedState}function mf(t,e,n,r){var s=Is();Yt.flags|=t,s.memoizedState=md(1|e,n,void 0,r===void 0?null:r)}function ap(t,e,n,r){var s=Jr();r=r===void 0?null:r;var i=void 0;if(xn!==null){var o=xn.memoizedState;if(i=o.destroy,r!==null&&hw(r,o.deps)){s.memoizedState=md(e,n,i,r);return}}Yt.flags|=t,s.memoizedState=md(1|e,n,i,r)}function y1(t,e){return mf(8390656,8,t,e)}function pw(t,e){return ap(2048,8,t,e)}function IC(t,e){return ap(4,2,t,e)}function AC(t,e){return ap(4,4,t,e)}function PC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function RC(t,e,n){return n=n!=null?n.concat([t]):null,ap(4,4,PC.bind(null,e,t),n)}function gw(){}function DC(t,e){var n=Jr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function MC(t,e){var n=Jr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function OC(t,e,n){return Fo&21?(bs(n,e)||(n=$N(),Yt.lanes|=n,Uo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gr=!0),t.memoizedState=n)}function c4(t,e){var n=jt;jt=n!==0&&4>n?n:4,t(!0);var r=Yg.transition;Yg.transition={};try{t(!1),e()}finally{jt=n,Yg.transition=r}}function LC(){return Jr().memoizedState}function u4(t,e,n){var r=ka(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},VC(t))FC(e,n);else if(n=xC(t,e,n,r),n!==null){var s=sr();xs(n,t,r,s),UC(n,e,r)}}function d4(t,e,n){var r=ka(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(VC(t))FC(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,bs(l,o)){var c=e.interleaved;c===null?(s.next=s,ow(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=xC(t,e,s,r),n!==null&&(s=sr(),xs(n,t,r,s),UC(n,e,r))}}function VC(t){var e=t.alternate;return t===Yt||e!==null&&e===Yt}function FC(t,e){Fu=Jf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function UC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gx(t,n)}}var em={readContext:Zr,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useInsertionEffect:Bn,useLayoutEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useMutableSource:Bn,useSyncExternalStore:Bn,useId:Bn,unstable_isNewReconciler:!1},h4={readContext:Zr,useCallback:function(t,e){return Is().memoizedState=[t,e===void 0?null:e],t},useContext:Zr,useEffect:y1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,mf(4194308,4,PC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return mf(4194308,4,t,e)},useInsertionEffect:function(t,e){return mf(4,2,t,e)},useMemo:function(t,e){var n=Is();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Is();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=u4.bind(null,Yt,t),[r.memoizedState,t]},useRef:function(t){var e=Is();return t={current:t},e.memoizedState=t},useState:g1,useDebugValue:gw,useDeferredValue:function(t){return Is().memoizedState=t},useTransition:function(){var t=g1(!1),e=t[0];return t=c4.bind(null,t[1]),Is().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Yt,s=Is();if(qt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),Tn===null)throw Error(ae(349));Fo&30||TC(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,y1(NC.bind(null,r,i,t),[t]),r.flags|=2048,md(9,SC.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Is(),e=Tn.identifierPrefix;if(qt){var n=xi,r=vi;n=(r&~(1<<32-vs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=hd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=l4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},f4={readContext:Zr,useCallback:DC,useContext:Zr,useEffect:pw,useImperativeHandle:RC,useInsertionEffect:IC,useLayoutEffect:AC,useMemo:MC,useReducer:Xg,useRef:kC,useState:function(){return Xg(fd)},useDebugValue:gw,useDeferredValue:function(t){var e=Jr();return OC(e,xn.memoizedState,t)},useTransition:function(){var t=Xg(fd)[0],e=Jr().memoizedState;return[t,e]},useMutableSource:bC,useSyncExternalStore:EC,useId:LC,unstable_isNewReconciler:!1},m4={readContext:Zr,useCallback:DC,useContext:Zr,useEffect:pw,useImperativeHandle:RC,useInsertionEffect:IC,useLayoutEffect:AC,useMemo:MC,useReducer:Zg,useRef:kC,useState:function(){return Zg(fd)},useDebugValue:gw,useDeferredValue:function(t){var e=Jr();return xn===null?e.memoizedState=t:OC(e,xn.memoizedState,t)},useTransition:function(){var t=Zg(fd)[0],e=Jr().memoizedState;return[t,e]},useMutableSource:bC,useSyncExternalStore:EC,useId:LC,unstable_isNewReconciler:!1};function cs(t,e){if(t&&t.defaultProps){e=Zt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function mv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Zt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var op={isMounted:function(t){return(t=t._reactInternals)?el(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=sr(),s=ka(t),i=bi(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ca(t,i,s),e!==null&&(xs(e,t,s,r),hf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=sr(),s=ka(t),i=bi(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ca(t,i,s),e!==null&&(xs(e,t,s,r),hf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=sr(),r=ka(t),s=bi(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ca(t,s,r),e!==null&&(xs(e,t,r,n),hf(e,t,r))}};function v1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ad(n,r)||!ad(s,i):!0}function $C(t,e,n){var r=!1,s=$a,i=e.contextType;return typeof i=="object"&&i!==null?i=Zr(i):(s=vr(e)?Lo:Qn.current,r=e.contextTypes,i=(r=r!=null)?lc(t,s):$a),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=op,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function x1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&op.enqueueReplaceState(e,e.state,null)}function pv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},lw(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Zr(i):(i=vr(e)?Lo:Qn.current,s.context=lc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(mv(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&op.enqueueReplaceState(s,s.state,null),Xf(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function hc(t,e){try{var n="",r=e;do n+=BM(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Jg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var p4=typeof WeakMap=="function"?WeakMap:Map;function BC(t,e,n){n=bi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){nm||(nm=!0,Nv=r),gv(t,e)},n}function zC(t,e,n){n=bi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){gv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gv(t,e),typeof r!="function"&&(ja===null?ja=new Set([this]):ja.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function w1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new p4;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=k4.bind(null,t,e,n),e.then(t,t))}function _1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function b1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bi(-1,1),e.tag=2,Ca(n,e,1))),n.lanes|=1),t)}var g4=Ui.ReactCurrentOwner,gr=!1;function tr(t,e,n,r){e.child=t===null?vC(e,null,n,r):uc(e,t.child,n,r)}function E1(t,e,n,r,s){n=n.render;var i=e.ref;return Bl(e,s),r=fw(t,e,n,r,i,s),n=mw(),t!==null&&!gr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ki(t,e,s)):(qt&&n&&tw(e),e.flags|=1,tr(t,e,r,s),e.child)}function T1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Tw(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,WC(t,e,i,r,s)):(t=vf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ad,n(o,r)&&t.ref===e.ref)return ki(t,e,s)}return e.flags|=1,t=Ia(i,r),t.ref=e.ref,t.return=e,e.child=t}function WC(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ad(i,r)&&t.ref===e.ref)if(gr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(gr=!0);else return e.lanes=t.lanes,ki(t,e,s)}return yv(t,e,n,r,s)}function HC(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(Ll,Sr),Sr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Lt(Ll,Sr),Sr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Lt(Ll,Sr),Sr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Lt(Ll,Sr),Sr|=r;return tr(t,e,s,n),e.child}function qC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yv(t,e,n,r,s){var i=vr(n)?Lo:Qn.current;return i=lc(e,i),Bl(e,s),n=fw(t,e,n,r,i,s),r=mw(),t!==null&&!gr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ki(t,e,s)):(qt&&r&&tw(e),e.flags|=1,tr(t,e,n,s),e.child)}function S1(t,e,n,r,s){if(vr(n)){var i=!0;qf(e)}else i=!1;if(Bl(e,s),e.stateNode===null)pf(t,e),$C(e,n,r),pv(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Zr(u):(u=vr(n)?Lo:Qn.current,u=lc(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&x1(e,o,r,u),aa=!1;var p=e.memoizedState;o.state=p,Xf(e,r,o,s),c=e.memoizedState,l!==r||p!==c||yr.current||aa?(typeof h=="function"&&(mv(e,n,h,r),c=e.memoizedState),(l=aa||v1(e,n,l,r,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,wC(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:cs(e.type,l),o.props=u,f=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Zr(c):(c=vr(n)?Lo:Qn.current,c=lc(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==c)&&x1(e,o,r,c),aa=!1,p=e.memoizedState,o.state=p,Xf(e,r,o,s);var T=e.memoizedState;l!==f||p!==T||yr.current||aa?(typeof g=="function"&&(mv(e,n,g,r),T=e.memoizedState),(u=aa||v1(e,n,u,r,p,T,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return vv(t,e,n,r,i,s)}function vv(t,e,n,r,s,i){qC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&u1(e,n,!1),ki(t,e,i);r=e.stateNode,g4.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=uc(e,t.child,null,i),e.child=uc(e,null,l,i)):tr(t,e,l,i),e.memoizedState=r.state,s&&u1(e,n,!0),e.child}function GC(t){var e=t.stateNode;e.pendingContext?c1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&c1(t,e.context,!1),cw(t,e.containerInfo)}function N1(t,e,n,r,s){return cc(),rw(s),e.flags|=256,tr(t,e,n,r),e.child}var xv={dehydrated:null,treeContext:null,retryLane:0};function wv(t){return{baseLanes:t,cachePool:null,transitions:null}}function KC(t,e,n){var r=e.pendingProps,s=Kt.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Lt(Kt,s&1),t===null)return hv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=up(o,r,0,null),t=Do(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=wv(n),e.memoizedState=xv,t):yw(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return y4(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ia(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ia(l,i):(i=Do(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?wv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=xv,r}return i=t.child,t=i.sibling,r=Ia(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function yw(t,e){return e=up({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $h(t,e,n,r){return r!==null&&rw(r),uc(e,t.child,null,n),t=yw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function y4(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Jg(Error(ae(422))),$h(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=up({mode:"visible",children:r.children},s,0,null),i=Do(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&uc(e,t.child,null,o),e.child.memoizedState=wv(o),e.memoizedState=xv,i);if(!(e.mode&1))return $h(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ae(419)),r=Jg(i,r,void 0),$h(t,e,o,r)}if(l=(o&t.childLanes)!==0,gr||l){if(r=Tn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ji(t,s),xs(r,t,s,-1))}return Ew(),r=Jg(Error(ae(421))),$h(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=I4.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Pr=Na(s.nextSibling),Dr=e,qt=!0,ms=null,t!==null&&(Br[zr++]=vi,Br[zr++]=xi,Br[zr++]=Vo,vi=t.id,xi=t.overflow,Vo=e),e=yw(e,r.children),e.flags|=4096,e)}function C1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fv(t.return,e,n)}function ey(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function QC(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(tr(t,e,r.children,n),r=Kt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&C1(t,n,e);else if(t.tag===19)C1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Lt(Kt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Zf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ey(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Zf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ey(e,!0,n,null,i);break;case"together":ey(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ki(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Uo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=Ia(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ia(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function v4(t,e,n){switch(e.tag){case 3:GC(e),cc();break;case 5:_C(e);break;case 1:vr(e.type)&&qf(e);break;case 4:cw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Lt(Qf,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Lt(Kt,Kt.current&1),e.flags|=128,null):n&e.child.childLanes?KC(t,e,n):(Lt(Kt,Kt.current&1),t=ki(t,e,n),t!==null?t.sibling:null);Lt(Kt,Kt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return QC(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Lt(Kt,Kt.current),r)break;return null;case 22:case 23:return e.lanes=0,HC(t,e,n)}return ki(t,e,n)}var YC,_v,XC,ZC;YC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_v=function(){};XC=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Eo($s.current);var i=null;switch(n){case"input":s=zy(t,s),r=zy(t,r),i=[];break;case"select":s=Zt({},s,{value:void 0}),r=Zt({},r,{value:void 0}),i=[];break;case"textarea":s=qy(t,s),r=qy(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Wf)}Ky(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ju.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ju.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&$t("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};ZC=function(t,e,n,r){n!==r&&(e.flags|=4)};function fu(t,e){if(!qt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function zn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function x4(t,e,n){var r=e.pendingProps;switch(nw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(e),null;case 1:return vr(e.type)&&Hf(),zn(e),null;case 3:return r=e.stateNode,dc(),zt(yr),zt(Qn),dw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ms!==null&&(kv(ms),ms=null))),_v(t,e),zn(e),null;case 5:uw(e);var s=Eo(dd.current);if(n=e.type,t!==null&&e.stateNode!=null)XC(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return zn(e),null}if(t=Eo($s.current),Fh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Os]=e,r[cd]=i,t=(e.mode&1)!==0,n){case"dialog":$t("cancel",r),$t("close",r);break;case"iframe":case"object":case"embed":$t("load",r);break;case"video":case"audio":for(s=0;s<Su.length;s++)$t(Su[s],r);break;case"source":$t("error",r);break;case"img":case"image":case"link":$t("error",r),$t("load",r);break;case"details":$t("toggle",r);break;case"input":Ob(r,i),$t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},$t("invalid",r);break;case"textarea":Vb(r,i),$t("invalid",r)}Ky(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Vh(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Vh(r.textContent,l,t),s=["children",""+l]):Ju.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&$t("scroll",r)}switch(n){case"input":Ih(r),Lb(r,i,!0);break;case"textarea":Ih(r),Fb(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Wf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=NN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Os]=e,t[cd]=r,YC(t,e,!1,!1),e.stateNode=t;e:{switch(o=Qy(n,r),n){case"dialog":$t("cancel",t),$t("close",t),s=r;break;case"iframe":case"object":case"embed":$t("load",t),s=r;break;case"video":case"audio":for(s=0;s<Su.length;s++)$t(Su[s],t);s=r;break;case"source":$t("error",t),s=r;break;case"img":case"image":case"link":$t("error",t),$t("load",t),s=r;break;case"details":$t("toggle",t),s=r;break;case"input":Ob(t,r),s=zy(t,r),$t("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Zt({},r,{value:void 0}),$t("invalid",t);break;case"textarea":Vb(t,r),s=qy(t,r),$t("invalid",t);break;default:s=r}Ky(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?kN(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&CN(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ed(t,c):typeof c=="number"&&ed(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ju.hasOwnProperty(i)?c!=null&&i==="onScroll"&&$t("scroll",t):c!=null&&$x(t,i,c,o))}switch(n){case"input":Ih(t),Lb(t,r,!1);break;case"textarea":Ih(t),Fb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ua(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Vl(t,!!r.multiple,i,!1):r.defaultValue!=null&&Vl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Wf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zn(e),null;case 6:if(t&&e.stateNode!=null)ZC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=Eo(dd.current),Eo($s.current),Fh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Os]=e,(i=r.nodeValue!==n)&&(t=Dr,t!==null))switch(t.tag){case 3:Vh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Os]=e,e.stateNode=r}return zn(e),null;case 13:if(zt(Kt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qt&&Pr!==null&&e.mode&1&&!(e.flags&128))gC(),cc(),e.flags|=98560,i=!1;else if(i=Fh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ae(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ae(317));i[Os]=e}else cc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zn(e),i=!1}else ms!==null&&(kv(ms),ms=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Kt.current&1?wn===0&&(wn=3):Ew())),e.updateQueue!==null&&(e.flags|=4),zn(e),null);case 4:return dc(),_v(t,e),t===null&&od(e.stateNode.containerInfo),zn(e),null;case 10:return aw(e.type._context),zn(e),null;case 17:return vr(e.type)&&Hf(),zn(e),null;case 19:if(zt(Kt),i=e.memoizedState,i===null)return zn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)fu(i,!1);else{if(wn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Zf(t),o!==null){for(e.flags|=128,fu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Lt(Kt,Kt.current&1|2),e.child}t=t.sibling}i.tail!==null&&cn()>fc&&(e.flags|=128,r=!0,fu(i,!1),e.lanes=4194304)}else{if(!r)if(t=Zf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),fu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!qt)return zn(e),null}else 2*cn()-i.renderingStartTime>fc&&n!==1073741824&&(e.flags|=128,r=!0,fu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=cn(),e.sibling=null,n=Kt.current,Lt(Kt,r?n&1|2:n&1),e):(zn(e),null);case 22:case 23:return bw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Sr&1073741824&&(zn(e),e.subtreeFlags&6&&(e.flags|=8192)):zn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function w4(t,e){switch(nw(e),e.tag){case 1:return vr(e.type)&&Hf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return dc(),zt(yr),zt(Qn),dw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return uw(e),null;case 13:if(zt(Kt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));cc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return zt(Kt),null;case 4:return dc(),null;case 10:return aw(e.type._context),null;case 22:case 23:return bw(),null;case 24:return null;default:return null}}var Bh=!1,Gn=!1,_4=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Ol(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){rn(t,e,r)}else n.current=null}function bv(t,e,n){try{n()}catch(r){rn(t,e,r)}}var j1=!1;function b4(t,e){if(iv=$f,t=rC(),ew(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++u===s&&(l=o),p===i&&++h===r&&(c=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(av={focusedElem:t,selectionRange:n},$f=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var v=T.memoizedProps,b=T.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:cs(e.type,v),b);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(E){rn(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return T=j1,j1=!1,T}function Uu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&bv(e,n,i)}s=s.next}while(s!==r)}}function lp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ev(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function JC(t){var e=t.alternate;e!==null&&(t.alternate=null,JC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Os],delete e[cd],delete e[cv],delete e[s4],delete e[i4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ej(t){return t.tag===5||t.tag===3||t.tag===4}function k1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ej(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wf));else if(r!==4&&(t=t.child,t!==null))for(Tv(t,e,n),t=t.sibling;t!==null;)Tv(t,e,n),t=t.sibling}function Sv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sv(t,e,n),t=t.sibling;t!==null;)Sv(t,e,n),t=t.sibling}var kn=null,fs=!1;function Zi(t,e,n){for(n=n.child;n!==null;)tj(t,e,n),n=n.sibling}function tj(t,e,n){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(ep,n)}catch{}switch(n.tag){case 5:Gn||Ol(n,e);case 6:var r=kn,s=fs;kn=null,Zi(t,e,n),kn=r,fs=s,kn!==null&&(fs?(t=kn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):kn.removeChild(n.stateNode));break;case 18:kn!==null&&(fs?(t=kn,n=n.stateNode,t.nodeType===8?Gg(t.parentNode,n):t.nodeType===1&&Gg(t,n),sd(t)):Gg(kn,n.stateNode));break;case 4:r=kn,s=fs,kn=n.stateNode.containerInfo,fs=!0,Zi(t,e,n),kn=r,fs=s;break;case 0:case 11:case 14:case 15:if(!Gn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&bv(n,e,o),s=s.next}while(s!==r)}Zi(t,e,n);break;case 1:if(!Gn&&(Ol(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){rn(n,e,l)}Zi(t,e,n);break;case 21:Zi(t,e,n);break;case 22:n.mode&1?(Gn=(r=Gn)||n.memoizedState!==null,Zi(t,e,n),Gn=r):Zi(t,e,n);break;default:Zi(t,e,n)}}function I1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _4),e.forEach(function(r){var s=A4.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function as(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:kn=l.stateNode,fs=!1;break e;case 3:kn=l.stateNode.containerInfo,fs=!0;break e;case 4:kn=l.stateNode.containerInfo,fs=!0;break e}l=l.return}if(kn===null)throw Error(ae(160));tj(i,o,s),kn=null,fs=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){rn(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nj(e,t),e=e.sibling}function nj(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(as(e,t),ks(t),r&4){try{Uu(3,t,t.return),lp(3,t)}catch(v){rn(t,t.return,v)}try{Uu(5,t,t.return)}catch(v){rn(t,t.return,v)}}break;case 1:as(e,t),ks(t),r&512&&n!==null&&Ol(n,n.return);break;case 5:if(as(e,t),ks(t),r&512&&n!==null&&Ol(n,n.return),t.flags&32){var s=t.stateNode;try{ed(s,"")}catch(v){rn(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&TN(s,i),Qy(l,o);var u=Qy(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?kN(s,f):h==="dangerouslySetInnerHTML"?CN(s,f):h==="children"?ed(s,f):$x(s,h,f,u)}switch(l){case"input":Wy(s,i);break;case"textarea":SN(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Vl(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?Vl(s,!!i.multiple,i.defaultValue,!0):Vl(s,!!i.multiple,i.multiple?[]:"",!1))}s[cd]=i}catch(v){rn(t,t.return,v)}}break;case 6:if(as(e,t),ks(t),r&4){if(t.stateNode===null)throw Error(ae(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){rn(t,t.return,v)}}break;case 3:if(as(e,t),ks(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sd(e.containerInfo)}catch(v){rn(t,t.return,v)}break;case 4:as(e,t),ks(t);break;case 13:as(e,t),ks(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ww=cn())),r&4&&I1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Gn=(u=Gn)||h,as(e,t),Gn=u):as(e,t),ks(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ve=t,h=t.child;h!==null;){for(f=ve=h;ve!==null;){switch(p=ve,g=p.child,p.tag){case 0:case 11:case 14:case 15:Uu(4,p,p.return);break;case 1:Ol(p,p.return);var T=p.stateNode;if(typeof T.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(v){rn(r,n,v)}}break;case 5:Ol(p,p.return);break;case 22:if(p.memoizedState!==null){P1(f);continue}}g!==null?(g.return=p,ve=g):P1(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=jN("display",o))}catch(v){rn(t,t.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){rn(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:as(e,t),ks(t),r&4&&I1(t);break;case 21:break;default:as(e,t),ks(t)}}function ks(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ej(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ed(s,""),r.flags&=-33);var i=k1(t);Sv(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=k1(t);Tv(t,l,o);break;default:throw Error(ae(161))}}catch(c){rn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function E4(t,e,n){ve=t,rj(t)}function rj(t,e,n){for(var r=(t.mode&1)!==0;ve!==null;){var s=ve,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Bh;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Gn;l=Bh;var u=Gn;if(Bh=o,(Gn=c)&&!u)for(ve=s;ve!==null;)o=ve,c=o.child,o.tag===22&&o.memoizedState!==null?R1(s):c!==null?(c.return=o,ve=c):R1(s);for(;i!==null;)ve=i,rj(i),i=i.sibling;ve=s,Bh=l,Gn=u}A1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ve=i):A1(t)}}function A1(t){for(;ve!==null;){var e=ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Gn||lp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Gn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:cs(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&p1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}p1(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&sd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}Gn||e.flags&512&&Ev(e)}catch(p){rn(e,e.return,p)}}if(e===t){ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,ve=n;break}ve=e.return}}function P1(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ve=n;break}ve=e.return}}function R1(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lp(4,e)}catch(c){rn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){rn(e,s,c)}}var i=e.return;try{Ev(e)}catch(c){rn(e,i,c)}break;case 5:var o=e.return;try{Ev(e)}catch(c){rn(e,o,c)}}}catch(c){rn(e,e.return,c)}if(e===t){ve=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ve=l;break}ve=e.return}}var T4=Math.ceil,tm=Ui.ReactCurrentDispatcher,vw=Ui.ReactCurrentOwner,Kr=Ui.ReactCurrentBatchConfig,ut=0,Tn=null,pn=null,Pn=0,Sr=0,Ll=no(0),wn=0,pd=null,Uo=0,cp=0,xw=0,$u=null,mr=null,ww=0,fc=1/0,hi=null,nm=!1,Nv=null,ja=null,zh=!1,xa=null,rm=0,Bu=0,Cv=null,gf=-1,yf=0;function sr(){return ut&6?cn():gf!==-1?gf:gf=cn()}function ka(t){return t.mode&1?ut&2&&Pn!==0?Pn&-Pn:o4.transition!==null?(yf===0&&(yf=$N()),yf):(t=jt,t!==0||(t=window.event,t=t===void 0?16:KN(t.type)),t):1}function xs(t,e,n,r){if(50<Bu)throw Bu=0,Cv=null,Error(ae(185));$d(t,n,r),(!(ut&2)||t!==Tn)&&(t===Tn&&(!(ut&2)&&(cp|=n),wn===4&&ca(t,Pn)),xr(t,r),n===1&&ut===0&&!(e.mode&1)&&(fc=cn()+500,ip&&ro()))}function xr(t,e){var n=t.callbackNode;oO(t,e);var r=Uf(t,t===Tn?Pn:0);if(r===0)n!==null&&Bb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Bb(n),e===1)t.tag===0?a4(D1.bind(null,t)):fC(D1.bind(null,t)),n4(function(){!(ut&6)&&ro()}),n=null;else{switch(BN(r)){case 1:n=qx;break;case 4:n=FN;break;case 16:n=Ff;break;case 536870912:n=UN;break;default:n=Ff}n=dj(n,sj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sj(t,e){if(gf=-1,yf=0,ut&6)throw Error(ae(327));var n=t.callbackNode;if(zl()&&t.callbackNode!==n)return null;var r=Uf(t,t===Tn?Pn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=sm(t,r);else{e=r;var s=ut;ut|=2;var i=aj();(Tn!==t||Pn!==e)&&(hi=null,fc=cn()+500,Ro(t,e));do try{C4();break}catch(l){ij(t,l)}while(!0);iw(),tm.current=i,ut=s,pn!==null?e=0:(Tn=null,Pn=0,e=wn)}if(e!==0){if(e===2&&(s=ev(t),s!==0&&(r=s,e=jv(t,s))),e===1)throw n=pd,Ro(t,0),ca(t,r),xr(t,cn()),n;if(e===6)ca(t,r);else{if(s=t.current.alternate,!(r&30)&&!S4(s)&&(e=sm(t,r),e===2&&(i=ev(t),i!==0&&(r=i,e=jv(t,i))),e===1))throw n=pd,Ro(t,0),ca(t,r),xr(t,cn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:yo(t,mr,hi);break;case 3:if(ca(t,r),(r&130023424)===r&&(e=ww+500-cn(),10<e)){if(Uf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){sr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=lv(yo.bind(null,t,mr,hi),e);break}yo(t,mr,hi);break;case 4:if(ca(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vs(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=cn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*T4(r/1960))-r,10<r){t.timeoutHandle=lv(yo.bind(null,t,mr,hi),r);break}yo(t,mr,hi);break;case 5:yo(t,mr,hi);break;default:throw Error(ae(329))}}}return xr(t,cn()),t.callbackNode===n?sj.bind(null,t):null}function jv(t,e){var n=$u;return t.current.memoizedState.isDehydrated&&(Ro(t,e).flags|=256),t=sm(t,e),t!==2&&(e=mr,mr=n,e!==null&&kv(e)),t}function kv(t){mr===null?mr=t:mr.push.apply(mr,t)}function S4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!bs(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ca(t,e){for(e&=~xw,e&=~cp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vs(e),r=1<<n;t[n]=-1,e&=~r}}function D1(t){if(ut&6)throw Error(ae(327));zl();var e=Uf(t,0);if(!(e&1))return xr(t,cn()),null;var n=sm(t,e);if(t.tag!==0&&n===2){var r=ev(t);r!==0&&(e=r,n=jv(t,r))}if(n===1)throw n=pd,Ro(t,0),ca(t,e),xr(t,cn()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yo(t,mr,hi),xr(t,cn()),null}function _w(t,e){var n=ut;ut|=1;try{return t(e)}finally{ut=n,ut===0&&(fc=cn()+500,ip&&ro())}}function $o(t){xa!==null&&xa.tag===0&&!(ut&6)&&zl();var e=ut;ut|=1;var n=Kr.transition,r=jt;try{if(Kr.transition=null,jt=1,t)return t()}finally{jt=r,Kr.transition=n,ut=e,!(ut&6)&&ro()}}function bw(){Sr=Ll.current,zt(Ll)}function Ro(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,t4(n)),pn!==null)for(n=pn.return;n!==null;){var r=n;switch(nw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hf();break;case 3:dc(),zt(yr),zt(Qn),dw();break;case 5:uw(r);break;case 4:dc();break;case 13:zt(Kt);break;case 19:zt(Kt);break;case 10:aw(r.type._context);break;case 22:case 23:bw()}n=n.return}if(Tn=t,pn=t=Ia(t.current,null),Pn=Sr=e,wn=0,pd=null,xw=cp=Uo=0,mr=$u=null,bo!==null){for(e=0;e<bo.length;e++)if(n=bo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}bo=null}return t}function ij(t,e){do{var n=pn;try{if(iw(),ff.current=em,Jf){for(var r=Yt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Jf=!1}if(Fo=0,En=xn=Yt=null,Fu=!1,hd=0,vw.current=null,n===null||n.return===null){wn=1,pd=e,pn=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Pn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=_1(o);if(g!==null){g.flags&=-257,b1(g,o,l,i,e),g.mode&1&&w1(i,u,e),e=g,c=u;var T=e.updateQueue;if(T===null){var v=new Set;v.add(c),e.updateQueue=v}else T.add(c);break e}else{if(!(e&1)){w1(i,u,e),Ew();break e}c=Error(ae(426))}}else if(qt&&l.mode&1){var b=_1(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),b1(b,o,l,i,e),rw(hc(c,l));break e}}i=c=hc(c,l),wn!==4&&(wn=2),$u===null?$u=[i]:$u.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=BC(i,c,e);m1(i,_);break e;case 1:l=c;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ja===null||!ja.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=zC(i,l,e);m1(i,E);break e}}i=i.return}while(i!==null)}lj(n)}catch(P){e=P,pn===n&&n!==null&&(pn=n=n.return);continue}break}while(!0)}function aj(){var t=tm.current;return tm.current=em,t===null?em:t}function Ew(){(wn===0||wn===3||wn===2)&&(wn=4),Tn===null||!(Uo&268435455)&&!(cp&268435455)||ca(Tn,Pn)}function sm(t,e){var n=ut;ut|=2;var r=aj();(Tn!==t||Pn!==e)&&(hi=null,Ro(t,e));do try{N4();break}catch(s){ij(t,s)}while(!0);if(iw(),ut=n,tm.current=r,pn!==null)throw Error(ae(261));return Tn=null,Pn=0,wn}function N4(){for(;pn!==null;)oj(pn)}function C4(){for(;pn!==null&&!ZM();)oj(pn)}function oj(t){var e=uj(t.alternate,t,Sr);t.memoizedProps=t.pendingProps,e===null?lj(t):pn=e,vw.current=null}function lj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=w4(n,e),n!==null){n.flags&=32767,pn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wn=6,pn=null;return}}else if(n=x4(n,e,Sr),n!==null){pn=n;return}if(e=e.sibling,e!==null){pn=e;return}pn=e=t}while(e!==null);wn===0&&(wn=5)}function yo(t,e,n){var r=jt,s=Kr.transition;try{Kr.transition=null,jt=1,j4(t,e,n,r)}finally{Kr.transition=s,jt=r}return null}function j4(t,e,n,r){do zl();while(xa!==null);if(ut&6)throw Error(ae(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(lO(t,i),t===Tn&&(pn=Tn=null,Pn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zh||(zh=!0,dj(Ff,function(){return zl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Kr.transition,Kr.transition=null;var o=jt;jt=1;var l=ut;ut|=4,vw.current=null,b4(t,n),nj(n,t),KO(av),$f=!!iv,av=iv=null,t.current=n,E4(n),JM(),ut=l,jt=o,Kr.transition=i}else t.current=n;if(zh&&(zh=!1,xa=t,rm=s),i=t.pendingLanes,i===0&&(ja=null),nO(n.stateNode),xr(t,cn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(nm)throw nm=!1,t=Nv,Nv=null,t;return rm&1&&t.tag!==0&&zl(),i=t.pendingLanes,i&1?t===Cv?Bu++:(Bu=0,Cv=t):Bu=0,ro(),null}function zl(){if(xa!==null){var t=BN(rm),e=Kr.transition,n=jt;try{if(Kr.transition=null,jt=16>t?16:t,xa===null)var r=!1;else{if(t=xa,xa=null,rm=0,ut&6)throw Error(ae(331));var s=ut;for(ut|=4,ve=t.current;ve!==null;){var i=ve,o=i.child;if(ve.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ve=u;ve!==null;){var h=ve;switch(h.tag){case 0:case 11:case 15:Uu(8,h,i)}var f=h.child;if(f!==null)f.return=h,ve=f;else for(;ve!==null;){h=ve;var p=h.sibling,g=h.return;if(JC(h),h===u){ve=null;break}if(p!==null){p.return=g,ve=p;break}ve=g}}}var T=i.alternate;if(T!==null){var v=T.child;if(v!==null){T.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}ve=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ve=o;else e:for(;ve!==null;){if(i=ve,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Uu(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,ve=_;break e}ve=i.return}}var y=t.current;for(ve=y;ve!==null;){o=ve;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ve=w;else e:for(o=y;ve!==null;){if(l=ve,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:lp(9,l)}}catch(P){rn(l,l.return,P)}if(l===o){ve=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,ve=E;break e}ve=l.return}}if(ut=s,ro(),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(ep,t)}catch{}r=!0}return r}finally{jt=n,Kr.transition=e}}return!1}function M1(t,e,n){e=hc(n,e),e=BC(t,e,1),t=Ca(t,e,1),e=sr(),t!==null&&($d(t,1,e),xr(t,e))}function rn(t,e,n){if(t.tag===3)M1(t,t,n);else for(;e!==null;){if(e.tag===3){M1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ja===null||!ja.has(r))){t=hc(n,t),t=zC(e,t,1),e=Ca(e,t,1),t=sr(),e!==null&&($d(e,1,t),xr(e,t));break}}e=e.return}}function k4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=sr(),t.pingedLanes|=t.suspendedLanes&n,Tn===t&&(Pn&n)===n&&(wn===4||wn===3&&(Pn&130023424)===Pn&&500>cn()-ww?Ro(t,0):xw|=n),xr(t,e)}function cj(t,e){e===0&&(t.mode&1?(e=Rh,Rh<<=1,!(Rh&130023424)&&(Rh=4194304)):e=1);var n=sr();t=ji(t,e),t!==null&&($d(t,e,n),xr(t,n))}function I4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cj(t,n)}function A4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),cj(t,n)}var uj;uj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yr.current)gr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gr=!1,v4(t,e,n);gr=!!(t.flags&131072)}else gr=!1,qt&&e.flags&1048576&&mC(e,Kf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pf(t,e),t=e.pendingProps;var s=lc(e,Qn.current);Bl(e,n),s=fw(null,e,r,t,s,n);var i=mw();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vr(r)?(i=!0,qf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lw(e),s.updater=op,e.stateNode=s,s._reactInternals=e,pv(e,r,t,n),e=vv(null,e,r,!0,i,n)):(e.tag=0,qt&&i&&tw(e),tr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=R4(r),t=cs(r,t),s){case 0:e=yv(null,e,r,t,n);break e;case 1:e=S1(null,e,r,t,n);break e;case 11:e=E1(null,e,r,t,n);break e;case 14:e=T1(null,e,r,cs(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cs(r,s),yv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cs(r,s),S1(t,e,r,s,n);case 3:e:{if(GC(e),t===null)throw Error(ae(387));r=e.pendingProps,i=e.memoizedState,s=i.element,wC(t,e),Xf(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=hc(Error(ae(423)),e),e=N1(t,e,r,n,s);break e}else if(r!==s){s=hc(Error(ae(424)),e),e=N1(t,e,r,n,s);break e}else for(Pr=Na(e.stateNode.containerInfo.firstChild),Dr=e,qt=!0,ms=null,n=vC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cc(),r===s){e=ki(t,e,n);break e}tr(t,e,r,n)}e=e.child}return e;case 5:return _C(e),t===null&&hv(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ov(r,s)?o=null:i!==null&&ov(r,i)&&(e.flags|=32),qC(t,e),tr(t,e,o,n),e.child;case 6:return t===null&&hv(e),null;case 13:return KC(t,e,n);case 4:return cw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=uc(e,null,r,n):tr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cs(r,s),E1(t,e,r,s,n);case 7:return tr(t,e,e.pendingProps,n),e.child;case 8:return tr(t,e,e.pendingProps.children,n),e.child;case 12:return tr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Lt(Qf,r._currentValue),r._currentValue=o,i!==null)if(bs(i.value,o)){if(i.children===s.children&&!yr.current){e=ki(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=bi(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),fv(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ae(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),fv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}tr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Bl(e,n),s=Zr(s),r=r(s),e.flags|=1,tr(t,e,r,n),e.child;case 14:return r=e.type,s=cs(r,e.pendingProps),s=cs(r.type,s),T1(t,e,r,s,n);case 15:return WC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cs(r,s),pf(t,e),e.tag=1,vr(r)?(t=!0,qf(e)):t=!1,Bl(e,n),$C(e,r,s),pv(e,r,s,n),vv(null,e,r,!0,t,n);case 19:return QC(t,e,n);case 22:return HC(t,e,n)}throw Error(ae(156,e.tag))};function dj(t,e){return VN(t,e)}function P4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(t,e,n,r){return new P4(t,e,n,r)}function Tw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function R4(t){if(typeof t=="function")return Tw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zx)return 11;if(t===Wx)return 14}return 2}function Ia(t,e){var n=t.alternate;return n===null?(n=Gr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vf(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Tw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Cl:return Do(n.children,s,i,e);case Bx:o=8,s|=8;break;case Fy:return t=Gr(12,n,e,s|2),t.elementType=Fy,t.lanes=i,t;case Uy:return t=Gr(13,n,e,s),t.elementType=Uy,t.lanes=i,t;case $y:return t=Gr(19,n,e,s),t.elementType=$y,t.lanes=i,t;case _N:return up(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xN:o=10;break e;case wN:o=9;break e;case zx:o=11;break e;case Wx:o=14;break e;case ia:o=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=Gr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Do(t,e,n,r){return t=Gr(7,t,r,e),t.lanes=n,t}function up(t,e,n,r){return t=Gr(22,t,r,e),t.elementType=_N,t.lanes=n,t.stateNode={isHidden:!1},t}function ty(t,e,n){return t=Gr(6,t,null,e),t.lanes=n,t}function ny(t,e,n){return e=Gr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function D4(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Og(0),this.expirationTimes=Og(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Og(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Sw(t,e,n,r,s,i,o,l,c){return t=new D4(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Gr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lw(i),t}function M4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hj(t){if(!t)return $a;t=t._reactInternals;e:{if(el(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(vr(n))return hC(t,n,e)}return e}function fj(t,e,n,r,s,i,o,l,c){return t=Sw(n,r,!0,t,s,i,o,l,c),t.context=hj(null),n=t.current,r=sr(),s=ka(n),i=bi(r,s),i.callback=e??null,Ca(n,i,s),t.current.lanes=s,$d(t,s,r),xr(t,r),t}function dp(t,e,n,r){var s=e.current,i=sr(),o=ka(s);return n=hj(n),e.context===null?e.context=n:e.pendingContext=n,e=bi(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ca(s,e,o),t!==null&&(xs(t,s,o,i),hf(t,s,o)),o}function im(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function O1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Nw(t,e){O1(t,e),(t=t.alternate)&&O1(t,e)}function O4(){return null}var mj=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cw(t){this._internalRoot=t}hp.prototype.render=Cw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));dp(t,e,null,null)};hp.prototype.unmount=Cw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$o(function(){dp(null,t,null,null)}),e[Ci]=null}};function hp(t){this._internalRoot=t}hp.prototype.unstable_scheduleHydration=function(t){if(t){var e=HN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<la.length&&e!==0&&e<la[n].priority;n++);la.splice(n,0,t),n===0&&GN(t)}};function jw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function L1(){}function L4(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=im(o);i.call(u)}}var o=fj(e,r,t,0,null,!1,!1,"",L1);return t._reactRootContainer=o,t[Ci]=o.current,od(t.nodeType===8?t.parentNode:t),$o(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=im(c);l.call(u)}}var c=Sw(t,0,!1,null,null,!1,!1,"",L1);return t._reactRootContainer=c,t[Ci]=c.current,od(t.nodeType===8?t.parentNode:t),$o(function(){dp(e,c,n,r)}),c}function mp(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=im(o);l.call(c)}}dp(e,o,t,s)}else o=L4(n,e,t,s,r);return im(o)}zN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Tu(e.pendingLanes);n!==0&&(Gx(e,n|1),xr(e,cn()),!(ut&6)&&(fc=cn()+500,ro()))}break;case 13:$o(function(){var r=ji(t,1);if(r!==null){var s=sr();xs(r,t,1,s)}}),Nw(t,1)}};Kx=function(t){if(t.tag===13){var e=ji(t,134217728);if(e!==null){var n=sr();xs(e,t,134217728,n)}Nw(t,134217728)}};WN=function(t){if(t.tag===13){var e=ka(t),n=ji(t,e);if(n!==null){var r=sr();xs(n,t,e,r)}Nw(t,e)}};HN=function(){return jt};qN=function(t,e){var n=jt;try{return jt=t,e()}finally{jt=n}};Xy=function(t,e,n){switch(e){case"input":if(Wy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=sp(r);if(!s)throw Error(ae(90));EN(r),Wy(r,s)}}}break;case"textarea":SN(t,n);break;case"select":e=n.value,e!=null&&Vl(t,!!n.multiple,e,!1)}};PN=_w;RN=$o;var V4={usingClientEntryPoint:!1,Events:[zd,Al,sp,IN,AN,_w]},mu={findFiberByHostInstance:_o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},F4={bundleType:mu.bundleType,version:mu.version,rendererPackageName:mu.rendererPackageName,rendererConfig:mu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ui.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ON(t),t===null?null:t.stateNode},findFiberByHostInstance:mu.findFiberByHostInstance||O4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wh.isDisabled&&Wh.supportsFiber)try{ep=Wh.inject(F4),Us=Wh}catch{}}Vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V4;Vr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jw(e))throw Error(ae(200));return M4(t,e,null,n)};Vr.createRoot=function(t,e){if(!jw(t))throw Error(ae(299));var n=!1,r="",s=mj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Sw(t,1,!1,null,null,n,!1,r,s),t[Ci]=e.current,od(t.nodeType===8?t.parentNode:t),new Cw(e)};Vr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=ON(e),t=t===null?null:t.stateNode,t};Vr.flushSync=function(t){return $o(t)};Vr.hydrate=function(t,e,n){if(!fp(e))throw Error(ae(200));return mp(null,t,e,!0,n)};Vr.hydrateRoot=function(t,e,n){if(!jw(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=mj;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fj(e,null,t,1,n??null,s,!1,i,o),t[Ci]=e.current,od(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new hp(e)};Vr.render=function(t,e,n){if(!fp(e))throw Error(ae(200));return mp(null,t,e,!1,n)};Vr.unmountComponentAtNode=function(t){if(!fp(t))throw Error(ae(40));return t._reactRootContainer?($o(function(){mp(null,null,t,!1,function(){t._reactRootContainer=null,t[Ci]=null})}),!0):!1};Vr.unstable_batchedUpdates=_w;Vr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fp(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return mp(t,e,n,!1,r)};Vr.version="18.3.1-next-f1338f8080-20240426";function pj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pj)}catch(t){console.error(t)}}pj(),pN.exports=Vr;var tl=pN.exports;const gj=rN(tl);var yj,V1=tl;yj=V1.createRoot,V1.hydrateRoot;const U4=1,$4=1e6;let ry=0;function B4(){return ry=(ry+1)%Number.MAX_SAFE_INTEGER,ry.toString()}const sy=new Map,F1=t=>{if(sy.has(t))return;const e=setTimeout(()=>{sy.delete(t),zu({type:"REMOVE_TOAST",toastId:t})},$4);sy.set(t,e)},z4=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,U4)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?F1(n):t.toasts.forEach(r=>{F1(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},xf=[];let wf={toasts:[]};function zu(t){wf=z4(wf,t),xf.forEach(e=>{e(wf)})}function W4({...t}){const e=B4(),n=s=>zu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>zu({type:"DISMISS_TOAST",toastId:e});return zu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Zn(){const[t,e]=m.useState(wf);return m.useEffect(()=>(xf.push(e),()=>{const n=xf.indexOf(e);n>-1&&xf.splice(n,1)}),[t]),{...t,toast:W4,dismiss:n=>zu({type:"DISMISS_TOAST",toastId:n})}}function je(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function U1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function vj(...t){return e=>{let n=!1;const r=t.map(s=>{const i=U1(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():U1(t[s],null)}}}}function Et(...t){return m.useCallback(vj(...t),t)}function H4(t,e){const n=m.createContext(e),r=i=>{const{children:o,...l}=i,c=m.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function ei(t,e=[]){let n=[];function r(i,o){const l=m.createContext(o),c=n.length;n=[...n,o];const u=f=>{var _;const{scope:p,children:g,...T}=f,v=((_=p==null?void 0:p[t])==null?void 0:_[c])||l,b=m.useMemo(()=>T,Object.values(T));return a.jsx(v.Provider,{value:b,children:g})};u.displayName=i+"Provider";function h(f,p){var v;const g=((v=p==null?void 0:p[t])==null?void 0:v[c])||l,T=m.useContext(g);if(T)return T;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,q4(s,...e)]}function q4(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function mc(t){const e=G4(t),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,l=m.Children.toArray(i),c=l.find(Q4);if(c){const u=c.props.children,h=l.map(f=>f===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:f);return a.jsx(e,{...o,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,h):null})}return a.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var Dc=mc("Slot");function G4(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const o=X4(s),l=Y4(i,s.props);return s.type!==m.Fragment&&(l.ref=r?vj(r,o):o),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var xj=Symbol("radix.slottable");function K4(t){const e=({children:n})=>a.jsx(a.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=xj,e}function Q4(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===xj}function Y4(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function X4(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function kw(t){const e=t+"CollectionProvider",[n,r]=ei(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:b,children:_}=v,y=J.useRef(null),w=J.useRef(new Map).current;return a.jsx(s,{scope:b,itemMap:w,collectionRef:y,children:_})};o.displayName=e;const l=t+"CollectionSlot",c=mc(l),u=J.forwardRef((v,b)=>{const{scope:_,children:y}=v,w=i(l,_),E=Et(b,w.collectionRef);return a.jsx(c,{ref:E,children:y})});u.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=mc(h),g=J.forwardRef((v,b)=>{const{scope:_,children:y,...w}=v,E=J.useRef(null),P=Et(b,E),R=i(h,_);return J.useEffect(()=>(R.itemMap.set(E,{ref:E,...w}),()=>void R.itemMap.delete(E))),a.jsx(p,{[f]:"",ref:P,children:y})});g.displayName=h;function T(v){const b=i(t+"CollectionConsumer",v);return J.useCallback(()=>{const y=b.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((R,S)=>w.indexOf(R.ref.current)-w.indexOf(S.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:u,ItemSlot:g},T,r]}var Z4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ve=Z4.reduce((t,e)=>{const n=mc(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function wj(t,e){t&&tl.flushSync(()=>t.dispatchEvent(e))}function es(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function J4(t,e=globalThis==null?void 0:globalThis.document){const n=es(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var eL="DismissableLayer",Iv="dismissableLayer.update",tL="dismissableLayer.pointerDownOutside",nL="dismissableLayer.focusOutside",$1,_j=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Hd=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=m.useContext(_j),[h,f]=m.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=m.useState({}),T=Et(e,S=>f(S)),v=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=v.indexOf(b),y=h?v.indexOf(h):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,E=y>=_,P=sL(S=>{const N=S.target,k=[...u.branches].some(A=>A.contains(N));!E||k||(s==null||s(S),o==null||o(S),S.defaultPrevented||l==null||l())},p),R=iL(S=>{const N=S.target;[...u.branches].some(A=>A.contains(N))||(i==null||i(S),o==null||o(S),S.defaultPrevented||l==null||l())},p);return J4(S=>{y===u.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},p),m.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&($1=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),B1(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=$1)}},[h,p,n,u]),m.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),B1())},[h,u]),m.useEffect(()=>{const S=()=>g({});return document.addEventListener(Iv,S),()=>document.removeEventListener(Iv,S)},[]),a.jsx(Ve.div,{...c,ref:T,style:{pointerEvents:w?E?"auto":"none":void 0,...t.style},onFocusCapture:je(t.onFocusCapture,R.onFocusCapture),onBlurCapture:je(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:je(t.onPointerDownCapture,P.onPointerDownCapture)})});Hd.displayName=eL;var rL="DismissableLayerBranch",bj=m.forwardRef((t,e)=>{const n=m.useContext(_j),r=m.useRef(null),s=Et(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(Ve.div,{...t,ref:s})});bj.displayName=rL;function sL(t,e=globalThis==null?void 0:globalThis.document){const n=es(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){Ej(tL,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function iL(t,e=globalThis==null?void 0:globalThis.document){const n=es(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&Ej(nL,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function B1(){const t=new CustomEvent(Iv);document.dispatchEvent(t)}function Ej(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?wj(s,i):s.dispatchEvent(i)}var aL=Hd,oL=bj,Mn=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},lL="Portal",pp=m.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=m.useState(!1);Mn(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?gj.createPortal(a.jsx(Ve.div,{...r,ref:e}),o):null});pp.displayName=lL;function cL(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var so=t=>{const{present:e,children:n}=t,r=uL(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=Et(r.ref,dL(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};so.displayName="Presence";function uL(t){const[e,n]=m.useState(),r=m.useRef(null),s=m.useRef(t),i=m.useRef("none"),o=t?"mounted":"unmounted",[l,c]=cL(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=Hh(r.current);i.current=l==="mounted"?u:"none"},[l]),Mn(()=>{const u=r.current,h=s.current;if(h!==t){const p=i.current,g=Hh(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Mn(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=g=>{const v=Hh(r.current).includes(g.animationName);if(g.target===e&&v&&(c("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},p=g=>{g.target===e&&(i.current=Hh(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Hh(t){return(t==null?void 0:t.animationName)||"none"}function dL(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var hL=Vx[" useInsertionEffect ".trim().toString()]||Mn;function Ii({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=fL({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const h=m.useRef(t!==void 0);m.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const u=m.useCallback(h=>{var f;if(l){const p=mL(h)?h(t):h;p!==t&&((f=o.current)==null||f.call(o,p))}else i(h)},[l,t,i,o]);return[c,u]}function fL({defaultProp:t,onChange:e}){const[n,r]=m.useState(t),s=m.useRef(n),i=m.useRef(e);return hL(()=>{i.current=e},[e]),m.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function mL(t){return typeof t=="function"}var Tj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),pL="VisuallyHidden",gp=m.forwardRef((t,e)=>a.jsx(Ve.span,{...t,ref:e,style:{...Tj,...t.style}}));gp.displayName=pL;var gL=gp,Iw="ToastProvider",[Aw,yL,vL]=kw("Toast"),[Sj,pY]=ei("Toast",[vL]),[xL,yp]=Sj(Iw),Nj=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=m.useState(null),[u,h]=m.useState(0),f=m.useRef(!1),p=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Iw}\`. Expected non-empty \`string\`.`),a.jsx(Aw.Provider,{scope:e,children:a.jsx(xL,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>h(g=>g+1),[]),onToastRemove:m.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};Nj.displayName=Iw;var Cj="ToastViewport",wL=["F8"],Av="toast.viewportPause",Pv="toast.viewportResume",jj=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=wL,label:s="Notifications ({hotkey})",...i}=t,o=yp(Cj,n),l=yL(n),c=m.useRef(null),u=m.useRef(null),h=m.useRef(null),f=m.useRef(null),p=Et(e,f,o.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=o.toastCount>0;m.useEffect(()=>{const b=_=>{var w;r.length!==0&&r.every(E=>_[E]||_.code===E)&&((w=f.current)==null||w.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),m.useEffect(()=>{const b=c.current,_=f.current;if(T&&b&&_){const y=()=>{if(!o.isClosePausedRef.current){const R=new CustomEvent(Av);_.dispatchEvent(R),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const R=new CustomEvent(Pv);_.dispatchEvent(R),o.isClosePausedRef.current=!1}},E=R=>{!b.contains(R.relatedTarget)&&w()},P=()=>{b.contains(document.activeElement)||w()};return b.addEventListener("focusin",y),b.addEventListener("focusout",E),b.addEventListener("pointermove",y),b.addEventListener("pointerleave",P),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{b.removeEventListener("focusin",y),b.removeEventListener("focusout",E),b.removeEventListener("pointermove",y),b.removeEventListener("pointerleave",P),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[T,o.isClosePausedRef]);const v=m.useCallback(({tabbingDirection:b})=>{const y=l().map(w=>{const E=w.ref.current,P=[E,...RL(E)];return b==="forwards"?P:P.reverse()});return(b==="forwards"?y.reverse():y).flat()},[l]);return m.useEffect(()=>{const b=f.current;if(b){const _=y=>{var P,R,S;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const N=document.activeElement,k=y.shiftKey;if(y.target===b&&k){(P=u.current)==null||P.focus();return}const I=v({tabbingDirection:k?"backwards":"forwards"}),j=I.findIndex(V=>V===N);iy(I.slice(j+1))?y.preventDefault():k?(R=u.current)==null||R.focus():(S=h.current)==null||S.focus()}};return b.addEventListener("keydown",_),()=>b.removeEventListener("keydown",_)}},[l,v]),a.jsxs(oL,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:T?void 0:"none"},children:[T&&a.jsx(Rv,{ref:u,onFocusFromOutsideViewport:()=>{const b=v({tabbingDirection:"forwards"});iy(b)}}),a.jsx(Aw.Slot,{scope:n,children:a.jsx(Ve.ol,{tabIndex:-1,...i,ref:p})}),T&&a.jsx(Rv,{ref:h,onFocusFromOutsideViewport:()=>{const b=v({tabbingDirection:"backwards"});iy(b)}})]})});jj.displayName=Cj;var kj="ToastFocusProxy",Rv=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=yp(kj,n);return a.jsx(gp,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});Rv.displayName=kj;var qd="Toast",_L="toast.swipeStart",bL="toast.swipeMove",EL="toast.swipeCancel",TL="toast.swipeEnd",Ij=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[l,c]=Ii({prop:r,defaultProp:s??!0,onChange:i,caller:qd});return a.jsx(so,{present:n||l,children:a.jsx(CL,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:es(t.onPause),onResume:es(t.onResume),onSwipeStart:je(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:je(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:je(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:je(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});Ij.displayName=qd;var[SL,NL]=Sj(qd,{onClose(){}}),CL=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:g,...T}=t,v=yp(qd,n),[b,_]=m.useState(null),y=Et(e,V=>_(V)),w=m.useRef(null),E=m.useRef(null),P=s||v.duration,R=m.useRef(0),S=m.useRef(P),N=m.useRef(0),{onToastAdd:k,onToastRemove:A}=v,M=es(()=>{var W;(b==null?void 0:b.contains(document.activeElement))&&((W=v.viewport)==null||W.focus()),o()}),I=m.useCallback(V=>{!V||V===1/0||(window.clearTimeout(N.current),R.current=new Date().getTime(),N.current=window.setTimeout(M,V))},[M]);m.useEffect(()=>{const V=v.viewport;if(V){const W=()=>{I(S.current),u==null||u()},H=()=>{const Y=new Date().getTime()-R.current;S.current=S.current-Y,window.clearTimeout(N.current),c==null||c()};return V.addEventListener(Av,H),V.addEventListener(Pv,W),()=>{V.removeEventListener(Av,H),V.removeEventListener(Pv,W)}}},[v.viewport,P,c,u,I]),m.useEffect(()=>{i&&!v.isClosePausedRef.current&&I(P)},[i,P,v.isClosePausedRef,I]),m.useEffect(()=>(k(),()=>A()),[k,A]);const j=m.useMemo(()=>b?Lj(b):null,[b]);return v.viewport?a.jsxs(a.Fragment,{children:[j&&a.jsx(jL,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:j}),a.jsx(SL,{scope:n,onClose:M,children:tl.createPortal(a.jsx(Aw.ItemSlot,{scope:n,children:a.jsx(aL,{asChild:!0,onEscapeKeyDown:je(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||M(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(Ve.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...T,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:je(t.onKeyDown,V=>{V.key==="Escape"&&(l==null||l(V.nativeEvent),V.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:je(t.onPointerDown,V=>{V.button===0&&(w.current={x:V.clientX,y:V.clientY})}),onPointerMove:je(t.onPointerMove,V=>{if(!w.current)return;const W=V.clientX-w.current.x,H=V.clientY-w.current.y,Y=!!E.current,U=["left","right"].includes(v.swipeDirection),F=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,$=U?F(0,W):0,G=U?0:F(0,H),oe=V.pointerType==="touch"?10:2,de={x:$,y:G},xe={originalEvent:V,delta:de};Y?(E.current=de,qh(bL,f,xe,{discrete:!1})):z1(de,v.swipeDirection,oe)?(E.current=de,qh(_L,h,xe,{discrete:!1}),V.target.setPointerCapture(V.pointerId)):(Math.abs(W)>oe||Math.abs(H)>oe)&&(w.current=null)}),onPointerUp:je(t.onPointerUp,V=>{const W=E.current,H=V.target;if(H.hasPointerCapture(V.pointerId)&&H.releasePointerCapture(V.pointerId),E.current=null,w.current=null,W){const Y=V.currentTarget,U={originalEvent:V,delta:W};z1(W,v.swipeDirection,v.swipeThreshold)?qh(TL,g,U,{discrete:!0}):qh(EL,p,U,{discrete:!0}),Y.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),jL=t=>{const{__scopeToast:e,children:n,...r}=t,s=yp(qd,e),[i,o]=m.useState(!1),[l,c]=m.useState(!1);return AL(()=>o(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(pp,{asChild:!0,children:a.jsx(gp,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},kL="ToastTitle",Aj=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(Ve.div,{...r,ref:e})});Aj.displayName=kL;var IL="ToastDescription",Pj=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(Ve.div,{...r,ref:e})});Pj.displayName=IL;var Rj="ToastAction",Dj=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(Oj,{altText:n,asChild:!0,children:a.jsx(Pw,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Rj}\`. Expected non-empty \`string\`.`),null)});Dj.displayName=Rj;var Mj="ToastClose",Pw=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=NL(Mj,n);return a.jsx(Oj,{asChild:!0,children:a.jsx(Ve.button,{type:"button",...r,ref:e,onClick:je(t.onClick,s.onClose)})})});Pw.displayName=Mj;var Oj=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return a.jsx(Ve.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function Lj(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),PL(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Lj(r))}}),e}function qh(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?wj(s,i):s.dispatchEvent(i)}var z1=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function AL(t=()=>{}){const e=es(t);Mn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function PL(t){return t.nodeType===t.ELEMENT_NODE}function RL(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function iy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var DL=Nj,Vj=jj,Fj=Ij,Uj=Aj,$j=Pj,Bj=Dj,zj=Pw;function Wj(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Wj(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Hj(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Wj(t))&&(r&&(r+=" "),r+=e);return r}const W1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,H1=Hj,nl=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return H1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const p=W1(h)||W1(f);return s[u][p]}),l=n&&Object.entries(n).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...g}=h;return Object.entries(g).every(T=>{let[v,b]=T;return Array.isArray(b)?b.includes({...i,...l}[v]):{...i,...l}[v]===b})?[...u,f,p]:u},[]);return H1(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qj=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>m.createElement("svg",{ref:c,...OL,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:qj("lucide",s),...l},[...o.map(([u,h])=>m.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(LL,{ref:i,iconNode:e,className:qj(`lucide-${ML(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=ke("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=ke("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=ke("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=ke("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=ke("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=ke("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=ke("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=ke("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=ke("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=ke("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=ke("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=ke("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=ke("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=ke("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=ke("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=ke("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=ke("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=ke("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=ke("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=ke("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=ke("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=ke("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=ke("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=ke("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=ke("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=ke("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=ke("MailOpen",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=ke("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=ke("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=ke("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=ke("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=ke("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=ke("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=ke("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=ke("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=ke("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=ke("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tV=ke("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=ke("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=ke("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=ke("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=ke("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=ke("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=ke("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=ke("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=ke("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=ke("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=ke("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Vw="-",aV=t=>{const e=lV(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(Vw);return l[0]===""&&l.length!==1&&l.shift(),ik(l,e)||oV(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},ik=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?ik(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Vw);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},K1=/^\[(.+)\]$/,oV=t=>{if(K1.test(t)){const e=K1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},lV=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return uV(Object.entries(t.classGroups),n).forEach(([i,o])=>{Dv(o,r,i,e)}),r},Dv=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Q1(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(cV(s)){Dv(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Dv(o,Q1(e,i),n,r)})})},Q1=(t,e)=>{let n=t;return e.split(Vw).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},cV=t=>t.isThemeGetter,uV=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,dV=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},ak="!",hV=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,h=0,f;for(let b=0;b<l.length;b++){let _=l[b];if(u===0){if(_===s&&(r||l.slice(b,b+i)===e)){c.push(l.slice(h,b)),h=b+i;continue}if(_==="/"){f=b;continue}}_==="["?u++:_==="]"&&u--}const p=c.length===0?l:l.substring(h),g=p.startsWith(ak),T=g?p.substring(1):p,v=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:T,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:o}):o},fV=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},mV=t=>({cache:dV(t.cacheSize),parseClassName:hV(t),...aV(t)}),pV=/\s+/,gV=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(pV);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}=n(u);let T=!!g,v=r(T?p.substring(0,g):p);if(!v){if(!T){l=u+(l.length>0?" "+l:l);continue}if(v=r(p),!v){l=u+(l.length>0?" "+l:l);continue}T=!1}const b=fV(h).join(":"),_=f?b+ak:b,y=_+v;if(i.includes(y))continue;i.push(y);const w=s(v,T);for(let E=0;E<w.length;++E){const P=w[E];i.push(_+P)}l=u+(l.length>0?" "+l:l)}return l};function yV(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=ok(e))&&(r&&(r+=" "),r+=n);return r}const ok=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=ok(t[r]))&&(n&&(n+=" "),n+=e);return n};function vV(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return n=mV(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=gV(c,n);return s(c,h),h}return function(){return i(yV.apply(null,arguments))}}const Ut=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},lk=/^\[(?:([a-z-]+):)?(.+)\]$/i,xV=/^\d+\/\d+$/,wV=new Set(["px","full","screen"]),_V=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,bV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,EV=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,TV=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,SV=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ci=t=>Hl(t)||wV.has(t)||xV.test(t),Ji=t=>Mc(t,"length",RV),Hl=t=>!!t&&!Number.isNaN(Number(t)),oy=t=>Mc(t,"number",Hl),pu=t=>!!t&&Number.isInteger(Number(t)),NV=t=>t.endsWith("%")&&Hl(t.slice(0,-1)),Ye=t=>lk.test(t),ea=t=>_V.test(t),CV=new Set(["length","size","percentage"]),jV=t=>Mc(t,CV,ck),kV=t=>Mc(t,"position",ck),IV=new Set(["image","url"]),AV=t=>Mc(t,IV,MV),PV=t=>Mc(t,"",DV),gu=()=>!0,Mc=(t,e,n)=>{const r=lk.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},RV=t=>bV.test(t)&&!EV.test(t),ck=()=>!1,DV=t=>TV.test(t),MV=t=>SV.test(t),OV=()=>{const t=Ut("colors"),e=Ut("spacing"),n=Ut("blur"),r=Ut("brightness"),s=Ut("borderColor"),i=Ut("borderRadius"),o=Ut("borderSpacing"),l=Ut("borderWidth"),c=Ut("contrast"),u=Ut("grayscale"),h=Ut("hueRotate"),f=Ut("invert"),p=Ut("gap"),g=Ut("gradientColorStops"),T=Ut("gradientColorStopPositions"),v=Ut("inset"),b=Ut("margin"),_=Ut("opacity"),y=Ut("padding"),w=Ut("saturate"),E=Ut("scale"),P=Ut("sepia"),R=Ut("skew"),S=Ut("space"),N=Ut("translate"),k=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",Ye,e],I=()=>[Ye,e],j=()=>["",ci,Ji],V=()=>["auto",Hl,Ye],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",Ye],$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>[Hl,Ye];return{cacheSize:500,separator:":",theme:{colors:[gu],spacing:[ci,Ji],blur:["none","",ea,Ye],brightness:G(),borderColor:[t],borderRadius:["none","","full",ea,Ye],borderSpacing:I(),borderWidth:j(),contrast:G(),grayscale:F(),hueRotate:G(),invert:F(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[NV,Ji],inset:M(),margin:M(),opacity:G(),padding:I(),saturate:G(),scale:G(),sepia:F(),skew:G(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Ye]}],container:["container"],columns:[{columns:[ea]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),Ye]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",pu,Ye]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ye]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",pu,Ye]}],"grid-cols":[{"grid-cols":[gu]}],"col-start-end":[{col:["auto",{span:["full",pu,Ye]},Ye]}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":[gu]}],"row-start-end":[{row:["auto",{span:[pu,Ye]},Ye]}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ye]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ye,e]}],"min-w":[{"min-w":[Ye,e,"min","max","fit"]}],"max-w":[{"max-w":[Ye,e,"none","full","min","max","fit","prose",{screen:[ea]},ea]}],h:[{h:[Ye,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ye,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ye,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ye,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ea,Ji]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",oy]}],"font-family":[{font:[gu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ye]}],"line-clamp":[{"line-clamp":["none",Hl,oy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ci,Ye]}],"list-image":[{"list-image":["none",Ye]}],"list-style-type":[{list:["none","disc","decimal",Ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ci,Ji]}],"underline-offset":[{"underline-offset":["auto",ci,Ye]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),kV]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",jV]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},AV]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[T]}],"gradient-via-pos":[{via:[T]}],"gradient-to-pos":[{to:[T]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:H()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[ci,Ye]}],"outline-w":[{outline:[ci,Ji]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[ci,Ji]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ea,PV]}],"shadow-color":[{shadow:[gu]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ea,Ye]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ye]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",Ye]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[pu,Ye]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ye]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ye]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ye]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ci,Ji,oy]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},LV=vV(OV);function ie(...t){return LV(Hj(t))}const VV=DL,uk=m.forwardRef(({className:t,...e},n)=>a.jsx(Vj,{ref:n,className:ie("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));uk.displayName=Vj.displayName;const FV=nl("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),dk=m.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(Fj,{ref:r,className:ie(FV({variant:e}),t),...n}));dk.displayName=Fj.displayName;const UV=m.forwardRef(({className:t,...e},n)=>a.jsx(Bj,{ref:n,className:ie("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));UV.displayName=Bj.displayName;const hk=m.forwardRef(({className:t,...e},n)=>a.jsx(zj,{ref:n,className:ie("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(xp,{className:"h-4 w-4"})}));hk.displayName=zj.displayName;const fk=m.forwardRef(({className:t,...e},n)=>a.jsx(Uj,{ref:n,className:ie("text-sm font-semibold",t),...e}));fk.displayName=Uj.displayName;const mk=m.forwardRef(({className:t,...e},n)=>a.jsx($j,{ref:n,className:ie("text-sm opacity-90",t),...e}));mk.displayName=$j.displayName;function $V(){const{toasts:t}=Zn();return a.jsxs(VV,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return a.jsxs(dk,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(fk,{children:n}),r&&a.jsx(mk,{children:r})]}),s,a.jsx(hk,{})]},e)}),a.jsx(uk,{})]})}var Y1=["light","dark"],BV="(prefers-color-scheme: dark)",zV=m.createContext(void 0),WV={setTheme:t=>{},themes:[]},HV=()=>{var t;return(t=m.useContext(zV))!=null?t:WV};m.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",h=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(T=>`'${T}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=s?Y1.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(T,v=!1,b=!0)=>{let _=o?o[T]:T,y=v?T+"|| ''":`'${_}'`,w="";return s&&b&&!v&&Y1.includes(T)&&(w+=`d.style.colorScheme = '${T}';`),n==="class"?v||_?w+=`c.add(${y})`:w+="null":_&&(w+=`d[s](n,${y})`),w},g=t?`!function(){${h}${p(t)}}()`:r?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${BV}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${u?"":"else{"+p(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(i,!1,!1)};}${f}}catch(t){}}();`;return m.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})});var qV=t=>{switch(t){case"success":return QV;case"info":return XV;case"warning":return YV;case"error":return ZV;default:return null}},GV=Array(12).fill(0),KV=({visible:t,className:e})=>J.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},J.createElement("div",{className:"sonner-spinner"},GV.map((n,r)=>J.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),QV=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),YV=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),XV=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ZV=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),JV=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},J.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),J.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),eF=()=>{let[t,e]=J.useState(document.hidden);return J.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Mv=1,tF=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Mv++,o=this.toasts.find(c=>c.id===i),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...e,id:i,title:r}),{...c,...e,id:i,dismissible:l,title:r}):c):this.addToast({title:r,...s,dismissible:l,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,l=s.then(async u=>{if(o=["resolve",u],J.isValidElement(u))i=!1,this.create({id:r,type:"default",message:u});else if(rF(u)&&!u.ok){i=!1;let h=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,f=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description;this.create({id:r,type:"error",message:h,description:f})}else if(n.success!==void 0){i=!1;let h=typeof n.success=="function"?await n.success(u):n.success,f=typeof n.description=="function"?await n.description(u):n.description;this.create({id:r,type:"success",message:h,description:f})}}).catch(async u=>{if(o=["reject",u],n.error!==void 0){i=!1;let h=typeof n.error=="function"?await n.error(u):n.error,f=typeof n.description=="function"?await n.description(u):n.description;this.create({id:r,type:"error",message:h,description:f})}}).finally(()=>{var u;i&&(this.dismiss(r),r=void 0),(u=n.finally)==null||u.call(n)}),c=()=>new Promise((u,h)=>l.then(()=>o[0]==="reject"?h(o[1]):u(o[1])).catch(h));return typeof r!="string"&&typeof r!="number"?{unwrap:c}:Object.assign(r,{unwrap:c})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||Mv++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},hr=new tF,nF=(t,e)=>{let n=(e==null?void 0:e.id)||Mv++;return hr.addToast({title:t,...e,id:n}),n},rF=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",sF=nF,iF=()=>hr.toasts,aF=()=>hr.getActiveToasts(),vl=Object.assign(sF,{success:hr.success,info:hr.info,warning:hr.warning,error:hr.error,custom:hr.custom,message:hr.message,promise:hr.promise,dismiss:hr.dismiss,loading:hr.loading},{getHistory:iF,getToasts:aF});function oF(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}oF(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Gh(t){return t.label!==void 0}var lF=3,cF="32px",uF="16px",X1=4e3,dF=356,hF=14,fF=20,mF=200;function os(...t){return t.filter(Boolean).join(" ")}function pF(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var gF=t=>{var e,n,r,s,i,o,l,c,u,h,f;let{invert:p,toast:g,unstyled:T,interacting:v,setHeights:b,visibleToasts:_,heights:y,index:w,toasts:E,expanded:P,removeToast:R,defaultRichColors:S,closeButton:N,style:k,cancelButtonStyle:A,actionButtonStyle:M,className:I="",descriptionClassName:j="",duration:V,position:W,gap:H,loadingIcon:Y,expandByDefault:U,classNames:F,icons:$,closeButtonAriaLabel:G="Close toast",pauseWhenPageIsHidden:oe}=t,[de,xe]=J.useState(null),[Ne,lt]=J.useState(null),[le,We]=J.useState(!1),[st,Me]=J.useState(!1),[Oe,De]=J.useState(!1),[Tt,ge]=J.useState(!1),[be,it]=J.useState(!1),[ht,At]=J.useState(0),[Qe,L]=J.useState(0),B=J.useRef(g.duration||V||X1),O=J.useRef(null),Q=J.useRef(null),X=w===0,re=w+1<=_,ne=g.type,q=g.dismissible!==!1,se=g.className||"",ye=g.descriptionClassName||"",Xe=J.useMemo(()=>y.findIndex(Le=>Le.toastId===g.id)||0,[y,g.id]),tt=J.useMemo(()=>{var Le;return(Le=g.closeButton)!=null?Le:N},[g.closeButton,N]),Gt=J.useMemo(()=>g.duration||V||X1,[g.duration,V]),Wt=J.useRef(0),Dt=J.useRef(0),Vn=J.useRef(0),St=J.useRef(null),[br,Jn]=W.split("-"),Xc=J.useMemo(()=>y.reduce((Le,ct,Pt)=>Pt>=Xe?Le:Le+ct.height,0),[y,Xe]),Zc=eF(),uo=g.invert||p,ho=ne==="loading";Dt.current=J.useMemo(()=>Xe*H+Xc,[Xe,Xc]),J.useEffect(()=>{B.current=Gt},[Gt]),J.useEffect(()=>{We(!0)},[]),J.useEffect(()=>{let Le=Q.current;if(Le){let ct=Le.getBoundingClientRect().height;return L(ct),b(Pt=>[{toastId:g.id,height:ct,position:g.position},...Pt]),()=>b(Pt=>Pt.filter(Nn=>Nn.toastId!==g.id))}},[b,g.id]),J.useLayoutEffect(()=>{if(!le)return;let Le=Q.current,ct=Le.style.height;Le.style.height="auto";let Pt=Le.getBoundingClientRect().height;Le.style.height=ct,L(Pt),b(Nn=>Nn.find(cr=>cr.toastId===g.id)?Nn.map(cr=>cr.toastId===g.id?{...cr,height:Pt}:cr):[{toastId:g.id,height:Pt,position:g.position},...Nn])},[le,g.title,g.description,b,g.id]);let Ur=J.useCallback(()=>{Me(!0),At(Dt.current),b(Le=>Le.filter(ct=>ct.toastId!==g.id)),setTimeout(()=>{R(g)},mF)},[g,R,b,Dt]);J.useEffect(()=>{if(g.promise&&ne==="loading"||g.duration===1/0||g.type==="loading")return;let Le;return P||v||oe&&Zc?(()=>{if(Vn.current<Wt.current){let ct=new Date().getTime()-Wt.current;B.current=B.current-ct}Vn.current=new Date().getTime()})():B.current!==1/0&&(Wt.current=new Date().getTime(),Le=setTimeout(()=>{var ct;(ct=g.onAutoClose)==null||ct.call(g,g),Ur()},B.current)),()=>clearTimeout(Le)},[P,v,g,ne,oe,Zc,Ur]),J.useEffect(()=>{g.delete&&Ur()},[Ur,g.delete]);function ai(){var Le,ct,Pt;return $!=null&&$.loading?J.createElement("div",{className:os(F==null?void 0:F.loader,(Le=g==null?void 0:g.classNames)==null?void 0:Le.loader,"sonner-loader"),"data-visible":ne==="loading"},$.loading):Y?J.createElement("div",{className:os(F==null?void 0:F.loader,(ct=g==null?void 0:g.classNames)==null?void 0:ct.loader,"sonner-loader"),"data-visible":ne==="loading"},Y):J.createElement(KV,{className:os(F==null?void 0:F.loader,(Pt=g==null?void 0:g.classNames)==null?void 0:Pt.loader),visible:ne==="loading"})}return J.createElement("li",{tabIndex:0,ref:Q,className:os(I,se,F==null?void 0:F.toast,(e=g==null?void 0:g.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[ne],(n=g==null?void 0:g.classNames)==null?void 0:n[ne]),"data-sonner-toast":"","data-rich-colors":(r=g.richColors)!=null?r:S,"data-styled":!(g.jsx||g.unstyled||T),"data-mounted":le,"data-promise":!!g.promise,"data-swiped":be,"data-removed":st,"data-visible":re,"data-y-position":br,"data-x-position":Jn,"data-index":w,"data-front":X,"data-swiping":Oe,"data-dismissible":q,"data-type":ne,"data-invert":uo,"data-swipe-out":Tt,"data-swipe-direction":Ne,"data-expanded":!!(P||U&&le),style:{"--index":w,"--toasts-before":w,"--z-index":E.length-w,"--offset":`${st?ht:Dt.current}px`,"--initial-height":U?"auto":`${Qe}px`,...k,...g.style},onDragEnd:()=>{De(!1),xe(null),St.current=null},onPointerDown:Le=>{ho||!q||(O.current=new Date,At(Dt.current),Le.target.setPointerCapture(Le.pointerId),Le.target.tagName!=="BUTTON"&&(De(!0),St.current={x:Le.clientX,y:Le.clientY}))},onPointerUp:()=>{var Le,ct,Pt,Nn;if(Tt||!q)return;St.current=null;let cr=Number(((Le=Q.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ht=Number(((ct=Q.current)==null?void 0:ct.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),js=new Date().getTime()-((Pt=O.current)==null?void 0:Pt.getTime()),Cn=de==="x"?cr:Ht,ur=Math.abs(Cn)/js;if(Math.abs(Cn)>=fF||ur>.11){At(Dt.current),(Nn=g.onDismiss)==null||Nn.call(g,g),lt(de==="x"?cr>0?"right":"left":Ht>0?"down":"up"),Ur(),ge(!0),it(!1);return}De(!1),xe(null)},onPointerMove:Le=>{var ct,Pt,Nn,cr;if(!St.current||!q||((ct=window.getSelection())==null?void 0:ct.toString().length)>0)return;let Ht=Le.clientY-St.current.y,js=Le.clientX-St.current.x,Cn=(Pt=t.swipeDirections)!=null?Pt:pF(W);!de&&(Math.abs(js)>1||Math.abs(Ht)>1)&&xe(Math.abs(js)>Math.abs(Ht)?"x":"y");let ur={x:0,y:0};de==="y"?(Cn.includes("top")||Cn.includes("bottom"))&&(Cn.includes("top")&&Ht<0||Cn.includes("bottom")&&Ht>0)&&(ur.y=Ht):de==="x"&&(Cn.includes("left")||Cn.includes("right"))&&(Cn.includes("left")&&js<0||Cn.includes("right")&&js>0)&&(ur.x=js),(Math.abs(ur.x)>0||Math.abs(ur.y)>0)&&it(!0),(Nn=Q.current)==null||Nn.style.setProperty("--swipe-amount-x",`${ur.x}px`),(cr=Q.current)==null||cr.style.setProperty("--swipe-amount-y",`${ur.y}px`)}},tt&&!g.jsx?J.createElement("button",{"aria-label":G,"data-disabled":ho,"data-close-button":!0,onClick:ho||!q?()=>{}:()=>{var Le;Ur(),(Le=g.onDismiss)==null||Le.call(g,g)},className:os(F==null?void 0:F.closeButton,(s=g==null?void 0:g.classNames)==null?void 0:s.closeButton)},(i=$==null?void 0:$.close)!=null?i:JV):null,g.jsx||m.isValidElement(g.title)?g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title:J.createElement(J.Fragment,null,ne||g.icon||g.promise?J.createElement("div",{"data-icon":"",className:os(F==null?void 0:F.icon,(o=g==null?void 0:g.classNames)==null?void 0:o.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||ai():null,g.type!=="loading"?g.icon||($==null?void 0:$[ne])||qV(ne):null):null,J.createElement("div",{"data-content":"",className:os(F==null?void 0:F.content,(l=g==null?void 0:g.classNames)==null?void 0:l.content)},J.createElement("div",{"data-title":"",className:os(F==null?void 0:F.title,(c=g==null?void 0:g.classNames)==null?void 0:c.title)},typeof g.title=="function"?g.title():g.title),g.description?J.createElement("div",{"data-description":"",className:os(j,ye,F==null?void 0:F.description,(u=g==null?void 0:g.classNames)==null?void 0:u.description)},typeof g.description=="function"?g.description():g.description):null),m.isValidElement(g.cancel)?g.cancel:g.cancel&&Gh(g.cancel)?J.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||A,onClick:Le=>{var ct,Pt;Gh(g.cancel)&&q&&((Pt=(ct=g.cancel).onClick)==null||Pt.call(ct,Le),Ur())},className:os(F==null?void 0:F.cancelButton,(h=g==null?void 0:g.classNames)==null?void 0:h.cancelButton)},g.cancel.label):null,m.isValidElement(g.action)?g.action:g.action&&Gh(g.action)?J.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||M,onClick:Le=>{var ct,Pt;Gh(g.action)&&((Pt=(ct=g.action).onClick)==null||Pt.call(ct,Le),!Le.defaultPrevented&&Ur())},className:os(F==null?void 0:F.actionButton,(f=g==null?void 0:g.classNames)==null?void 0:f.actionButton)},g.action.label):null))};function Z1(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function yF(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",l=i?uF:cF;function c(u){["top","right","bottom","left"].forEach(h=>{n[`${o}-${h}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var vF=m.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:h="light",richColors:f,duration:p,style:g,visibleToasts:T=lF,toastOptions:v,dir:b=Z1(),gap:_=hF,loadingIcon:y,icons:w,containerAriaLabel:E="Notifications",pauseWhenPageIsHidden:P}=t,[R,S]=J.useState([]),N=J.useMemo(()=>Array.from(new Set([r].concat(R.filter(oe=>oe.position).map(oe=>oe.position)))),[R,r]),[k,A]=J.useState([]),[M,I]=J.useState(!1),[j,V]=J.useState(!1),[W,H]=J.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Y=J.useRef(null),U=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=J.useRef(null),$=J.useRef(!1),G=J.useCallback(oe=>{S(de=>{var xe;return(xe=de.find(Ne=>Ne.id===oe.id))!=null&&xe.delete||hr.dismiss(oe.id),de.filter(({id:Ne})=>Ne!==oe.id)})},[]);return J.useEffect(()=>hr.subscribe(oe=>{if(oe.dismiss){S(de=>de.map(xe=>xe.id===oe.id?{...xe,delete:!0}:xe));return}setTimeout(()=>{gj.flushSync(()=>{S(de=>{let xe=de.findIndex(Ne=>Ne.id===oe.id);return xe!==-1?[...de.slice(0,xe),{...de[xe],...oe},...de.slice(xe+1)]:[oe,...de]})})})}),[]),J.useEffect(()=>{if(h!=="system"){H(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window>"u")return;let oe=window.matchMedia("(prefers-color-scheme: dark)");try{oe.addEventListener("change",({matches:de})=>{H(de?"dark":"light")})}catch{oe.addListener(({matches:xe})=>{try{H(xe?"dark":"light")}catch(Ne){console.error(Ne)}})}},[h]),J.useEffect(()=>{R.length<=1&&I(!1)},[R]),J.useEffect(()=>{let oe=de=>{var xe,Ne;s.every(lt=>de[lt]||de.code===lt)&&(I(!0),(xe=Y.current)==null||xe.focus()),de.code==="Escape"&&(document.activeElement===Y.current||(Ne=Y.current)!=null&&Ne.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",oe),()=>document.removeEventListener("keydown",oe)},[s]),J.useEffect(()=>{if(Y.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,$.current=!1)}},[Y.current]),J.createElement("section",{ref:e,"aria-label":`${E} ${U}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map((oe,de)=>{var xe;let[Ne,lt]=oe.split("-");return R.length?J.createElement("ol",{key:oe,dir:b==="auto"?Z1():b,tabIndex:-1,ref:Y,className:l,"data-sonner-toaster":!0,"data-theme":W,"data-y-position":Ne,"data-lifted":M&&R.length>1&&!i,"data-x-position":lt,style:{"--front-toast-height":`${((xe=k[0])==null?void 0:xe.height)||0}px`,"--width":`${dF}px`,"--gap":`${_}px`,...g,...yF(c,u)},onBlur:le=>{$.current&&!le.currentTarget.contains(le.relatedTarget)&&($.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:le=>{le.target instanceof HTMLElement&&le.target.dataset.dismissible==="false"||$.current||($.current=!0,F.current=le.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{j||I(!1)},onDragEnd:()=>I(!1),onPointerDown:le=>{le.target instanceof HTMLElement&&le.target.dataset.dismissible==="false"||V(!0)},onPointerUp:()=>V(!1)},R.filter(le=>!le.position&&de===0||le.position===oe).map((le,We)=>{var st,Me;return J.createElement(gF,{key:le.id,icons:w,index:We,toast:le,defaultRichColors:f,duration:(st=v==null?void 0:v.duration)!=null?st:p,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:T,closeButton:(Me=v==null?void 0:v.closeButton)!=null?Me:o,interacting:j,position:oe,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:G,toasts:R.filter(Oe=>Oe.position==le.position),heights:k.filter(Oe=>Oe.position==le.position),setHeights:A,expandByDefault:i,gap:_,loadingIcon:y,expanded:M,pauseWhenPageIsHidden:P,swipeDirections:t.swipeDirections})})):null}))});const xF=({...t})=>{const{theme:e="system"}=HV();return a.jsx(vF,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var wF=Vx[" useId ".trim().toString()]||(()=>{}),_F=0;function Ei(t){const[e,n]=m.useState(wF());return Mn(()=>{n(r=>r??String(_F++))},[t]),e?`radix-${e}`:""}const bF=["top","right","bottom","left"],Ba=Math.min,Cr=Math.max,lm=Math.round,Kh=Math.floor,Bs=t=>({x:t,y:t}),EF={left:"right",right:"left",bottom:"top",top:"bottom"},TF={start:"end",end:"start"};function Ov(t,e,n){return Cr(t,Ba(e,n))}function Pi(t,e){return typeof t=="function"?t(e):t}function Ri(t){return t.split("-")[0]}function Oc(t){return t.split("-")[1]}function Fw(t){return t==="x"?"y":"x"}function Uw(t){return t==="y"?"height":"width"}const SF=new Set(["top","bottom"]);function Vs(t){return SF.has(Ri(t))?"y":"x"}function $w(t){return Fw(Vs(t))}function NF(t,e,n){n===void 0&&(n=!1);const r=Oc(t),s=$w(t),i=Uw(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=cm(o)),[o,cm(o)]}function CF(t){const e=cm(t);return[Lv(t),e,Lv(e)]}function Lv(t){return t.replace(/start|end/g,e=>TF[e])}const J1=["left","right"],eE=["right","left"],jF=["top","bottom"],kF=["bottom","top"];function IF(t,e,n){switch(t){case"top":case"bottom":return n?e?eE:J1:e?J1:eE;case"left":case"right":return e?jF:kF;default:return[]}}function AF(t,e,n,r){const s=Oc(t);let i=IF(Ri(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Lv)))),i}function cm(t){return t.replace(/left|right|bottom|top/g,e=>EF[e])}function PF(t){return{top:0,right:0,bottom:0,left:0,...t}}function pk(t){return typeof t!="number"?PF(t):{top:t,right:t,bottom:t,left:t}}function um(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function tE(t,e,n){let{reference:r,floating:s}=t;const i=Vs(e),o=$w(e),l=Uw(o),c=Ri(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let g;switch(c){case"top":g={x:h,y:r.y-s.height};break;case"bottom":g={x:h,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-s.width,y:f};break;default:g={x:r.x,y:r.y}}switch(Oc(e)){case"start":g[o]-=p*(n&&u?-1:1);break;case"end":g[o]+=p*(n&&u?-1:1);break}return g}const RF=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=tE(u,r,c),p=r,g={},T=0;for(let v=0;v<l.length;v++){const{name:b,fn:_}=l[v],{x:y,y:w,data:E,reset:P}=await _({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});h=y??h,f=w??f,g={...g,[b]:{...g[b],...E}},P&&T<=50&&(T++,typeof P=="object"&&(P.placement&&(p=P.placement),P.rects&&(u=P.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):P.rects),{x:h,y:f}=tE(u,p,c)),v=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:g}};async function gd(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:g=0}=Pi(e,t),T=pk(g),b=l[p?f==="floating"?"reference":"floating":f],_=um(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),y=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),E=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},P=um(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:w,strategy:c}):y);return{top:(_.top-P.top+T.top)/E.y,bottom:(P.bottom-_.bottom+T.bottom)/E.y,left:(_.left-P.left+T.left)/E.x,right:(P.right-_.right+T.right)/E.x}}const DF=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=Pi(t,e)||{};if(u==null)return{};const f=pk(h),p={x:n,y:r},g=$w(s),T=Uw(g),v=await o.getDimensions(u),b=g==="y",_=b?"top":"left",y=b?"bottom":"right",w=b?"clientHeight":"clientWidth",E=i.reference[T]+i.reference[g]-p[g]-i.floating[T],P=p[g]-i.reference[g],R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=R?R[w]:0;(!S||!await(o.isElement==null?void 0:o.isElement(R)))&&(S=l.floating[w]||i.floating[T]);const N=E/2-P/2,k=S/2-v[T]/2-1,A=Ba(f[_],k),M=Ba(f[y],k),I=A,j=S-v[T]-M,V=S/2-v[T]/2+N,W=Ov(I,V,j),H=!c.arrow&&Oc(s)!=null&&V!==W&&i.reference[T]/2-(V<I?A:M)-v[T]/2<0,Y=H?V<I?V-I:V-j:0;return{[g]:p[g]+Y,data:{[g]:W,centerOffset:V-W-Y,...H&&{alignmentOffset:Y}},reset:H}}}),MF=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:v=!0,...b}=Pi(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=Ri(s),y=Vs(l),w=Ri(l)===l,E=await(c.isRTL==null?void 0:c.isRTL(u.floating)),P=p||(w||!v?[cm(l)]:CF(l)),R=T!=="none";!p&&R&&P.push(...AF(l,v,T,E));const S=[l,...P],N=await gd(e,b),k=[];let A=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&k.push(N[_]),f){const V=NF(s,o,E);k.push(N[V[0]],N[V[1]])}if(A=[...A,{placement:s,overflows:k}],!k.every(V=>V<=0)){var M,I;const V=(((M=i.flip)==null?void 0:M.index)||0)+1,W=S[V];if(W&&(!(f==="alignment"?y!==Vs(W):!1)||A.every(U=>U.overflows[0]>0&&Vs(U.placement)===y)))return{data:{index:V,overflows:A},reset:{placement:W}};let H=(I=A.filter(Y=>Y.overflows[0]<=0).sort((Y,U)=>Y.overflows[1]-U.overflows[1])[0])==null?void 0:I.placement;if(!H)switch(g){case"bestFit":{var j;const Y=(j=A.filter(U=>{if(R){const F=Vs(U.placement);return F===y||F==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(F=>F>0).reduce((F,$)=>F+$,0)]).sort((U,F)=>U[1]-F[1])[0])==null?void 0:j[0];Y&&(H=Y);break}case"initialPlacement":H=l;break}if(s!==H)return{reset:{placement:H}}}return{}}}};function nE(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function rE(t){return bF.some(e=>t[e]>=0)}const OF=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Pi(t,e);switch(r){case"referenceHidden":{const i=await gd(e,{...s,elementContext:"reference"}),o=nE(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:rE(o)}}}case"escaped":{const i=await gd(e,{...s,altBoundary:!0}),o=nE(i,n.floating);return{data:{escapedOffsets:o,escaped:rE(o)}}}default:return{}}}}},gk=new Set(["left","top"]);async function LF(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ri(n),l=Oc(n),c=Vs(n)==="y",u=gk.has(o)?-1:1,h=i&&c?-1:1,f=Pi(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:T}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof T=="number"&&(g=l==="end"?T*-1:T),c?{x:g*h,y:p*u}:{x:p*u,y:g*h}}const VF=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await LF(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},FF=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x:_,y}=b;return{x:_,y}}},...c}=Pi(t,e),u={x:n,y:r},h=await gd(e,c),f=Vs(Ri(s)),p=Fw(f);let g=u[p],T=u[f];if(i){const b=p==="y"?"top":"left",_=p==="y"?"bottom":"right",y=g+h[b],w=g-h[_];g=Ov(y,g,w)}if(o){const b=f==="y"?"top":"left",_=f==="y"?"bottom":"right",y=T+h[b],w=T-h[_];T=Ov(y,T,w)}const v=l.fn({...e,[p]:g,[f]:T});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[p]:i,[f]:o}}}}}},UF=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Pi(t,e),h={x:n,y:r},f=Vs(s),p=Fw(f);let g=h[p],T=h[f];const v=Pi(l,e),b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=p==="y"?"height":"width",E=i.reference[p]-i.floating[w]+b.mainAxis,P=i.reference[p]+i.reference[w]-b.mainAxis;g<E?g=E:g>P&&(g=P)}if(u){var _,y;const w=p==="y"?"width":"height",E=gk.has(Ri(s)),P=i.reference[f]-i.floating[w]+(E&&((_=o.offset)==null?void 0:_[f])||0)+(E?0:b.crossAxis),R=i.reference[f]+i.reference[w]+(E?0:((y=o.offset)==null?void 0:y[f])||0)-(E?b.crossAxis:0);T<P?T=P:T>R&&(T=R)}return{[p]:g,[f]:T}}}},$F=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Pi(t,e),h=await gd(e,u),f=Ri(s),p=Oc(s),g=Vs(s)==="y",{width:T,height:v}=i.floating;let b,_;f==="top"||f==="bottom"?(b=f,_=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(_=f,b=p==="end"?"top":"bottom");const y=v-h.top-h.bottom,w=T-h.left-h.right,E=Ba(v-h[b],y),P=Ba(T-h[_],w),R=!e.middlewareData.shift;let S=E,N=P;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=y),R&&!p){const A=Cr(h.left,0),M=Cr(h.right,0),I=Cr(h.top,0),j=Cr(h.bottom,0);g?N=T-2*(A!==0||M!==0?A+M:Cr(h.left,h.right)):S=v-2*(I!==0||j!==0?I+j:Cr(h.top,h.bottom))}await c({...e,availableWidth:N,availableHeight:S});const k=await o.getDimensions(l.floating);return T!==k.width||v!==k.height?{reset:{rects:!0}}:{}}}};function wp(){return typeof window<"u"}function Lc(t){return yk(t)?(t.nodeName||"").toLowerCase():"#document"}function Mr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ti(t){var e;return(e=(yk(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function yk(t){return wp()?t instanceof Node||t instanceof Mr(t).Node:!1}function Ts(t){return wp()?t instanceof Element||t instanceof Mr(t).Element:!1}function Ys(t){return wp()?t instanceof HTMLElement||t instanceof Mr(t).HTMLElement:!1}function sE(t){return!wp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Mr(t).ShadowRoot}const BF=new Set(["inline","contents"]);function Gd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Ss(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!BF.has(s)}const zF=new Set(["table","td","th"]);function WF(t){return zF.has(Lc(t))}const HF=[":popover-open",":modal"];function _p(t){return HF.some(e=>{try{return t.matches(e)}catch{return!1}})}const qF=["transform","translate","scale","rotate","perspective"],GF=["transform","translate","scale","rotate","perspective","filter"],KF=["paint","layout","strict","content"];function Bw(t){const e=zw(),n=Ts(t)?Ss(t):t;return qF.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||GF.some(r=>(n.willChange||"").includes(r))||KF.some(r=>(n.contain||"").includes(r))}function QF(t){let e=za(t);for(;Ys(e)&&!pc(e);){if(Bw(e))return e;if(_p(e))return null;e=za(e)}return null}function zw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const YF=new Set(["html","body","#document"]);function pc(t){return YF.has(Lc(t))}function Ss(t){return Mr(t).getComputedStyle(t)}function bp(t){return Ts(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function za(t){if(Lc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||sE(t)&&t.host||ti(t);return sE(e)?e.host:e}function vk(t){const e=za(t);return pc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ys(e)&&Gd(e)?e:vk(e)}function yd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=vk(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Mr(s);if(i){const l=Vv(o);return e.concat(o,o.visualViewport||[],Gd(s)?s:[],l&&n?yd(l):[])}return e.concat(s,yd(s,[],n))}function Vv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function xk(t){const e=Ss(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ys(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=lm(n)!==i||lm(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function Ww(t){return Ts(t)?t:t.contextElement}function ql(t){const e=Ww(t);if(!Ys(e))return Bs(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=xk(e);let o=(i?lm(n.width):n.width)/r,l=(i?lm(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const XF=Bs(0);function wk(t){const e=Mr(t);return!zw()||!e.visualViewport?XF:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function ZF(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Mr(t)?!1:e}function Bo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Ww(t);let o=Bs(1);e&&(r?Ts(r)&&(o=ql(r)):o=ql(t));const l=ZF(i,n,r)?wk(i):Bs(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const p=Mr(i),g=r&&Ts(r)?Mr(r):r;let T=p,v=Vv(T);for(;v&&r&&g!==T;){const b=ql(v),_=v.getBoundingClientRect(),y=Ss(v),w=_.left+(v.clientLeft+parseFloat(y.paddingLeft))*b.x,E=_.top+(v.clientTop+parseFloat(y.paddingTop))*b.y;c*=b.x,u*=b.y,h*=b.x,f*=b.y,c+=w,u+=E,T=Mr(v),v=Vv(T)}}return um({width:h,height:f,x:c,y:u})}function Hw(t,e){const n=bp(t).scrollLeft;return e?e.left+n:Bo(ti(t)).left+n}function _k(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Hw(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function JF(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=ti(r),l=e?_p(e.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Bs(1);const h=Bs(0),f=Ys(r);if((f||!f&&!i)&&((Lc(r)!=="body"||Gd(o))&&(c=bp(r)),Ys(r))){const g=Bo(r);u=ql(r),h.x=g.x+r.clientLeft,h.y=g.y+r.clientTop}const p=o&&!f&&!i?_k(o,c,!0):Bs(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+p.x,y:n.y*u.y-c.scrollTop*u.y+h.y+p.y}}function e5(t){return Array.from(t.getClientRects())}function t5(t){const e=ti(t),n=bp(t),r=t.ownerDocument.body,s=Cr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Cr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Hw(t);const l=-n.scrollTop;return Ss(r).direction==="rtl"&&(o+=Cr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function n5(t,e){const n=Mr(t),r=ti(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=zw();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const r5=new Set(["absolute","fixed"]);function s5(t,e){const n=Bo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Ys(t)?ql(t):Bs(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function iE(t,e,n){let r;if(e==="viewport")r=n5(t,n);else if(e==="document")r=t5(ti(t));else if(Ts(e))r=s5(e,n);else{const s=wk(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return um(r)}function bk(t,e){const n=za(t);return n===e||!Ts(n)||pc(n)?!1:Ss(n).position==="fixed"||bk(n,e)}function i5(t,e){const n=e.get(t);if(n)return n;let r=yd(t,[],!1).filter(l=>Ts(l)&&Lc(l)!=="body"),s=null;const i=Ss(t).position==="fixed";let o=i?za(t):t;for(;Ts(o)&&!pc(o);){const l=Ss(o),c=Bw(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&r5.has(s.position)||Gd(o)&&!c&&bk(t,o))?r=r.filter(h=>h!==o):s=l,o=za(o)}return e.set(t,r),r}function a5(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?_p(e)?[]:i5(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,h)=>{const f=iE(e,h,s);return u.top=Cr(f.top,u.top),u.right=Ba(f.right,u.right),u.bottom=Ba(f.bottom,u.bottom),u.left=Cr(f.left,u.left),u},iE(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function o5(t){const{width:e,height:n}=xk(t);return{width:e,height:n}}function l5(t,e,n){const r=Ys(e),s=ti(e),i=n==="fixed",o=Bo(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Bs(0);function u(){c.x=Hw(s)}if(r||!r&&!i)if((Lc(e)!=="body"||Gd(s))&&(l=bp(e)),r){const g=Bo(e,!0,i,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else s&&u();i&&!r&&s&&u();const h=s&&!r&&!i?_k(s,l):Bs(0),f=o.left+l.scrollLeft-c.x-h.x,p=o.top+l.scrollTop-c.y-h.y;return{x:f,y:p,width:o.width,height:o.height}}function ly(t){return Ss(t).position==="static"}function aE(t,e){if(!Ys(t)||Ss(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ti(t)===n&&(n=n.ownerDocument.body),n}function Ek(t,e){const n=Mr(t);if(_p(t))return n;if(!Ys(t)){let s=za(t);for(;s&&!pc(s);){if(Ts(s)&&!ly(s))return s;s=za(s)}return n}let r=aE(t,e);for(;r&&WF(r)&&ly(r);)r=aE(r,e);return r&&pc(r)&&ly(r)&&!Bw(r)?n:r||QF(t)||n}const c5=async function(t){const e=this.getOffsetParent||Ek,n=this.getDimensions,r=await n(t.floating);return{reference:l5(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function u5(t){return Ss(t).direction==="rtl"}const d5={convertOffsetParentRelativeRectToViewportRelativeRect:JF,getDocumentElement:ti,getClippingRect:a5,getOffsetParent:Ek,getElementRects:c5,getClientRects:e5,getDimensions:o5,getScale:ql,isElement:Ts,isRTL:u5};function Tk(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function h5(t,e){let n=null,r;const s=ti(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:p,height:g}=u;if(l||e(),!p||!g)return;const T=Kh(f),v=Kh(s.clientWidth-(h+p)),b=Kh(s.clientHeight-(f+g)),_=Kh(h),w={rootMargin:-T+"px "+-v+"px "+-b+"px "+-_+"px",threshold:Cr(0,Ba(1,c))||1};let E=!0;function P(R){const S=R[0].intersectionRatio;if(S!==c){if(!E)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!Tk(u,t.getBoundingClientRect())&&o(),E=!1}try{n=new IntersectionObserver(P,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(P,w)}n.observe(t)}return o(!0),i}function f5(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Ww(t),h=s||i?[...u?yd(u):[],...yd(e)]:[];h.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const f=u&&l?h5(u,n):null;let p=-1,g=null;o&&(g=new ResizeObserver(_=>{let[y]=_;y&&y.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var w;(w=g)==null||w.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let T,v=c?Bo(t):null;c&&b();function b(){const _=Bo(t);v&&!Tk(v,_)&&n(),v=_,T=requestAnimationFrame(b)}return n(),()=>{var _;h.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),f==null||f(),(_=g)==null||_.disconnect(),g=null,c&&cancelAnimationFrame(T)}}const m5=VF,p5=FF,g5=MF,y5=$F,v5=OF,oE=DF,x5=UF,w5=(t,e,n)=>{const r=new Map,s={platform:d5,...n},i={...s.platform,_c:r};return RF(t,e,{...s,platform:i})};var _5=typeof document<"u",b5=function(){},_f=_5?m.useLayoutEffect:b5;function dm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!dm(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!dm(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Sk(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function lE(t,e){const n=Sk(t);return Math.round(e*n)/n}function cy(t){const e=m.useRef(t);return _f(()=>{e.current=t}),e}function E5(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,f]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=m.useState(r);dm(p,r)||g(r);const[T,v]=m.useState(null),[b,_]=m.useState(null),y=m.useCallback(U=>{U!==R.current&&(R.current=U,v(U))},[]),w=m.useCallback(U=>{U!==S.current&&(S.current=U,_(U))},[]),E=i||T,P=o||b,R=m.useRef(null),S=m.useRef(null),N=m.useRef(h),k=c!=null,A=cy(c),M=cy(s),I=cy(u),j=m.useCallback(()=>{if(!R.current||!S.current)return;const U={placement:e,strategy:n,middleware:p};M.current&&(U.platform=M.current),w5(R.current,S.current,U).then(F=>{const $={...F,isPositioned:I.current!==!1};V.current&&!dm(N.current,$)&&(N.current=$,tl.flushSync(()=>{f($)}))})},[p,e,n,M,I]);_f(()=>{u===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[u]);const V=m.useRef(!1);_f(()=>(V.current=!0,()=>{V.current=!1}),[]),_f(()=>{if(E&&(R.current=E),P&&(S.current=P),E&&P){if(A.current)return A.current(E,P,j);j()}},[E,P,j,A,k]);const W=m.useMemo(()=>({reference:R,floating:S,setReference:y,setFloating:w}),[y,w]),H=m.useMemo(()=>({reference:E,floating:P}),[E,P]),Y=m.useMemo(()=>{const U={position:n,left:0,top:0};if(!H.floating)return U;const F=lE(H.floating,h.x),$=lE(H.floating,h.y);return l?{...U,transform:"translate("+F+"px, "+$+"px)",...Sk(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:$}},[n,l,H.floating,h.x,h.y]);return m.useMemo(()=>({...h,update:j,refs:W,elements:H,floatingStyles:Y}),[h,j,W,H,Y])}const T5=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?oE({element:r.current,padding:s}).fn(n):{}:r?oE({element:r,padding:s}).fn(n):{}}}},S5=(t,e)=>({...m5(t),options:[t,e]}),N5=(t,e)=>({...p5(t),options:[t,e]}),C5=(t,e)=>({...x5(t),options:[t,e]}),j5=(t,e)=>({...g5(t),options:[t,e]}),k5=(t,e)=>({...y5(t),options:[t,e]}),I5=(t,e)=>({...v5(t),options:[t,e]}),A5=(t,e)=>({...T5(t),options:[t,e]});var P5="Arrow",Nk=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return a.jsx(Ve.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});Nk.displayName=P5;var R5=Nk;function qw(t){const[e,n]=m.useState(void 0);return Mn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Gw="Popper",[Ck,Ep]=ei(Gw),[D5,jk]=Ck(Gw),kk=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return a.jsx(D5,{scope:e,anchor:r,onAnchorChange:s,children:n})};kk.displayName=Gw;var Ik="PopperAnchor",Ak=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=jk(Ik,n),o=m.useRef(null),l=Et(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:a.jsx(Ve.div,{...s,ref:l})});Ak.displayName=Ik;var Kw="PopperContent",[M5,O5]=Ck(Kw),Pk=m.forwardRef((t,e)=>{var le,We,st,Me,Oe,De;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:T,...v}=t,b=jk(Kw,n),[_,y]=m.useState(null),w=Et(e,Tt=>y(Tt)),[E,P]=m.useState(null),R=qw(E),S=(R==null?void 0:R.width)??0,N=(R==null?void 0:R.height)??0,k=r+(i!=="center"?"-"+i:""),A=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},M=Array.isArray(u)?u:[u],I=M.length>0,j={padding:A,boundary:M.filter(V5),altBoundary:I},{refs:V,floatingStyles:W,placement:H,isPositioned:Y,middlewareData:U}=E5({strategy:"fixed",placement:k,whileElementsMounted:(...Tt)=>f5(...Tt,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[S5({mainAxis:s+N,alignmentAxis:o}),c&&N5({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?C5():void 0,...j}),c&&j5({...j}),k5({...j,apply:({elements:Tt,rects:ge,availableWidth:be,availableHeight:it})=>{const{width:ht,height:At}=ge.reference,Qe=Tt.floating.style;Qe.setProperty("--radix-popper-available-width",`${be}px`),Qe.setProperty("--radix-popper-available-height",`${it}px`),Qe.setProperty("--radix-popper-anchor-width",`${ht}px`),Qe.setProperty("--radix-popper-anchor-height",`${At}px`)}}),E&&A5({element:E,padding:l}),F5({arrowWidth:S,arrowHeight:N}),p&&I5({strategy:"referenceHidden",...j})]}),[F,$]=Mk(H),G=es(T);Mn(()=>{Y&&(G==null||G())},[Y,G]);const oe=(le=U.arrow)==null?void 0:le.x,de=(We=U.arrow)==null?void 0:We.y,xe=((st=U.arrow)==null?void 0:st.centerOffset)!==0,[Ne,lt]=m.useState();return Mn(()=>{_&&lt(window.getComputedStyle(_).zIndex)},[_]),a.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:Y?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ne,"--radix-popper-transform-origin":[(Me=U.transformOrigin)==null?void 0:Me.x,(Oe=U.transformOrigin)==null?void 0:Oe.y].join(" "),...((De=U.hide)==null?void 0:De.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(M5,{scope:n,placedSide:F,onArrowChange:P,arrowX:oe,arrowY:de,shouldHideArrow:xe,children:a.jsx(Ve.div,{"data-side":F,"data-align":$,...v,ref:w,style:{...v.style,animation:Y?void 0:"none"}})})})});Pk.displayName=Kw;var Rk="PopperArrow",L5={top:"bottom",right:"left",bottom:"top",left:"right"},Dk=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=O5(Rk,r),o=L5[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(R5,{...s,ref:n,style:{...s.style,display:"block"}})})});Dk.displayName=Rk;function V5(t){return t!==null}var F5=t=>({name:"transformOrigin",options:t,fn(e){var b,_,y;const{placement:n,rects:r,middlewareData:s}=e,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=Mk(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((_=s.arrow)==null?void 0:_.x)??0)+l/2,g=(((y=s.arrow)==null?void 0:y.y)??0)+c/2;let T="",v="";return u==="bottom"?(T=o?f:`${p}px`,v=`${-c}px`):u==="top"?(T=o?f:`${p}px`,v=`${r.floating.height+c}px`):u==="right"?(T=`${-c}px`,v=o?f:`${g}px`):u==="left"&&(T=`${r.floating.width+c}px`,v=o?f:`${g}px`),{data:{x:T,y:v}}}});function Mk(t){const[e,n="center"]=t.split("-");return[e,n]}var Ok=kk,Lk=Ak,Vk=Pk,Fk=Dk,[Tp,yY]=ei("Tooltip",[Ep]),Sp=Ep(),Uk="TooltipProvider",U5=700,Fv="tooltip.open",[$5,Qw]=Tp(Uk),$k=t=>{const{__scopeTooltip:e,delayDuration:n=U5,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx($5,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};$k.displayName=Uk;var vd="Tooltip",[B5,Np]=Tp(vd),Bk=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=t,c=Qw(vd,t.__scopeTooltip),u=Sp(e),[h,f]=m.useState(null),p=Ei(),g=m.useRef(0),T=o??c.disableHoverableContent,v=l??c.delayDuration,b=m.useRef(!1),[_,y]=Ii({prop:r,defaultProp:s??!1,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(Fv))):c.onClose(),i==null||i(S)},caller:vd}),w=m.useMemo(()=>_?b.current?"delayed-open":"instant-open":"closed",[_]),E=m.useCallback(()=>{window.clearTimeout(g.current),g.current=0,b.current=!1,y(!0)},[y]),P=m.useCallback(()=>{window.clearTimeout(g.current),g.current=0,y(!1)},[y]),R=m.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{b.current=!0,y(!0),g.current=0},v)},[v,y]);return m.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),a.jsx(Ok,{...u,children:a.jsx(B5,{scope:e,contentId:p,open:_,stateAttribute:w,trigger:h,onTriggerChange:f,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayedRef.current?R():E()},[c.isOpenDelayedRef,R,E]),onTriggerLeave:m.useCallback(()=>{T?P():(window.clearTimeout(g.current),g.current=0)},[P,T]),onOpen:E,onClose:P,disableHoverableContent:T,children:n})})};Bk.displayName=vd;var Uv="TooltipTrigger",zk=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Np(Uv,n),i=Qw(Uv,n),o=Sp(n),l=m.useRef(null),c=Et(e,l,s.onTriggerChange),u=m.useRef(!1),h=m.useRef(!1),f=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(Lk,{asChild:!0,...o,children:a.jsx(Ve.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:je(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:je(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:je(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:je(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:je(t.onBlur,s.onClose),onClick:je(t.onClick,s.onClose)})})});zk.displayName=Uv;var z5="TooltipPortal",[vY,W5]=Tp(z5,{forceMount:void 0}),gc="TooltipContent",Wk=m.forwardRef((t,e)=>{const n=W5(gc,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Np(gc,t.__scopeTooltip);return a.jsx(so,{present:r||o.open,children:o.disableHoverableContent?a.jsx(Hk,{side:s,...i,ref:e}):a.jsx(H5,{side:s,...i,ref:e})})}),H5=m.forwardRef((t,e)=>{const n=Np(gc,t.__scopeTooltip),r=Qw(gc,t.__scopeTooltip),s=m.useRef(null),i=Et(e,s),[o,l]=m.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,p=m.useCallback(()=>{l(null),f(!1)},[f]),g=m.useCallback((T,v)=>{const b=T.currentTarget,_={x:T.clientX,y:T.clientY},y=Y5(_,b.getBoundingClientRect()),w=X5(_,y),E=Z5(v.getBoundingClientRect()),P=e6([...w,...E]);l(P),f(!0)},[f]);return m.useEffect(()=>()=>p(),[p]),m.useEffect(()=>{if(c&&h){const T=b=>g(b,h),v=b=>g(b,c);return c.addEventListener("pointerleave",T),h.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",T),h.removeEventListener("pointerleave",v)}}},[c,h,g,p]),m.useEffect(()=>{if(o){const T=v=>{const b=v.target,_={x:v.clientX,y:v.clientY},y=(c==null?void 0:c.contains(b))||(h==null?void 0:h.contains(b)),w=!J5(_,o);y?p():w&&(p(),u())};return document.addEventListener("pointermove",T),()=>document.removeEventListener("pointermove",T)}},[c,h,o,u,p]),a.jsx(Hk,{...t,ref:i})}),[q5,G5]=Tp(vd,{isInside:!1}),K5=K4("TooltipContent"),Hk=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=Np(gc,n),u=Sp(n),{onClose:h}=c;return m.useEffect(()=>(document.addEventListener(Fv,h),()=>document.removeEventListener(Fv,h)),[h]),m.useEffect(()=>{if(c.trigger){const f=p=>{const g=p.target;g!=null&&g.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),a.jsx(Hd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:a.jsxs(Vk,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(K5,{children:r}),a.jsx(q5,{scope:n,isInside:!0,children:a.jsx(gL,{id:c.contentId,role:"tooltip",children:s||r})})]})})});Wk.displayName=gc;var qk="TooltipArrow",Q5=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Sp(n);return G5(qk,n).isInside?null:a.jsx(Fk,{...s,...r,ref:e})});Q5.displayName=qk;function Y5(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function X5(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Z5(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function J5(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],c=e[o],u=l.x,h=l.y,f=c.x,p=c.y;h>r!=p>r&&n<(f-u)*(r-h)/(p-h)+u&&(s=!s)}return s}function e6(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),t6(e)}function t6(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var n6=$k,r6=Bk,s6=zk,Gk=Wk;const Yw=n6,Kk=r6,Qk=s6,Xw=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(Gk,{ref:r,sideOffset:e,className:ie("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));Xw.displayName=Gk.displayName;var Cp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},jp=typeof window>"u"||"Deno"in globalThis;function us(){}function i6(t,e){return typeof t=="function"?t(e):t}function a6(t){return typeof t=="number"&&t>=0&&t!==1/0}function o6(t,e){return Math.max(t+(e||0)-Date.now(),0)}function $v(t,e){return typeof t=="function"?t(e):t}function l6(t,e){return typeof t=="function"?t(e):t}function cE(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==Zw(o,e.options))return!1}else if(!wd(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function uE(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(xd(e.options.mutationKey)!==xd(i))return!1}else if(!wd(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Zw(t,e){return((e==null?void 0:e.queryKeyHashFn)||xd)(t)}function xd(t){return JSON.stringify(t,(e,n)=>Bv(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function wd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>wd(t[n],e[n])):!1}function Yk(t,e){if(t===e)return t;const n=dE(t)&&dE(e);if(n||Bv(t)&&Bv(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,l=n?[]:{},c=new Set(r);let u=0;for(let h=0;h<o;h++){const f=n?h:i[h];(!n&&c.has(f)||n)&&t[f]===void 0&&e[f]===void 0?(l[f]=void 0,u++):(l[f]=Yk(t[f],e[f]),l[f]===t[f]&&t[f]!==void 0&&u++)}return s===o&&u===s?t:l}return e}function dE(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Bv(t){if(!hE(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!hE(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function hE(t){return Object.prototype.toString.call(t)==="[object Object]"}function c6(t){return new Promise(e=>{setTimeout(e,t)})}function u6(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Yk(t,e):e}function d6(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function h6(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Jw=Symbol();function Xk(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Jw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Co,fa,Jl,QS,f6=(QS=class extends Cp{constructor(){super();mt(this,Co);mt(this,fa);mt(this,Jl);He(this,Jl,e=>{if(!jp&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){ee(this,fa)||this.setEventListener(ee(this,Jl))}onUnsubscribe(){var e;this.hasListeners()||((e=ee(this,fa))==null||e.call(this),He(this,fa,void 0))}setEventListener(e){var n;He(this,Jl,e),(n=ee(this,fa))==null||n.call(this),He(this,fa,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ee(this,Co)!==e&&(He(this,Co,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof ee(this,Co)=="boolean"?ee(this,Co):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Co=new WeakMap,fa=new WeakMap,Jl=new WeakMap,QS),Zk=new f6,ec,ma,tc,YS,m6=(YS=class extends Cp{constructor(){super();mt(this,ec,!0);mt(this,ma);mt(this,tc);He(this,tc,e=>{if(!jp&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){ee(this,ma)||this.setEventListener(ee(this,tc))}onUnsubscribe(){var e;this.hasListeners()||((e=ee(this,ma))==null||e.call(this),He(this,ma,void 0))}setEventListener(e){var n;He(this,tc,e),(n=ee(this,ma))==null||n.call(this),He(this,ma,e(this.setOnline.bind(this)))}setOnline(e){ee(this,ec)!==e&&(He(this,ec,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ee(this,ec)}},ec=new WeakMap,ma=new WeakMap,tc=new WeakMap,YS),hm=new m6;function p6(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function g6(t){return Math.min(1e3*2**t,3e4)}function Jk(t){return(t??"online")==="online"?hm.isOnline():!0}var eI=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function uy(t){return t instanceof eI}function tI(t){let e=!1,n=0,r=!1,s;const i=p6(),o=v=>{var b;r||(p(new eI(v)),(b=t.abort)==null||b.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>Zk.isFocused()&&(t.networkMode==="always"||hm.isOnline())&&t.canRun(),h=()=>Jk(t.networkMode)&&t.canRun(),f=v=>{var b;r||(r=!0,(b=t.onSuccess)==null||b.call(t,v),s==null||s(),i.resolve(v))},p=v=>{var b;r||(r=!0,(b=t.onError)==null||b.call(t,v),s==null||s(),i.reject(v))},g=()=>new Promise(v=>{var b;s=_=>{(r||u())&&v(_)},(b=t.onPause)==null||b.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),T=()=>{if(r)return;let v;const b=n===0?t.initialPromise:void 0;try{v=b??t.fn()}catch(_){v=Promise.reject(_)}Promise.resolve(v).then(f).catch(_=>{var R;if(r)return;const y=t.retry??(jp?0:3),w=t.retryDelay??g6,E=typeof w=="function"?w(n,_):w,P=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,_);if(e||!P){p(_);return}n++,(R=t.onFail)==null||R.call(t,n,_),c6(E).then(()=>u()?void 0:g()).then(()=>{e?p(_):T()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?T():g().then(T),i)}}var y6=t=>setTimeout(t,0);function v6(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=y6;const i=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var rr=v6(),jo,XS,nI=(XS=class{constructor(){mt(this,jo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),a6(this.gcTime)&&He(this,jo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(jp?1/0:5*60*1e3))}clearGcTimeout(){ee(this,jo)&&(clearTimeout(ee(this,jo)),He(this,jo,void 0))}},jo=new WeakMap,XS),nc,ko,$r,Io,Hn,Vd,Ao,ds,di,ZS,x6=(ZS=class extends nI{constructor(n){super();mt(this,ds);mt(this,nc);mt(this,ko);mt(this,$r);mt(this,Io);mt(this,Hn);mt(this,Vd);mt(this,Ao);He(this,Ao,!1),He(this,Vd,n.defaultOptions),this.setOptions(n.options),this.observers=[],He(this,Io,n.client),He(this,$r,ee(this,Io).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,He(this,nc,_6(this.options)),this.state=n.state??ee(this,nc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=ee(this,Hn))==null?void 0:n.promise}setOptions(n){this.options={...ee(this,Vd),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ee(this,$r).remove(this)}setData(n,r){const s=u6(this.state.data,n,this.options);return $n(this,ds,di).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){$n(this,ds,di).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=ee(this,Hn))==null?void 0:s.promise;return(i=ee(this,Hn))==null||i.cancel(n),r?r.then(us).catch(us):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ee(this,nc))}isActive(){return this.observers.some(n=>l6(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Jw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>$v(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!o6(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=ee(this,Hn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=ee(this,Hn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),ee(this,$r).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(ee(this,Hn)&&(ee(this,Ao)?ee(this,Hn).cancel({revert:!0}):ee(this,Hn).cancelRetry()),this.scheduleGc()),ee(this,$r).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||$n(this,ds,di).call(this,{type:"invalidate"})}fetch(n,r){var h,f,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ee(this,Hn))return ee(this,Hn).continueRetry(),ee(this,Hn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const g=this.observers.find(T=>T.options.queryFn);g&&this.setOptions(g.options)}const s=new AbortController,i=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(He(this,Ao,!0),s.signal)})},o=()=>{const g=Xk(this.options,r),v=(()=>{const b={client:ee(this,Io),queryKey:this.queryKey,meta:this.meta};return i(b),b})();return He(this,Ao,!1),this.options.persister?this.options.persister(g,v,this):g(v)},c=(()=>{const g={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:ee(this,Io),state:this.state,fetchFn:o};return i(g),g})();(h=this.options.behavior)==null||h.onFetch(c,this),He(this,ko,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=c.fetchOptions)==null?void 0:f.meta))&&$n(this,ds,di).call(this,{type:"fetch",meta:(p=c.fetchOptions)==null?void 0:p.meta});const u=g=>{var T,v,b,_;uy(g)&&g.silent||$n(this,ds,di).call(this,{type:"error",error:g}),uy(g)||((v=(T=ee(this,$r).config).onError)==null||v.call(T,g,this),(_=(b=ee(this,$r).config).onSettled)==null||_.call(b,this.state.data,g,this)),this.scheduleGc()};return He(this,Hn,tI({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:s.abort.bind(s),onSuccess:g=>{var T,v,b,_;if(g===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(y){u(y);return}(v=(T=ee(this,$r).config).onSuccess)==null||v.call(T,g,this),(_=(b=ee(this,$r).config).onSettled)==null||_.call(b,g,this.state.error,this),this.scheduleGc()},onError:u,onFail:(g,T)=>{$n(this,ds,di).call(this,{type:"failed",failureCount:g,error:T})},onPause:()=>{$n(this,ds,di).call(this,{type:"pause"})},onContinue:()=>{$n(this,ds,di).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),ee(this,Hn).start()}},nc=new WeakMap,ko=new WeakMap,$r=new WeakMap,Io=new WeakMap,Hn=new WeakMap,Vd=new WeakMap,Ao=new WeakMap,ds=new WeakSet,di=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...w6(s.data,this.options),fetchMeta:n.meta??null};case"success":return He(this,ko,void 0),{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return uy(i)&&i.revert&&ee(this,ko)?{...ee(this,ko),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),rr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),ee(this,$r).notify({query:this,type:"updated",action:n})})},ZS);function w6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Jk(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function _6(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Rs,JS,b6=(JS=class extends Cp{constructor(e={}){super();mt(this,Rs);this.config=e,He(this,Rs,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Zw(s,n);let o=this.get(i);return o||(o=new x6({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){ee(this,Rs).has(e.queryHash)||(ee(this,Rs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=ee(this,Rs).get(e.queryHash);n&&(e.destroy(),n===e&&ee(this,Rs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){rr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ee(this,Rs).get(e)}getAll(){return[...ee(this,Rs).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>cE(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>cE(e,r)):n}notify(e){rr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){rr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){rr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Rs=new WeakMap,JS),Ds,er,Po,Ms,ra,eN,E6=(eN=class extends nI{constructor(n){super();mt(this,Ms);mt(this,Ds);mt(this,er);mt(this,Po);this.mutationId=n.mutationId,He(this,er,n.mutationCache),He(this,Ds,[]),this.state=n.state||T6(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){ee(this,Ds).includes(n)||(ee(this,Ds).push(n),this.clearGcTimeout(),ee(this,er).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){He(this,Ds,ee(this,Ds).filter(r=>r!==n)),this.scheduleGc(),ee(this,er).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){ee(this,Ds).length||(this.state.status==="pending"?this.scheduleGc():ee(this,er).remove(this))}continue(){var n;return((n=ee(this,Po))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,l,c,u,h,f,p,g,T,v,b,_,y,w,E,P,R,S,N,k;const r=()=>{$n(this,Ms,ra).call(this,{type:"continue"})};He(this,Po,tI({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(A,M)=>{$n(this,Ms,ra).call(this,{type:"failed",failureCount:A,error:M})},onPause:()=>{$n(this,Ms,ra).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ee(this,er).canRun(this)}));const s=this.state.status==="pending",i=!ee(this,Po).canStart();try{if(s)r();else{$n(this,Ms,ra).call(this,{type:"pending",variables:n,isPaused:i}),await((l=(o=ee(this,er).config).onMutate)==null?void 0:l.call(o,n,this));const M=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,n));M!==this.state.context&&$n(this,Ms,ra).call(this,{type:"pending",context:M,variables:n,isPaused:i})}const A=await ee(this,Po).start();return await((f=(h=ee(this,er).config).onSuccess)==null?void 0:f.call(h,A,n,this.state.context,this)),await((g=(p=this.options).onSuccess)==null?void 0:g.call(p,A,n,this.state.context)),await((v=(T=ee(this,er).config).onSettled)==null?void 0:v.call(T,A,null,this.state.variables,this.state.context,this)),await((_=(b=this.options).onSettled)==null?void 0:_.call(b,A,null,n,this.state.context)),$n(this,Ms,ra).call(this,{type:"success",data:A}),A}catch(A){try{throw await((w=(y=ee(this,er).config).onError)==null?void 0:w.call(y,A,n,this.state.context,this)),await((P=(E=this.options).onError)==null?void 0:P.call(E,A,n,this.state.context)),await((S=(R=ee(this,er).config).onSettled)==null?void 0:S.call(R,void 0,A,this.state.variables,this.state.context,this)),await((k=(N=this.options).onSettled)==null?void 0:k.call(N,void 0,A,n,this.state.context)),A}finally{$n(this,Ms,ra).call(this,{type:"error",error:A})}}finally{ee(this,er).runNext(this)}}},Ds=new WeakMap,er=new WeakMap,Po=new WeakMap,Ms=new WeakSet,ra=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),rr.batch(()=>{ee(this,Ds).forEach(s=>{s.onMutationUpdate(n)}),ee(this,er).notify({mutation:this,type:"updated",action:n})})},eN);function T6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var pi,hs,Fd,tN,S6=(tN=class extends Cp{constructor(e={}){super();mt(this,pi);mt(this,hs);mt(this,Fd);this.config=e,He(this,pi,new Set),He(this,hs,new Map),He(this,Fd,0)}build(e,n,r){const s=new E6({mutationCache:this,mutationId:++Ch(this,Fd)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){ee(this,pi).add(e);const n=Qh(e);if(typeof n=="string"){const r=ee(this,hs).get(n);r?r.push(e):ee(this,hs).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ee(this,pi).delete(e)){const n=Qh(e);if(typeof n=="string"){const r=ee(this,hs).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&ee(this,hs).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Qh(e);if(typeof n=="string"){const r=ee(this,hs).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Qh(e);if(typeof n=="string"){const s=(r=ee(this,hs).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){rr.batch(()=>{ee(this,pi).forEach(e=>{this.notify({type:"removed",mutation:e})}),ee(this,pi).clear(),ee(this,hs).clear()})}getAll(){return Array.from(ee(this,pi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>uE(n,r))}findAll(e={}){return this.getAll().filter(n=>uE(e,n))}notify(e){rr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return rr.batch(()=>Promise.all(e.map(n=>n.continue().catch(us))))}},pi=new WeakMap,hs=new WeakMap,Fd=new WeakMap,tN);function Qh(t){var e;return(e=t.options.scope)==null?void 0:e.id}function fE(t){return{onFetch:(e,n)=>{var h,f,p,g,T;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((T=e.state.data)==null?void 0:T.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const b=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},_=Xk(e.options,e.fetchOptions),y=async(w,E,P)=>{if(v)return Promise.reject();if(E==null&&w.pages.length)return Promise.resolve(w);const S=(()=>{const M={client:e.client,queryKey:e.queryKey,pageParam:E,direction:P?"backward":"forward",meta:e.options.meta};return b(M),M})(),N=await _(S),{maxPages:k}=e.options,A=P?h6:d6;return{pages:A(w.pages,N,k),pageParams:A(w.pageParams,E,k)}};if(s&&i.length){const w=s==="backward",E=w?N6:mE,P={pages:i,pageParams:o},R=E(r,P);l=await y(P,R,w)}else{const w=t??i.length;do{const E=c===0?o[0]??r.initialPageParam:mE(r,l);if(c>0&&E==null)break;l=await y(l,E),c++}while(c<w)}return l};e.options.persister?e.fetchFn=()=>{var v,b;return(b=(v=e.options).persister)==null?void 0:b.call(v,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function mE(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function N6(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var tn,pa,ga,rc,sc,ya,ic,ac,nN,C6=(nN=class{constructor(t={}){mt(this,tn);mt(this,pa);mt(this,ga);mt(this,rc);mt(this,sc);mt(this,ya);mt(this,ic);mt(this,ac);He(this,tn,t.queryCache||new b6),He(this,pa,t.mutationCache||new S6),He(this,ga,t.defaultOptions||{}),He(this,rc,new Map),He(this,sc,new Map),He(this,ya,0)}mount(){Ch(this,ya)._++,ee(this,ya)===1&&(He(this,ic,Zk.subscribe(async t=>{t&&(await this.resumePausedMutations(),ee(this,tn).onFocus())})),He(this,ac,hm.subscribe(async t=>{t&&(await this.resumePausedMutations(),ee(this,tn).onOnline())})))}unmount(){var t,e;Ch(this,ya)._--,ee(this,ya)===0&&((t=ee(this,ic))==null||t.call(this),He(this,ic,void 0),(e=ee(this,ac))==null||e.call(this),He(this,ac,void 0))}isFetching(t){return ee(this,tn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ee(this,pa).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ee(this,tn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=ee(this,tn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime($v(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return ee(this,tn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=ee(this,tn).get(r.queryHash),i=s==null?void 0:s.state.data,o=i6(e,i);if(o!==void 0)return ee(this,tn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return rr.batch(()=>ee(this,tn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ee(this,tn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=ee(this,tn);rr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=ee(this,tn);return rr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=rr.batch(()=>ee(this,tn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(us).catch(us)}invalidateQueries(t,e={}){return rr.batch(()=>(ee(this,tn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=rr.batch(()=>ee(this,tn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(us)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(us)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=ee(this,tn).build(this,e);return n.isStaleByTime($v(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(us).catch(us)}fetchInfiniteQuery(t){return t.behavior=fE(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(us).catch(us)}ensureInfiniteQueryData(t){return t.behavior=fE(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return hm.isOnline()?ee(this,pa).resumePausedMutations():Promise.resolve()}getQueryCache(){return ee(this,tn)}getMutationCache(){return ee(this,pa)}getDefaultOptions(){return ee(this,ga)}setDefaultOptions(t){He(this,ga,t)}setQueryDefaults(t,e){ee(this,rc).set(xd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...ee(this,rc).values()],n={};return e.forEach(r=>{wd(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){ee(this,sc).set(xd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...ee(this,sc).values()],n={};return e.forEach(r=>{wd(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...ee(this,ga).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Zw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Jw&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ee(this,ga).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ee(this,tn).clear(),ee(this,pa).clear()}},tn=new WeakMap,pa=new WeakMap,ga=new WeakMap,rc=new WeakMap,sc=new WeakMap,ya=new WeakMap,ic=new WeakMap,ac=new WeakMap,nN),j6=m.createContext(void 0),k6=({client:t,children:e})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(j6.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_d.apply(this,arguments)}var wa;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(wa||(wa={}));const pE="popstate";function I6(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return zv("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:fm(s)}return P6(e,n,null,t)}function Xt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rI(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function A6(){return Math.random().toString(36).substr(2,8)}function gE(t,e){return{usr:t.state,key:t.key,idx:e}}function zv(t,e,n,r){return n===void 0&&(n=null),_d({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vc(e):e,{state:n,key:e&&e.key||r||A6()})}function fm(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Vc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function P6(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=wa.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(_d({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){l=wa.Pop;let b=h(),_=b==null?null:b-u;u=b,c&&c({action:l,location:v.location,delta:_})}function p(b,_){l=wa.Push;let y=zv(v.location,b,_);u=h()+1;let w=gE(y,u),E=v.createHref(y);try{o.pushState(w,"",E)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(E)}i&&c&&c({action:l,location:v.location,delta:1})}function g(b,_){l=wa.Replace;let y=zv(v.location,b,_);u=h();let w=gE(y,u),E=v.createHref(y);o.replaceState(w,"",E),i&&c&&c({action:l,location:v.location,delta:0})}function T(b){let _=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof b=="string"?b:fm(b);return y=y.replace(/ $/,"%20"),Xt(_,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,_)}let v={get action(){return l},get location(){return t(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(pE,f),c=b,()=>{s.removeEventListener(pE,f),c=null}},createHref(b){return e(s,b)},createURL:T,encodeLocation(b){let _=T(b);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:g,go(b){return o.go(b)}};return v}var yE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(yE||(yE={}));function R6(t,e,n){return n===void 0&&(n="/"),D6(t,e,n,!1)}function D6(t,e,n,r){let s=typeof e=="string"?Vc(e):e,i=yc(s.pathname||"/",n);if(i==null)return null;let o=sI(t);M6(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=q6(i);l=W6(o[c],u,r)}return l}function sI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Xt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Aa([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(Xt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),sI(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:B6(u,i.index),routesMeta:h})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of iI(i.path))s(i,o,c)}),e}function iI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=iI(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function M6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:z6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const O6=/^:[\w-]+$/,L6=3,V6=2,F6=1,U6=10,$6=-2,vE=t=>t==="*";function B6(t,e){let n=t.split("/"),r=n.length;return n.some(vE)&&(r+=$6),e&&(r+=V6),n.filter(s=>!vE(s)).reduce((s,i)=>s+(O6.test(i)?L6:i===""?F6:U6),r)}function z6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function W6(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=mm({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),p=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=mm({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Aa([i,f.pathname]),pathnameBase:Y6(Aa([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Aa([i,f.pathnameBase]))}return o}function mm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=H6(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let v=l[f]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const T=l[f];return g&&!T?u[p]=void 0:u[p]=(T||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function H6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),rI(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function q6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rI(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function yc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function G6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Vc(t):t;return{pathname:n?n.startsWith("/")?n:K6(n,e):e,search:X6(r),hash:Z6(s)}}function K6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Q6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function e0(t,e){let n=Q6(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function t0(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Vc(t):(s=_d({},t),Xt(!s.pathname||!s.pathname.includes("?"),dy("?","pathname","search",s)),Xt(!s.pathname||!s.pathname.includes("#"),dy("#","pathname","hash",s)),Xt(!s.search||!s.search.includes("#"),dy("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}l=f>=0?e[f]:"/"}let c=G6(s,l),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Aa=t=>t.join("/").replace(/\/\/+/g,"/"),Y6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),X6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Z6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function J6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const aI=["post","put","patch","delete"];new Set(aI);const e3=["get",...aI];new Set(e3);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bd(){return bd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bd.apply(this,arguments)}const kp=m.createContext(null),oI=m.createContext(null),$i=m.createContext(null),Ip=m.createContext(null),io=m.createContext({outlet:null,matches:[],isDataRoute:!1}),lI=m.createContext(null);function t3(t,e){let{relative:n}=e===void 0?{}:e;Fc()||Xt(!1);let{basename:r,navigator:s}=m.useContext($i),{hash:i,pathname:o,search:l}=Ap(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Aa([r,o])),s.createHref({pathname:c,search:l,hash:i})}function Fc(){return m.useContext(Ip)!=null}function ni(){return Fc()||Xt(!1),m.useContext(Ip).location}function cI(t){m.useContext($i).static||m.useLayoutEffect(t)}function Uc(){let{isDataRoute:t}=m.useContext(io);return t?m3():n3()}function n3(){Fc()||Xt(!1);let t=m.useContext(kp),{basename:e,future:n,navigator:r}=m.useContext($i),{matches:s}=m.useContext(io),{pathname:i}=ni(),o=JSON.stringify(e0(s,n.v7_relativeSplatPath)),l=m.useRef(!1);return cI(()=>{l.current=!0}),m.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=t0(u,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Aa([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,i,t])}function Ap(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=m.useContext($i),{matches:s}=m.useContext(io),{pathname:i}=ni(),o=JSON.stringify(e0(s,r.v7_relativeSplatPath));return m.useMemo(()=>t0(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function r3(t,e){return s3(t,e)}function s3(t,e,n,r){Fc()||Xt(!1);let{navigator:s}=m.useContext($i),{matches:i}=m.useContext(io),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=ni(),h;if(e){var f;let b=typeof e=="string"?Vc(e):e;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Xt(!1),h=b}else h=u;let p=h.pathname||"/",g=p;if(c!=="/"){let b=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let T=R6(t,{pathname:g}),v=c3(T&&T.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Aa([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Aa([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return e&&v?m.createElement(Ip.Provider,{value:{location:bd({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:wa.Pop}},v):v}function i3(){let t=f3(),e=J6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},e),n?m.createElement("pre",{style:s},n):null,null)}const a3=m.createElement(i3,null);class o3 extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?m.createElement(io.Provider,{value:this.props.routeContext},m.createElement(lI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function l3(t){let{routeContext:e,match:n,children:r}=t,s=m.useContext(kp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(io.Provider,{value:e},r)}function c3(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||Xt(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:p,errors:g}=n,T=f.route.loader&&p[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||T){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let g,T=!1,v=null,b=null;n&&(g=l&&f.route.id?l[f.route.id]:void 0,v=f.route.errorElement||a3,c&&(u<0&&p===0?(T=!0,b=null):u===p&&(T=!0,b=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),y=()=>{let w;return g?w=v:T?w=b:f.route.Component?w=m.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=h,m.createElement(l3,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:w})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?m.createElement(o3,{location:n.location,revalidation:n.revalidation,component:v,error:g,children:y(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):y()},null)}var uI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(uI||{}),pm=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(pm||{});function u3(t){let e=m.useContext(kp);return e||Xt(!1),e}function d3(t){let e=m.useContext(oI);return e||Xt(!1),e}function h3(t){let e=m.useContext(io);return e||Xt(!1),e}function dI(t){let e=h3(),n=e.matches[e.matches.length-1];return n.route.id||Xt(!1),n.route.id}function f3(){var t;let e=m.useContext(lI),n=d3(pm.UseRouteError),r=dI(pm.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function m3(){let{router:t}=u3(uI.UseNavigateStable),e=dI(pm.UseNavigateStable),n=m.useRef(!1);return cI(()=>{n.current=!0}),m.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,bd({fromRouteId:e},i)))},[t,e])}function p3(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Tr(t){let{to:e,replace:n,state:r,relative:s}=t;Fc()||Xt(!1);let{future:i,static:o}=m.useContext($i),{matches:l}=m.useContext(io),{pathname:c}=ni(),u=Uc(),h=t0(e,e0(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return m.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function kt(t){Xt(!1)}function g3(t){let{basename:e="/",children:n=null,location:r,navigationType:s=wa.Pop,navigator:i,static:o=!1,future:l}=t;Fc()&&Xt(!1);let c=e.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:c,navigator:i,static:o,future:bd({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Vc(r));let{pathname:h="/",search:f="",hash:p="",state:g=null,key:T="default"}=r,v=m.useMemo(()=>{let b=yc(h,c);return b==null?null:{location:{pathname:b,search:f,hash:p,state:g,key:T},navigationType:s}},[c,h,f,p,g,T,s]);return v==null?null:m.createElement($i.Provider,{value:u},m.createElement(Ip.Provider,{children:n,value:v}))}function n0(t){let{children:e,location:n}=t;return r3(Wv(e),n)}new Promise(()=>{});function Wv(t,e){e===void 0&&(e=[]);let n=[];return m.Children.forEach(t,(r,s)=>{if(!m.isValidElement(r))return;let i=[...e,s];if(r.type===m.Fragment){n.push.apply(n,Wv(r.props.children,i));return}r.type!==kt&&Xt(!1),!r.props.index||!r.props.children||Xt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Wv(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gm(){return gm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gm.apply(this,arguments)}function hI(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function y3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function v3(t,e){return t.button===0&&(!e||e==="_self")&&!y3(t)}const x3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],w3=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],_3="6";try{window.__reactRouterVersion=_3}catch{}const b3=m.createContext({isTransitioning:!1}),E3="startTransition",xE=Vx[E3];function T3(t){let{basename:e,children:n,future:r,window:s}=t,i=m.useRef();i.current==null&&(i.current=I6({window:s,v5Compat:!0}));let o=i.current,[l,c]=m.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=m.useCallback(f=>{u&&xE?xE(()=>c(f)):c(f)},[c,u]);return m.useLayoutEffect(()=>o.listen(h),[o,h]),m.useEffect(()=>p3(r),[r]),m.createElement(g3,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const S3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",N3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mt=m.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f}=e,p=hI(e,x3),{basename:g}=m.useContext($i),T,v=!1;if(typeof u=="string"&&N3.test(u)&&(T=u,S3))try{let w=new URL(window.location.href),E=u.startsWith("//")?new URL(w.protocol+u):new URL(u),P=yc(E.pathname,g);E.origin===w.origin&&P!=null?u=P+E.search+E.hash:v=!0}catch{}let b=t3(u,{relative:s}),_=k3(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function y(w){r&&r(w),w.defaultPrevented||_(w)}return m.createElement("a",gm({},p,{href:T||b,onClick:v||i?r:y,ref:n,target:c}))}),C3=m.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:h}=e,f=hI(e,w3),p=Ap(c,{relative:f.relative}),g=ni(),T=m.useContext(oI),{navigator:v,basename:b}=m.useContext($i),_=T!=null&&I3(p)&&u===!0,y=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,w=g.pathname,E=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;s||(w=w.toLowerCase(),E=E?E.toLowerCase():null,y=y.toLowerCase()),E&&b&&(E=yc(E,b)||E);const P=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let R=w===y||!o&&w.startsWith(y)&&w.charAt(P)==="/",S=E!=null&&(E===y||!o&&E.startsWith(y)&&E.charAt(y.length)==="/"),N={isActive:R,isPending:S,isTransitioning:_},k=R?r:void 0,A;typeof i=="function"?A=i(N):A=[i,R?"active":null,S?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(N):l;return m.createElement(Mt,gm({},f,{"aria-current":k,className:A,ref:n,style:M,to:c,viewTransition:u}),typeof h=="function"?h(N):h)});var Hv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Hv||(Hv={}));var wE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(wE||(wE={}));function j3(t){let e=m.useContext(kp);return e||Xt(!1),e}function k3(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=Uc(),u=ni(),h=Ap(t,{relative:o});return m.useCallback(f=>{if(v3(f,n)){f.preventDefault();let p=r!==void 0?r:fm(u)===fm(h);c(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,h,r,s,n,t,i,o,l])}function I3(t,e){e===void 0&&(e={});let n=m.useContext(b3);n==null&&Xt(!1);let{basename:r}=j3(Hv.useViewTransitionState),s=Ap(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=yc(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=yc(n.nextLocation.pathname,r)||n.nextLocation.pathname;return mm(s.pathname,o)!=null||mm(s.pathname,i)!=null}const A3=()=>{};var _E={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},P3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},mI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let p=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):P3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new R3;const p=i<<2|l>>4;if(r.push(p),u!==64){const g=l<<4&240|u>>2;if(r.push(g),f!==64){const T=u<<6&192|f;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class R3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const D3=function(t){const e=fI(t);return mI.encodeByteArray(e,!0)},ym=function(t){return D3(t).replace(/\./g,"")},pI=function(t){try{return mI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=()=>M3().__FIREBASE_DEFAULTS__,L3=()=>{if(typeof process>"u"||typeof _E>"u")return;const t=_E.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},V3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pI(t[1]);return e&&JSON.parse(e)},Pp=()=>{try{return A3()||O3()||L3()||V3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gI=t=>{var e,n;return(n=(e=Pp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},F3=t=>{const e=gI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yI=()=>{var t;return(t=Pp())===null||t===void 0?void 0:t.config},vI=t=>{var e;return(e=Pp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ym(JSON.stringify(n)),ym(JSON.stringify(o)),""].join(".")}const Wu={};function B3(){const t={prod:[],emulator:[]};for(const e of Object.keys(Wu))Wu[e]?t.emulator.push(e):t.prod.push(e);return t}function z3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let bE=!1;function wI(t,e){if(typeof window>"u"||typeof document>"u"||!$c(window.location.host)||Wu[t]===e||Wu[t]||bE)return;Wu[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=B3().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{bE=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=z3(r),g=n("text"),T=document.getElementById(g)||document.createElement("span"),v=n("learnmore"),b=document.getElementById(v)||document.createElement("a"),_=n("preprendIcon"),y=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const w=p.element;l(w),h(b,v);const E=u();c(y,_),w.append(y,T,b,E),document.body.appendChild(w)}i?(T.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function W3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yn())}function H3(){var t;const e=(t=Pp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function q3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function G3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function K3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Q3(){const t=Yn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Y3(){return!H3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X3(){try{return typeof indexedDB=="object"}catch{return!1}}function Z3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3="FirebaseError";class Bi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=J3,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kd.prototype.create)}}class Kd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?eU(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Bi(s,l,r)}}function eU(t,e){return t.replace(tU,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const tU=/\{\$([^}]+)}/g;function nU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Di(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(EE(i)&&EE(o)){if(!Di(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function EE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Nu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Cu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function rU(t,e){const n=new sU(t,e);return n.subscribe.bind(n)}class sU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");iU(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=hy),s.error===void 0&&(s.error=hy),s.complete===void 0&&(s.complete=hy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iU(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class zo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new U3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lU(e))try{this.getOrInitializeService({instanceIdentifier:vo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vo){return this.instances.has(e)}getOptions(e=vo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vo){return this.component?this.component.multipleInstances?e:vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oU(t){return t===vo?void 0:t}function lU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(nt||(nt={}));const uU={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},dU=nt.INFO,hU={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},fU=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=hU[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class r0{constructor(e){this.name=e,this._logLevel=dU,this._logHandler=fU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const mU=(t,e)=>e.some(n=>t instanceof n);let TE,SE;function pU(){return TE||(TE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gU(){return SE||(SE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _I=new WeakMap,qv=new WeakMap,bI=new WeakMap,fy=new WeakMap,s0=new WeakMap;function yU(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Pa(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_I.set(n,t)}).catch(()=>{}),s0.set(e,t),e}function vU(t){if(qv.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});qv.set(t,e)}let Gv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xU(t){Gv=t(Gv)}function wU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(my(this),e,...n);return bI.set(r,e.sort?e.sort():[e]),Pa(r)}:gU().includes(t)?function(...e){return t.apply(my(this),e),Pa(_I.get(this))}:function(...e){return Pa(t.apply(my(this),e))}}function _U(t){return typeof t=="function"?wU(t):(t instanceof IDBTransaction&&vU(t),mU(t,pU())?new Proxy(t,Gv):t)}function Pa(t){if(t instanceof IDBRequest)return yU(t);if(fy.has(t))return fy.get(t);const e=_U(t);return e!==t&&(fy.set(t,e),s0.set(e,t)),e}const my=t=>s0.get(t);function bU(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Pa(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Pa(o.result),c.oldVersion,c.newVersion,Pa(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const EU=["get","getKey","getAll","getAllKeys","count"],TU=["put","add","delete","clear"],py=new Map;function NE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(py.get(e))return py.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=TU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||EU.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return py.set(e,i),i}xU(t=>({...t,get:(e,n,r)=>NE(e,n)||t.get(e,n,r),has:(e,n)=>!!NE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NU(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function NU(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kv="@firebase/app",CE="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new r0("@firebase/app"),CU="@firebase/app-compat",jU="@firebase/analytics-compat",kU="@firebase/analytics",IU="@firebase/app-check-compat",AU="@firebase/app-check",PU="@firebase/auth",RU="@firebase/auth-compat",DU="@firebase/database",MU="@firebase/data-connect",OU="@firebase/database-compat",LU="@firebase/functions",VU="@firebase/functions-compat",FU="@firebase/installations",UU="@firebase/installations-compat",$U="@firebase/messaging",BU="@firebase/messaging-compat",zU="@firebase/performance",WU="@firebase/performance-compat",HU="@firebase/remote-config",qU="@firebase/remote-config-compat",GU="@firebase/storage",KU="@firebase/storage-compat",QU="@firebase/firestore",YU="@firebase/ai",XU="@firebase/firestore-compat",ZU="firebase",JU="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="[DEFAULT]",e9={[Kv]:"fire-core",[CU]:"fire-core-compat",[kU]:"fire-analytics",[jU]:"fire-analytics-compat",[AU]:"fire-app-check",[IU]:"fire-app-check-compat",[PU]:"fire-auth",[RU]:"fire-auth-compat",[DU]:"fire-rtdb",[MU]:"fire-data-connect",[OU]:"fire-rtdb-compat",[LU]:"fire-fn",[VU]:"fire-fn-compat",[FU]:"fire-iid",[UU]:"fire-iid-compat",[$U]:"fire-fcm",[BU]:"fire-fcm-compat",[zU]:"fire-perf",[WU]:"fire-perf-compat",[HU]:"fire-rc",[qU]:"fire-rc-compat",[GU]:"fire-gcs",[KU]:"fire-gcs-compat",[QU]:"fire-fst",[XU]:"fire-fst-compat",[YU]:"fire-vertex","fire-js":"fire-js",[ZU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=new Map,t9=new Map,Yv=new Map;function jE(t,e){try{t.container.addComponent(e)}catch(n){Mi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vc(t){const e=t.name;if(Yv.has(e))return Mi.debug(`There were multiple attempts to register component ${e}.`),!1;Yv.set(e,t);for(const n of vm.values())jE(n,t);for(const n of t9.values())jE(n,t);return!0}function i0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ar(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ra=new Kd("app","Firebase",n9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ra.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=JU;function EI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Qv,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Ra.create("bad-app-name",{appName:String(s)});if(n||(n=yI()),!n)throw Ra.create("no-options");const i=vm.get(s);if(i){if(Di(n,i.options)&&Di(r,i.config))return i;throw Ra.create("duplicate-app",{appName:s})}const o=new cU(s);for(const c of Yv.values())o.addComponent(c);const l=new r9(n,r,o);return vm.set(s,l),l}function TI(t=Qv){const e=vm.get(t);if(!e&&t===Qv&&yI())return EI();if(!e)throw Ra.create("no-app",{appName:t});return e}function Da(t,e,n){var r;let s=(r=e9[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mi.warn(l.join(" "));return}vc(new zo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9="firebase-heartbeat-database",i9=1,Ed="firebase-heartbeat-store";let gy=null;function SI(){return gy||(gy=bU(s9,i9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ed)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ra.create("idb-open",{originalErrorMessage:t.message})})),gy}async function a9(t){try{const n=(await SI()).transaction(Ed),r=await n.objectStore(Ed).get(NI(t));return await n.done,r}catch(e){if(e instanceof Bi)Mi.warn(e.message);else{const n=Ra.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mi.warn(n.message)}}}async function kE(t,e){try{const r=(await SI()).transaction(Ed,"readwrite");await r.objectStore(Ed).put(e,NI(t)),await r.done}catch(n){if(n instanceof Bi)Mi.warn(n.message);else{const r=Ra.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mi.warn(r.message)}}}function NI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9=1024,l9=30;class c9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new d9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=IE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>l9){const o=h9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Mi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=IE(),{heartbeatsToSend:r,unsentEntries:s}=u9(this._heartbeatsCache.heartbeats),i=ym(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Mi.warn(n),""}}}function IE(){return new Date().toISOString().substring(0,10)}function u9(t,e=o9){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),AE(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),AE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class d9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return X3()?Z3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await a9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return kE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return kE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function AE(t){return ym(JSON.stringify({version:2,heartbeats:t})).length}function h9(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9(t){vc(new zo("platform-logger",e=>new SU(e),"PRIVATE")),vc(new zo("heartbeat",e=>new c9(e),"PRIVATE")),Da(Kv,CE,t),Da(Kv,CE,"esm2017"),Da("fire-js","")}f9("");var Ls=function(){return Ls=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ls.apply(this,arguments)};function Yd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function m9(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function CI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const p9=CI,jI=new Kd("auth","Firebase",CI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm=new r0("@firebase/auth");function g9(t,...e){xm.logLevel<=nt.WARN&&xm.warn(`Auth (${Bc}): ${t}`,...e)}function bf(t,...e){xm.logLevel<=nt.ERROR&&xm.error(`Auth (${Bc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t,...e){throw o0(t,...e)}function ws(t,...e){return o0(t,...e)}function a0(t,e,n){const r=Object.assign(Object.assign({},p9()),{[e]:n});return new Kd("auth","Firebase",r).create(e,{appName:t.name})}function Ti(t){return a0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function y9(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ts(t,"argument-error"),a0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function o0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return jI.create(t,...e)}function Ie(t,e,...n){if(!t)throw o0(e,...n)}function wi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bf(e),new Error(e)}function Oi(t,e){t||wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function v9(){return PE()==="http:"||PE()==="https:"}function PE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(v9()||G3()||"connection"in navigator)?navigator.onLine:!0}function w9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Oi(n>e,"Short delay should be less than long delay!"),this.isMobile=W3()||K3()}get(){return x9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t,e){Oi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],E9=new Xd(3e4,6e4);function zi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ri(t,e,n,r,s={}){return II(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Qd(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return q3()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&$c(t.emulatorConfig.host)&&(u.credentials="include"),kI.fetch()(await AI(t,t.config.apiHost,n,l),u)})}async function II(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},_9),e);try{const s=new S9(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Yh(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yh(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Yh(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Yh(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw a0(t,h,u);ts(t,h)}}catch(s){if(s instanceof Bi)throw s;ts(t,"network-request-failed",{message:String(s)})}}async function Zd(t,e,n,r,s={}){const i=await ri(t,e,n,r,s);return"mfaPendingCredential"in i&&ts(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function AI(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?l0(t.config,s):`${t.config.apiScheme}://${s}`;return b9.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function T9(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class S9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ws(this.auth,"network-request-failed")),E9.get())})}}function Yh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ws(t,e,r);return s.customData._tokenResponse=n,s}function RE(t){return t!==void 0&&t.enterprise!==void 0}class N9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return T9(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function C9(t,e){return ri(t,"GET","/v2/recaptchaConfig",zi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j9(t,e){return ri(t,"POST","/v1/accounts:delete",e)}async function wm(t,e){return ri(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function k9(t,e=!1){const n=Vt(t),r=await n.getIdToken(e),s=c0(r);Ie(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Hu(yy(s.auth_time)),issuedAtTime:Hu(yy(s.iat)),expirationTime:Hu(yy(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function yy(t){return Number(t)*1e3}function c0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bf("JWT malformed, contained fewer than 3 sections"),null;try{const s=pI(n);return s?JSON.parse(s):(bf("Failed to decode base64 JWT payload"),null)}catch(s){return bf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function DE(t){const e=c0(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Bi&&I9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function I9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hu(this.lastLoginAt),this.creationTime=Hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Td(t){var e;const n=t.auth,r=await t.getIdToken(),s=await xc(t,wm(n,{idToken:r}));Ie(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?PI(i.providerUserInfo):[],l=R9(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),h=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Zv(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function P9(t){const e=Vt(t);await Td(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function R9(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function PI(t){return t.map(e=>{var{providerId:n}=e,r=Yd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D9(t,e){const n=await II(t,{},async()=>{const r=Qd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await AI(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&$c(t.emulatorConfig.host)&&(c.credentials="include"),kI.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function M9(t,e){return ri(t,"POST","/v2/accounts:revokeToken",zi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=DE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await D9(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Gl;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Ie(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ie(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gl,this.toJSON())}_performRefresh(){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ys{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Yd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new A9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Zv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await xc(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return k9(this,e)}reload(){return P9(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ys(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Td(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ar(this.auth.app))return Promise.reject(Ti(this.auth));const e=await this.getIdToken();return await xc(this,j9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(l=n.tenantId)!==null&&l!==void 0?l:void 0,b=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:w,emailVerified:E,isAnonymous:P,providerData:R,stsTokenManager:S}=n;Ie(w&&S,e,"internal-error");const N=Gl.fromJSON(this.name,S);Ie(typeof w=="string",e,"internal-error"),ta(f,e.name),ta(p,e.name),Ie(typeof E=="boolean",e,"internal-error"),Ie(typeof P=="boolean",e,"internal-error"),ta(g,e.name),ta(T,e.name),ta(v,e.name),ta(b,e.name),ta(_,e.name),ta(y,e.name);const k=new ys({uid:w,auth:e,email:p,emailVerified:E,displayName:f,isAnonymous:P,photoURL:T,phoneNumber:g,tenantId:v,stsTokenManager:N,createdAt:_,lastLoginAt:y});return R&&Array.isArray(R)&&(k.providerData=R.map(A=>Object.assign({},A))),b&&(k._redirectEventId=b),k}static async _fromIdTokenResponse(e,n,r=!1){const s=new Gl;s.updateFromServerResponse(n);const i=new ys({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Td(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ie(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?PI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Gl;l.updateFromIdToken(r);const c=new ys({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Zv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=new Map;function _i(t){Oi(t instanceof Function,"Expected a class definition");let e=ME.get(t);return e?(Oi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ME.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}RI.type="NONE";const OE=RI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t,e,n){return`firebase:${t}:${e}:${n}`}class Kl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ef(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ef("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wm(this.auth,{idToken:e}).catch(()=>{});return n?ys._fromGetAccountInfoResponse(this.auth,n,e):null}return ys._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Kl(_i(OE),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||_i(OE);const o=Ef(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await wm(e,{idToken:h}).catch(()=>{});if(!p)break;f=await ys._fromGetAccountInfoResponse(e,p,h)}else f=ys._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Kl(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Kl(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FI(e))return"Blackberry";if(UI(e))return"Webos";if(MI(e))return"Safari";if((e.includes("chrome/")||OI(e))&&!e.includes("edge/"))return"Chrome";if(VI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function DI(t=Yn()){return/firefox\//i.test(t)}function MI(t=Yn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OI(t=Yn()){return/crios\//i.test(t)}function LI(t=Yn()){return/iemobile/i.test(t)}function VI(t=Yn()){return/android/i.test(t)}function FI(t=Yn()){return/blackberry/i.test(t)}function UI(t=Yn()){return/webos/i.test(t)}function u0(t=Yn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function O9(t=Yn()){var e;return u0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function L9(){return Q3()&&document.documentMode===10}function $I(t=Yn()){return u0(t)||VI(t)||UI(t)||FI(t)||/windows phone/i.test(t)||LI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t,e=[]){let n;switch(t){case"Browser":n=LE(Yn());break;case"Worker":n=`${LE(Yn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F9(t,e={}){return ri(t,"GET","/v2/passwordPolicy",zi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9=6;class $9{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:U9,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VE(this),this.idTokenSubscription=new VE(this),this.beforeStateQueue=new V9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_i(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Kl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wm(this,{idToken:e}),r=await ys._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ar(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Td(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=w9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ar(this.app))return Promise.reject(Ti(this));const n=e?Vt(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ar(this.app)?Promise.reject(Ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ar(this.app)?Promise.reject(Ti(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_i(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await F9(this),n=new $9(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Kd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await M9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_i(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await Kl.create(this,[_i(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&g9(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Wi(t){return Vt(t)}class VE{constructor(e){this.auth=e,this.observer=null,this.addObserver=rU(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function z9(t){Rp=t}function zI(t){return Rp.loadJS(t)}function W9(){return Rp.recaptchaEnterpriseScript}function H9(){return Rp.gapiScript}function q9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class G9{constructor(){this.enterprise=new K9}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class K9{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Q9="recaptcha-enterprise",WI="NO_RECAPTCHA";class Y9{constructor(e){this.type=Q9,this.auth=Wi(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{C9(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new N9(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;RE(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(WI)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new G9().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&RE(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=W9();c.length!==0&&(c+=l),zI(c).then(()=>{s(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function FE(t,e,n,r=!1,s=!1){const i=new Y9(t);let o;if(s)o=WI;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function _m(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await FE(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await FE(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(t,e){const n=i0(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Di(i,e??{}))return s;ts(s,"already-initialized")}return n.initialize({options:e})}function Z9(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_i);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function J9(t,e,n){const r=Wi(t);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=HI(e),{host:o,port:l}=e$(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Di(u,r.config.emulator)&&Di(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,$c(o)?(xI(`${i}//${o}${c}`),wI("Auth",!0)):t$()}function HI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function e$(t){const e=HI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:UE(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:UE(o)}}}function UE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function t$(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,n){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}async function n$(t,e){return ri(t,"POST","/v1/accounts:update",e)}async function r$(t,e){return ri(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s$(t,e){return Zd(t,"POST","/v1/accounts:signInWithPassword",zi(t,e))}async function qI(t,e){return ri(t,"POST","/v1/accounts:sendOobCode",zi(t,e))}async function i$(t,e){return qI(t,e)}async function a$(t,e){return qI(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o$(t,e){return Zd(t,"POST","/v1/accounts:signInWithEmailLink",zi(t,e))}async function l$(t,e){return Zd(t,"POST","/v1/accounts:signInWithEmailLink",zi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd extends d0{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Sd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Sd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _m(e,n,"signInWithPassword",s$);case"emailLink":return o$(e,{email:this._email,oobCode:this._password});default:ts(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _m(e,r,"signUpPassword",r$);case"emailLink":return l$(e,{idToken:n,email:this._email,oobCode:this._password});default:ts(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(t,e){return Zd(t,"POST","/v1/accounts:signInWithIdp",zi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c$="http://localhost";class Wo extends d0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ts("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Yd(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Wo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ql(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ql(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ql(e,n)}buildRequest(){const e={requestUri:c$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function d$(t){const e=Nu(Cu(t)).link,n=e?Nu(Cu(e)).deep_link_id:null,r=Nu(Cu(t)).deep_link_id;return(r?Nu(Cu(r)).link:null)||r||n||e||t}class h0{constructor(e){var n,r,s,i,o,l;const c=Nu(Cu(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,f=u$((s=c.mode)!==null&&s!==void 0?s:null);Ie(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=d$(e);try{return new h0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.providerId=Wa.PROVIDER_ID}static credential(e,n){return Sd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=h0.parseLink(n);return Ie(r,"argument-error"),Sd._fromEmailAndCode(e,r.code,r.tenantId)}}Wa.PROVIDER_ID="password";Wa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends f0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends Jd{constructor(){super("facebook.com")}static credential(e){return Wo._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.FACEBOOK_SIGN_IN_METHOD="facebook.com";ua.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Jd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wo._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return gi.credential(n,r)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends Jd{constructor(){super("github.com")}static credential(e){return Wo._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return da.credential(e.oauthAccessToken)}catch{return null}}}da.GITHUB_SIGN_IN_METHOD="github.com";da.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends Jd{constructor(){super("twitter.com")}static credential(e,n){return Wo._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ha.credential(n,r)}catch{return null}}}ha.TWITTER_SIGN_IN_METHOD="twitter.com";ha.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h$(t,e){return Zd(t,"POST","/v1/accounts:signUp",zi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ys._fromIdTokenResponse(e,r,s),o=$E(r);return new Ho({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=$E(r);return new Ho({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function $E(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm extends Bi{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,bm.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new bm(e,n,r,s)}}function GI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?bm._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f$(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}async function KI(t,e,n=!1){const r=await xc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ho._forOperation(t,"link",r)}async function m$(t,e,n){await Td(e);const r=f$(e.providerData);Ie(r.has(n)===t,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QI(t,e,n=!1){const{auth:r}=t;if(Ar(r.app))return Promise.reject(Ti(r));const s="reauthenticate";try{const i=await xc(t,GI(r,s,e,t),n);Ie(i.idToken,r,"internal-error");const o=c0(i.idToken);Ie(o,r,"internal-error");const{sub:l}=o;return Ie(t.uid===l,r,"user-mismatch"),Ho._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ts(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YI(t,e,n=!1){if(Ar(t.app))return Promise.reject(Ti(t));const r="signIn",s=await GI(t,r,e),i=await Ho._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function p$(t,e){return YI(Wi(t),e)}async function g$(t,e){const n=Vt(t);return await m$(!1,n,e.providerId),KI(n,e)}async function y$(t,e){return QI(Vt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(t){const e=Wi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function v$(t,e,n){const r=Wi(t);await _m(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",a$)}async function x$(t,e,n){if(Ar(t.app))return Promise.reject(Ti(t));const r=Wi(t),o=await _m(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",h$).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&XI(t),c}),l=await Ho._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function w$(t,e,n){return Ar(t.app)?Promise.reject(Ti(t)):p$(Vt(t),Wa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&XI(t),r})}async function _$(t,e){const n=Vt(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await i$(n.auth,s);i!==t.email&&await t.reload()}function b$(t,e){return E$(Vt(t),null,e)}async function E$(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await xc(t,n$(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(t,e){return Vt(t).setPersistence(e)}function S$(t,e,n,r){return Vt(t).onIdTokenChanged(e,n,r)}function N$(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function C$(t,e,n,r){return Vt(t).onAuthStateChanged(e,n,r)}function vy(t){return Vt(t).signOut()}const Em="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Em,"1"),this.storage.removeItem(Em),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$=1e3,k$=10;class JI extends ZI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$I(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);L9()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,k$):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},j$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}JI.type="LOCAL";const eA=JI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA extends ZI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tA.type="SESSION";const nA=tA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Dp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await I$(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=m0("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(){return window}function P$(t){zs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(){return typeof zs().WorkerGlobalScope<"u"&&typeof zs().importScripts=="function"}async function R$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function D$(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function M$(){return rA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="firebaseLocalStorageDb",O$=1,Tm="firebaseLocalStorage",iA="fbase_key";class eh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mp(t,e){return t.transaction([Tm],e?"readwrite":"readonly").objectStore(Tm)}function L$(){const t=indexedDB.deleteDatabase(sA);return new eh(t).toPromise()}function Jv(){const t=indexedDB.open(sA,O$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Tm,{keyPath:iA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Tm)?e(r):(r.close(),await L$(),e(await Jv()))})})}async function BE(t,e,n){const r=Mp(t,!0).put({[iA]:e,value:n});return new eh(r).toPromise()}async function V$(t,e){const n=Mp(t,!1).get(e),r=await new eh(n).toPromise();return r===void 0?null:r.value}function zE(t,e){const n=Mp(t,!0).delete(e);return new eh(n).toPromise()}const F$=800,U$=3;class aA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>U$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dp._getInstance(M$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await R$(),!this.activeServiceWorker)return;this.sender=new A$(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||D$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jv();return await BE(e,Em,"1"),await zE(e,Em),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>BE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>V$(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Mp(s,!1).getAll();return new eh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),F$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aA.type="LOCAL";const $$=aA;new Xd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t,e){return e?_i(e):(Ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0 extends d0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ql(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ql(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ql(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function B$(t){return YI(t.auth,new p0(t),t.bypassAuthState)}function z$(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),QI(n,new p0(t),t.bypassAuthState)}async function W$(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),KI(n,new p0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B$;case"linkViaPopup":case"linkViaRedirect":return W$;case"reauthViaPopup":case"reauthViaRedirect":return z$;default:ts(this.auth,"internal-error")}}resolve(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$=new Xd(2e3,1e4);async function q$(t,e,n){if(Ar(t.app))return Promise.reject(ws(t,"operation-not-supported-in-this-environment"));const r=Wi(t);y9(t,e,f0);const s=oA(r,n);return new To(r,"signInViaPopup",e,s).executeNotNull()}class To extends lA{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,To.currentPopupAction&&To.currentPopupAction.cancel(),To.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Oi(this.filter.length===1,"Popup operations only handle one event");const e=m0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ws(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ws(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,To.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ws(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,H$.get())};e()}}To.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$="pendingRedirect",Tf=new Map;class K$ extends lA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Tf.get(this.auth._key());if(!e){try{const r=await Q$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Tf.set(this.auth._key(),e)}return this.bypassAuthState||Tf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Q$(t,e){const n=Z$(e),r=X$(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Y$(t,e){Tf.set(t._key(),e)}function X$(t){return _i(t._redirectPersistence)}function Z$(t){return Ef(G$,t.config.apiKey,t.name)}async function J$(t,e,n=!1){if(Ar(t.app))return Promise.reject(Ti(t));const r=Wi(t),s=oA(r,e),o=await new K$(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB=10*60*1e3;class tB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!cA(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ws(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eB&&this.cachedEventUids.clear(),this.cachedEventUids.has(WE(e))}saveEventToCache(e){this.cachedEventUids.add(WE(e)),this.lastProcessedEventTime=Date.now()}}function WE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rB(t,e={}){return ri(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iB=/^https?/;async function aB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await rB(t);for(const n of e)try{if(oB(n))return}catch{}ts(t,"unauthorized-domain")}function oB(t){const e=Xv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!iB.test(n))return!1;if(sB.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB=new Xd(3e4,6e4);function HE(){const t=zs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cB(t){return new Promise((e,n)=>{var r,s,i;function o(){HE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{HE(),n(ws(t,"network-request-failed"))},timeout:lB.get()})}if(!((s=(r=zs().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=zs().gapi)===null||i===void 0)&&i.load)o();else{const l=q9("iframefcb");return zs()[l]=()=>{gapi.load?o():n(ws(t,"network-request-failed"))},zI(`${H9()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Sf=null,e})}let Sf=null;function uB(t){return Sf=Sf||cB(t),Sf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB=new Xd(5e3,15e3),hB="__/auth/iframe",fB="emulator/auth/iframe",mB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gB(t){const e=t.config;Ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?l0(e,fB):`https://${t.config.authDomain}/${hB}`,r={apiKey:e.apiKey,appName:t.name,v:Bc},s=pB.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Qd(r).slice(1)}`}async function yB(t){const e=await uB(t),n=zs().gapi;return Ie(n,t,"internal-error"),e.open({where:document.body,url:gB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mB,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=ws(t,"network-request-failed"),l=zs().setTimeout(()=>{i(o)},dB.get());function c(){zs().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xB=500,wB=600,_B="_blank",bB="http://localhost";class qE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EB(t,e,n,r=xB,s=wB){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},vB),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Yn().toLowerCase();n&&(l=OI(u)?_B:n),DI(u)&&(e=e||bB,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[g,T])=>`${p}${g}=${T},`,"");if(O9(u)&&l!=="_self")return TB(e||"",l),new qE(null);const f=window.open(e||"",l,h);Ie(f,t,"popup-blocked");try{f.focus()}catch{}return new qE(f)}function TB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB="__/auth/handler",NB="emulator/auth/handler",CB=encodeURIComponent("fac");async function GE(t,e,n,r,s,i){Ie(t.config.authDomain,t,"auth-domain-config-required"),Ie(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Bc,eventId:s};if(e instanceof f0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",nU(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Jd){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${CB}=${encodeURIComponent(c)}`:"";return`${jB(t)}?${Qd(l).slice(1)}${u}`}function jB({config:t}){return t.emulator?l0(t,NB):`https://${t.authDomain}/${SB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy="webStorageSupport";class kB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nA,this._completeRedirectFn=J$,this._overrideRedirectResult=Y$}async _openPopup(e,n,r,s){var i;Oi((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await GE(e,n,r,Xv(),s);return EB(e,o,m0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await GE(e,n,r,Xv(),s);return P$(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Oi(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await yB(e),r=new tB(e);return n.register("authEvent",s=>(Ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xy,{type:xy},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[xy];o!==void 0&&n(!!o),ts(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $I()||MI()||u0()}}const IB=kB;var KE="@firebase/auth",QE="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RB(t){vc(new zo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BI(t)},u=new B9(r,s,i,c);return Z9(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),vc(new zo("auth-internal",e=>{const n=Wi(e.getProvider("auth").getImmediate());return(r=>new AB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Da(KE,QE,PB(t)),Da(KE,QE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB=5*60,MB=vI("authIdTokenMaxAge")||DB;let YE=null;const OB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>MB)return;const s=n==null?void 0:n.token;YE!==s&&(YE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function LB(t=TI()){const e=i0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=X9(t,{popupRedirectResolver:IB,persistence:[$$,eA,nA]}),r=vI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=OB(i.toString());N$(n,o,()=>o(n.currentUser)),S$(n,l=>o(l))}}const s=gI("auth");return s&&J9(n,`http://${s}`),n}function VB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}z9({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=ws("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",VB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RB("Browser");var XE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ma,uA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,N){function k(){}k.prototype=N.prototype,S.D=N.prototype,S.prototype=new k,S.prototype.constructor=S,S.C=function(A,M,I){for(var j=Array(arguments.length-2),V=2;V<arguments.length;V++)j[V-2]=arguments[V];return N.prototype[M].apply(A,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,N,k){k||(k=0);var A=Array(16);if(typeof N=="string")for(var M=0;16>M;++M)A[M]=N.charCodeAt(k++)|N.charCodeAt(k++)<<8|N.charCodeAt(k++)<<16|N.charCodeAt(k++)<<24;else for(M=0;16>M;++M)A[M]=N[k++]|N[k++]<<8|N[k++]<<16|N[k++]<<24;N=S.g[0],k=S.g[1],M=S.g[2];var I=S.g[3],j=N+(I^k&(M^I))+A[0]+3614090360&4294967295;N=k+(j<<7&4294967295|j>>>25),j=I+(M^N&(k^M))+A[1]+3905402710&4294967295,I=N+(j<<12&4294967295|j>>>20),j=M+(k^I&(N^k))+A[2]+606105819&4294967295,M=I+(j<<17&4294967295|j>>>15),j=k+(N^M&(I^N))+A[3]+3250441966&4294967295,k=M+(j<<22&4294967295|j>>>10),j=N+(I^k&(M^I))+A[4]+4118548399&4294967295,N=k+(j<<7&4294967295|j>>>25),j=I+(M^N&(k^M))+A[5]+1200080426&4294967295,I=N+(j<<12&4294967295|j>>>20),j=M+(k^I&(N^k))+A[6]+2821735955&4294967295,M=I+(j<<17&4294967295|j>>>15),j=k+(N^M&(I^N))+A[7]+4249261313&4294967295,k=M+(j<<22&4294967295|j>>>10),j=N+(I^k&(M^I))+A[8]+1770035416&4294967295,N=k+(j<<7&4294967295|j>>>25),j=I+(M^N&(k^M))+A[9]+2336552879&4294967295,I=N+(j<<12&4294967295|j>>>20),j=M+(k^I&(N^k))+A[10]+4294925233&4294967295,M=I+(j<<17&4294967295|j>>>15),j=k+(N^M&(I^N))+A[11]+2304563134&4294967295,k=M+(j<<22&4294967295|j>>>10),j=N+(I^k&(M^I))+A[12]+1804603682&4294967295,N=k+(j<<7&4294967295|j>>>25),j=I+(M^N&(k^M))+A[13]+4254626195&4294967295,I=N+(j<<12&4294967295|j>>>20),j=M+(k^I&(N^k))+A[14]+2792965006&4294967295,M=I+(j<<17&4294967295|j>>>15),j=k+(N^M&(I^N))+A[15]+1236535329&4294967295,k=M+(j<<22&4294967295|j>>>10),j=N+(M^I&(k^M))+A[1]+4129170786&4294967295,N=k+(j<<5&4294967295|j>>>27),j=I+(k^M&(N^k))+A[6]+3225465664&4294967295,I=N+(j<<9&4294967295|j>>>23),j=M+(N^k&(I^N))+A[11]+643717713&4294967295,M=I+(j<<14&4294967295|j>>>18),j=k+(I^N&(M^I))+A[0]+3921069994&4294967295,k=M+(j<<20&4294967295|j>>>12),j=N+(M^I&(k^M))+A[5]+3593408605&4294967295,N=k+(j<<5&4294967295|j>>>27),j=I+(k^M&(N^k))+A[10]+38016083&4294967295,I=N+(j<<9&4294967295|j>>>23),j=M+(N^k&(I^N))+A[15]+3634488961&4294967295,M=I+(j<<14&4294967295|j>>>18),j=k+(I^N&(M^I))+A[4]+3889429448&4294967295,k=M+(j<<20&4294967295|j>>>12),j=N+(M^I&(k^M))+A[9]+568446438&4294967295,N=k+(j<<5&4294967295|j>>>27),j=I+(k^M&(N^k))+A[14]+3275163606&4294967295,I=N+(j<<9&4294967295|j>>>23),j=M+(N^k&(I^N))+A[3]+4107603335&4294967295,M=I+(j<<14&4294967295|j>>>18),j=k+(I^N&(M^I))+A[8]+1163531501&4294967295,k=M+(j<<20&4294967295|j>>>12),j=N+(M^I&(k^M))+A[13]+2850285829&4294967295,N=k+(j<<5&4294967295|j>>>27),j=I+(k^M&(N^k))+A[2]+4243563512&4294967295,I=N+(j<<9&4294967295|j>>>23),j=M+(N^k&(I^N))+A[7]+1735328473&4294967295,M=I+(j<<14&4294967295|j>>>18),j=k+(I^N&(M^I))+A[12]+2368359562&4294967295,k=M+(j<<20&4294967295|j>>>12),j=N+(k^M^I)+A[5]+4294588738&4294967295,N=k+(j<<4&4294967295|j>>>28),j=I+(N^k^M)+A[8]+2272392833&4294967295,I=N+(j<<11&4294967295|j>>>21),j=M+(I^N^k)+A[11]+1839030562&4294967295,M=I+(j<<16&4294967295|j>>>16),j=k+(M^I^N)+A[14]+4259657740&4294967295,k=M+(j<<23&4294967295|j>>>9),j=N+(k^M^I)+A[1]+2763975236&4294967295,N=k+(j<<4&4294967295|j>>>28),j=I+(N^k^M)+A[4]+1272893353&4294967295,I=N+(j<<11&4294967295|j>>>21),j=M+(I^N^k)+A[7]+4139469664&4294967295,M=I+(j<<16&4294967295|j>>>16),j=k+(M^I^N)+A[10]+3200236656&4294967295,k=M+(j<<23&4294967295|j>>>9),j=N+(k^M^I)+A[13]+681279174&4294967295,N=k+(j<<4&4294967295|j>>>28),j=I+(N^k^M)+A[0]+3936430074&4294967295,I=N+(j<<11&4294967295|j>>>21),j=M+(I^N^k)+A[3]+3572445317&4294967295,M=I+(j<<16&4294967295|j>>>16),j=k+(M^I^N)+A[6]+76029189&4294967295,k=M+(j<<23&4294967295|j>>>9),j=N+(k^M^I)+A[9]+3654602809&4294967295,N=k+(j<<4&4294967295|j>>>28),j=I+(N^k^M)+A[12]+3873151461&4294967295,I=N+(j<<11&4294967295|j>>>21),j=M+(I^N^k)+A[15]+530742520&4294967295,M=I+(j<<16&4294967295|j>>>16),j=k+(M^I^N)+A[2]+3299628645&4294967295,k=M+(j<<23&4294967295|j>>>9),j=N+(M^(k|~I))+A[0]+4096336452&4294967295,N=k+(j<<6&4294967295|j>>>26),j=I+(k^(N|~M))+A[7]+1126891415&4294967295,I=N+(j<<10&4294967295|j>>>22),j=M+(N^(I|~k))+A[14]+2878612391&4294967295,M=I+(j<<15&4294967295|j>>>17),j=k+(I^(M|~N))+A[5]+4237533241&4294967295,k=M+(j<<21&4294967295|j>>>11),j=N+(M^(k|~I))+A[12]+1700485571&4294967295,N=k+(j<<6&4294967295|j>>>26),j=I+(k^(N|~M))+A[3]+2399980690&4294967295,I=N+(j<<10&4294967295|j>>>22),j=M+(N^(I|~k))+A[10]+4293915773&4294967295,M=I+(j<<15&4294967295|j>>>17),j=k+(I^(M|~N))+A[1]+2240044497&4294967295,k=M+(j<<21&4294967295|j>>>11),j=N+(M^(k|~I))+A[8]+1873313359&4294967295,N=k+(j<<6&4294967295|j>>>26),j=I+(k^(N|~M))+A[15]+4264355552&4294967295,I=N+(j<<10&4294967295|j>>>22),j=M+(N^(I|~k))+A[6]+2734768916&4294967295,M=I+(j<<15&4294967295|j>>>17),j=k+(I^(M|~N))+A[13]+1309151649&4294967295,k=M+(j<<21&4294967295|j>>>11),j=N+(M^(k|~I))+A[4]+4149444226&4294967295,N=k+(j<<6&4294967295|j>>>26),j=I+(k^(N|~M))+A[11]+3174756917&4294967295,I=N+(j<<10&4294967295|j>>>22),j=M+(N^(I|~k))+A[2]+718787259&4294967295,M=I+(j<<15&4294967295|j>>>17),j=k+(I^(M|~N))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+N&4294967295,S.g[1]=S.g[1]+(M+(j<<21&4294967295|j>>>11))&4294967295,S.g[2]=S.g[2]+M&4294967295,S.g[3]=S.g[3]+I&4294967295}r.prototype.u=function(S,N){N===void 0&&(N=S.length);for(var k=N-this.blockSize,A=this.B,M=this.h,I=0;I<N;){if(M==0)for(;I<=k;)s(this,S,I),I+=this.blockSize;if(typeof S=="string"){for(;I<N;)if(A[M++]=S.charCodeAt(I++),M==this.blockSize){s(this,A),M=0;break}}else for(;I<N;)if(A[M++]=S[I++],M==this.blockSize){s(this,A),M=0;break}}this.h=M,this.o+=N},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var N=1;N<S.length-8;++N)S[N]=0;var k=8*this.o;for(N=S.length-8;N<S.length;++N)S[N]=k&255,k/=256;for(this.u(S),S=Array(16),N=k=0;4>N;++N)for(var A=0;32>A;A+=8)S[k++]=this.g[N]>>>A&255;return S};function i(S,N){var k=l;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=N(S)}function o(S,N){this.h=N;for(var k=[],A=!0,M=S.length-1;0<=M;M--){var I=S[M]|0;A&&I==N||(k[M]=I,A=!1)}this.g=k}var l={};function c(S){return-128<=S&&128>S?i(S,function(N){return new o([N|0],0>N?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return b(u(-S));for(var N=[],k=1,A=0;S>=k;A++)N[A]=S/k|0,k*=4294967296;return new o(N,0)}function h(S,N){if(S.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(S.charAt(0)=="-")return b(h(S.substring(1),N));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(N,8)),A=f,M=0;M<S.length;M+=8){var I=Math.min(8,S.length-M),j=parseInt(S.substring(M,M+I),N);8>I?(I=u(Math.pow(N,I)),A=A.j(I).add(u(j))):(A=A.j(k),A=A.add(u(j)))}return A}var f=c(0),p=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(v(this))return-b(this).m();for(var S=0,N=1,k=0;k<this.g.length;k++){var A=this.i(k);S+=(0<=A?A:4294967296+A)*N,N*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(T(this))return"0";if(v(this))return"-"+b(this).toString(S);for(var N=u(Math.pow(S,6)),k=this,A="";;){var M=E(k,N).g;k=_(k,M.j(N));var I=((0<k.g.length?k.g[0]:k.h)>>>0).toString(S);if(k=M,T(k))return I+A;for(;6>I.length;)I="0"+I;A=I+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function T(S){if(S.h!=0)return!1;for(var N=0;N<S.g.length;N++)if(S.g[N]!=0)return!1;return!0}function v(S){return S.h==-1}t.l=function(S){return S=_(this,S),v(S)?-1:T(S)?0:1};function b(S){for(var N=S.g.length,k=[],A=0;A<N;A++)k[A]=~S.g[A];return new o(k,~S.h).add(p)}t.abs=function(){return v(this)?b(this):this},t.add=function(S){for(var N=Math.max(this.g.length,S.g.length),k=[],A=0,M=0;M<=N;M++){var I=A+(this.i(M)&65535)+(S.i(M)&65535),j=(I>>>16)+(this.i(M)>>>16)+(S.i(M)>>>16);A=j>>>16,I&=65535,j&=65535,k[M]=j<<16|I}return new o(k,k[k.length-1]&-2147483648?-1:0)};function _(S,N){return S.add(b(N))}t.j=function(S){if(T(this)||T(S))return f;if(v(this))return v(S)?b(this).j(b(S)):b(b(this).j(S));if(v(S))return b(this.j(b(S)));if(0>this.l(g)&&0>S.l(g))return u(this.m()*S.m());for(var N=this.g.length+S.g.length,k=[],A=0;A<2*N;A++)k[A]=0;for(A=0;A<this.g.length;A++)for(var M=0;M<S.g.length;M++){var I=this.i(A)>>>16,j=this.i(A)&65535,V=S.i(M)>>>16,W=S.i(M)&65535;k[2*A+2*M]+=j*W,y(k,2*A+2*M),k[2*A+2*M+1]+=I*W,y(k,2*A+2*M+1),k[2*A+2*M+1]+=j*V,y(k,2*A+2*M+1),k[2*A+2*M+2]+=I*V,y(k,2*A+2*M+2)}for(A=0;A<N;A++)k[A]=k[2*A+1]<<16|k[2*A];for(A=N;A<2*N;A++)k[A]=0;return new o(k,0)};function y(S,N){for(;(S[N]&65535)!=S[N];)S[N+1]+=S[N]>>>16,S[N]&=65535,N++}function w(S,N){this.g=S,this.h=N}function E(S,N){if(T(N))throw Error("division by zero");if(T(S))return new w(f,f);if(v(S))return N=E(b(S),N),new w(b(N.g),b(N.h));if(v(N))return N=E(S,b(N)),new w(b(N.g),N.h);if(30<S.g.length){if(v(S)||v(N))throw Error("slowDivide_ only works with positive integers.");for(var k=p,A=N;0>=A.l(S);)k=P(k),A=P(A);var M=R(k,1),I=R(A,1);for(A=R(A,2),k=R(k,2);!T(A);){var j=I.add(A);0>=j.l(S)&&(M=M.add(k),I=j),A=R(A,1),k=R(k,1)}return N=_(S,M.j(N)),new w(M,N)}for(M=f;0<=S.l(N);){for(k=Math.max(1,Math.floor(S.m()/N.m())),A=Math.ceil(Math.log(k)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),I=u(k),j=I.j(N);v(j)||0<j.l(S);)k-=A,I=u(k),j=I.j(N);T(I)&&(I=p),M=M.add(I),S=_(S,j)}return new w(M,S)}t.A=function(S){return E(this,S).h},t.and=function(S){for(var N=Math.max(this.g.length,S.g.length),k=[],A=0;A<N;A++)k[A]=this.i(A)&S.i(A);return new o(k,this.h&S.h)},t.or=function(S){for(var N=Math.max(this.g.length,S.g.length),k=[],A=0;A<N;A++)k[A]=this.i(A)|S.i(A);return new o(k,this.h|S.h)},t.xor=function(S){for(var N=Math.max(this.g.length,S.g.length),k=[],A=0;A<N;A++)k[A]=this.i(A)^S.i(A);return new o(k,this.h^S.h)};function P(S){for(var N=S.g.length+1,k=[],A=0;A<N;A++)k[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(k,S.h)}function R(S,N){var k=N>>5;N%=32;for(var A=S.g.length-k,M=[],I=0;I<A;I++)M[I]=0<N?S.i(I+k)>>>N|S.i(I+k+1)<<32-N:S.i(I+k);return new o(M,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,uA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ma=o}).apply(typeof XE<"u"?XE:typeof self<"u"?self:typeof window<"u"?window:{});var Xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dA,ju,hA,Nf,ex,fA,mA,pA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,x,C){return d==Array.prototype||d==Object.prototype||(d[x]=C.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xh=="object"&&Xh];for(var x=0;x<d.length;++x){var C=d[x];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=n(this);function s(d,x){if(x)e:{var C=r;d=d.split(".");for(var D=0;D<d.length-1;D++){var z=d[D];if(!(z in C))break e;C=C[z]}d=d[d.length-1],D=C[d],x=x(D),x!=D&&x!=null&&e(C,d,{configurable:!0,writable:!0,value:x})}}function i(d,x){d instanceof String&&(d+="");var C=0,D=!1,z={next:function(){if(!D&&C<d.length){var K=C++;return{value:x(K,d[K]),done:!1}}return D=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}s("Array.prototype.values",function(d){return d||function(){return i(this,function(x,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var x=typeof d;return x=x!="object"?x:d?Array.isArray(d)?"array":x:"null",x=="array"||x=="object"&&typeof d.length=="number"}function u(d){var x=typeof d;return x=="object"&&d!=null||x=="function"}function h(d,x,C){return d.call.apply(d.bind,arguments)}function f(d,x,C){if(!d)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,D),d.apply(x,z)}}return function(){return d.apply(x,arguments)}}function p(d,x,C){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function g(d,x){var C=Array.prototype.slice.call(arguments,1);return function(){var D=C.slice();return D.push.apply(D,arguments),d.apply(this,D)}}function T(d,x){function C(){}C.prototype=x.prototype,d.aa=x.prototype,d.prototype=new C,d.prototype.constructor=d,d.Qb=function(D,z,K){for(var ue=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)ue[Rt-2]=arguments[Rt];return x.prototype[z].apply(D,ue)}}function v(d){const x=d.length;if(0<x){const C=Array(x);for(let D=0;D<x;D++)C[D]=d[D];return C}return[]}function b(d,x){for(let C=1;C<arguments.length;C++){const D=arguments[C];if(c(D)){const z=d.length||0,K=D.length||0;d.length=z+K;for(let ue=0;ue<K;ue++)d[z+ue]=D[ue]}else d.push(D)}}class _{constructor(x,C){this.i=x,this.j=C,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function y(d){return/^[\s\xa0]*$/.test(d)}function w(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function E(d){return E[" "](d),d}E[" "]=function(){};var P=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function R(d,x,C){for(const D in d)x.call(C,d[D],D,d)}function S(d,x){for(const C in d)x.call(void 0,d[C],C,d)}function N(d){const x={};for(const C in d)x[C]=d[C];return x}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(d,x){let C,D;for(let z=1;z<arguments.length;z++){D=arguments[z];for(C in D)d[C]=D[C];for(let K=0;K<k.length;K++)C=k[K],Object.prototype.hasOwnProperty.call(D,C)&&(d[C]=D[C])}}function M(d){var x=1;d=d.split(":");const C=[];for(;0<x&&d.length;)C.push(d.shift()),x--;return d.length&&C.push(d.join(":")),C}function I(d){l.setTimeout(()=>{throw d},0)}function j(){var d=F;let x=null;return d.g&&(x=d.g,d.g=d.g.next,d.g||(d.h=null),x.next=null),x}class V{constructor(){this.h=this.g=null}add(x,C){const D=W.get();D.set(x,C),this.h?this.h.next=D:this.g=D,this.h=D}}var W=new _(()=>new H,d=>d.reset());class H{constructor(){this.next=this.g=this.h=null}set(x,C){this.h=x,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,U=!1,F=new V,$=()=>{const d=l.Promise.resolve(void 0);Y=()=>{d.then(G)}};var G=()=>{for(var d;d=j();){try{d.h.call(d.g)}catch(C){I(C)}var x=W;x.j(d),100>x.h&&(x.h++,d.next=x.g,x.g=d)}U=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(d,x){this.type=d,this.g=this.target=x,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var xe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,x=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const C=()=>{};l.addEventListener("test",C,x),l.removeEventListener("test",C,x)}catch{}return d}();function Ne(d,x){if(de.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var C=this.type=d.type,D=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=x,x=d.relatedTarget){if(P){e:{try{E(x.nodeName);var z=!0;break e}catch{}z=!1}z||(x=null)}}else C=="mouseover"?x=d.fromElement:C=="mouseout"&&(x=d.toElement);this.relatedTarget=x,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:lt[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ne.aa.h.call(this)}}T(Ne,de);var lt={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),We=0;function st(d,x,C,D,z){this.listener=d,this.proxy=null,this.src=x,this.type=C,this.capture=!!D,this.ha=z,this.key=++We,this.da=this.fa=!1}function Me(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Oe(d){this.src=d,this.g={},this.h=0}Oe.prototype.add=function(d,x,C,D,z){var K=d.toString();d=this.g[K],d||(d=this.g[K]=[],this.h++);var ue=Tt(d,x,D,z);return-1<ue?(x=d[ue],C||(x.fa=!1)):(x=new st(x,this.src,K,!!D,z),x.fa=C,d.push(x)),x};function De(d,x){var C=x.type;if(C in d.g){var D=d.g[C],z=Array.prototype.indexOf.call(D,x,void 0),K;(K=0<=z)&&Array.prototype.splice.call(D,z,1),K&&(Me(x),d.g[C].length==0&&(delete d.g[C],d.h--))}}function Tt(d,x,C,D){for(var z=0;z<d.length;++z){var K=d[z];if(!K.da&&K.listener==x&&K.capture==!!C&&K.ha==D)return z}return-1}var ge="closure_lm_"+(1e6*Math.random()|0),be={};function it(d,x,C,D,z){if(Array.isArray(x)){for(var K=0;K<x.length;K++)it(d,x[K],C,D,z);return null}return C=re(C),d&&d[le]?d.K(x,C,u(D)?!!D.capture:!!D,z):ht(d,x,C,!1,D,z)}function ht(d,x,C,D,z,K){if(!x)throw Error("Invalid event type");var ue=u(z)?!!z.capture:!!z,Rt=Q(d);if(Rt||(d[ge]=Rt=new Oe(d)),C=Rt.add(x,C,D,ue,K),C.proxy)return C;if(D=At(),C.proxy=D,D.src=d,D.listener=C,d.addEventListener)xe||(z=ue),z===void 0&&(z=!1),d.addEventListener(x.toString(),D,z);else if(d.attachEvent)d.attachEvent(B(x.toString()),D);else if(d.addListener&&d.removeListener)d.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return C}function At(){function d(C){return x.call(d.src,d.listener,C)}const x=O;return d}function Qe(d,x,C,D,z){if(Array.isArray(x))for(var K=0;K<x.length;K++)Qe(d,x[K],C,D,z);else D=u(D)?!!D.capture:!!D,C=re(C),d&&d[le]?(d=d.i,x=String(x).toString(),x in d.g&&(K=d.g[x],C=Tt(K,C,D,z),-1<C&&(Me(K[C]),Array.prototype.splice.call(K,C,1),K.length==0&&(delete d.g[x],d.h--)))):d&&(d=Q(d))&&(x=d.g[x.toString()],d=-1,x&&(d=Tt(x,C,D,z)),(C=-1<d?x[d]:null)&&L(C))}function L(d){if(typeof d!="number"&&d&&!d.da){var x=d.src;if(x&&x[le])De(x.i,d);else{var C=d.type,D=d.proxy;x.removeEventListener?x.removeEventListener(C,D,d.capture):x.detachEvent?x.detachEvent(B(C),D):x.addListener&&x.removeListener&&x.removeListener(D),(C=Q(x))?(De(C,d),C.h==0&&(C.src=null,x[ge]=null)):Me(d)}}}function B(d){return d in be?be[d]:be[d]="on"+d}function O(d,x){if(d.da)d=!0;else{x=new Ne(x,this);var C=d.listener,D=d.ha||d.src;d.fa&&L(d),d=C.call(D,x)}return d}function Q(d){return d=d[ge],d instanceof Oe?d:null}var X="__closure_events_fn_"+(1e9*Math.random()>>>0);function re(d){return typeof d=="function"?d:(d[X]||(d[X]=function(x){return d.handleEvent(x)}),d[X])}function ne(){oe.call(this),this.i=new Oe(this),this.M=this,this.F=null}T(ne,oe),ne.prototype[le]=!0,ne.prototype.removeEventListener=function(d,x,C,D){Qe(this,d,x,C,D)};function q(d,x){var C,D=d.F;if(D)for(C=[];D;D=D.F)C.push(D);if(d=d.M,D=x.type||x,typeof x=="string")x=new de(x,d);else if(x instanceof de)x.target=x.target||d;else{var z=x;x=new de(D,d),A(x,z)}if(z=!0,C)for(var K=C.length-1;0<=K;K--){var ue=x.g=C[K];z=se(ue,D,!0,x)&&z}if(ue=x.g=d,z=se(ue,D,!0,x)&&z,z=se(ue,D,!1,x)&&z,C)for(K=0;K<C.length;K++)ue=x.g=C[K],z=se(ue,D,!1,x)&&z}ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var d=this.i,x;for(x in d.g){for(var C=d.g[x],D=0;D<C.length;D++)Me(C[D]);delete d.g[x],d.h--}}this.F=null},ne.prototype.K=function(d,x,C,D){return this.i.add(String(d),x,!1,C,D)},ne.prototype.L=function(d,x,C,D){return this.i.add(String(d),x,!0,C,D)};function se(d,x,C,D){if(x=d.i.g[String(x)],!x)return!0;x=x.concat();for(var z=!0,K=0;K<x.length;++K){var ue=x[K];if(ue&&!ue.da&&ue.capture==C){var Rt=ue.listener,jn=ue.ha||ue.src;ue.fa&&De(d.i,ue),z=Rt.call(jn,D)!==!1&&z}}return z&&!D.defaultPrevented}function ye(d,x,C){if(typeof d=="function")C&&(d=p(d,C));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:l.setTimeout(d,x||0)}function Xe(d){d.g=ye(()=>{d.g=null,d.i&&(d.i=!1,Xe(d))},d.l);const x=d.h;d.h=null,d.m.apply(null,x)}class tt extends oe{constructor(x,C){super(),this.m=x,this.l=C,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Xe(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gt(d){oe.call(this),this.h=d,this.g={}}T(Gt,oe);var Wt=[];function Dt(d){R(d.g,function(x,C){this.g.hasOwnProperty(C)&&L(x)},d),d.g={}}Gt.prototype.N=function(){Gt.aa.N.call(this),Dt(this)},Gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vn=l.JSON.stringify,St=l.JSON.parse,br=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Jn(){}Jn.prototype.h=null;function Xc(d){return d.h||(d.h=d.i())}function Zc(){}var uo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ho(){de.call(this,"d")}T(ho,de);function Ur(){de.call(this,"c")}T(Ur,de);var ai={},Le=null;function ct(){return Le=Le||new ne}ai.La="serverreachability";function Pt(d){de.call(this,ai.La,d)}T(Pt,de);function Nn(d){const x=ct();q(x,new Pt(x))}ai.STAT_EVENT="statevent";function cr(d,x){de.call(this,ai.STAT_EVENT,d),this.stat=x}T(cr,de);function Ht(d){const x=ct();q(x,new cr(x,d))}ai.Ma="timingevent";function js(d,x){de.call(this,ai.Ma,d),this.size=x}T(js,de);function Cn(d,x){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},x)}function ur(){this.g=!0}ur.prototype.xa=function(){this.g=!1};function HD(d,x,C,D,z,K){d.info(function(){if(d.g)if(K)for(var ue="",Rt=K.split("&"),jn=0;jn<Rt.length;jn++){var ft=Rt[jn].split("=");if(1<ft.length){var Fn=ft[0];ft=ft[1];var Un=Fn.split("_");ue=2<=Un.length&&Un[1]=="type"?ue+(Fn+"="+ft+"&"):ue+(Fn+"=redacted&")}}else ue=null;else ue=K;return"XMLHTTP REQ ("+D+") [attempt "+z+"]: "+x+`
`+C+`
`+ue})}function qD(d,x,C,D,z,K,ue){d.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+z+"]: "+x+`
`+C+`
`+K+" "+ue})}function ll(d,x,C,D){d.info(function(){return"XMLHTTP TEXT ("+x+"): "+KD(d,C)+(D?" "+D:"")})}function GD(d,x){d.info(function(){return"TIMEOUT: "+x})}ur.prototype.info=function(){};function KD(d,x){if(!d.g)return x;if(!x)return null;try{var C=JSON.parse(x);if(C){for(d=0;d<C.length;d++)if(Array.isArray(C[d])){var D=C[d];if(!(2>D.length)){var z=D[1];if(Array.isArray(z)&&!(1>z.length)){var K=z[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ue=1;ue<z.length;ue++)z[ue]=""}}}}return Vn(C)}catch{return x}}var fh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},W_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vg;function mh(){}T(mh,Jn),mh.prototype.g=function(){return new XMLHttpRequest},mh.prototype.i=function(){return{}},vg=new mh;function Qi(d,x,C,D){this.j=d,this.i=x,this.l=C,this.R=D||1,this.U=new Gt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new H_}function H_(){this.i=null,this.g="",this.h=!1}var q_={},xg={};function wg(d,x,C){d.L=1,d.v=vh(oi(x)),d.m=C,d.P=!0,G_(d,null)}function G_(d,x){d.F=Date.now(),ph(d),d.A=oi(d.v);var C=d.A,D=d.R;Array.isArray(D)||(D=[String(D)]),ob(C.i,"t",D),d.C=0,C=d.j.J,d.h=new H_,d.g=Sb(d.j,C?x:null,!d.m),0<d.O&&(d.M=new tt(p(d.Y,d,d.g),d.O)),x=d.U,C=d.g,D=d.ca;var z="readystatechange";Array.isArray(z)||(z&&(Wt[0]=z.toString()),z=Wt);for(var K=0;K<z.length;K++){var ue=it(C,z[K],D||x.handleEvent,!1,x.h||x);if(!ue)break;x.g[ue.key]=ue}x=d.H?N(d.H):{},d.m?(d.u||(d.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,x)):(d.u="GET",d.g.ea(d.A,d.u,null,x)),Nn(),HD(d.i,d.u,d.A,d.l,d.R,d.m)}Qi.prototype.ca=function(d){d=d.target;const x=this.M;x&&li(d)==3?x.j():this.Y(d)},Qi.prototype.Y=function(d){try{if(d==this.g)e:{const Un=li(this.g);var x=this.g.Ba();const dl=this.g.Z();if(!(3>Un)&&(Un!=3||this.g&&(this.h.h||this.g.oa()||mb(this.g)))){this.J||Un!=4||x==7||(x==8||0>=dl?Nn(3):Nn(2)),_g(this);var C=this.g.Z();this.X=C;t:if(K_(this)){var D=mb(this.g);d="";var z=D.length,K=li(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fo(this),Jc(this);var ue="";break t}this.h.i=new l.TextDecoder}for(x=0;x<z;x++)this.h.h=!0,d+=this.h.i.decode(D[x],{stream:!(K&&x==z-1)});D.length=0,this.h.g+=d,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=C==200,qD(this.i,this.u,this.A,this.l,this.R,Un,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Rt,jn=this.g;if((Rt=jn.g?jn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Rt)){var ft=Rt;break t}}ft=null}if(C=ft)ll(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bg(this,C);else{this.o=!1,this.s=3,Ht(12),fo(this),Jc(this);break e}}if(this.P){C=!0;let is;for(;!this.J&&this.C<ue.length;)if(is=QD(this,ue),is==xg){Un==4&&(this.s=4,Ht(14),C=!1),ll(this.i,this.l,null,"[Incomplete Response]");break}else if(is==q_){this.s=4,Ht(15),ll(this.i,this.l,ue,"[Invalid Chunk]"),C=!1;break}else ll(this.i,this.l,is,null),bg(this,is);if(K_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Un!=4||ue.length!=0||this.h.h||(this.s=1,Ht(16),C=!1),this.o=this.o&&C,!C)ll(this.i,this.l,ue,"[Invalid Chunked Response]"),fo(this),Jc(this);else if(0<ue.length&&!this.W){this.W=!0;var Fn=this.j;Fn.g==this&&Fn.ba&&!Fn.M&&(Fn.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),jg(Fn),Fn.M=!0,Ht(11))}}else ll(this.i,this.l,ue,null),bg(this,ue);Un==4&&fo(this),this.o&&!this.J&&(Un==4?_b(this.j,this):(this.o=!1,ph(this)))}else hM(this.g),C==400&&0<ue.indexOf("Unknown SID")?(this.s=3,Ht(12)):(this.s=0,Ht(13)),fo(this),Jc(this)}}}catch{}finally{}};function K_(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function QD(d,x){var C=d.C,D=x.indexOf(`
`,C);return D==-1?xg:(C=Number(x.substring(C,D)),isNaN(C)?q_:(D+=1,D+C>x.length?xg:(x=x.slice(D,D+C),d.C=D+C,x)))}Qi.prototype.cancel=function(){this.J=!0,fo(this)};function ph(d){d.S=Date.now()+d.I,Q_(d,d.I)}function Q_(d,x){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Cn(p(d.ba,d),x)}function _g(d){d.B&&(l.clearTimeout(d.B),d.B=null)}Qi.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(GD(this.i,this.A),this.L!=2&&(Nn(),Ht(17)),fo(this),this.s=2,Jc(this)):Q_(this,this.S-d)};function Jc(d){d.j.G==0||d.J||_b(d.j,d)}function fo(d){_g(d);var x=d.M;x&&typeof x.ma=="function"&&x.ma(),d.M=null,Dt(d.U),d.g&&(x=d.g,d.g=null,x.abort(),x.ma())}function bg(d,x){try{var C=d.j;if(C.G!=0&&(C.g==d||Eg(C.h,d))){if(!d.K&&Eg(C.h,d)&&C.G==3){try{var D=C.Da.g.parse(x)}catch{D=null}if(Array.isArray(D)&&D.length==3){var z=D;if(z[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<d.F)Th(C),bh(C);else break e;Cg(C),Ht(18)}}else C.za=z[1],0<C.za-C.T&&37500>z[2]&&C.F&&C.v==0&&!C.C&&(C.C=Cn(p(C.Za,C),6e3));if(1>=Z_(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else po(C,11)}else if((d.K||C.g==d)&&Th(C),!y(x))for(z=C.Da.g.parse(x),x=0;x<z.length;x++){let ft=z[x];if(C.T=ft[0],ft=ft[1],C.G==2)if(ft[0]=="c"){C.K=ft[1],C.ia=ft[2];const Fn=ft[3];Fn!=null&&(C.la=Fn,C.j.info("VER="+C.la));const Un=ft[4];Un!=null&&(C.Aa=Un,C.j.info("SVER="+C.Aa));const dl=ft[5];dl!=null&&typeof dl=="number"&&0<dl&&(D=1.5*dl,C.L=D,C.j.info("backChannelRequestTimeoutMs_="+D)),D=C;const is=d.g;if(is){const Nh=is.g?is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nh){var K=D.h;K.g||Nh.indexOf("spdy")==-1&&Nh.indexOf("quic")==-1&&Nh.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Tg(K,K.h),K.h=null))}if(D.D){const kg=is.g?is.g.getResponseHeader("X-HTTP-Session-Id"):null;kg&&(D.ya=kg,Ft(D.I,D.D,kg))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-d.F,C.j.info("Handshake RTT: "+C.R+"ms")),D=C;var ue=d;if(D.qa=Tb(D,D.J?D.ia:null,D.W),ue.K){J_(D.h,ue);var Rt=ue,jn=D.L;jn&&(Rt.I=jn),Rt.B&&(_g(Rt),ph(Rt)),D.g=ue}else xb(D);0<C.i.length&&Eh(C)}else ft[0]!="stop"&&ft[0]!="close"||po(C,7);else C.G==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?po(C,7):Ng(C):ft[0]!="noop"&&C.l&&C.l.ta(ft),C.v=0)}}Nn(4)}catch{}}var YD=class{constructor(d,x){this.g=d,this.map=x}};function Y_(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function X_(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Z_(d){return d.h?1:d.g?d.g.size:0}function Eg(d,x){return d.h?d.h==x:d.g?d.g.has(x):!1}function Tg(d,x){d.g?d.g.add(x):d.h=x}function J_(d,x){d.h&&d.h==x?d.h=null:d.g&&d.g.has(x)&&d.g.delete(x)}Y_.prototype.cancel=function(){if(this.i=eb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function eb(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let x=d.i;for(const C of d.g.values())x=x.concat(C.D);return x}return v(d.i)}function XD(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var x=[],C=d.length,D=0;D<C;D++)x.push(d[D]);return x}x=[],C=0;for(D in d)x[C++]=d[D];return x}function ZD(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var x=[];d=d.length;for(var C=0;C<d;C++)x.push(C);return x}x=[],C=0;for(const D in d)x[C++]=D;return x}}}function tb(d,x){if(d.forEach&&typeof d.forEach=="function")d.forEach(x,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,x,void 0);else for(var C=ZD(d),D=XD(d),z=D.length,K=0;K<z;K++)x.call(void 0,D[K],C&&C[K],d)}var nb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function JD(d,x){if(d){d=d.split("&");for(var C=0;C<d.length;C++){var D=d[C].indexOf("="),z=null;if(0<=D){var K=d[C].substring(0,D);z=d[C].substring(D+1)}else K=d[C];x(K,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function mo(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof mo){this.h=d.h,gh(this,d.j),this.o=d.o,this.g=d.g,yh(this,d.s),this.l=d.l;var x=d.i,C=new nu;C.i=x.i,x.g&&(C.g=new Map(x.g),C.h=x.h),rb(this,C),this.m=d.m}else d&&(x=String(d).match(nb))?(this.h=!1,gh(this,x[1]||"",!0),this.o=eu(x[2]||""),this.g=eu(x[3]||"",!0),yh(this,x[4]),this.l=eu(x[5]||"",!0),rb(this,x[6]||"",!0),this.m=eu(x[7]||"")):(this.h=!1,this.i=new nu(null,this.h))}mo.prototype.toString=function(){var d=[],x=this.j;x&&d.push(tu(x,sb,!0),":");var C=this.g;return(C||x=="file")&&(d.push("//"),(x=this.o)&&d.push(tu(x,sb,!0),"@"),d.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&d.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&d.push("/"),d.push(tu(C,C.charAt(0)=="/"?nM:tM,!0))),(C=this.i.toString())&&d.push("?",C),(C=this.m)&&d.push("#",tu(C,sM)),d.join("")};function oi(d){return new mo(d)}function gh(d,x,C){d.j=C?eu(x,!0):x,d.j&&(d.j=d.j.replace(/:$/,""))}function yh(d,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);d.s=x}else d.s=null}function rb(d,x,C){x instanceof nu?(d.i=x,iM(d.i,d.h)):(C||(x=tu(x,rM)),d.i=new nu(x,d.h))}function Ft(d,x,C){d.i.set(x,C)}function vh(d){return Ft(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function eu(d,x){return d?x?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function tu(d,x,C){return typeof d=="string"?(d=encodeURI(d).replace(x,eM),C&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function eM(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var sb=/[#\/\?@]/g,tM=/[#\?:]/g,nM=/[#\?]/g,rM=/[#\?@]/g,sM=/#/g;function nu(d,x){this.h=this.g=null,this.i=d||null,this.j=!!x}function Yi(d){d.g||(d.g=new Map,d.h=0,d.i&&JD(d.i,function(x,C){d.add(decodeURIComponent(x.replace(/\+/g," ")),C)}))}t=nu.prototype,t.add=function(d,x){Yi(this),this.i=null,d=cl(this,d);var C=this.g.get(d);return C||this.g.set(d,C=[]),C.push(x),this.h+=1,this};function ib(d,x){Yi(d),x=cl(d,x),d.g.has(x)&&(d.i=null,d.h-=d.g.get(x).length,d.g.delete(x))}function ab(d,x){return Yi(d),x=cl(d,x),d.g.has(x)}t.forEach=function(d,x){Yi(this),this.g.forEach(function(C,D){C.forEach(function(z){d.call(x,z,D,this)},this)},this)},t.na=function(){Yi(this);const d=Array.from(this.g.values()),x=Array.from(this.g.keys()),C=[];for(let D=0;D<x.length;D++){const z=d[D];for(let K=0;K<z.length;K++)C.push(x[D])}return C},t.V=function(d){Yi(this);let x=[];if(typeof d=="string")ab(this,d)&&(x=x.concat(this.g.get(cl(this,d))));else{d=Array.from(this.g.values());for(let C=0;C<d.length;C++)x=x.concat(d[C])}return x},t.set=function(d,x){return Yi(this),this.i=null,d=cl(this,d),ab(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[x]),this.h+=1,this},t.get=function(d,x){return d?(d=this.V(d),0<d.length?String(d[0]):x):x};function ob(d,x,C){ib(d,x),0<C.length&&(d.i=null,d.g.set(cl(d,x),v(C)),d.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],x=Array.from(this.g.keys());for(var C=0;C<x.length;C++){var D=x[C];const K=encodeURIComponent(String(D)),ue=this.V(D);for(D=0;D<ue.length;D++){var z=K;ue[D]!==""&&(z+="="+encodeURIComponent(String(ue[D]))),d.push(z)}}return this.i=d.join("&")};function cl(d,x){return x=String(x),d.j&&(x=x.toLowerCase()),x}function iM(d,x){x&&!d.j&&(Yi(d),d.i=null,d.g.forEach(function(C,D){var z=D.toLowerCase();D!=z&&(ib(this,D),ob(this,z,C))},d)),d.j=x}function aM(d,x){const C=new ur;if(l.Image){const D=new Image;D.onload=g(Xi,C,"TestLoadImage: loaded",!0,x,D),D.onerror=g(Xi,C,"TestLoadImage: error",!1,x,D),D.onabort=g(Xi,C,"TestLoadImage: abort",!1,x,D),D.ontimeout=g(Xi,C,"TestLoadImage: timeout",!1,x,D),l.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=d}else x(!1)}function oM(d,x){const C=new ur,D=new AbortController,z=setTimeout(()=>{D.abort(),Xi(C,"TestPingServer: timeout",!1,x)},1e4);fetch(d,{signal:D.signal}).then(K=>{clearTimeout(z),K.ok?Xi(C,"TestPingServer: ok",!0,x):Xi(C,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(z),Xi(C,"TestPingServer: error",!1,x)})}function Xi(d,x,C,D,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),D(C)}catch{}}function lM(){this.g=new br}function cM(d,x,C){const D=C||"";try{tb(d,function(z,K){let ue=z;u(z)&&(ue=Vn(z)),x.push(D+K+"="+encodeURIComponent(ue))})}catch(z){throw x.push(D+"type="+encodeURIComponent("_badmap")),z}}function xh(d){this.l=d.Ub||null,this.j=d.eb||!1}T(xh,Jn),xh.prototype.g=function(){return new wh(this.l,this.j)},xh.prototype.i=function(d){return function(){return d}}({});function wh(d,x){ne.call(this),this.D=d,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(wh,ne),t=wh.prototype,t.open=function(d,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=x,this.readyState=1,su(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(x.body=d),(this.D||l).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ru(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,su(this)),this.g&&(this.readyState=3,su(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lb(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function lb(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var x=d.value?d.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!d.done}))&&(this.response=this.responseText+=x)}d.done?ru(this):su(this),this.readyState==3&&lb(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,ru(this))},t.Qa=function(d){this.g&&(this.response=d,ru(this))},t.ga=function(){this.g&&ru(this)};function ru(d){d.readyState=4,d.l=null,d.j=null,d.v=null,su(d)}t.setRequestHeader=function(d,x){this.u.append(d,x)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],x=this.h.entries();for(var C=x.next();!C.done;)C=C.value,d.push(C[0]+": "+C[1]),C=x.next();return d.join(`\r
`)};function su(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(wh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function cb(d){let x="";return R(d,function(C,D){x+=D,x+=":",x+=C,x+=`\r
`}),x}function Sg(d,x,C){e:{for(D in C){var D=!1;break e}D=!0}D||(C=cb(C),typeof d=="string"?C!=null&&encodeURIComponent(String(C)):Ft(d,x,C))}function en(d){ne.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(en,ne);var uM=/^https?$/i,dM=["POST","PUT"];t=en.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,x,C,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);x=x?x.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vg.g(),this.v=this.o?Xc(this.o):Xc(vg),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(x,String(d),!0),this.B=!1}catch(K){ub(this,K);return}if(d=C||"",C=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var z in D)C.set(z,D[z]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const K of D.keys())C.set(K,D.get(K));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(C.keys()).find(K=>K.toLowerCase()=="content-type"),z=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(dM,x,void 0))||D||z||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ue]of C)this.g.setRequestHeader(K,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fb(this),this.u=!0,this.g.send(d),this.u=!1}catch(K){ub(this,K)}};function ub(d,x){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=x,d.m=5,db(d),_h(d)}function db(d){d.A||(d.A=!0,q(d,"complete"),q(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,q(this,"complete"),q(this,"abort"),_h(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_h(this,!0)),en.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?hb(this):this.bb())},t.bb=function(){hb(this)};function hb(d){if(d.h&&typeof o<"u"&&(!d.v[1]||li(d)!=4||d.Z()!=2)){if(d.u&&li(d)==4)ye(d.Ea,0,d);else if(q(d,"readystatechange"),li(d)==4){d.h=!1;try{const ue=d.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var C;if(!(C=x)){var D;if(D=ue===0){var z=String(d.D).match(nb)[1]||null;!z&&l.self&&l.self.location&&(z=l.self.location.protocol.slice(0,-1)),D=!uM.test(z?z.toLowerCase():"")}C=D}if(C)q(d,"complete"),q(d,"success");else{d.m=6;try{var K=2<li(d)?d.g.statusText:""}catch{K=""}d.l=K+" ["+d.Z()+"]",db(d)}}finally{_h(d)}}}}function _h(d,x){if(d.g){fb(d);const C=d.g,D=d.v[0]?()=>{}:null;d.g=null,d.v=null,x||q(d,"ready");try{C.onreadystatechange=D}catch{}}}function fb(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function li(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<li(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var x=this.g.responseText;return d&&x.indexOf(d)==0&&(x=x.substring(d.length)),St(x)}};function mb(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function hM(d){const x={};d=(d.g&&2<=li(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<d.length;D++){if(y(d[D]))continue;var C=M(d[D]);const z=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const K=x[z]||[];x[z]=K,K.push(C)}S(x,function(D){return D.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function iu(d,x,C){return C&&C.internalChannelParams&&C.internalChannelParams[d]||x}function pb(d){this.Aa=0,this.i=[],this.j=new ur,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=iu("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=iu("baseRetryDelayMs",5e3,d),this.cb=iu("retryDelaySeedMs",1e4,d),this.Wa=iu("forwardChannelMaxRetries",2,d),this.wa=iu("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Y_(d&&d.concurrentRequestLimit),this.Da=new lM,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=pb.prototype,t.la=8,t.G=1,t.connect=function(d,x,C,D){Ht(0),this.W=d,this.H=x||{},C&&D!==void 0&&(this.H.OSID=C,this.H.OAID=D),this.F=this.X,this.I=Tb(this,null,this.W),Eh(this)};function Ng(d){if(gb(d),d.G==3){var x=d.U++,C=oi(d.I);if(Ft(C,"SID",d.K),Ft(C,"RID",x),Ft(C,"TYPE","terminate"),au(d,C),x=new Qi(d,d.j,x),x.L=2,x.v=vh(oi(C)),C=!1,l.navigator&&l.navigator.sendBeacon)try{C=l.navigator.sendBeacon(x.v.toString(),"")}catch{}!C&&l.Image&&(new Image().src=x.v,C=!0),C||(x.g=Sb(x.j,null),x.g.ea(x.v)),x.F=Date.now(),ph(x)}Eb(d)}function bh(d){d.g&&(jg(d),d.g.cancel(),d.g=null)}function gb(d){bh(d),d.u&&(l.clearTimeout(d.u),d.u=null),Th(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function Eh(d){if(!X_(d.h)&&!d.s){d.s=!0;var x=d.Ga;Y||$(),U||(Y(),U=!0),F.add(x,d),d.B=0}}function fM(d,x){return Z_(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=x.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Cn(p(d.Ga,d,x),bb(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const z=new Qi(this,this.j,d);let K=this.o;if(this.S&&(K?(K=N(K),A(K,this.S)):K=this.S),this.m!==null||this.O||(z.H=K,K=null),this.P)e:{for(var x=0,C=0;C<this.i.length;C++){t:{var D=this.i[C];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(x+=D,4096<x){x=C;break e}if(x===4096||C===this.i.length-1){x=C+1;break e}}x=1e3}else x=1e3;x=vb(this,z,x),C=oi(this.I),Ft(C,"RID",d),Ft(C,"CVER",22),this.D&&Ft(C,"X-HTTP-Session-Id",this.D),au(this,C),K&&(this.O?x="headers="+encodeURIComponent(String(cb(K)))+"&"+x:this.m&&Sg(C,this.m,K)),Tg(this.h,z),this.Ua&&Ft(C,"TYPE","init"),this.P?(Ft(C,"$req",x),Ft(C,"SID","null"),z.T=!0,wg(z,C,null)):wg(z,C,x),this.G=2}}else this.G==3&&(d?yb(this,d):this.i.length==0||X_(this.h)||yb(this))};function yb(d,x){var C;x?C=x.l:C=d.U++;const D=oi(d.I);Ft(D,"SID",d.K),Ft(D,"RID",C),Ft(D,"AID",d.T),au(d,D),d.m&&d.o&&Sg(D,d.m,d.o),C=new Qi(d,d.j,C,d.B+1),d.m===null&&(C.H=d.o),x&&(d.i=x.D.concat(d.i)),x=vb(d,C,1e3),C.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Tg(d.h,C),wg(C,D,x)}function au(d,x){d.H&&R(d.H,function(C,D){Ft(x,D,C)}),d.l&&tb({},function(C,D){Ft(x,D,C)})}function vb(d,x,C){C=Math.min(d.i.length,C);var D=d.l?p(d.l.Na,d.l,d):null;e:{var z=d.i;let K=-1;for(;;){const ue=["count="+C];K==-1?0<C?(K=z[0].g,ue.push("ofs="+K)):K=0:ue.push("ofs="+K);let Rt=!0;for(let jn=0;jn<C;jn++){let ft=z[jn].g;const Fn=z[jn].map;if(ft-=K,0>ft)K=Math.max(0,z[jn].g-100),Rt=!1;else try{cM(Fn,ue,"req"+ft+"_")}catch{D&&D(Fn)}}if(Rt){D=ue.join("&");break e}}}return d=d.i.splice(0,C),x.D=d,D}function xb(d){if(!d.g&&!d.u){d.Y=1;var x=d.Fa;Y||$(),U||(Y(),U=!0),F.add(x,d),d.v=0}}function Cg(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Cn(p(d.Fa,d),bb(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,wb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Cn(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ht(10),bh(this),wb(this))};function jg(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function wb(d){d.g=new Qi(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var x=oi(d.qa);Ft(x,"RID","rpc"),Ft(x,"SID",d.K),Ft(x,"AID",d.T),Ft(x,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ft(x,"TO",d.ja),Ft(x,"TYPE","xmlhttp"),au(d,x),d.m&&d.o&&Sg(x,d.m,d.o),d.L&&(d.g.I=d.L);var C=d.g;d=d.ia,C.L=1,C.v=vh(oi(x)),C.m=null,C.P=!0,G_(C,d)}t.Za=function(){this.C!=null&&(this.C=null,bh(this),Cg(this),Ht(19))};function Th(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function _b(d,x){var C=null;if(d.g==x){Th(d),jg(d),d.g=null;var D=2}else if(Eg(d.h,x))C=x.D,J_(d.h,x),D=1;else return;if(d.G!=0){if(x.o)if(D==1){C=x.m?x.m.length:0,x=Date.now()-x.F;var z=d.B;D=ct(),q(D,new js(D,C)),Eh(d)}else xb(d);else if(z=x.s,z==3||z==0&&0<x.X||!(D==1&&fM(d,x)||D==2&&Cg(d)))switch(C&&0<C.length&&(x=d.h,x.i=x.i.concat(C)),z){case 1:po(d,5);break;case 4:po(d,10);break;case 3:po(d,6);break;default:po(d,2)}}}function bb(d,x){let C=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(C*=2),C*x}function po(d,x){if(d.j.info("Error code "+x),x==2){var C=p(d.fb,d),D=d.Xa;const z=!D;D=new mo(D||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||gh(D,"https"),vh(D),z?aM(D.toString(),C):oM(D.toString(),C)}else Ht(2);d.G=0,d.l&&d.l.sa(x),Eb(d),gb(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function Eb(d){if(d.G=0,d.ka=[],d.l){const x=eb(d.h);(x.length!=0||d.i.length!=0)&&(b(d.ka,x),b(d.ka,d.i),d.h.i.length=0,v(d.i),d.i.length=0),d.l.ra()}}function Tb(d,x,C){var D=C instanceof mo?oi(C):new mo(C);if(D.g!="")x&&(D.g=x+"."+D.g),yh(D,D.s);else{var z=l.location;D=z.protocol,x=x?x+"."+z.hostname:z.hostname,z=+z.port;var K=new mo(null);D&&gh(K,D),x&&(K.g=x),z&&yh(K,z),C&&(K.l=C),D=K}return C=d.D,x=d.ya,C&&x&&Ft(D,C,x),Ft(D,"VER",d.la),au(d,D),D}function Sb(d,x,C){if(x&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=d.Ca&&!d.pa?new en(new xh({eb:C})):new en(d.pa),x.Ha(d.J),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nb(){}t=Nb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Sh(){}Sh.prototype.g=function(d,x){return new Er(d,x)};function Er(d,x){ne.call(this),this.g=new pb(x),this.l=d,this.h=x&&x.messageUrlParams||null,d=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(d?d["X-WebChannel-Content-Type"]=x.messageContentType:d={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(d?d["X-WebChannel-Client-Profile"]=x.va:d={"X-WebChannel-Client-Profile":x.va}),this.g.S=d,(d=x&&x.Sb)&&!y(d)&&(this.g.m=d),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!y(x)&&(this.g.D=x,d=this.h,d!==null&&x in d&&(d=this.h,x in d&&delete d[x])),this.j=new ul(this)}T(Er,ne),Er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Er.prototype.close=function(){Ng(this.g)},Er.prototype.o=function(d){var x=this.g;if(typeof d=="string"){var C={};C.__data__=d,d=C}else this.u&&(C={},C.__data__=Vn(d),d=C);x.i.push(new YD(x.Ya++,d)),x.G==3&&Eh(x)},Er.prototype.N=function(){this.g.l=null,delete this.j,Ng(this.g),delete this.g,Er.aa.N.call(this)};function Cb(d){ho.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var x=d.__sm__;if(x){e:{for(const C in x){d=C;break e}d=void 0}(this.i=d)&&(d=this.i,x=x!==null&&d in x?x[d]:void 0),this.data=x}else this.data=d}T(Cb,ho);function jb(){Ur.call(this),this.status=1}T(jb,Ur);function ul(d){this.g=d}T(ul,Nb),ul.prototype.ua=function(){q(this.g,"a")},ul.prototype.ta=function(d){q(this.g,new Cb(d))},ul.prototype.sa=function(d){q(this.g,new jb)},ul.prototype.ra=function(){q(this.g,"b")},Sh.prototype.createWebChannel=Sh.prototype.g,Er.prototype.send=Er.prototype.o,Er.prototype.open=Er.prototype.m,Er.prototype.close=Er.prototype.close,pA=function(){return new Sh},mA=function(){return ct()},fA=ai,ex={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fh.NO_ERROR=0,fh.TIMEOUT=8,fh.HTTP_ERROR=6,Nf=fh,W_.COMPLETE="complete",hA=W_,Zc.EventType=uo,uo.OPEN="a",uo.CLOSE="b",uo.ERROR="c",uo.MESSAGE="d",ne.prototype.listen=ne.prototype.K,ju=Zc,en.prototype.listenOnce=en.prototype.L,en.prototype.getLastError=en.prototype.Ka,en.prototype.getLastErrorCode=en.prototype.Ba,en.prototype.getStatus=en.prototype.Z,en.prototype.getResponseJson=en.prototype.Oa,en.prototype.getResponseText=en.prototype.oa,en.prototype.send=en.prototype.ea,en.prototype.setWithCredentials=en.prototype.Ha,dA=en}).apply(typeof Xh<"u"?Xh:typeof self<"u"?self:typeof window<"u"?window:{});const ZE="@firebase/firestore",JE="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qn.UNAUTHENTICATED=new qn(null),qn.GOOGLE_CREDENTIALS=new qn("google-credentials-uid"),qn.FIRST_PARTY=new qn("first-party-uid"),qn.MOCK_USER=new qn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=new r0("@firebase/firestore");function xl(){return qo.logLevel}function pe(t,...e){if(qo.logLevel<=nt.DEBUG){const n=e.map(g0);qo.debug(`Firestore (${zc}): ${t}`,...n)}}function Li(t,...e){if(qo.logLevel<=nt.ERROR){const n=e.map(g0);qo.error(`Firestore (${zc}): ${t}`,...n)}}function Ha(t,...e){if(qo.logLevel<=nt.WARN){const n=e.map(g0);qo.warn(`Firestore (${zc}): ${t}`,...n)}}function g0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,gA(t,r,n)}function gA(t,e,n){let r=`FIRESTORE (${zc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Li(r),new Error(r)}function bt(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||gA(e,s,r)}function ze(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Bi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qn.UNAUTHENTICATED))}shutdown(){}}class UB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $B{constructor(e){this.t=e,this.currentUser=qn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){bt(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Si;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Si,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Si)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt(typeof r.accessToken=="string",31837,{l:r}),new yA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string",2055,{h:e}),new qn(e)}}class BB{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=qn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zB{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new BB(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(qn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WB{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ar(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){bt(this.o===void 0,3512);const r=i=>{i.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,pe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new eT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(bt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new eT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=HB(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ze(t,e){return t<e?-1:t>e?1:0}function tx(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return Ze(r,s);{const i=vA(),o=qB(i.encode(tT(t,n)),i.encode(tT(e,n)));return o!==0?o:Ze(r,s)}}n+=r>65535?2:1}return Ze(t.length,e.length)}function tT(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function qB(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ze(t[n],e[n]);return Ze(t.length,e.length)}function wc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="__name__";class Ps{constructor(e,n,r){n===void 0?n=0:n>e.length&&Re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ps.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ps?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ps.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ze(e.length,n.length)}static compareSegments(e,n){const r=Ps.isNumericId(e),s=Ps.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ps.extractNumericId(e).compare(Ps.extractNumericId(n)):tx(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ma.fromString(e.substring(4,e.length-2))}}class Ot extends Ps{construct(e,n,r){return new Ot(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ot(n)}static emptyPath(){return new Ot([])}}const GB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class An extends Ps{construct(e,n,r){return new An(e,n,r)}static isValidIdentifier(e){return GB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),An.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nT}static keyField(){return new An([nT])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new fe(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new fe(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new fe(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new An(n)}static emptyPath(){return new An([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(Ot.fromString(e))}static fromName(e){return new Ce(Ot.fromString(e).popFirst(5))}static empty(){return new Ce(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new Ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t,e,n){if(!n)throw new fe(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KB(t,e,n,r){if(e===!0&&r===!0)throw new fe(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rT(t){if(!Ce.isDocumentKey(t))throw new fe(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sT(t){if(Ce.isDocumentKey(t))throw new fe(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Op(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re(12329,{type:typeof t})}function ir(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Op(t);throw new fe(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function QB(t,e){if(e<=0)throw new fe(Z.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,e){const n={typeString:t};return e&&(n.value=e),n}function th(t,e){if(!wA(t))throw new fe(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new fe(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=-62135596800,aT=1e6;class Bt{static now(){return Bt.fromMillis(Date.now())}static fromDate(e){return Bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*aT);return new Bt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<iT)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/aT}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(th(e,Bt._jsonSchema))return new Bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-iT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Bt._jsonSchemaVersion="firestore/timestamp/1.0",Bt._jsonSchema={type:yn("string",Bt._jsonSchemaVersion),seconds:yn("number"),nanoseconds:yn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new Bt(0,0))}static max(){return new Fe(new Bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=-1;function YB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Fe.fromTimestamp(r===1e9?new Bt(n+1,0):new Bt(n,r));return new qa(s,Ce.empty(),e)}function XB(t){return new qa(t.readTime,t.key,Nd)}class qa{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new qa(Fe.min(),Ce.empty(),Nd)}static max(){return new qa(Fe.max(),Ce.empty(),Nd)}}function ZB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==JB)throw t;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new te((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof te?n:te.resolve(n)}catch(n){return te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):te.reject(n)}static resolve(e){return new te((n,r)=>{n(e)})}static reject(e){return new te((n,r)=>{r(e)})}static waitFor(e){return new te((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=te.resolve(!1);for(const r of e)n=n.next(s=>s?te.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new te((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new te((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function t8(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Lp.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=-1;function Vp(t){return t==null}function Sm(t){return t===0&&1/t==-1/0}function n8(t){return typeof t=="number"&&Number.isInteger(t)&&!Sm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="";function r8(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=oT(e)),e=s8(t.get(n),e);return oT(e)}function s8(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case _A:n+="";break;default:n+=i}}return n}function oT(t){return t+_A+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ao(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.comparator=e,this.root=n||In.EMPTY}insert(e,n){return new Jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new Jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zh(this.root,e,this.comparator,!0)}}class Zh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class In{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??In.RED,this.left=s??In.EMPTY,this.right=i??In.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new In(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return In.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return In.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,In.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,In.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new In(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cT(this.data.getIterator())}getIteratorFrom(e){return new cT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _n(this.comparator);return n.data=e,n}}class cT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new Rr([])}unionWith(e){let n=new _n(An.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new EA("Invalid base64 string: "+i):i}}(e);return new On(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new On(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}On.EMPTY_BYTE_STRING=new On("");const i8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ga(t){if(bt(!!t,39018),typeof t=="string"){let e=0;const n=i8.exec(t);if(bt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:on(t.seconds),nanos:on(t.nanos)}}function on(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ka(t){return typeof t=="string"?On.fromBase64String(t):On.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="server_timestamp",SA="__type__",NA="__previous_value__",CA="__local_write_time__";function x0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[SA])===null||n===void 0?void 0:n.stringValue)===TA}function Fp(t){const e=t.mapValue.fields[NA];return x0(e)?Fp(e):e}function Cd(t){const e=Ga(t.mapValue.fields[CA].timestampValue);return new Bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e,n,r,s,i,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Nm="(default)";class jd{constructor(e,n){this.projectId=e,this.database=n||Nm}static empty(){return new jd("","")}get isDefaultDatabase(){return this.database===Nm}isEqual(e){return e instanceof jd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="__type__",kA="__max__",Jh={mapValue:{fields:{__type__:{stringValue:kA}}}},IA="__vector__",Cm="value";function Qa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?x0(t)?4:l8(t)?9007199254740991:o8(t)?10:11:Re(28295,{value:t})}function Xs(t,e){if(t===e)return!0;const n=Qa(t);if(n!==Qa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cd(t).isEqual(Cd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ga(s.timestampValue),l=Ga(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ka(s.bytesValue).isEqual(Ka(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return on(s.geoPointValue.latitude)===on(i.geoPointValue.latitude)&&on(s.geoPointValue.longitude)===on(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return on(s.integerValue)===on(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=on(s.doubleValue),l=on(i.doubleValue);return o===l?Sm(o)===Sm(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return wc(t.arrayValue.values||[],e.arrayValue.values||[],Xs);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(lT(o)!==lT(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Xs(o[c],l[c])))return!1;return!0}(t,e);default:return Re(52216,{left:t})}}function kd(t,e){return(t.values||[]).find(n=>Xs(n,e))!==void 0}function _c(t,e){if(t===e)return 0;const n=Qa(t),r=Qa(e);if(n!==r)return Ze(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ze(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=on(i.integerValue||i.doubleValue),c=on(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return uT(t.timestampValue,e.timestampValue);case 4:return uT(Cd(t),Cd(e));case 5:return tx(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Ka(i),c=Ka(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Ze(l[u],c[u]);if(h!==0)return h}return Ze(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ze(on(i.latitude),on(o.latitude));return l!==0?l:Ze(on(i.longitude),on(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return dT(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,u,h;const f=i.fields||{},p=o.fields||{},g=(l=f[Cm])===null||l===void 0?void 0:l.arrayValue,T=(c=p[Cm])===null||c===void 0?void 0:c.arrayValue,v=Ze(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0);return v!==0?v:dT(g,T)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Jh.mapValue&&o===Jh.mapValue)return 0;if(i===Jh.mapValue)return 1;if(o===Jh.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=tx(c[f],h[f]);if(p!==0)return p;const g=_c(l[c[f]],u[h[f]]);if(g!==0)return g}return Ze(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Re(23264,{le:n})}}function uT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ze(t,e);const n=Ga(t),r=Ga(e),s=Ze(n.seconds,r.seconds);return s!==0?s:Ze(n.nanos,r.nanos)}function dT(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=_c(n[s],r[s]);if(i)return i}return Ze(n.length,r.length)}function bc(t){return nx(t)}function nx(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ga(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ka(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=nx(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${nx(n.fields[o])}`;return s+"}"}(t.mapValue):Re(61005,{value:t})}function Cf(t){switch(Qa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fp(t);return e?16+Cf(e):16;case 5:return 2*t.stringValue.length;case 6:return Ka(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Cf(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ao(r.fields,(i,o)=>{s+=i.length+Cf(o)}),s}(t.mapValue);default:throw Re(13486,{value:t})}}function hT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rx(t){return!!t&&"integerValue"in t}function w0(t){return!!t&&"arrayValue"in t}function fT(t){return!!t&&"nullValue"in t}function mT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jf(t){return!!t&&"mapValue"in t}function o8(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[jA])===null||n===void 0?void 0:n.stringValue)===IA}function qu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ao(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=qu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function l8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===kA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.value=e}static empty(){return new pr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qu(n)}setAll(e){let n=An.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=qu(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());jf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];jf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ao(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new pr(qu(this.value))}}function AA(t){const e=[];return ao(t.fields,(n,r)=>{const s=new An([n]);if(jf(r)){const i=AA(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Kn(e,0,Fe.min(),Fe.min(),Fe.min(),pr.empty(),0)}static newFoundDocument(e,n,r,s){return new Kn(e,1,n,Fe.min(),r,s,0)}static newNoDocument(e,n){return new Kn(e,2,n,Fe.min(),Fe.min(),pr.empty(),0)}static newUnknownDocument(e,n){return new Kn(e,3,n,Fe.min(),Fe.min(),pr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n){this.position=e,this.inclusive=n}}function pT(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Ce.comparator(Ce.fromName(o.referenceValue),n.key):r=_c(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function gT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n="asc"){this.field=e,this.dir=n}}function c8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{}class gn extends PA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new d8(e,n,r):n==="array-contains"?new m8(e,r):n==="in"?new p8(e,r):n==="not-in"?new g8(e,r):n==="array-contains-any"?new y8(e,r):new gn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new h8(e,r):new f8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(_c(n,this.value)):n!==null&&Qa(this.value)===Qa(n)&&this.matchesComparison(_c(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ns extends PA{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ns(e,n)}matches(e){return RA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function RA(t){return t.op==="and"}function DA(t){return u8(t)&&RA(t)}function u8(t){for(const e of t.filters)if(e instanceof Ns)return!1;return!0}function sx(t){if(t instanceof gn)return t.field.canonicalString()+t.op.toString()+bc(t.value);if(DA(t))return t.filters.map(e=>sx(e)).join(",");{const e=t.filters.map(n=>sx(n)).join(",");return`${t.op}(${e})`}}function MA(t,e){return t instanceof gn?function(r,s){return s instanceof gn&&r.op===s.op&&r.field.isEqual(s.field)&&Xs(r.value,s.value)}(t,e):t instanceof Ns?function(r,s){return s instanceof Ns&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&MA(o,s.filters[l]),!0):!1}(t,e):void Re(19439)}function OA(t){return t instanceof gn?function(n){return`${n.field.canonicalString()} ${n.op} ${bc(n.value)}`}(t):t instanceof Ns?function(n){return n.op.toString()+" {"+n.getFilters().map(OA).join(" ,")+"}"}(t):"Filter"}class d8 extends gn{constructor(e,n,r){super(e,n,r),this.key=Ce.fromName(r.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class h8 extends gn{constructor(e,n){super(e,"in",n),this.keys=LA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class f8 extends gn{constructor(e,n){super(e,"not-in",n),this.keys=LA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function LA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ce.fromName(r.referenceValue))}class m8 extends gn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return w0(n)&&kd(n.arrayValue,this.value)}}class p8 extends gn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&kd(this.value.arrayValue,n)}}class g8 extends gn{constructor(e,n){super(e,"not-in",n)}matches(e){if(kd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!kd(this.value.arrayValue,n)}}class y8 extends gn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!w0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>kd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Pe=null}}function yT(t,e=null,n=[],r=[],s=null,i=null,o=null){return new v8(t,e,n,r,s,i,o)}function _0(t){const e=ze(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sx(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Vp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bc(r)).join(",")),e.Pe=n}return e.Pe}function b0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!c8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!MA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gT(t.startAt,e.startAt)&&gT(t.endAt,e.endAt)}function ix(t){return Ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function x8(t,e,n,r,s,i,o,l){return new qc(t,e,n,r,s,i,o,l)}function Up(t){return new qc(t)}function vT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function VA(t){return t.collectionGroup!==null}function Gu(t){const e=ze(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new _n(An.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new Id(i,r))}),n.has(An.keyField().canonicalString())||e.Te.push(new Id(An.keyField(),r))}return e.Te}function Ws(t){const e=ze(t);return e.Ie||(e.Ie=w8(e,Gu(t))),e.Ie}function w8(t,e){if(t.limitType==="F")return yT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Id(s.field,i)});const n=t.endAt?new jm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new jm(t.startAt.position,t.startAt.inclusive):null;return yT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ax(t,e){const n=t.filters.concat([e]);return new qc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function km(t,e,n){return new qc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $p(t,e){return b0(Ws(t),Ws(e))&&t.limitType===e.limitType}function FA(t){return`${_0(Ws(t))}|lt:${t.limitType}`}function wl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>OA(s)).join(", ")}]`),Vp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>bc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>bc(s)).join(",")),`Target(${r})`}(Ws(t))}; limitType=${t.limitType})`}function Bp(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Ce.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Gu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=pT(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,Gu(r),s)||r.endAt&&!function(o,l,c){const u=pT(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,Gu(r),s))}(t,e)}function _8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UA(t){return(e,n)=>{let r=!1;for(const s of Gu(t)){const i=b8(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function b8(t,e,n){const r=t.field.isKeyField()?Ce.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?_c(c,u):Re(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ao(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return bA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8=new Jt(Ce.comparator);function Vi(){return E8}const $A=new Jt(Ce.comparator);function ku(...t){let e=$A;for(const n of t)e=e.insert(n.key,n);return e}function BA(t){let e=$A;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function So(){return Ku()}function zA(){return Ku()}function Ku(){return new sl(t=>t.toString(),(t,e)=>t.isEqual(e))}const T8=new Jt(Ce.comparator),S8=new _n(Ce.comparator);function rt(...t){let e=S8;for(const n of t)e=e.add(n);return e}const N8=new _n(Ze);function C8(){return N8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sm(e)?"-0":e}}function WA(t){return{integerValue:""+t}}function HA(t,e){return n8(e)?WA(e):E0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(){this._=void 0}}function j8(t,e,n){return t instanceof Ad?function(s,i){const o={fields:{[SA]:{stringValue:TA},[CA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&x0(i)&&(i=Fp(i)),i&&(o.fields[NA]=i),{mapValue:o}}(n,e):t instanceof Ec?GA(t,e):t instanceof Tc?KA(t,e):function(s,i){const o=qA(s,i),l=xT(o)+xT(s.Ee);return rx(o)&&rx(s.Ee)?WA(l):E0(s.serializer,l)}(t,e)}function k8(t,e,n){return t instanceof Ec?GA(t,e):t instanceof Tc?KA(t,e):n}function qA(t,e){return t instanceof Pd?function(r){return rx(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ad extends zp{}class Ec extends zp{constructor(e){super(),this.elements=e}}function GA(t,e){const n=QA(e);for(const r of t.elements)n.some(s=>Xs(s,r))||n.push(r);return{arrayValue:{values:n}}}class Tc extends zp{constructor(e){super(),this.elements=e}}function KA(t,e){let n=QA(e);for(const r of t.elements)n=n.filter(s=>!Xs(s,r));return{arrayValue:{values:n}}}class Pd extends zp{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function xT(t){return on(t.integerValue||t.doubleValue)}function QA(t){return w0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n){this.field=e,this.transform=n}}function I8(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ec&&s instanceof Ec||r instanceof Tc&&s instanceof Tc?wc(r.elements,s.elements,Xs):r instanceof Pd&&s instanceof Pd?Xs(r.Ee,s.Ee):r instanceof Ad&&s instanceof Ad}(t.transform,e.transform)}class A8{constructor(e,n){this.version=e,this.transformResults=n}}class ar{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hp{}function YA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qp(t.key,ar.none()):new nh(t.key,t.data,ar.none());{const n=t.data,r=pr.empty();let s=new _n(An.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new oo(t.key,r,new Rr(s.toArray()),ar.none())}}function P8(t,e,n){t instanceof nh?function(s,i,o){const l=s.value.clone(),c=_T(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof oo?function(s,i,o){if(!kf(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=_T(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(XA(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Qu(t,e,n,r){return t instanceof nh?function(i,o,l,c){if(!kf(i.precondition,o))return l;const u=i.value.clone(),h=bT(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof oo?function(i,o,l,c){if(!kf(i.precondition,o))return l;const u=bT(i.fieldTransforms,c,o),h=o.data;return h.setAll(XA(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,l){return kf(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function R8(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=qA(r.transform,s||null);i!=null&&(n===null&&(n=pr.empty()),n.set(r.field,i))}return n||null}function wT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&wc(r,s,(i,o)=>I8(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nh extends Hp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class oo extends Hp{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function XA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function _T(t,e,n){const r=new Map;bt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,k8(o,l,n[s]))}return r}function bT(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,j8(i,o,e))}return r}class qp extends Hp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class D8 extends Hp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&P8(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Qu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Qu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=zA();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=YA(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),rt())}isEqual(e){return this.batchId===e.batchId&&wc(this.mutations,e.mutations,(n,r)=>wT(n,r))&&wc(this.baseMutations,e.baseMutations,(n,r)=>wT(n,r))}}class T0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){bt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return T8}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new T0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let O8=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn,ot;function V8(t){switch(t){case Z.OK:return Re(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Re(15467,{code:t})}}function ZA(t){if(t===void 0)return Li("GRPC error has no .code"),Z.UNKNOWN;switch(t){case mn.OK:return Z.OK;case mn.CANCELLED:return Z.CANCELLED;case mn.UNKNOWN:return Z.UNKNOWN;case mn.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case mn.INTERNAL:return Z.INTERNAL;case mn.UNAVAILABLE:return Z.UNAVAILABLE;case mn.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case mn.NOT_FOUND:return Z.NOT_FOUND;case mn.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case mn.ABORTED:return Z.ABORTED;case mn.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case mn.DATA_LOSS:return Z.DATA_LOSS;default:return Re(39323,{code:t})}}(ot=mn||(mn={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F8=new Ma([4294967295,4294967295],0);function ET(t){const e=vA().encode(t),n=new uA;return n.update(e),new Uint8Array(n.digest())}function TT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ma([n,r],0),new Ma([s,i],0)]}class S0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Iu(`Invalid padding: ${n}`);if(r<0)throw new Iu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Iu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Iu(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Ma.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Ma.fromNumber(r)));return s.compare(F8)===1&&(s=new Ma([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=ET(e),[r,s]=TT(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new S0(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.fe===0)return;const n=ET(e),[r,s]=TT(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,rh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gp(Fe.min(),s,new Jt(Ze),Vi(),rt())}}class rh{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rh(r,n,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class JA{constructor(e,n){this.targetId=e,this.De=n}}class eP{constructor(e,n,r=On.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ST{constructor(){this.ve=0,this.Ce=NT(),this.Fe=On.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=rt(),n=rt(),r=rt();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Re(38017,{changeType:i})}}),new rh(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=NT()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,bt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class U8{constructor(e){this.We=e,this.Ge=new Map,this.ze=Vi(),this.je=ef(),this.Je=ef(),this.He=new Jt(Ze)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(ix(i))if(r===0){const o=new Ce(i.path);this.Xe(n,o,Kn.newNoDocument(o,Fe.min()))}else bt(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const l=this._t(e),c=l?this.ut(l,e,o):1;if(c!==0){this.rt(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,u)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Ka(r).toUint8Array()}catch(c){if(c instanceof EA)return Ha("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new S0(o,s,i)}catch(c){return Ha(c instanceof Iu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const l=this.st(o);if(l){if(i.current&&ix(l.target)){const c=new Ce(l.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,Kn.newNoDocument(c,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=rt();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new Gp(e,n,this.He,this.ze,r);return this.ze=Vi(),this.je=ef(),this.Je=ef(),this.He=new Jt(Ze),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new ST,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new _n(Ze),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new _n(Ze),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new ST),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function ef(){return new Jt(Ce.comparator)}function NT(){return new Jt(Ce.comparator)}const $8={asc:"ASCENDING",desc:"DESCENDING"},B8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z8={and:"AND",or:"OR"};class W8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ox(t,e){return t.useProto3Json||Vp(e)?e:{value:e}}function Im(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function H8(t,e){return Im(t,e.toTimestamp())}function Hs(t){return bt(!!t,49232),Fe.fromTimestamp(function(n){const r=Ga(n);return new Bt(r.seconds,r.nanos)}(t))}function N0(t,e){return lx(t,e).canonicalString()}function lx(t,e){const n=function(s){return new Ot(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function nP(t){const e=Ot.fromString(t);return bt(oP(e),10190,{key:e.toString()}),e}function cx(t,e){return N0(t.databaseId,e.path)}function wy(t,e){const n=nP(e);if(n.get(1)!==t.databaseId.projectId)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ce(sP(n))}function rP(t,e){return N0(t.databaseId,e)}function q8(t){const e=nP(t);return e.length===4?Ot.emptyPath():sP(e)}function ux(t){return new Ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sP(t){return bt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function CT(t,e,n){return{name:cx(t,e),fields:n.value.mapValue.fields}}function G8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Re(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(bt(h===void 0||typeof h=="string",58123),On.fromBase64String(h||"")):(bt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),On.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?Z.UNKNOWN:ZA(u.code);return new fe(h,u.message||"")}(o);n=new eP(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=wy(t,r.document.name),i=Hs(r.document.updateTime),o=r.document.createTime?Hs(r.document.createTime):Fe.min(),l=new pr({mapValue:{fields:r.document.fields}}),c=Kn.newFoundDocument(s,i,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new If(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=wy(t,r.document),i=r.readTime?Hs(r.readTime):Fe.min(),o=Kn.newNoDocument(s,i),l=r.removedTargetIds||[];n=new If([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=wy(t,r.document),i=r.removedTargetIds||[];n=new If([],i,s,null)}else{if(!("filter"in e))return Re(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new L8(s,i),l=r.targetId;n=new JA(l,o)}}return n}function K8(t,e){let n;if(e instanceof nh)n={update:CT(t,e.key,e.value)};else if(e instanceof qp)n={delete:cx(t,e.key)};else if(e instanceof oo)n={update:CT(t,e.key,e.data),updateMask:rz(e.fieldMask)};else{if(!(e instanceof D8))return Re(16599,{Rt:e.type});n={verify:cx(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Ad)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ec)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Tc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Pd)return{fieldPath:o.field.canonicalString(),increment:l.Ee};throw Re(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:H8(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Re(27497)}(t,e.precondition)),n}function Q8(t,e){return t&&t.length>0?(bt(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Hs(s.updateTime):Hs(i);return o.isEqual(Fe.min())&&(o=Hs(i)),new A8(o,s.transformResults||[])}(n,e))):[]}function Y8(t,e){return{documents:[rP(t,e.path)]}}function X8(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rP(t,s);const i=function(u){if(u.length!==0)return aP(Ns.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:_l(p.field),direction:ez(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=ox(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:n,parent:s}}function Z8(t){let e=q8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){bt(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=iP(f);return p instanceof Ns&&DA(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(T){return new Id(bl(T.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,Vp(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,g=f.values||[];return new jm(g,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,g=f.values||[];return new jm(g,p)}(n.endAt)),x8(e,s,o,i,l,"F",c,u)}function J8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function iP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bl(n.unaryFilter.field);return gn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=bl(n.unaryFilter.field);return gn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=bl(n.unaryFilter.field);return gn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bl(n.unaryFilter.field);return gn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}}(t):t.fieldFilter!==void 0?function(n){return gn.create(bl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ns.create(n.compositeFilter.filters.map(r=>iP(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Re(1026)}}(n.compositeFilter.op))}(t):Re(30097,{filter:t})}function ez(t){return $8[t]}function tz(t){return B8[t]}function nz(t){return z8[t]}function _l(t){return{fieldPath:t.canonicalString()}}function bl(t){return An.fromServerFormat(t.fieldPath)}function aP(t){return t instanceof gn?function(n){if(n.op==="=="){if(mT(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NAN"}};if(fT(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mT(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NOT_NAN"}};if(fT(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(n.field),op:tz(n.op),value:n.value}}}(t):t instanceof Ns?function(n){const r=n.getFilters().map(s=>aP(s));return r.length===1?r[0]:{compositeFilter:{op:nz(n.op),filters:r}}}(t):Re(54877,{filter:t})}function rz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function oP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n,r,s,i=Fe.min(),o=Fe.min(),l=On.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new _a(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _a(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e){this.gt=e}}function iz(t){const e=Z8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?km(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(){this.Dn=new oz}addToCollectionParentIndex(e,n){return this.Dn.add(n),te.resolve()}getCollectionParents(e,n){return te.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return te.resolve()}deleteFieldIndex(e,n){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,n){return te.resolve()}getDocumentsMatchingTarget(e,n){return te.resolve(null)}getIndexType(e,n){return te.resolve(0)}getFieldIndexes(e,n){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,n){return te.resolve(qa.min())}getMinOffsetFromCollectionGroup(e,n){return te.resolve(qa.min())}updateCollectionGroup(e,n,r){return te.resolve()}updateIndexEntries(e,n){return te.resolve()}}class oz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new _n(Ot.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new _n(Ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lP=41943040;class fr{static withCacheSize(e){return new fr(e,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr.DEFAULT_COLLECTION_PERCENTILE=10,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fr.DEFAULT=new fr(lP,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fr.DISABLED=new fr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Sc(0)}static ur(){return new Sc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="LruGarbageCollector",lz=1048576;function IT([t,e],[n,r]){const s=Ze(t,n);return s===0?Ze(e,r):s}class cz{constructor(e){this.Tr=e,this.buffer=new _n(IT),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();IT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class uz{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){pe(kT,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hc(n)?pe(kT,"Ignoring IndexedDB error during garbage collection: ",n):await Wc(n)}await this.Rr(3e5)})}}class dz{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return te.resolve(Lp.ue);const r=new cz(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(jT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jT):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),xl()<=nt.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function hz(t,e){return new dz(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(){this.changes=new sl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Kn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?te.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Qu(r.mutation,s,Rr.empty(),Bt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,rt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=rt()){const s=So();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ku();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=So();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,rt()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Vi();const o=Ku(),l=function(){return Ku()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof oo)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Qu(h.mutation,u,h.mutation.getFieldMask(),Bt.now())):o.set(u.key,Rr.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return l.set(u,new mz(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ku();let s=new Jt((o,l)=>o-l),i=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Rr.empty();h=l.applyToLocalView(u,h),r.set(c,h);const f=(s.get(l.batchId)||rt()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=zA();h.forEach(p=>{if(!i.has(p)){const g=YA(n.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return te.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):VA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):te.resolve(So());let l=Nd,c=i;return o.next(u=>te.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?te.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,rt())).next(h=>({batchId:l,changes:BA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next(r=>{let s=ku();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ku();return this.indexManager.getCollectionParents(e,i).next(l=>te.forEach(l,c=>{const u=function(f,p){return new qc(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Kn.newInvalidDocument(h)))});let l=ku();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Qu(h.mutation,u,Rr.empty(),Bt.now()),Bp(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return te.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Hs(s.createTime)}}(n)),te.resolve()}getNamedQuery(e,n){return te.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:iz(s.bundledQuery),readTime:Hs(s.readTime)}}(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(){this.overlays=new Jt(Ce.comparator),this.kr=new Map}getOverlay(e,n){return te.resolve(this.overlays.get(n))}getOverlays(e,n){const r=So();return te.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),te.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),te.resolve()}getOverlaysForCollection(e,n,r){const s=So(),i=n.length+1,o=new Ce(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return te.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Jt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=So(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=So(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return te.resolve(l)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new O8(n,r));let i=this.kr.get(n);i===void 0&&(i=rt(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(){this.sessionToken=On.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(){this.qr=new _n(bn.Qr),this.$r=new _n(bn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new bn(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new bn(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Ce(new Ot([])),r=new bn(n,e),s=new bn(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Ce(new Ot([])),r=new bn(n,e),s=new bn(n,e+1);let i=rt();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new bn(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class bn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Ce.comparator(e.key,n.key)||Ze(e.Hr,n.Hr)}static Ur(e,n){return Ze(e.Hr,n.Hr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new _n(bn.Qr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new M8(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Yr=this.Yr.add(new bn(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return te.resolve(o)}lookupMutationBatch(e,n){return te.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return te.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?v0:this.er-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new bn(n,0),s=new bn(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),te.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _n(Ze);return n.forEach(s=>{const i=new bn(s,0),o=new bn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),te.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Ce.isDocumentKey(i)||(i=i.child(""));const o=new bn(new Ce(i),0);let l=new _n(Ze);return this.Yr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Hr)),!0)},o),te.resolve(this.ei(l))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){bt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return te.forEach(n.mutations,s=>{const i=new bn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new bn(n,0),s=this.Yr.firstAfterOrEqual(r);return te.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e){this.ni=e,this.docs=function(){return new Jt(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return te.resolve(r?r.document.mutableCopy():Kn.newInvalidDocument(n))}getEntries(e,n){let r=Vi();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Kn.newInvalidDocument(s))}),te.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Vi();const o=n.path,l=new Ce(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||ZB(XB(h),r)<=0||(s.has(h.key)||Bp(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return te.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Re(9500)}ri(e,n){return te.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _z(this)}getSize(e){return te.resolve(this.size)}}class _z extends fz{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),te.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(e){this.persistence=e,this.ii=new sl(n=>_0(n),b0),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.si=0,this.oi=new C0,this.targetCount=0,this._i=Sc.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),te.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Sc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,te.resolve()}updateTargetData(e,n){return this.hr(n),te.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),te.waitFor(i).next(()=>s)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return te.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),te.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),te.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),te.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return te.resolve(r)}containsKey(e,n){return te.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n){this.ai={},this.overlays={},this.ui=new Lp(0),this.ci=!1,this.ci=!0,this.li=new vz,this.referenceDelegate=e(this),this.hi=new bz(this),this.indexManager=new az,this.remoteDocumentCache=function(s){return new wz(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new sz(n),this.Ti=new gz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new xz(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){pe("MemoryPersistence","Starting transaction:",e);const s=new Ez(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return te.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class Ez extends e8{constructor(e){super(),this.currentSequenceNumber=e}}class j0{constructor(e){this.persistence=e,this.Ai=new C0,this.Ri=null}static Vi(e){return new j0(e)}get mi(){if(this.Ri)return this.Ri;throw Re(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),te.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),te.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.mi,r=>{const s=Ce.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,Fe.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return te.or([()=>te.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Am{constructor(e,n){this.persistence=e,this.gi=new sl(r=>r8(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=hz(this,n)}static Vi(e,n){return new Am(e,n)}Ii(){}di(e){return te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return te.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?te.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,Fe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),te.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),te.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Cf(e.data.value)),n}Sr(e,n,r){return te.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return te.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=rt(),s=rt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new k0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return Y3()?8:t8(Yn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Tz;return this.ws(e,n,o).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,n,o,l.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(xl()<=nt.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",wl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),te.resolve()):(xl()<=nt.DEBUG&&pe("QueryEngine","Query:",wl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(xl()<=nt.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",wl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ws(n))):te.resolve())}ps(e,n){if(vT(n))return te.resolve(null);let r=Ws(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=km(n,null,"F"),r=Ws(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=rt(...i);return this.gs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,l);return this.Ds(n,u,o,c.readTime)?this.ps(e,km(n,null,"F")):this.vs(e,u,n,c)}))})))}ys(e,n,r,s){return vT(n)||s.isEqual(Fe.min())?te.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?te.resolve(null):(xl()<=nt.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),wl(n)),this.vs(e,o,n,YB(s,Nd)).next(l=>l))})}bs(e,n){let r=new _n(UA(e));return n.forEach((s,i)=>{Bp(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return xl()<=nt.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",wl(n)),this.gs.getDocumentsMatchingQuery(e,n,qa.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="LocalStore",Nz=3e8;class Cz{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Jt(Ze),this.Ms=new sl(i=>_0(i),b0),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pz(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function jz(t,e,n,r){return new Cz(t,e,n,r)}async function uP(t,e){const n=ze(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=rt();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:o,addedBatchIds:l}))})})}function kz(t,e){const n=ze(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,p=f.keys();let g=te.resolve();return p.forEach(T=>{g=g.next(()=>h.getEntry(c,T)).next(v=>{const b=u.docVersions.get(T);bt(b!==null,48541),v.version.compareTo(b)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=rt();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function dP(t){const e=ze(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Iz(t,e){const n=ze(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(n.hi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.hi.addMatchingKeys(i,h.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(On.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(v,b,_){return v.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=Nz?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,g,h)&&l.push(n.hi.updateTargetData(i,g))});let c=Vi(),u=rt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(Az(i,o,e.documentUpdates).next(h=>{c=h.Ls,u=h.ks})),!r.isEqual(Fe.min())){const h=n.hi.getLastRemoteSnapshotVersion(i).next(f=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return te.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Fs=s,i))}function Az(t,e,n){let r=rt(),s=rt();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Vi();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Fe.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):pe(I0,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ls:o,ks:s}})}function Pz(t,e){const n=ze(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=v0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Rz(t,e){const n=ze(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,te.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new _a(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function dx(t,e,n){const r=ze(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Hc(o))throw o;pe(I0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function AT(t,e,n){const r=ze(t);let s=Fe.min(),i=rt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=ze(c),p=f.Ms.get(h);return p!==void 0?te.resolve(f.Fs.get(p)):f.hi.getTargetData(u,h)}(r,o,Ws(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:Fe.min(),n?i:rt())).next(l=>(Dz(r,_8(e),l),{documents:l,qs:i})))}function Dz(t,e,n){let r=t.xs.get(e)||Fe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class PT{constructor(){this.activeTargetIds=C8()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mz{constructor(){this.Fo=new PT,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new PT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="ConnectivityMonitor";class DT{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){pe(RT,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){pe(RT,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tf=null;function hx(){return tf===null?tf=function(){return 268435456+Math.round(2147483648*Math.random())}():tf++,"0x"+tf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="RestConnection",Lz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Vz{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Nm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=hx(),l=this.Go(e,n.toUriEncodedString());pe(_y,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,i);const{host:u}=new URL(l),h=$c(u);return this.jo(e,l,c,r,h).then(f=>(pe(_y,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Ha(_y,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=Lz[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn="WebChannelConnection";class Uz extends Vz{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=hx();return new Promise((l,c)=>{const u=new dA;u.setWithCredentials(!0),u.listenOnce(hA.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Nf.NO_ERROR:const f=u.getResponseJson();pe(Wn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case Nf.TIMEOUT:pe(Wn,`RPC '${e}' ${o} timed out`),c(new fe(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Nf.HTTP_ERROR:const p=u.getStatus();if(pe(Wn,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const T=g==null?void 0:g.error;if(T&&T.status&&T.message){const v=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(y)>=0?y:Z.UNKNOWN}(T.status);c(new fe(v,T.message))}else c(new fe(Z.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new fe(Z.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{pe(Wn,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);pe(Wn,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}P_(e,n,r){const s=hx(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pA(),l=mA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");pe(Wn,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.T_(f);let p=!1,g=!1;const T=new Fz({Ho:b=>{g?pe(Wn,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(p||(pe(Wn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),pe(Wn,`RPC '${e}' stream ${s} sending:`,b),f.send(b))},Yo:()=>f.close()}),v=(b,_,y)=>{b.listen(_,w=>{try{y(w)}catch(E){setTimeout(()=>{throw E},0)}})};return v(f,ju.EventType.OPEN,()=>{g||(pe(Wn,`RPC '${e}' stream ${s} transport opened.`),T.s_())}),v(f,ju.EventType.CLOSE,()=>{g||(g=!0,pe(Wn,`RPC '${e}' stream ${s} transport closed`),T.__(),this.I_(f))}),v(f,ju.EventType.ERROR,b=>{g||(g=!0,Ha(Wn,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),T.__(new fe(Z.UNAVAILABLE,"The operation could not be completed")))}),v(f,ju.EventType.MESSAGE,b=>{var _;if(!g){const y=b.data[0];bt(!!y,16349);const w=y,E=(w==null?void 0:w.error)||((_=w[0])===null||_===void 0?void 0:_.error);if(E){pe(Wn,`RPC '${e}' stream ${s} received error:`,E);const P=E.status;let R=function(k){const A=mn[k];if(A!==void 0)return ZA(A)}(P),S=E.message;R===void 0&&(R=Z.INTERNAL,S="Unknown error status: "+P+" with message "+E.message),g=!0,T.__(new fe(R,S)),f.close()}else pe(Wn,`RPC '${e}' stream ${s} received:`,y),T.a_(y)}}),v(l,fA.STAT_EVENT,b=>{b.stat===ex.PROXY?pe(Wn,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===ex.NOPROXY&&pe(Wn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function by(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(t){return new W8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="PersistentStream";class fP{constructor(e,n,r,s,i,o,l,c){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new hP(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Li(n.toString()),Li("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new fe(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return pe(MT,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(pe(MT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $z extends fP{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=G8(this.serializer,e),r=function(i){if(!("targetChange"in i))return Fe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Fe.min():o.readTime?Hs(o.readTime):Fe.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=ux(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=ix(c)?{documents:Y8(i,c)}:{query:X8(i,c).Vt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=tP(i,o.resumeToken);const u=ox(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Fe.min())>0){l.readTime=Im(i,o.snapshotVersion.toTimestamp());const u=ox(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=J8(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=ux(this.serializer),n.removeTarget=e,this.k_(n)}}class Bz extends fP{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=Q8(e.writeResults,e.commitTime),r=Hs(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=ux(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>K8(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{}class Wz extends zz{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,lx(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new fe(Z.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Jo(e,lx(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(Z.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Hz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Li(n),this._a=!1):pe("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="RemoteStore";class qz{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{il(this)&&(pe(Go,"Restarting streams for network reachability change."),await async function(c){const u=ze(c);u.Ia.add(4),await sh(u),u.Aa.set("Unknown"),u.Ia.delete(4),await Qp(u)}(this))})}),this.Aa=new Hz(r,s)}}async function Qp(t){if(il(t))for(const e of t.da)await e(!0)}async function sh(t){for(const e of t.da)await e(!1)}function mP(t,e){const n=ze(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),D0(n)?R0(n):Gc(n).x_()&&P0(n,e))}function A0(t,e){const n=ze(t),r=Gc(n);n.Ta.delete(e),r.x_()&&pP(n,e),n.Ta.size===0&&(r.x_()?r.B_():il(n)&&n.Aa.set("Unknown"))}function P0(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Gc(t).H_(e)}function pP(t,e){t.Ra.$e(e),Gc(t).Y_(e)}function R0(t){t.Ra=new U8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Gc(t).start(),t.Aa.aa()}function D0(t){return il(t)&&!Gc(t).M_()&&t.Ta.size>0}function il(t){return ze(t).Ia.size===0}function gP(t){t.Ra=void 0}async function Gz(t){t.Aa.set("Online")}async function Kz(t){t.Ta.forEach((e,n)=>{P0(t,e)})}async function Qz(t,e){gP(t),D0(t)?(t.Aa.la(e),R0(t)):t.Aa.set("Unknown")}async function Yz(t,e,n){if(t.Aa.set("Online"),e instanceof eP&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ta.delete(l),s.Ra.removeTarget(l))}(t,e)}catch(r){pe(Go,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Pm(t,r)}else if(e instanceof If?t.Ra.Ye(e):e instanceof JA?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Fe.min()))try{const r=await dP(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Ra.Pt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ta.get(u);h&&i.Ta.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ta.get(c);if(!h)return;i.Ta.set(c,h.withResumeToken(On.EMPTY_BYTE_STRING,h.snapshotVersion)),pP(i,c);const f=new _a(h.target,c,u,h.sequenceNumber);P0(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){pe(Go,"Failed to raise snapshot:",r),await Pm(t,r)}}async function Pm(t,e,n){if(!Hc(e))throw e;t.Ia.add(1),await sh(t),t.Aa.set("Offline"),n||(n=()=>dP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{pe(Go,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Qp(t)})}function yP(t,e){return e().catch(n=>Pm(t,n,e))}async function Yp(t){const e=ze(t),n=Ya(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:v0;for(;Xz(e);)try{const s=await Pz(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,Zz(e,s)}catch(s){await Pm(e,s)}vP(e)&&xP(e)}function Xz(t){return il(t)&&t.Pa.length<10}function Zz(t,e){t.Pa.push(e);const n=Ya(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function vP(t){return il(t)&&!Ya(t).M_()&&t.Pa.length>0}function xP(t){Ya(t).start()}async function Jz(t){Ya(t).na()}async function e7(t){const e=Ya(t);for(const n of t.Pa)e.X_(n.mutations)}async function t7(t,e,n){const r=t.Pa.shift(),s=T0.from(r,e,n);await yP(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Yp(t)}async function n7(t,e){e&&Ya(t).Z_&&await async function(r,s){if(function(o){return V8(o)&&o!==Z.ABORTED}(s.code)){const i=r.Pa.shift();Ya(r).N_(),await yP(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Yp(r)}}(t,e),vP(t)&&xP(t)}async function OT(t,e){const n=ze(t);n.asyncQueue.verifyOperationInProgress(),pe(Go,"RemoteStore received new credentials");const r=il(n);n.Ia.add(3),await sh(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Qp(n)}async function r7(t,e){const n=ze(t);e?(n.Ia.delete(2),await Qp(n)):e||(n.Ia.add(2),await sh(n),n.Aa.set("Unknown"))}function Gc(t){return t.Va||(t.Va=function(n,r,s){const i=ze(n);return i.ia(),new $z(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:Gz.bind(null,t),e_:Kz.bind(null,t),n_:Qz.bind(null,t),J_:Yz.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),D0(t)?R0(t):t.Aa.set("Unknown")):(await t.Va.stop(),gP(t))})),t.Va}function Ya(t){return t.ma||(t.ma=function(n,r,s){const i=ze(n);return i.ia(),new Bz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:Jz.bind(null,t),n_:n7.bind(null,t),ea:e7.bind(null,t),ta:t7.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Yp(t)):(await t.ma.stop(),t.Pa.length>0&&(pe(Go,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new M0(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function O0(t,e){if(Li("AsyncQueue",`${e}: ${t}`),Hc(t))return new fe(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{static emptySet(e){return new Yl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ce.comparator(n.key,r.key):(n,r)=>Ce.comparator(n.key,r.key),this.keyedMap=ku(),this.sortedSet=new Jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Yl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(){this.fa=new Jt(Ce.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Re(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Nc{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Nc(e,n,Yl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$p(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class i7{constructor(){this.queries=VT(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=ze(n),i=s.queries;s.queries=VT(),i.forEach((o,l)=>{for(const c of l.wa)c.onError(r)})})(this,new fe(Z.ABORTED,"Firestore shutting down"))}}function VT(){return new sl(t=>FA(t),$p)}async function L0(t,e){const n=ze(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new s7,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=O0(o,`Initialization of query '${wl(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&F0(n)}async function V0(t,e){const n=ze(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function a7(t,e){const n=ze(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.wa)l.Ca(s)&&(r=!0);o.ya=s}}r&&F0(n)}function o7(t,e,n){const r=ze(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function F0(t){t.Da.forEach(e=>{e.next()})}var fx,FT;(FT=fx||(fx={})).Fa="default",FT.Cache="cache";class U0{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Nc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==fx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.key=e}}class _P{constructor(e){this.key=e}}class l7{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=rt(),this.mutatedKeys=rt(),this.Xa=UA(e),this.eu=new Yl(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new LT,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=Bp(this.query,f)?f:null,T=!!p&&this.mutatedKeys.has(p.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;p&&g?p.data.isEqual(g.data)?T!==v&&(r.track({type:3,doc:g}),b=!0):this.iu(p,g)||(r.track({type:2,doc:g}),b=!0,(c&&this.Xa(g,c)>0||u&&this.Xa(g,u)<0)&&(l=!0)):!p&&g?(r.track({type:0,doc:g}),b=!0):p&&!g&&(r.track({type:1,doc:p}),b=!0,(c||u)&&(l=!0)),b&&(g?(o=o.add(g),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:l,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((h,f)=>function(g,T){const v=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{At:b})}};return v(g)-v(T)}(h.type,f.type)||this.Xa(h.doc,f.doc)),this.su(r),s=s!=null&&s;const l=n&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,u=c!==this.Ya;return this.Ya=c,o.length!==0||u?{snapshot:new Nc(this.query,e.eu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new LT,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=rt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new _P(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new wP(r))}),n}uu(e){this.Ha=e.qs,this.Za=rt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Nc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const $0="SyncEngine";class c7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class u7{constructor(e){this.key=e,this.lu=!1}}class d7{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new sl(l=>FA(l),$p),this.Tu=new Map,this.Iu=new Set,this.du=new Jt(Ce.comparator),this.Eu=new Map,this.Au=new C0,this.Ru={},this.Vu=new Map,this.mu=Sc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function h7(t,e,n=!0){const r=CP(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await bP(r,e,n,!0),s}async function f7(t,e){const n=CP(t);await bP(n,e,!0,!1)}async function bP(t,e,n,r){const s=await Rz(t.localStore,Ws(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await m7(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&mP(t.remoteStore,s),l}async function m7(t,e,n,r,s){t.gu=(f,p,g)=>async function(v,b,_,y){let w=b.view.nu(_);w.Ds&&(w=await AT(v.localStore,b.query,!1).then(({documents:S})=>b.view.nu(S,w)));const E=y&&y.targetChanges.get(b.targetId),P=y&&y.targetMismatches.get(b.targetId)!=null,R=b.view.applyChanges(w,v.isPrimaryClient,E,P);return $T(v,b.targetId,R._u),R.snapshot}(t,f,p,g);const i=await AT(t.localStore,e,!0),o=new l7(e,i.qs),l=o.nu(i.documents),c=rh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);$T(t,n,u._u);const h=new c7(e,n,o);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}async function p7(t,e,n){const r=ze(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!$p(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await dx(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&A0(r.remoteStore,s.targetId),mx(r,s.targetId)}).catch(Wc)):(mx(r,s.targetId),await dx(r.localStore,s.targetId,!0))}async function g7(t,e){const n=ze(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),A0(n.remoteStore,r.targetId))}async function y7(t,e,n){const r=T7(t);try{const s=await function(o,l){const c=ze(o),u=Bt.now(),h=l.reduce((g,T)=>g.add(T.key),rt());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let T=Vi(),v=rt();return c.Os.getEntries(g,h).next(b=>{T=b,T.forEach((_,y)=>{y.isValidDocument()||(v=v.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,T)).next(b=>{f=b;const _=[];for(const y of l){const w=R8(y,f.get(y.key).overlayedDocument);w!=null&&_.push(new oo(y.key,w,AA(w.value.mapValue),ar.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,_,l)}).next(b=>{p=b;const _=b.applyToLocalDocumentSet(f,v);return c.documentOverlayCache.saveOverlays(g,b.batchId,_)})}).then(()=>({batchId:p.batchId,changes:BA(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Ru[o.currentUser.toKey()];u||(u=new Jt(Ze)),u=u.insert(l,c),o.Ru[o.currentUser.toKey()]=u}(r,s.batchId,n),await ih(r,s.changes),await Yp(r.remoteStore)}catch(s){const i=O0(s,"Failed to persist write");n.reject(i)}}async function EP(t,e){const n=ze(t);try{const r=await Iz(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(bt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?bt(o.lu,14607):s.removedDocuments.size>0&&(bt(o.lu,42227),o.lu=!1))}),await ih(n,r,e)}catch(r){await Wc(r)}}function UT(t,e,n){const r=ze(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=ze(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const p of f.wa)p.va(l)&&(u=!0)}),u&&F0(c)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function v7(t,e,n){const r=ze(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new Jt(Ce.comparator);o=o.insert(i,Kn.newNoDocument(i,Fe.min()));const l=rt().add(i),c=new Gp(Fe.min(),new Map,new Jt(Ze),o,l);await EP(r,c),r.du=r.du.remove(i),r.Eu.delete(e),B0(r)}else await dx(r.localStore,e,!1).then(()=>mx(r,e,n)).catch(Wc)}async function x7(t,e){const n=ze(t),r=e.batch.batchId;try{const s=await kz(n.localStore,e);SP(n,r,null),TP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ih(n,s)}catch(s){await Wc(s)}}async function w7(t,e,n){const r=ze(t);try{const s=await function(o,l){const c=ze(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(bt(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);SP(r,e,n),TP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ih(r,s)}catch(s){await Wc(s)}}function TP(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function SP(t,e,n){const r=ze(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function mx(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||NP(t,r)})}function NP(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(A0(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),B0(t))}function $T(t,e,n){for(const r of n)r instanceof wP?(t.Au.addReference(r.key,e),_7(t,r)):r instanceof _P?(pe($0,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||NP(t,r.key)):Re(19791,{yu:r})}function _7(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(pe($0,"New document in limbo: "+n),t.Iu.add(r),B0(t))}function B0(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Ce(Ot.fromString(e)),r=t.mu.next();t.Eu.set(r,new u7(n)),t.du=t.du.insert(n,r),mP(t.remoteStore,new _a(Ws(Up(n.path)),r,"TargetPurposeLimboResolution",Lp.ue))}}async function ih(t,e,n){const r=ze(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((l,c)=>{o.push(r.gu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=k0.Es(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.hu.J_(s),await async function(c,u){const h=ze(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>te.forEach(u,p=>te.forEach(p.Is,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>te.forEach(p.ds,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Hc(f))throw f;pe(I0,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const g=h.Fs.get(p),T=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(T);h.Fs=h.Fs.insert(p,v)}}}(r.localStore,i))}async function b7(t,e){const n=ze(t);if(!n.currentUser.isEqual(e)){pe($0,"User change. New user:",e.toKey());const r=await uP(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(l=>{l.forEach(c=>{c.reject(new fe(Z.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ih(n,r.Bs)}}function E7(t,e){const n=ze(t),r=n.Eu.get(e);if(r&&r.lu)return rt().add(r.key);{let s=rt();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const l=n.Pu.get(o);s=s.unionWith(l.view.tu)}return s}}function CP(t){const e=ze(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=EP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=v7.bind(null,e),e.hu.J_=a7.bind(null,e.eventManager),e.hu.pu=o7.bind(null,e.eventManager),e}function T7(t){const e=ze(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w7.bind(null,e),e}class Rm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return jz(this.persistence,new Sz,e.initialUser,this.serializer)}Du(e){return new cP(j0.Vi,this.serializer)}bu(e){return new Mz}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rm.provider={build:()=>new Rm};class S7 extends Rm{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){bt(this.persistence.referenceDelegate instanceof Am,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new uz(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?fr.withCacheSize(this.cacheSizeBytes):fr.DEFAULT;return new cP(r=>Am.Vi(r,n),this.serializer)}}class px{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>UT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=b7.bind(null,this.syncEngine),await r7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new i7}()}createDatastore(e){const n=Kp(e.databaseInfo.databaseId),r=function(i){return new Uz(i)}(e.databaseInfo);return function(i,o,l,c){return new Wz(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new qz(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>UT(this.syncEngine,n,0),function(){return DT.C()?new DT:new Oz}())}createSyncEngine(e,n){return function(s,i,o,l,c,u,h){const f=new d7(s,i,o,l,c,u);return h&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ze(s);pe(Go,"RemoteStore shutting down."),i.Ia.add(5),await sh(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}px.provider={build:()=>new px};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Li("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="FirestoreClient";class N7{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=qn.UNAUTHENTICATED,this.clientId=y0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{pe(Xa,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(pe(Xa,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=O0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ey(t,e){t.asyncQueue.verifyOperationInProgress(),pe(Xa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await uP(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{Ha("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{pe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Ha("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function BT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await C7(t);pe(Xa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>OT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>OT(e.remoteStore,s)),t._onlineComponents=e}async function C7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pe(Xa,"Using user provided OfflineComponentProvider");try{await Ey(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Z.FAILED_PRECONDITION||s.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ha("Error using user provided cache. Falling back to memory cache: "+n),await Ey(t,new Rm)}}else pe(Xa,"Using default OfflineComponentProvider"),await Ey(t,new S7(void 0));return t._offlineComponents}async function jP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pe(Xa,"Using user provided OnlineComponentProvider"),await BT(t,t._uninitializedComponentsProvider._online)):(pe(Xa,"Using default OnlineComponentProvider"),await BT(t,new px))),t._onlineComponents}function j7(t){return jP(t).then(e=>e.syncEngine)}async function Dm(t){const e=await jP(t),n=e.eventManager;return n.onListen=h7.bind(null,e.syncEngine),n.onUnlisten=p7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=f7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=g7.bind(null,e.syncEngine),n}function k7(t,e,n={}){const r=new Si;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new z0({next:p=>{h.Ou(),o.enqueueAndForget(()=>V0(i,f));const g=p.docs.has(l);!g&&p.fromCache?u.reject(new fe(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?u.reject(new fe(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new U0(Up(l.path),h,{includeMetadataChanges:!0,ka:!0});return L0(i,f)}(await Dm(t),t.asyncQueue,e,n,r)),r.promise}function I7(t,e,n={}){const r=new Si;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new z0({next:p=>{h.Ou(),o.enqueueAndForget(()=>V0(i,f)),p.fromCache&&c.source==="server"?u.reject(new fe(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new U0(l,h,{includeMetadataChanges:!0,ka:!0});return L0(i,f)}(await Dm(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="firestore.googleapis.com",WT=!0;class HT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IP,this.ssl=WT}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:WT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lz)throw new fe(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FB;switch(r.type){case"firstParty":return new zB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=zT.get(n);r&&(pe("ComponentProvider","Removing Datastore"),zT.delete(n),r.terminate())}(this),Promise.resolve()}}function A7(t,e,n,r={}){var s;t=ir(t,Xp);const i=$c(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(xI(`https://${c}`),wI("Firestore",!0)),o.host!==IP&&o.host!==c&&Ha("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!Di(u,l)&&(t._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=qn.MOCK_USER;else{h=$3(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new fe(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new qn(p)}t._authCredentials=new UB(new yA(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hi(this.firestore,e,this._query)}}class sn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}toJSON(){return{type:sn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(th(n,sn._jsonSchema))return new sn(e,r||null,new Ce(Ot.fromString(n.referencePath)))}}sn._jsonSchemaVersion="firestore/documentReference/1.0",sn._jsonSchema={type:yn("string",sn._jsonSchemaVersion),referencePath:yn("string")};class Oa extends Hi{constructor(e,n,r){super(e,n,Up(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new Ce(e))}withConverter(e){return new Oa(this.firestore,e,this._path)}}function Xn(t,e,...n){if(t=Vt(t),xA("collection","path",e),t instanceof Xp){const r=Ot.fromString(e,...n);return sT(r),new Oa(t,null,r)}{if(!(t instanceof sn||t instanceof Oa))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ot.fromString(e,...n));return sT(r),new Oa(t.firestore,null,r)}}function at(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=y0.newId()),xA("doc","path",e),t instanceof Xp){const r=Ot.fromString(e,...n);return rT(r),new sn(t,null,new Ce(r))}{if(!(t instanceof sn||t instanceof Oa))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ot.fromString(e,...n));return rT(r),new sn(t.firestore,t instanceof Oa?t.converter:null,new Ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="AsyncQueue";class GT{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new hP(this,"async_queue_retry"),this.oc=()=>{const r=by();r&&pe(qT,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=by();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=by();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Si;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Hc(e))throw e;pe(qT,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Li("INTERNAL UNHANDLED ERROR: ",KT(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=M0.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&Re(47125,{hc:KT(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function KT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Zs extends Xp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new GT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new GT(e),this._firestoreClient=void 0,await e}}}function P7(t,e){const n=typeof t=="object"?t:TI(),r=typeof t=="string"?t:Nm,s=i0(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=F3("firestore");i&&A7(s,...i)}return s}function ah(t){if(t._terminated)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||R7(t),t._firestoreClient}function R7(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,u,h){return new a8(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,kP(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new N7(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wr(On.fromBase64String(e))}catch(n){throw new fe(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wr(On.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(th(e,Wr._jsonSchema))return Wr.fromBase64String(e.bytes)}}Wr._jsonSchemaVersion="firestore/bytes/1.0",Wr._jsonSchema={type:yn("string",Wr._jsonSchemaVersion),bytes:yn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qs._jsonSchemaVersion}}static fromJSON(e){if(th(e,qs._jsonSchema))return new qs(e.latitude,e.longitude)}}qs._jsonSchemaVersion="firestore/geoPoint/1.0",qs._jsonSchema={type:yn("string",qs._jsonSchemaVersion),latitude:yn("number"),longitude:yn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Gs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(th(e,Gs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Gs(e.vectorValues);throw new fe(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gs._jsonSchemaVersion="firestore/vectorValue/1.0",Gs._jsonSchema={type:yn("string",Gs._jsonSchemaVersion),vectorValues:yn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7=/^__.*__$/;class M7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new oo(e,this.data,this.fieldMask,n,this.fieldTransforms):new nh(e,this.data,n,this.fieldTransforms)}}class AP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new oo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function PP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ec:t})}}class Zp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Zp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Mm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(PP(this.Ec)&&D7.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class O7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Kp(e)}Dc(e,n,r,s=!1){return new Zp({Ec:e,methodName:n,bc:r,path:An.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lh(t){const e=t._freezeSettings(),n=Kp(t._databaseId);return new O7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function W0(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);Q0("Data must be an object, but it was:",o,r);const l=OP(r,o);let c,u;if(i.merge)c=new Rr(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=gx(e,f,n);if(!o.contains(p))throw new fe(Z.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);VP(h,p)||h.push(p)}c=new Rr(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new M7(new pr(l),c,u)}class Jp extends al{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jp}}function RP(t,e,n){return new Zp({Ec:3,bc:e.settings.bc,methodName:t._methodName,mc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class H0 extends al{_toFieldTransform(e){return new Wp(e.path,new Ad)}isEqual(e){return e instanceof H0}}class q0 extends al{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=RP(this,e,!0),r=this.vc.map(i=>ol(i,n)),s=new Ec(r);return new Wp(e.path,s)}isEqual(e){return e instanceof q0&&Di(this.vc,e.vc)}}class G0 extends al{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=RP(this,e,!0),r=this.vc.map(i=>ol(i,n)),s=new Tc(r);return new Wp(e.path,s)}isEqual(e){return e instanceof G0&&Di(this.vc,e.vc)}}class K0 extends al{constructor(e,n){super(e),this.Cc=n}_toFieldTransform(e){const n=new Pd(e.serializer,HA(e.serializer,this.Cc));return new Wp(e.path,n)}isEqual(e){return e instanceof K0&&this.Cc===e.Cc}}function DP(t,e,n,r){const s=t.Dc(1,e,n);Q0("Data must be an object, but it was:",s,r);const i=[],o=pr.empty();ao(r,(c,u)=>{const h=Y0(e,c,n);u=Vt(u);const f=s.gc(h);if(u instanceof Jp)i.push(h);else{const p=ol(u,f);p!=null&&(i.push(h),o.set(h,p))}});const l=new Rr(i);return new AP(o,l,s.fieldTransforms)}function MP(t,e,n,r,s,i){const o=t.Dc(1,e,n),l=[gx(e,r,n)],c=[s];if(i.length%2!=0)throw new fe(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(gx(e,i[p])),c.push(i[p+1]);const u=[],h=pr.empty();for(let p=l.length-1;p>=0;--p)if(!VP(u,l[p])){const g=l[p];let T=c[p];T=Vt(T);const v=o.gc(g);if(T instanceof Jp)u.push(g);else{const b=ol(T,v);b!=null&&(u.push(g),h.set(g,b))}}const f=new Rr(u);return new AP(h,f,o.fieldTransforms)}function L7(t,e,n,r=!1){return ol(n,t.Dc(r?4:3,e))}function ol(t,e){if(LP(t=Vt(t)))return Q0("Unsupported field value:",e,t),OP(t,e);if(t instanceof al)return function(r,s){if(!PP(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=ol(l,s.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HA(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Bt.fromDate(r);return{timestampValue:Im(s.serializer,i)}}if(r instanceof Bt){const i=new Bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Im(s.serializer,i)}}if(r instanceof qs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wr)return{bytesValue:tP(s.serializer,r._byteString)};if(r instanceof sn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:N0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Gs)return function(o,l){return{mapValue:{fields:{[jA]:{stringValue:IA},[Cm]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.wc("VectorValues must only contain numeric values.");return E0(l.serializer,u)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${Op(r)}`)}(t,e)}function OP(t,e){const n={};return bA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ao(t,(r,s)=>{const i=ol(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function LP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Bt||t instanceof qs||t instanceof Wr||t instanceof sn||t instanceof al||t instanceof Gs)}function Q0(t,e,n){if(!LP(n)||!wA(n)){const r=Op(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function gx(t,e,n){if((e=Vt(e))instanceof oh)return e._internalPath;if(typeof e=="string")return Y0(t,e);throw Mm("Field path arguments must be of type string or ",t,!1,void 0,n)}const V7=new RegExp("[~\\*/\\[\\]]");function Y0(t,e,n){if(e.search(V7)>=0)throw Mm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new oh(...e.split("."))._internalPath}catch{throw Mm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mm(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new fe(Z.INVALID_ARGUMENT,l+t+c)}function VP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new F7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(eg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class F7 extends FP{data(){return super.data()}}function eg(t,e){return typeof e=="string"?Y0(t,e):e instanceof oh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new fe(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class X0{}class Z0 extends X0{}function Sn(t,e,...n){let r=[];e instanceof X0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof J0).length,l=i.filter(c=>c instanceof tg).length;if(o>1||o>0&&l>0)throw new fe(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class tg extends Z0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new tg(e,n,r)}_apply(e){const n=this._parse(e);return BP(e._query,n),new Hi(e.firestore,e.converter,ax(e._query,n))}_parse(e){const n=lh(e.firestore);return function(i,o,l,c,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){XT(f,h);const T=[];for(const v of f)T.push(YT(c,i,v));p={arrayValue:{values:T}}}else p=YT(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||XT(f,h),p=L7(l,o,f,h==="in"||h==="not-in");return gn.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qt(t,e,n){const r=e,s=eg("where",t);return tg._create(s,r,n)}class J0 extends X0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new J0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ns.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)BP(o,c),o=ax(o,c)}(e._query,n),new Hi(e.firestore,e.converter,ax(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class e_ extends Z0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new e_(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Id(i,o)}(e._query,this._field,this._direction);return new Hi(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new qc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function si(t,e="asc"){const n=e,r=eg("orderBy",t);return e_._create(r,n)}class t_ extends Z0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t_(e,n,r)}_apply(e){return new Hi(e.firestore,e.converter,km(e._query,this._limit,this._limitType))}}function $P(t){return QB("limit",t),t_._create("limit",t,"F")}function YT(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new fe(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VA(e)&&n.indexOf("/")!==-1)throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ot.fromString(n));if(!Ce.isDocumentKey(r))throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hT(t,new Ce(r))}if(n instanceof sn)return hT(t,n._key);throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Op(n)}.`)}function XT(t,e){if(!Array.isArray(t)||t.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BP(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class U7{convertValue(e,n="none"){switch(Qa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return on(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ka(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ao(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Cm].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>on(o.doubleValue));return new Gs(i)}convertGeoPoint(e){return new qs(on(e.latitude),on(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Fp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Cd(e));default:return null}}convertTimestamp(e){const n=Ga(e);return new Bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ot.fromString(e);bt(oP(r),9688,{name:e});const s=new jd(r.get(1),r.get(3)),i=new Ce(r.popFirst(5));return s.isEqual(n)||Li(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Au{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mo extends FP{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Af(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(eg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Mo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Mo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mo._jsonSchema={type:yn("string",Mo._jsonSchemaVersion),bundleSource:yn("string","DocumentSnapshot"),bundleName:yn("string"),bundle:yn("string")};class Af extends Mo{data(e={}){return super.data(e)}}class Oo{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Au(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Af(this._firestore,this._userDataWriter,r.key,r,new Au(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Af(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Au(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Af(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Au(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:$7(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=y0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(t){t=ir(t,sn);const e=ir(t.firestore,Zs);return k7(ah(e),t._key).then(n=>zP(e,t,n))}Oo._jsonSchemaVersion="firestore/querySnapshot/1.0",Oo._jsonSchema={type:yn("string",Oo._jsonSchemaVersion),bundleSource:yn("string","QuerySnapshot"),bundleName:yn("string"),bundle:yn("string")};class r_ extends U7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,n)}}function Ln(t){t=ir(t,Hi);const e=ir(t.firestore,Zs),n=ah(e),r=new r_(e);return UP(t._query),I7(n,t._query).then(s=>new Oo(e,r,t,s))}function mi(t,e,n){t=ir(t,sn);const r=ir(t.firestore,Zs),s=n_(t.converter,e,n);return ch(r,[W0(lh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ar.none())])}function qi(t,e,n,...r){t=ir(t,sn);const s=ir(t.firestore,Zs),i=lh(s);let o;return o=typeof(e=Vt(e))=="string"||e instanceof oh?MP(i,"updateDoc",t._key,e,n,r):DP(i,"updateDoc",t._key,e),ch(s,[o.toMutation(t._key,ar.exists(!0))])}function s_(t){return ch(ir(t.firestore,Zs),[new qp(t._key,ar.none())])}function Gi(t,e){const n=ir(t.firestore,Zs),r=at(t),s=n_(t.converter,e);return ch(n,[W0(lh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ar.exists(!1))]).then(()=>r)}function B7(t,...e){var n,r,s;t=Vt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||QT(e[o])||(i=e[o++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(QT(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,u,h;if(t instanceof sn)u=ir(t.firestore,Zs),h=Up(t._key.path),c={next:f=>{e[o]&&e[o](zP(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=ir(t,Hi);u=ir(f.firestore,Zs),h=f._query;const p=new r_(u);c={next:g=>{e[o]&&e[o](new Oo(u,p,f,g))},error:e[o+1],complete:e[o+2]},UP(t._query)}return function(p,g,T,v){const b=new z0(v),_=new U0(g,b,T);return p.asyncQueue.enqueueAndForget(async()=>L0(await Dm(p),_)),()=>{b.Ou(),p.asyncQueue.enqueueAndForget(async()=>V0(await Dm(p),_))}}(ah(u),h,l,c)}function ch(t,e){return function(r,s){const i=new Si;return r.asyncQueue.enqueueAndForget(async()=>y7(await j7(r),s,i)),i.promise}(ah(t),e)}function zP(t,e,n){const r=n.docs.get(e._key),s=new r_(t);return new Mo(t,s,e._key,r,new Au(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=lh(e)}set(e,n,r){this._verifyNotCommitted();const s=Ty(e,this._firestore),i=n_(s.converter,n,r),o=W0(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,ar.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Ty(e,this._firestore);let o;return o=typeof(n=Vt(n))=="string"||n instanceof oh?MP(this._dataReader,"WriteBatch.update",i._key,n,r,s):DP(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,ar.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ty(e,this._firestore);return this._mutations=this._mutations.concat(new qp(n._key,ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ty(t,e){if((t=Vt(t)).firestore!==e)throw new fe(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function qe(){return new H0("serverTimestamp")}function W7(...t){return new q0("arrayUnion",t)}function H7(...t){return new G0("arrayRemove",t)}function Sy(t){return new K0("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t){return ah(t=ir(t,Zs)),new z7(t,e=>ch(t,e))}(function(e,n=!0){(function(s){zc=s})(Bc),vc(new zo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Zs(new $B(r.getProvider("auth-internal")),new WB(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new fe(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jd(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Da(ZE,JE,e),Da(ZE,JE,"esm2017")})();var q7="firebase",G7="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Da(q7,G7,"app");const K7={apiKey:"AIzaSyDvxFHXf3JsSv3FSd_aEGoFAdb0VmduwdM",authDomain:"qtonz-sports.firebaseapp.com",projectId:"qtonz-sports",storageBucket:"qtonz-sports.firebasestorage.app",messagingSenderId:"61854773542",appId:"1:61854773542:web:5114c630865f5a929091e7"},HP=EI(K7),As=LB(HP),Ae=P7(HP);T$(As,eA).catch(t=>{console.error("Failed to set Firebase auth persistence:",t)});const qP=m.createContext(void 0),Q7=({children:t})=>{const[e,n]=m.useState(null),[r,s]=m.useState(!0),[i,o]=m.useState(!1),[l,c]=m.useState(!1),[u,h]=m.useState(!1),[f,p]=m.useState(null),g=Uc();m.useEffect(()=>{const E=C$(As,async P=>{n(P),P?await T(P.uid):(o(!1),c(!1),h(!1),p(null)),s(!1)});return()=>E()},[]);const T=async E=>{try{const P=await ns(at(Ae,"user_roles",E)),R=P.exists()?P.data():null,S=(R==null?void 0:R.roles)??[],N=S.includes("admin")||S.includes("super_admin"),k=S.includes("super_admin");if(o(N),c(k),h(!N),k)p({registrations:!0,participants:!0,tournaments:!0,games:!0,teams:!0,schedule:!0,matches:!0,leaderboard:!0,audit:!0});else if(N){const A=R==null?void 0:R.permissions;p({registrations:(A==null?void 0:A.registrations)??!0,participants:(A==null?void 0:A.participants)??!0,tournaments:(A==null?void 0:A.tournaments)??!0,games:(A==null?void 0:A.games)??!0,teams:(A==null?void 0:A.teams)??!0,schedule:(A==null?void 0:A.schedule)??!0,matches:(A==null?void 0:A.matches)??!0,leaderboard:(A==null?void 0:A.leaderboard)??!0,audit:(A==null?void 0:A.audit)??!0})}else p(null)}catch(P){console.error("Error checking admin role:",P),o(!1),c(!1),h(!1),p(null)}},v=async(E,P,R)=>{try{const N=(await x$(As,E,P)).user;return await mi(at(Ae,"profiles",N.uid),{name:(R==null?void 0:R.name)||"",email:E,phone:(R==null?void 0:R.phone)||"",department:(R==null?void 0:R.department)||"",gender:(R==null?void 0:R.gender)||"",created_at:qe(),updated_at:qe()},{merge:!0}),await mi(at(Ae,"user_roles",N.uid),{roles:["player"],updated_at:qe(),created_at:qe()},{merge:!0}),await _$(N),await vy(As),{error:null}}catch(S){return{error:S}}},b=async(E,P)=>{try{if(!(await w$(As,E,P)).user.emailVerified)throw await vy(As),new Error("Please verify your email address before logging in.");return g("/"),{error:null}}catch(R){return{error:R}}},_=async()=>{try{const E=new gi,R=(await q$(As,E)).user;return(await ns(at(Ae,"profiles",R.uid))).exists()?{error:null,user:R,isNewUser:!1}:(await mi(at(Ae,"profiles",R.uid),{name:R.displayName||"",email:R.email||"",created_at:qe(),updated_at:qe()},{merge:!0}),await mi(at(Ae,"user_roles",R.uid),{roles:["player"],updated_at:qe(),created_at:qe()},{merge:!0}),{error:null,user:R,isNewUser:!0})}catch(E){return{error:E}}},y=async E=>{try{const P=As.currentUser;if(!P)throw new Error("No authenticated user found");return await mi(at(Ae,"profiles",P.uid),{name:P.displayName||"",email:P.email||"",phone:(E==null?void 0:E.phone)||"",department:(E==null?void 0:E.department)||"",gender:(E==null?void 0:E.gender)||"",password:(E==null?void 0:E.password)||"",created_at:qe(),updated_at:qe()},{merge:!0}),await mi(at(Ae,"user_roles",P.uid),{roles:["player"],updated_at:qe(),created_at:qe()},{merge:!0}),{error:null}}catch(P){return{error:P}}},w=async()=>{await vy(As),o(!1),g("/")};return a.jsx(qP.Provider,{value:{user:e,loading:r,isAdmin:i,isSuperAdmin:l,isPlayer:u,permissions:f,signUp:v,signIn:b,signInWithGoogle:_,signUpWithGoogle:y,signOut:w},children:t})},hn=()=>{const t=m.useContext(qP);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},Y7=nl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),we=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?Dc:"button";return a.jsx(o,{className:ie(Y7({variant:e,size:n,className:t})),ref:i,...s})});we.displayName="Button";const i_=()=>{const{user:t,signOut:e,isAdmin:n,isPlayer:r}=hn(),[s,i]=m.useState(!1);return a.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 w-full border-b border-border/40 glass-card shadow-lg",children:[a.jsxs("div",{className:"container flex h-16 md:h-18 items-center justify-between px-4 md:px-6",children:[a.jsxs(Mt,{to:"/",className:"group flex items-center space-x-2 transition-transform hover:scale-105",children:[a.jsxs("div",{className:"relative",children:[a.jsx(It,{className:"h-6 w-6 md:h-7 md:w-7 text-primary transition-all group-hover:rotate-12 group-hover:text-accent"}),a.jsx("div",{className:"absolute inset-0 blur-lg bg-primary/30 group-hover:bg-accent/40 transition-all"})]}),a.jsx("span",{className:"text-xl md:text-2xl font-bold gradient-text font-['Outfit']",children:"SportsBracket"})]}),a.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[a.jsxs(Mt,{to:"/leaderboard",className:"text-sm font-semibold text-foreground hover:text-primary transition-all hover:scale-105 relative group",children:["Leaderboard",a.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-primary to-accent transition-all group-hover:w-full"})]}),r&&a.jsxs(Mt,{to:"/dashboard",className:"text-sm font-semibold text-foreground hover:text-primary transition-all hover:scale-105 relative group",children:["Player Dashboard",a.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-primary to-accent transition-all group-hover:w-full"})]}),n&&a.jsxs(Mt,{to:"/admin",className:"text-sm font-semibold text-foreground hover:text-primary transition-all hover:scale-105 relative group",children:["Admin",a.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-primary to-accent transition-all group-hover:w-full"})]})]}),a.jsx("div",{className:"hidden md:flex items-center space-x-3",children:t?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-sm font-medium text-muted-foreground bg-muted px-3 py-1.5 rounded-full",children:t.displayName}),a.jsxs(we,{variant:"ghost",onClick:e,className:"hover-lift",children:[a.jsx(am,{className:"h-4 w-4 mr-2"}),"Logout"]})]}):a.jsxs(a.Fragment,{children:[a.jsx(Mt,{to:"/login",children:a.jsx(we,{variant:"ghost",className:"hover-lift",children:"Login"})}),a.jsx(Mt,{to:"/register",children:a.jsx(we,{className:"bg-gradient-to-r from-primary to-accent hover:shadow-lg hover:scale-105 transition-all",children:"Register"})})]})}),a.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-muted/50 transition-all active:scale-95",onClick:()=>i(!s),"aria-label":"Toggle menu",children:s?a.jsx(xp,{className:"h-6 w-6 text-primary"}):a.jsx(YL,{className:"h-6 w-6 text-primary"})})]}),s&&a.jsx("div",{className:"md:hidden border-t border-border/40 glass animate-slide-down",children:a.jsxs("div",{className:"container py-4 space-y-3 px-4",children:[a.jsx(Mt,{to:"/leaderboard",className:"block py-3 px-4 text-sm font-semibold text-foreground hover:text-primary hover:bg-primary/10 rounded-lg transition-all",onClick:()=>i(!1),children:"Leaderboard"}),r&&a.jsx(Mt,{to:"/dashboard",className:"block py-3 px-4 text-sm font-semibold text-foreground hover:text-primary hover:bg-primary/10 rounded-lg transition-all",onClick:()=>i(!1),children:"Player Dashboard"}),n&&a.jsx(Mt,{to:"/admin",className:"block py-3 px-4 text-sm font-semibold text-foreground hover:text-primary hover:bg-primary/10 rounded-lg transition-all",onClick:()=>i(!1),children:"Admin"}),a.jsx("div",{className:"flex flex-col space-y-3 pt-4 border-t border-border/40",children:t?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"px-4 py-2 bg-muted rounded-lg",children:a.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:t.email})}),a.jsxs(we,{variant:"ghost",onClick:()=>{e(),i(!1)},className:"w-full justify-start hover:bg-destructive/10 hover:text-destructive",children:[a.jsx(am,{className:"h-4 w-4 mr-2"}),"Logout"]})]}):a.jsxs(a.Fragment,{children:[a.jsx(Mt,{to:"/login",onClick:()=>i(!1),children:a.jsx(we,{variant:"outline",className:"w-full hover-lift",children:"Login"})}),a.jsx(Mt,{to:"/register",onClick:()=>i(!1),children:a.jsx(we,{className:"w-full bg-gradient-to-r from-primary to-accent hover:shadow-lg transition-all",children:"Register"})})]})})]})})]})},X7=()=>{const{user:t}=hn();return a.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-primary via-secondary to-accent py-16 md:py-24 lg:py-32",children:[a.jsxs("div",{className:"container relative z-10 px-4 md:px-6",children:[a.jsxs("div",{className:"mx-auto max-w-5xl text-center",children:[a.jsxs("div",{className:"mb-6 md:mb-8 inline-flex items-center rounded-full bg-white/10 px-4 md:px-6 py-2 md:py-2.5 backdrop-blur-sm border border-white/20 animate-slide-down hover:scale-105 transition-transform",children:[a.jsx(It,{className:"mr-2 h-4 w-4 md:h-5 md:w-5 text-accent animate-pulse"}),a.jsx("span",{className:"text-xs md:text-sm font-semibold text-white",children:"Sports Week 2026"}),a.jsx(sk,{className:"ml-2 h-4 w-4 md:h-5 md:w-5 text-warning"})]}),a.jsxs("h1",{className:"mb-6 md:mb-8 text-3xl sm:text-4xl md:text-5xl lg:text-7xl font-black tracking-tight text-white leading-tight animate-slide-up",children:["Tournament Management",a.jsx("br",{}),a.jsx("span",{className:"bg-gradient-to-r from-accent via-warning to-accent bg-clip-text text-transparent animate-pulse",children:"Made Simple"})]}),a.jsx("p",{className:"mb-8 md:mb-10 text-base md:text-lg lg:text-xl text-white/95 max-w-3xl mx-auto leading-relaxed px-4 md:px-0 animate-fade-in",children:"Organize, track, and manage your sports tournaments with ease. From registration to final results, we've got you covered with cutting-edge technology."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center animate-scale-in px-4 md:px-0",children:[!t&&a.jsx(Mt,{to:"/register",className:"w-full sm:w-auto",children:a.jsxs(we,{size:"lg",className:"w-full sm:w-auto bg-gradient-to-r from-accent to-warning hover:from-warning hover:to-accent text-white font-bold shadow-2xl hover:shadow-accent/50 hover:scale-110 transition-all group",children:["Register Now",a.jsx(VL,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform"})]})}),a.jsx(Mt,{to:"/leaderboard",className:"w-full sm:w-auto",children:a.jsx(we,{size:"lg",variant:"outline",className:"w-full sm:w-auto glass-card border-black/30 text-black hover:bg-white/20 hover:text-black hover:scale-105 transition-all font-bold",children:"View Leaderboard"})})]})]}),a.jsxs("div",{className:"mt-12 md:mt-20 grid gap-4 md:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 px-4 md:px-0",children:[a.jsxs("div",{className:"group rounded-2xl p-6 md:p-8 bg-white/15 backdrop-blur-md border border-white/30 hover:border-white/50 hover:bg-white/20 transition-all hover:scale-105 hover:-translate-y-2 animate-slide-up shadow-xl",children:[a.jsxs("div",{className:"relative inline-block mb-4 md:mb-6",children:[a.jsx(It,{className:"h-10 w-10 md:h-12 md:w-12 text-white drop-shadow-lg group-hover:rotate-12 transition-transform"}),a.jsx("div",{className:"absolute inset-0 blur-xl bg-accent/40 group-hover:bg-accent/60 transition-all"})]}),a.jsx("h3",{className:"mb-2 md:mb-3 text-lg md:text-xl font-bold text-white drop-shadow-md",children:"7 Sports"}),a.jsx("p",{className:"text-sm md:text-base text-white drop-shadow-sm leading-relaxed",children:"Cricket, Volleyball, Chess, Table Tennis, Carrom, Pool, Pickleball"})]}),a.jsxs("div",{className:"group rounded-2xl p-6 md:p-8 bg-white/15 backdrop-blur-md border border-white/30 hover:border-white/50 hover:bg-white/20 transition-all hover:scale-105 hover:-translate-y-2 animate-slide-up shadow-xl",style:{animationDelay:"0.1s"},children:[a.jsxs("div",{className:"relative inline-block mb-4 md:mb-6",children:[a.jsx(Ai,{className:"h-10 w-10 md:h-12 md:w-12 text-white drop-shadow-lg group-hover:scale-110 transition-transform"}),a.jsx("div",{className:"absolute inset-0 blur-xl bg-warning/40 group-hover:bg-warning/60 transition-all"})]}),a.jsx("h3",{className:"mb-2 md:mb-3 text-lg md:text-xl font-bold text-white drop-shadow-md",children:"Team Management"}),a.jsx("p",{className:"text-sm md:text-base text-white drop-shadow-sm leading-relaxed",children:"Create teams, pairs, and track individual players seamlessly"})]}),a.jsxs("div",{className:"group rounded-2xl p-6 md:p-8 bg-white/15 backdrop-blur-md border border-white/30 hover:border-white/50 hover:bg-white/20 transition-all hover:scale-105 hover:-translate-y-2 sm:col-span-2 lg:col-span-1 animate-slide-up shadow-xl",style:{animationDelay:"0.2s"},children:[a.jsxs("div",{className:"relative inline-block mb-4 md:mb-6",children:[a.jsx(Es,{className:"h-10 w-10 md:h-12 md:w-12 text-white drop-shadow-lg group-hover:rotate-6 transition-transform"}),a.jsx("div",{className:"absolute inset-0 blur-xl bg-info/40 group-hover:bg-info/60 transition-all"})]}),a.jsx("h3",{className:"mb-2 md:mb-3 text-lg md:text-xl font-bold text-white drop-shadow-md",children:"Live Brackets"}),a.jsx("p",{className:"text-sm md:text-base text-white drop-shadow-sm leading-relaxed",children:"Real-time tournament brackets with instant result updates"})]})]})]}),a.jsx("div",{className:"absolute top-0 left-0 -translate-x-1/2 -translate-y-1/2 w-64 h-64 md:w-96 md:h-96 bg-accent/30 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-0 right-0 translate-x-1/2 translate-y-1/2 w-64 h-64 md:w-96 md:h-96 bg-warning/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 md:w-[600px] md:h-[600px] bg-white/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute top-10 left-10 w-2 h-2 bg-white/40 rounded-full animate-ping"}),a.jsx("div",{className:"absolute top-20 right-20 w-3 h-3 bg-accent/60 rounded-full animate-ping",style:{animationDelay:"0.5s"}}),a.jsx("div",{className:"absolute bottom-20 left-20 w-2 h-2 bg-warning/60 rounded-full animate-ping",style:{animationDelay:"1s"}})]})},Te=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ie("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Te.displayName="Card";const Ge=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ie("flex flex-col space-y-1.5 p-6",t),...e}));Ge.displayName="CardHeader";const Ke=m.forwardRef(({className:t,...e},n)=>a.jsx("h3",{ref:n,className:ie("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ke.displayName="CardTitle";const wr=m.forwardRef(({className:t,...e},n)=>a.jsx("p",{ref:n,className:ie("text-sm text-muted-foreground",t),...e}));wr.displayName="CardDescription";const Se=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ie("p-6 pt-0",t),...e}));Se.displayName="CardContent";const Z7=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ie("flex items-center p-6 pt-0",t),...e}));Z7.displayName="CardFooter";const J7=nl("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function pt({className:t,variant:e,...n}){return a.jsx("div",{className:ie(J7({variant:e}),t),...n})}const eW=({name:t,type:e,playersPerTeam:n,icon:r})=>{const s=()=>{switch(e){case"SINGLE":return"1v1";case"PAIR":return"2v2";case"TEAM":return`${n}v${n}`}},i=()=>{switch(e){case"SINGLE":return"default";case"PAIR":return"secondary";case"TEAM":return"outline"}};return a.jsx(Te,{className:"overflow-hidden transition-all hover:shadow-lg hover:-translate-y-1 cursor-pointer",children:a.jsxs(Se,{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsx("div",{className:"rounded-lg bg-primary/10 p-3 text-primary",children:r}),a.jsx(pt,{variant:i(),className:"text-xs",children:s()})]}),a.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:t}),a.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[a.jsx(Ai,{className:"mr-1 h-4 w-4"}),a.jsxs("span",{children:[e==="SINGLE"?"Individual":e==="PAIR"?"Doubles":"Team"," Competition"]})]})]})})},tW=()=>{const t=[{name:"Cricket",type:"TEAM",playersPerTeam:11,icon:a.jsx(Ow,{className:"h-6 w-6"})},{name:"Volleyball",type:"TEAM",playersPerTeam:6,icon:a.jsx(iV,{className:"h-6 w-6"})},{name:"Chess",type:"SINGLE",playersPerTeam:1,icon:a.jsx(HL,{className:"h-6 w-6"})},{name:"Table Tennis",type:"PAIR",playersPerTeam:2,icon:a.jsx(q1,{className:"h-6 w-6"})},{name:"Carrom",type:"PAIR",playersPerTeam:2,icon:a.jsx(nV,{className:"h-6 w-6"})},{name:"8 Ball Pool",type:"PAIR",playersPerTeam:2,icon:a.jsx(q1,{className:"h-6 w-6"})},{name:"Pickleball",type:"PAIR",playersPerTeam:2,icon:a.jsx(sk,{className:"h-6 w-6"})}];return a.jsx("section",{className:"py-12 md:py-20 lg:py-24 bg-gradient-to-b from-muted/30 to-background",children:a.jsxs("div",{className:"container px-4 md:px-6",children:[a.jsxs("div",{className:"text-center mb-10 md:mb-16 animate-fade-in",children:[a.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black tracking-tight mb-4 md:mb-6",children:a.jsx("span",{className:"gradient-text",children:"Tournament Games"})}),a.jsx("p",{className:"text-base md:text-lg lg:text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed px-4 md:px-0",children:"Compete in 7 exciting sports across different formats - singles, doubles, and team events"})]}),a.jsx("div",{className:"grid gap-4 md:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:t.map((e,n)=>a.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${n*.1}s`},children:a.jsx(eW,{...e})},e.name))})]})})},nW=()=>a.jsx("section",{className:"py-16 md:py-24",children:a.jsxs("div",{className:"container",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold tracking-tight text-foreground md:text-4xl mb-4",children:"Interactive Tournament Brackets"}),a.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Visualize and track tournament progress with our clean bracket system"})]}),a.jsxs(Te,{className:"overflow-hidden border-none shadow-2xl bg-card/50 backdrop-blur-sm",children:[a.jsx(Ge,{className:"bg-gradient-to-r from-primary via-primary/80 to-secondary text-white border-b border-primary/10",children:a.jsxs(Ke,{className:"text-xl md:text-2xl font-bold flex items-center gap-2",children:[a.jsx(It,{className:"w-6 h-6 text-yellow-400 animate-pulse"}),"Sample Tournament - 8 Teams"]})}),a.jsxs(Se,{className:"p-0",children:[a.jsx("div",{className:"overflow-x-auto pb-6 scrollbar-thin scrollbar-thumb-primary/20 scrollbar-track-transparent",children:a.jsxs("div",{className:"min-w-[800px] p-8 flex justify-center items-center gap-12 lg:gap-20",children:[a.jsxs("div",{className:"space-y-12 relative",children:[a.jsxs("div",{className:"text-xs font-bold uppercase tracking-widest text-primary mb-6 flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 bg-primary rounded-full"}),"Quarter Finals"]}),[1,2,3,4].map(t=>a.jsxs("div",{className:"space-y-3 relative group",children:[a.jsx("div",{className:"border border-border/50 rounded-xl px-4 py-3 bg-card/80 hover:border-primary/50 hover:shadow-lg hover:shadow-primary/5 transition-all duration-300 cursor-pointer min-w-[160px] relative z-10",children:a.jsxs("div",{className:"text-sm font-semibold flex justify-between items-center",children:[a.jsxs("span",{children:["Team ",t*2-1]}),a.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-1.5 rounded",children:"R1"})]})}),a.jsx("div",{className:"border border-border/50 rounded-xl px-4 py-3 bg-card/80 hover:border-primary/50 hover:shadow-lg hover:shadow-primary/5 transition-all duration-300 cursor-pointer min-w-[160px] relative z-10",children:a.jsxs("div",{className:"text-sm font-semibold flex justify-between items-center",children:[a.jsxs("span",{children:["Team ",t*2]}),a.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-1.5 rounded",children:"R1"})]})}),a.jsx("div",{className:"absolute top-1/2 -right-6 w-6 h-px bg-border group-hover:bg-primary/30 transition-colors"})]},t))]}),a.jsxs("div",{className:"space-y-24",children:[a.jsxs("div",{className:"text-xs font-bold uppercase tracking-widest text-secondary mb-6 flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 bg-secondary rounded-full"}),"Semi Finals"]}),[1,2].map(t=>a.jsxs("div",{className:"border-2 border-dashed border-border/50 rounded-xl px-4 py-4 bg-muted/30 hover:border-secondary/50 transition-all duration-300 cursor-pointer min-w-[180px] group relative",children:[a.jsxs("div",{className:"text-sm font-bold text-muted-foreground flex items-center justify-between",children:[a.jsxs("span",{children:["Winner Match ",t]}),a.jsx(nk,{className:"w-4 h-4 opacity-30 group-hover:opacity-100 group-hover:text-secondary transition-all"})]}),a.jsx("div",{className:"absolute top-1/2 -left-6 w-6 h-px bg-border"}),a.jsx("div",{className:"absolute top-1/2 -right-6 w-6 h-px bg-border group-hover:bg-secondary/30 transition-colors"})]},t))]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"text-xs font-bold uppercase tracking-widest text-accent mb-6 flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 bg-accent rounded-full"}),"Grand Finals"]}),a.jsxs("div",{className:"border-2 border-accent rounded-2xl px-6 py-6 bg-accent/5 hover:bg-accent/10 hover:shadow-xl hover:shadow-accent/10 transition-all duration-500 cursor-pointer min-w-[200px] text-center group relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 group-hover:rotate-12 transition-transform",children:a.jsx(It,{className:"w-12 h-12 text-accent"})}),a.jsx("div",{className:"text-lg font-bold text-accent mb-1 drop-shadow-sm",children:"Champion"}),a.jsx("div",{className:"text-xs text-accent/60 font-medium",children:"Tournament Winner"}),a.jsx("div",{className:"absolute top-1/2 -left-8 w-8 h-px bg-accent/30"})]})]})]})}),a.jsx("div",{className:"md:hidden text-center py-2 bg-muted/20 border-t border-border/50",children:a.jsxs("p",{className:"text-[10px] text-muted-foreground uppercase tracking-widest flex items-center justify-center gap-2",children:[a.jsx("span",{className:"animate-pulse",children:""})," Swipe to explore bracket ",a.jsx("span",{className:"animate-pulse",children:""})]})})]})]}),a.jsx("div",{className:"mt-8 text-center",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Supports 8, 16, and 32 team brackets with automatic advancement"})})]})}),rW=()=>a.jsx("footer",{className:"border-t border-border bg-muted/30",children:a.jsxs("div",{className:"container py-12",children:[a.jsxs("div",{className:"grid gap-8 md:grid-cols-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(It,{className:"h-6 w-6 text-primary"}),a.jsx("span",{className:"text-xl font-bold text-foreground",children:"SportsBracket"})]}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"Complete tournament management system for organizing and tracking sports events. Built for Sports Week 2026."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"Quick Links"}),a.jsx("ul",{className:"space-y-2 text-sm",children:a.jsx("li",{children:a.jsx(Mt,{to:"/leaderboard",className:"text-muted-foreground hover:text-primary transition-colors",children:"Leaderboard"})})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"Account"}),a.jsxs("ul",{className:"space-y-2 text-sm",children:[a.jsx("li",{children:a.jsx(Mt,{to:"/login",className:"text-muted-foreground hover:text-primary transition-colors",children:"Login"})}),a.jsx("li",{children:a.jsx(Mt,{to:"/register",className:"text-muted-foreground hover:text-primary transition-colors",children:"Register"})})]})]})]}),a.jsx("div",{className:"mt-8 pt-8 border-t border-border text-center text-sm text-muted-foreground",children:" 2026 SportsBracket. Sports Week Tournament Management System."})]})}),sW=()=>a.jsxs("div",{className:"min-h-screen pt-16 md:pt-10",children:[a.jsx(i_,{}),a.jsx(X7,{}),a.jsx(tW,{}),a.jsx(nW,{}),a.jsx(rW,{})]}),GP=m.createContext(void 0),iW=({children:t})=>{const[e,n]=m.useState(!1);return a.jsxs(GP.Provider,{value:{isLoading:e,setIsLoading:n},children:[t,e&&a.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-background/80 backdrop-blur-sm transition-all duration-300",children:a.jsxs("div",{className:"flex flex-col items-center gap-4 p-8 rounded-2xl bg-card shadow-2xl border animate-in zoom-in-95",children:[a.jsxs("div",{className:"relative",children:[a.jsx(un,{className:"h-12 w-12 animate-spin text-primary"}),a.jsx("div",{className:"absolute inset-0 blur-xl bg-primary/20 animate-pulse rounded-full"})]}),a.jsx("p",{className:"text-lg font-bold tracking-tight text-foreground animate-pulse",children:"SYNCING DATA..."})]})})]})},ii=()=>{const t=m.useContext(GP);if(t===void 0)throw new Error("useLoading must be used within a LoadingProvider");return t};var Ny="focusScope.autoFocusOnMount",Cy="focusScope.autoFocusOnUnmount",ZT={bubbles:!1,cancelable:!0},aW="FocusScope",a_=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=m.useState(null),u=es(s),h=es(i),f=m.useRef(null),p=Et(e,v=>c(v)),g=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let v=function(w){if(g.paused||!l)return;const E=w.target;l.contains(E)?f.current=E:sa(f.current,{select:!0})},b=function(w){if(g.paused||!l)return;const E=w.relatedTarget;E!==null&&(l.contains(E)||sa(f.current,{select:!0}))},_=function(w){if(document.activeElement===document.body)for(const P of w)P.removedNodes.length>0&&sa(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",b);const y=new MutationObserver(_);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",b),y.disconnect()}}},[r,l,g.paused]),m.useEffect(()=>{if(l){eS.add(g);const v=document.activeElement;if(!l.contains(v)){const _=new CustomEvent(Ny,ZT);l.addEventListener(Ny,u),l.dispatchEvent(_),_.defaultPrevented||(oW(hW(KP(l)),{select:!0}),document.activeElement===v&&sa(l))}return()=>{l.removeEventListener(Ny,u),setTimeout(()=>{const _=new CustomEvent(Cy,ZT);l.addEventListener(Cy,h),l.dispatchEvent(_),_.defaultPrevented||sa(v??document.body,{select:!0}),l.removeEventListener(Cy,h),eS.remove(g)},0)}}},[l,u,h,g]);const T=m.useCallback(v=>{if(!n&&!r||g.paused)return;const b=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,_=document.activeElement;if(b&&_){const y=v.currentTarget,[w,E]=lW(y);w&&E?!v.shiftKey&&_===E?(v.preventDefault(),n&&sa(w,{select:!0})):v.shiftKey&&_===w&&(v.preventDefault(),n&&sa(E,{select:!0})):_===y&&v.preventDefault()}},[n,r,g.paused]);return a.jsx(Ve.div,{tabIndex:-1,...o,ref:p,onKeyDown:T})});a_.displayName=aW;function oW(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(sa(r,{select:e}),document.activeElement!==n)return}function lW(t){const e=KP(t),n=JT(e,t),r=JT(e.reverse(),t);return[n,r]}function KP(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function JT(t,e){for(const n of t)if(!cW(n,{upTo:e}))return n}function cW(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function uW(t){return t instanceof HTMLInputElement&&"select"in t}function sa(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&uW(t)&&e&&t.select()}}var eS=dW();function dW(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=tS(t,e),t.unshift(e)},remove(e){var n;t=tS(t,e),(n=t[0])==null||n.resume()}}}function tS(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function hW(t){return t.filter(e=>e.tagName!=="A")}var jy=0;function QP(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??nS()),document.body.insertAdjacentElement("beforeend",t[1]??nS()),jy++,()=>{jy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),jy--}},[])}function nS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Pf="right-scroll-bar-position",Rf="width-before-scroll-bar",fW="with-scroll-bars-hidden",mW="--removed-body-scroll-bar-size";function ky(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function pW(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var gW=typeof window<"u"?m.useLayoutEffect:m.useEffect,rS=new WeakMap;function yW(t,e){var n=pW(null,function(r){return t.forEach(function(s){return ky(s,r)})});return gW(function(){var r=rS.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||ky(l,null)}),i.forEach(function(l){s.has(l)||ky(l,o)})}rS.set(n,t)},[t]),n}function vW(t){return t}function xW(t,e){e===void 0&&(e=vW);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function wW(t){t===void 0&&(t={});var e=xW(null);return e.options=Ls({async:!0,ssr:!1},t),e}var YP=function(t){var e=t.sideCar,n=Yd(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Ls({},n))};YP.isSideCarExport=!0;function _W(t,e){return t.useMedium(e),YP}var XP=wW(),Iy=function(){},ng=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:Iy,onWheelCapture:Iy,onTouchMoveCapture:Iy}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,p=t.sideCar,g=t.noRelative,T=t.noIsolation,v=t.inert,b=t.allowPinchZoom,_=t.as,y=_===void 0?"div":_,w=t.gapMode,E=Yd(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=p,R=yW([n,e]),S=Ls(Ls({},E),s);return m.createElement(m.Fragment,null,h&&m.createElement(P,{sideCar:XP,removeScrollBar:u,shards:f,noRelative:g,noIsolation:T,inert:v,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:w}),o?m.cloneElement(m.Children.only(l),Ls(Ls({},S),{ref:R})):m.createElement(y,Ls({},S,{className:c,ref:R}),l))});ng.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ng.classNames={fullWidth:Rf,zeroRight:Pf};var bW=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function EW(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=bW();return e&&t.setAttribute("nonce",e),t}function TW(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function SW(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var NW=function(){var t=0,e=null;return{add:function(n){t==0&&(e=EW())&&(TW(e,n),SW(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},CW=function(){var t=NW();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},ZP=function(){var t=CW(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},jW={left:0,top:0,right:0,gap:0},Ay=function(t){return parseInt(t||"",10)||0},kW=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Ay(n),Ay(r),Ay(s)]},IW=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return jW;var e=kW(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},AW=ZP(),Xl="data-scroll-locked",PW=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(fW,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Xl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Pf,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Rf,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Pf," .").concat(Pf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Rf," .").concat(Rf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Xl,`] {
    `).concat(mW,": ").concat(l,`px;
  }
`)},sS=function(){var t=parseInt(document.body.getAttribute(Xl)||"0",10);return isFinite(t)?t:0},RW=function(){m.useEffect(function(){return document.body.setAttribute(Xl,(sS()+1).toString()),function(){var t=sS()-1;t<=0?document.body.removeAttribute(Xl):document.body.setAttribute(Xl,t.toString())}},[])},DW=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;RW();var i=m.useMemo(function(){return IW(s)},[s]);return m.createElement(AW,{styles:PW(i,!e,s,n?"":"!important")})},yx=!1;if(typeof window<"u")try{var nf=Object.defineProperty({},"passive",{get:function(){return yx=!0,!0}});window.addEventListener("test",nf,nf),window.removeEventListener("test",nf,nf)}catch{yx=!1}var fl=yx?{passive:!1}:!1,MW=function(t){return t.tagName==="TEXTAREA"},JP=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!MW(t)&&n[e]==="visible")},OW=function(t){return JP(t,"overflowY")},LW=function(t){return JP(t,"overflowX")},iS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=eR(t,r);if(s){var i=tR(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},VW=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},FW=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},eR=function(t,e){return t==="v"?OW(e):LW(e)},tR=function(t,e){return t==="v"?VW(e):FW(e)},UW=function(t,e){return t==="h"&&e==="rtl"?-1:1},$W=function(t,e,n,r,s){var i=UW(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,c=e.contains(l),u=!1,h=o>0,f=0,p=0;do{if(!l)break;var g=tR(t,l),T=g[0],v=g[1],b=g[2],_=v-b-i*T;(T||_)&&eR(t,l)&&(f+=_,p+=T);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(u=!0),u},rf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},aS=function(t){return[t.deltaX,t.deltaY]},oS=function(t){return t&&"current"in t?t.current:t},BW=function(t,e){return t[0]===e[0]&&t[1]===e[1]},zW=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},WW=0,ml=[];function HW(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(WW++)[0],i=m.useState(ZP)[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=m9([t.lockRef.current],(t.shards||[]).map(oS),!0).filter(Boolean);return v.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=m.useCallback(function(v,b){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var _=rf(v),y=n.current,w="deltaX"in v?v.deltaX:y[0]-_[0],E="deltaY"in v?v.deltaY:y[1]-_[1],P,R=v.target,S=Math.abs(w)>Math.abs(E)?"h":"v";if("touches"in v&&S==="h"&&R.type==="range")return!1;var N=iS(S,R);if(!N)return!0;if(N?P=S:(P=S==="v"?"h":"v",N=iS(S,R)),!N)return!1;if(!r.current&&"changedTouches"in v&&(w||E)&&(r.current=P),!P)return!0;var k=r.current||P;return $W(k,b,v,k==="h"?w:E,!0)},[]),c=m.useCallback(function(v){var b=v;if(!(!ml.length||ml[ml.length-1]!==i)){var _="deltaY"in b?aS(b):rf(b),y=e.current.filter(function(P){return P.name===b.type&&(P.target===b.target||b.target===P.shadowParent)&&BW(P.delta,_)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(oS).filter(Boolean).filter(function(P){return P.contains(b.target)}),E=w.length>0?l(b,w[0]):!o.current.noIsolation;E&&b.cancelable&&b.preventDefault()}}},[]),u=m.useCallback(function(v,b,_,y){var w={name:v,delta:b,target:_,should:y,shadowParent:qW(_)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(E){return E!==w})},1)},[]),h=m.useCallback(function(v){n.current=rf(v),r.current=void 0},[]),f=m.useCallback(function(v){u(v.type,aS(v),v.target,l(v,t.lockRef.current))},[]),p=m.useCallback(function(v){u(v.type,rf(v),v.target,l(v,t.lockRef.current))},[]);m.useEffect(function(){return ml.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,fl),document.addEventListener("touchmove",c,fl),document.addEventListener("touchstart",h,fl),function(){ml=ml.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,fl),document.removeEventListener("touchmove",c,fl),document.removeEventListener("touchstart",h,fl)}},[]);var g=t.removeScrollBar,T=t.inert;return m.createElement(m.Fragment,null,T?m.createElement(i,{styles:zW(s)}):null,g?m.createElement(DW,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function qW(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const GW=_W(XP,HW);var o_=m.forwardRef(function(t,e){return m.createElement(ng,Ls({},t,{ref:e,sideCar:GW}))});o_.classNames=ng.classNames;var KW=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},pl=new WeakMap,sf=new WeakMap,af={},Py=0,nR=function(t){return t&&(t.host||nR(t.parentNode))},QW=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=nR(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},YW=function(t,e,n,r){var s=QW(e,Array.isArray(t)?t:[t]);af[n]||(af[n]=new WeakMap);var i=af[n],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var g=p.getAttribute(r),T=g!==null&&g!=="false",v=(pl.get(p)||0)+1,b=(i.get(p)||0)+1;pl.set(p,v),i.set(p,b),o.push(p),v===1&&T&&sf.set(p,!0),b===1&&p.setAttribute(n,"true"),T||p.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",p,_)}})};return h(e),l.clear(),Py++,function(){o.forEach(function(f){var p=pl.get(f)-1,g=i.get(f)-1;pl.set(f,p),i.set(f,g),p||(sf.has(f)||f.removeAttribute(r),sf.delete(f)),g||f.removeAttribute(n)}),Py--,Py||(pl=new WeakMap,pl=new WeakMap,sf=new WeakMap,af={})}},rR=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=KW(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),YW(r,s,n,"aria-hidden")):function(){return null}},rg="Dialog",[sR,EY]=ei(rg),[XW,Cs]=sR(rg),iR=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,l=m.useRef(null),c=m.useRef(null),[u,h]=Ii({prop:r,defaultProp:s??!1,onChange:i,caller:rg});return a.jsx(XW,{scope:e,triggerRef:l,contentRef:c,contentId:Ei(),titleId:Ei(),descriptionId:Ei(),open:u,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};iR.displayName=rg;var aR="DialogTrigger",oR=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Cs(aR,n),i=Et(e,s.triggerRef);return a.jsx(Ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":u_(s.open),...r,ref:i,onClick:je(t.onClick,s.onOpenToggle)})});oR.displayName=aR;var l_="DialogPortal",[ZW,lR]=sR(l_,{forceMount:void 0}),cR=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Cs(l_,e);return a.jsx(ZW,{scope:e,forceMount:n,children:m.Children.map(r,o=>a.jsx(so,{present:n||i.open,children:a.jsx(pp,{asChild:!0,container:s,children:o})}))})};cR.displayName=l_;var Om="DialogOverlay",uR=m.forwardRef((t,e)=>{const n=lR(Om,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Cs(Om,t.__scopeDialog);return i.modal?a.jsx(so,{present:r||i.open,children:a.jsx(eH,{...s,ref:e})}):null});uR.displayName=Om;var JW=mc("DialogOverlay.RemoveScroll"),eH=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Cs(Om,n);return a.jsx(o_,{as:JW,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(Ve.div,{"data-state":u_(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ko="DialogContent",dR=m.forwardRef((t,e)=>{const n=lR(Ko,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Cs(Ko,t.__scopeDialog);return a.jsx(so,{present:r||i.open,children:i.modal?a.jsx(tH,{...s,ref:e}):a.jsx(nH,{...s,ref:e})})});dR.displayName=Ko;var tH=m.forwardRef((t,e)=>{const n=Cs(Ko,t.__scopeDialog),r=m.useRef(null),s=Et(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return rR(i)},[]),a.jsx(hR,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:je(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:je(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:je(t.onFocusOutside,i=>i.preventDefault())})}),nH=m.forwardRef((t,e)=>{const n=Cs(Ko,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return a.jsx(hR,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),hR=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,l=Cs(Ko,n),c=m.useRef(null),u=Et(e,c);return QP(),a.jsxs(a.Fragment,{children:[a.jsx(a_,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(Hd,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":u_(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(rH,{titleId:l.titleId}),a.jsx(iH,{contentRef:c,descriptionId:l.descriptionId})]})]})}),c_="DialogTitle",fR=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Cs(c_,n);return a.jsx(Ve.h2,{id:s.titleId,...r,ref:e})});fR.displayName=c_;var mR="DialogDescription",pR=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Cs(mR,n);return a.jsx(Ve.p,{id:s.descriptionId,...r,ref:e})});pR.displayName=mR;var gR="DialogClose",yR=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Cs(gR,n);return a.jsx(Ve.button,{type:"button",...r,ref:e,onClick:je(t.onClick,()=>s.onOpenChange(!1))})});yR.displayName=gR;function u_(t){return t?"open":"closed"}var vR="DialogTitleWarning",[TY,xR]=H4(vR,{contentName:Ko,titleName:c_,docsSlug:"dialog"}),rH=({titleId:t})=>{const e=xR(vR),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},sH="DialogDescriptionWarning",iH=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${xR(sH).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},wR=iR,aH=oR,_R=cR,sg=uR,ig=dR,ag=fR,og=pR,bR=yR;const _s=wR,d_=aH,oH=_R,ER=m.forwardRef(({className:t,...e},n)=>a.jsx(sg,{ref:n,className:ie("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));ER.displayName=sg.displayName;const Qr=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(oH,{children:[a.jsx(ER,{}),a.jsxs(ig,{ref:r,className:ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,a.jsxs(bR,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(xp,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Qr.displayName=ig.displayName;const Yr=({className:t,...e})=>a.jsx("div",{className:ie("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Yr.displayName="DialogHeader";const h_=({className:t,...e})=>a.jsx("div",{className:ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});h_.displayName="DialogFooter";const Xr=m.forwardRef(({className:t,...e},n)=>a.jsx(ag,{ref:n,className:ie("text-lg font-semibold leading-none tracking-tight",t),...e}));Xr.displayName=ag.displayName;const Lm=m.forwardRef(({className:t,...e},n)=>a.jsx(og,{ref:n,className:ie("text-sm text-muted-foreground",t),...e}));Lm.displayName=og.displayName;const yt=m.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:ie("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));yt.displayName="Input";var lH=Object.defineProperty,cH=Object.defineProperties,uH=Object.getOwnPropertyDescriptors,Vm=Object.getOwnPropertySymbols,TR=Object.prototype.hasOwnProperty,SR=Object.prototype.propertyIsEnumerable,lS=(t,e,n)=>e in t?lH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dH=(t,e)=>{for(var n in e||(e={}))TR.call(e,n)&&lS(t,n,e[n]);if(Vm)for(var n of Vm(e))SR.call(e,n)&&lS(t,n,e[n]);return t},hH=(t,e)=>cH(t,uH(e)),fH=(t,e)=>{var n={};for(var r in t)TR.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Vm)for(var r of Vm(t))e.indexOf(r)<0&&SR.call(t,r)&&(n[r]=t[r]);return n};function mH(t){let e=setTimeout(t,0),n=setTimeout(t,10),r=setTimeout(t,50);return[e,n,r]}function pH(t){let e=m.useRef();return m.useEffect(()=>{e.current=t}),e.current}var gH=18,NR=40,yH=`${NR}px`,vH=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function xH({containerRef:t,inputRef:e,pushPasswordManagerStrategy:n,isFocused:r}){let[s,i]=m.useState(!1),[o,l]=m.useState(!1),[c,u]=m.useState(!1),h=m.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&s&&o,[s,o,n]),f=m.useCallback(()=>{let p=t.current,g=e.current;if(!p||!g||c||n==="none")return;let T=p,v=T.getBoundingClientRect().left+T.offsetWidth,b=T.getBoundingClientRect().top+T.offsetHeight/2,_=v-gH,y=b;document.querySelectorAll(vH).length===0&&document.elementFromPoint(_,y)===p||(i(!0),u(!0))},[t,e,c,n]);return m.useEffect(()=>{let p=t.current;if(!p||n==="none")return;function g(){let v=window.innerWidth-p.getBoundingClientRect().right;l(v>=NR)}g();let T=setInterval(g,1e3);return()=>{clearInterval(T)}},[t,n]),m.useEffect(()=>{let p=r||document.activeElement===e.current;if(n==="none"||!p)return;let g=setTimeout(f,0),T=setTimeout(f,2e3),v=setTimeout(f,5e3),b=setTimeout(()=>{u(!0)},6e3);return()=>{clearTimeout(g),clearTimeout(T),clearTimeout(v),clearTimeout(b)}},[e,r,n,f]),{hasPWMBadge:s,willPushPWMBadge:h,PWM_BADGE_SPACE_WIDTH:yH}}var CR=m.createContext({}),jR=m.forwardRef((t,e)=>{var n=t,{value:r,onChange:s,maxLength:i,textAlign:o="left",pattern:l,placeholder:c,inputMode:u="numeric",onComplete:h,pushPasswordManagerStrategy:f="increase-width",pasteTransformer:p,containerClassName:g,noScriptCSSFallback:T=wH,render:v,children:b}=n,_=fH(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),y,w,E,P,R;let[S,N]=m.useState(typeof _.defaultValue=="string"?_.defaultValue:""),k=r??S,A=pH(k),M=m.useCallback(ge=>{s==null||s(ge),N(ge)},[s]),I=m.useMemo(()=>l?typeof l=="string"?new RegExp(l):l:null,[l]),j=m.useRef(null),V=m.useRef(null),W=m.useRef({value:k,onChange:M,isIOS:typeof window<"u"&&((w=(y=window==null?void 0:window.CSS)==null?void 0:y.supports)==null?void 0:w.call(y,"-webkit-touch-callout","none"))}),H=m.useRef({prev:[(E=j.current)==null?void 0:E.selectionStart,(P=j.current)==null?void 0:P.selectionEnd,(R=j.current)==null?void 0:R.selectionDirection]});m.useImperativeHandle(e,()=>j.current,[]),m.useEffect(()=>{let ge=j.current,be=V.current;if(!ge||!be)return;W.current.value!==ge.value&&W.current.onChange(ge.value),H.current.prev=[ge.selectionStart,ge.selectionEnd,ge.selectionDirection];function it(){if(document.activeElement!==ge){oe(null),xe(null);return}let Qe=ge.selectionStart,L=ge.selectionEnd,B=ge.selectionDirection,O=ge.maxLength,Q=ge.value,X=H.current.prev,re=-1,ne=-1,q;if(Q.length!==0&&Qe!==null&&L!==null){let tt=Qe===L,Gt=Qe===Q.length&&Q.length<O;if(tt&&!Gt){let Wt=Qe;if(Wt===0)re=0,ne=1,q="forward";else if(Wt===O)re=Wt-1,ne=Wt,q="backward";else if(O>1&&Q.length>1){let Dt=0;if(X[0]!==null&&X[1]!==null){q=Wt<X[1]?"backward":"forward";let Vn=X[0]===X[1]&&X[0]<O;q==="backward"&&!Vn&&(Dt=-1)}re=Dt+Wt,ne=Dt+Wt+1}}re!==-1&&ne!==-1&&re!==ne&&j.current.setSelectionRange(re,ne,q)}let se=re!==-1?re:Qe,ye=ne!==-1?ne:L,Xe=q??B;oe(se),xe(ye),H.current.prev=[se,ye,Xe]}if(document.addEventListener("selectionchange",it,{capture:!0}),it(),document.activeElement===ge&&$(!0),!document.getElementById("input-otp-style")){let Qe=document.createElement("style");if(Qe.id="input-otp-style",document.head.appendChild(Qe),Qe.sheet){let L="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";yu(Qe.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),yu(Qe.sheet,`[data-input-otp]:autofill { ${L} }`),yu(Qe.sheet,`[data-input-otp]:-webkit-autofill { ${L} }`),yu(Qe.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),yu(Qe.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let ht=()=>{be&&be.style.setProperty("--root-height",`${ge.clientHeight}px`)};ht();let At=new ResizeObserver(ht);return At.observe(ge),()=>{document.removeEventListener("selectionchange",it,{capture:!0}),At.disconnect()}},[]);let[Y,U]=m.useState(!1),[F,$]=m.useState(!1),[G,oe]=m.useState(null),[de,xe]=m.useState(null);m.useEffect(()=>{mH(()=>{var ge,be,it,ht;(ge=j.current)==null||ge.dispatchEvent(new Event("input"));let At=(be=j.current)==null?void 0:be.selectionStart,Qe=(it=j.current)==null?void 0:it.selectionEnd,L=(ht=j.current)==null?void 0:ht.selectionDirection;At!==null&&Qe!==null&&(oe(At),xe(Qe),H.current.prev=[At,Qe,L])})},[k,F]),m.useEffect(()=>{A!==void 0&&k!==A&&A.length<i&&k.length===i&&(h==null||h(k))},[i,h,A,k]);let Ne=xH({containerRef:V,inputRef:j,pushPasswordManagerStrategy:f,isFocused:F}),lt=m.useCallback(ge=>{let be=ge.currentTarget.value.slice(0,i);if(be.length>0&&I&&!I.test(be)){ge.preventDefault();return}typeof A=="string"&&be.length<A.length&&document.dispatchEvent(new Event("selectionchange")),M(be)},[i,M,A,I]),le=m.useCallback(()=>{var ge;if(j.current){let be=Math.min(j.current.value.length,i-1),it=j.current.value.length;(ge=j.current)==null||ge.setSelectionRange(be,it),oe(be),xe(it)}$(!0)},[i]),We=m.useCallback(ge=>{var be,it;let ht=j.current;if(!p&&(!W.current.isIOS||!ge.clipboardData||!ht))return;let At=ge.clipboardData.getData("text/plain"),Qe=p?p(At):At;ge.preventDefault();let L=(be=j.current)==null?void 0:be.selectionStart,B=(it=j.current)==null?void 0:it.selectionEnd,O=(L!==B?k.slice(0,L)+Qe+k.slice(B):k.slice(0,L)+Qe+k.slice(L)).slice(0,i);if(O.length>0&&I&&!I.test(O))return;ht.value=O,M(O);let Q=Math.min(O.length,i-1),X=O.length;ht.setSelectionRange(Q,X),oe(Q),xe(X)},[i,M,I,k]),st=m.useMemo(()=>({position:"relative",cursor:_.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[_.disabled]),Me=m.useMemo(()=>({position:"absolute",inset:0,width:Ne.willPushPWMBadge?`calc(100% + ${Ne.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:Ne.willPushPWMBadge?`inset(0 ${Ne.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[Ne.PWM_BADGE_SPACE_WIDTH,Ne.willPushPWMBadge,o]),Oe=m.useMemo(()=>m.createElement("input",hH(dH({autoComplete:_.autoComplete||"one-time-code"},_),{"data-input-otp":!0,"data-input-otp-placeholder-shown":k.length===0||void 0,"data-input-otp-mss":G,"data-input-otp-mse":de,inputMode:u,pattern:I==null?void 0:I.source,"aria-placeholder":c,style:Me,maxLength:i,value:k,ref:j,onPaste:ge=>{var be;We(ge),(be=_.onPaste)==null||be.call(_,ge)},onChange:lt,onMouseOver:ge=>{var be;U(!0),(be=_.onMouseOver)==null||be.call(_,ge)},onMouseLeave:ge=>{var be;U(!1),(be=_.onMouseLeave)==null||be.call(_,ge)},onFocus:ge=>{var be;le(),(be=_.onFocus)==null||be.call(_,ge)},onBlur:ge=>{var be;$(!1),(be=_.onBlur)==null||be.call(_,ge)}})),[lt,le,We,u,Me,i,de,G,_,I==null?void 0:I.source,k]),De=m.useMemo(()=>({slots:Array.from({length:i}).map((ge,be)=>{var it;let ht=F&&G!==null&&de!==null&&(G===de&&be===G||be>=G&&be<de),At=k[be]!==void 0?k[be]:null,Qe=k[0]!==void 0?null:(it=c==null?void 0:c[be])!=null?it:null;return{char:At,placeholderChar:Qe,isActive:ht,hasFakeCaret:ht&&At===null}}),isFocused:F,isHovering:!_.disabled&&Y}),[F,Y,i,de,G,_.disabled,k]),Tt=m.useMemo(()=>v?v(De):m.createElement(CR.Provider,{value:De},b),[b,De,v]);return m.createElement(m.Fragment,null,T!==null&&m.createElement("noscript",null,m.createElement("style",null,T)),m.createElement("div",{ref:V,"data-input-otp-container":!0,style:st,className:g},Tt,m.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Oe)))});jR.displayName="Input";function yu(t,e){try{t.insertRule(e)}catch{console.error("input-otp could not insert CSS rule:",e)}}var wH=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const kR=m.forwardRef(({className:t,containerClassName:e,...n},r)=>a.jsx(jR,{ref:r,containerClassName:ie("flex items-center gap-2 has-[:disabled]:opacity-50",e),className:ie("disabled:cursor-not-allowed",t),...n}));kR.displayName="InputOTP";const IR=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ie("flex items-center",t),...e}));IR.displayName="InputOTPGroup";const xo=m.forwardRef(({index:t,className:e,...n},r)=>{const s=m.useContext(CR),{char:i,hasFakeCaret:o,isActive:l}=s.slots[t];return a.jsxs("div",{ref:r,className:ie("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",l&&"z-10 ring-2 ring-ring ring-offset-background",e),...n,children:[i,o&&a.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"animate-caret-blink h-4 w-px bg-foreground duration-1000"})})]})});xo.displayName="InputOTPSlot";const _H=m.forwardRef(({...t},e)=>a.jsx("div",{ref:e,role:"separator",...t,children:a.jsx(zL,{})}));_H.displayName="InputOTPSeparator";var bH="Label",AR=m.forwardRef((t,e)=>a.jsx(Ve.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));AR.displayName=bH;var PR=AR;const EH=nl("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ue=m.forwardRef(({className:t,...e},n)=>a.jsx(PR,{ref:n,className:ie(EH(),t),...e}));Ue.displayName=PR.displayName;const TH=()=>{const[t,e]=m.useState(""),[n,r]=m.useState(""),[s,i]=m.useState(!1),[o,l]=m.useState(!1),[c,u]=m.useState(!1),[h,f]=m.useState(""),[p,g]=m.useState(""),[T,v]=m.useState(!1),[b,_]=m.useState(!1),{signIn:y,signInWithGoogle:w,user:E}=hn(),{setIsLoading:P}=ii(),{toast:R}=Zn(),S=Uc();m.useEffect(()=>{E&&S("/")},[E,S]);const N=async I=>{I.preventDefault(),i(!0),P(!0);try{const{error:j}=await y(t,n);j&&R({title:"Login failed",description:j.message,variant:"destructive"})}catch(j){R({title:"Error",description:j.message,variant:"destructive"})}finally{i(!1),P(!1)}},k=async()=>{i(!0),P(!0);try{const{error:I,isNewUser:j}=await w();I?R({title:"Google sign-in failed",description:I.message,variant:"destructive"}):j&&S("/register",{state:{isNewUser:!0}})}catch(I){R({title:"Error",description:I.message,variant:"destructive"})}finally{i(!1)}},A=async()=>{if(!h){R({title:"Email required",description:"Please enter your email address",variant:"destructive"});return}v(!0);try{await v$(As,h),R({title:"Password reset email sent",description:"Check your email for password reset instructions"}),l(!1)}catch(I){R({title:"Error",description:I.message,variant:"destructive"})}finally{v(!1)}},M=async()=>{if(p.length!==6){R({title:"Invalid OTP",description:"Please enter a valid 6-digit OTP",variant:"destructive"});return}_(!0);try{R({title:"OTP verified",description:"Password reset functionality implemented"}),u(!1),g("")}catch(I){R({title:"Error",description:I.message,variant:"destructive"})}finally{_(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30 px-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsxs(Mt,{to:"/",className:"inline-flex items-center space-x-2 mb-4",children:[a.jsx(It,{className:"h-8 w-8 text-primary"}),a.jsx("span",{className:"text-2xl font-bold text-foreground",children:"SportsBracket"})]})}),a.jsxs(Te,{children:[a.jsxs(Ge,{children:[a.jsx(Ke,{children:"Welcome Back"}),a.jsx(wr,{children:"Login to manage your tournament participation"})]}),a.jsx(Se,{children:a.jsxs("form",{className:"space-y-4",onSubmit:N,children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"email",children:"Email"}),a.jsx(yt,{id:"email",type:"email",placeholder:"Enter your email",value:t,onChange:I=>e(I.target.value),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"password",children:"Password"}),a.jsx(yt,{id:"password",type:"password",placeholder:"Enter your password",value:n,onChange:I=>r(I.target.value),required:!0})]}),a.jsx(we,{className:"w-full",type:"submit",disabled:s,children:s?"Logging in...":"Login"}),a.jsx(we,{className:"w-full",variant:"outline",onClick:k,disabled:s,children:"Continue with Google"}),a.jsxs("div",{className:"text-center text-sm space-y-2",children:[a.jsx("button",{type:"button",onClick:()=>l(!0),className:"text-primary hover:underline",children:"Forgot password?"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Don't have an account? "}),a.jsx(Mt,{to:"/register",className:"text-primary hover:underline",children:"Register here"})]})]})]})})]}),a.jsx(_s,{open:o,onOpenChange:l,children:a.jsxs(Qr,{children:[a.jsxs(Yr,{children:[a.jsx(Xr,{children:"Reset Password"}),a.jsx(Lm,{children:"Enter your email address and we'll send you a password reset link."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"forgot-email",children:"Email"}),a.jsx(yt,{id:"forgot-email",type:"email",placeholder:"Enter your email",value:h,onChange:I=>f(I.target.value)})]}),a.jsx(we,{className:"w-full",onClick:A,disabled:T,children:T?"Sending...":"Send Reset Email"})]})]})}),a.jsx(_s,{open:c,onOpenChange:u,children:a.jsxs(Qr,{children:[a.jsxs(Yr,{children:[a.jsx(Xr,{children:"Enter OTP"}),a.jsx(Lm,{children:"Enter the 6-digit code sent to your email."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx(kR,{value:p,onChange:g,maxLength:6,children:a.jsxs(IR,{children:[a.jsx(xo,{index:0}),a.jsx(xo,{index:1}),a.jsx(xo,{index:2}),a.jsx(xo,{index:3}),a.jsx(xo,{index:4}),a.jsx(xo,{index:5})]})})}),a.jsx(we,{className:"w-full",onClick:M,disabled:b,children:b?"Verifying...":"Verify OTP"})]})]})})]})})};function cS(t,[e,n]){return Math.min(n,Math.max(e,t))}var SH=m.createContext(void 0);function f_(t){const e=m.useContext(SH);return t||e||"ltr"}function m_(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var NH=[" ","Enter","ArrowUp","ArrowDown"],CH=[" ","Enter"],Qo="Select",[lg,cg,jH]=kw(Qo),[Kc,SY]=ei(Qo,[jH,Ep]),ug=Ep(),[kH,lo]=Kc(Qo),[IH,AH]=Kc(Qo),RR=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:p,required:g,form:T}=t,v=ug(e),[b,_]=m.useState(null),[y,w]=m.useState(null),[E,P]=m.useState(!1),R=f_(u),[S,N]=Ii({prop:r,defaultProp:s??!1,onChange:i,caller:Qo}),[k,A]=Ii({prop:o,defaultProp:l,onChange:c,caller:Qo}),M=m.useRef(null),I=b?T||!!b.closest("form"):!0,[j,V]=m.useState(new Set),W=Array.from(j).map(H=>H.props.value).join(";");return a.jsx(Ok,{...v,children:a.jsxs(kH,{required:g,scope:e,trigger:b,onTriggerChange:_,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:E,onValueNodeHasChildrenChange:P,contentId:Ei(),value:k,onValueChange:A,open:S,onOpenChange:N,dir:R,triggerPointerDownPosRef:M,disabled:p,children:[a.jsx(lg.Provider,{scope:e,children:a.jsx(IH,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(H=>{V(Y=>new Set(Y).add(H))},[]),onNativeOptionRemove:m.useCallback(H=>{V(Y=>{const U=new Set(Y);return U.delete(H),U})},[]),children:n})}),I?a.jsxs(r2,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:f,value:k,onChange:H=>A(H.target.value),disabled:p,form:T,children:[k===void 0?a.jsx("option",{value:""}):null,Array.from(j)]},W):null]})})};RR.displayName=Qo;var DR="SelectTrigger",MR=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=ug(n),o=lo(DR,n),l=o.disabled||r,c=Et(e,o.onTriggerChange),u=cg(n),h=m.useRef("touch"),[f,p,g]=i2(v=>{const b=u().filter(w=>!w.disabled),_=b.find(w=>w.value===o.value),y=a2(b,v,_);y!==void 0&&o.onValueChange(y.value)}),T=v=>{l||(o.onOpenChange(!0),g()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return a.jsx(Lk,{asChild:!0,...i,children:a.jsx(Ve.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":s2(o.value)?"":void 0,...s,ref:c,onClick:je(s.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&T(v)}),onPointerDown:je(s.onPointerDown,v=>{h.current=v.pointerType;const b=v.target;b.hasPointerCapture(v.pointerId)&&b.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(T(v),v.preventDefault())}),onKeyDown:je(s.onKeyDown,v=>{const b=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&p(v.key),!(b&&v.key===" ")&&NH.includes(v.key)&&(T(),v.preventDefault())})})})});MR.displayName=DR;var OR="SelectValue",LR=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=t,c=lo(OR,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=Et(e,c.onValueNodeChange);return Mn(()=>{u(h)},[u,h]),a.jsx(Ve.span,{...l,ref:f,style:{pointerEvents:"none"},children:s2(c.value)?a.jsx(a.Fragment,{children:o}):i})});LR.displayName=OR;var PH="SelectIcon",VR=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return a.jsx(Ve.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});VR.displayName=PH;var RH="SelectPortal",FR=t=>a.jsx(pp,{asChild:!0,...t});FR.displayName=RH;var Yo="SelectContent",UR=m.forwardRef((t,e)=>{const n=lo(Yo,t.__scopeSelect),[r,s]=m.useState();if(Mn(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?tl.createPortal(a.jsx($R,{scope:t.__scopeSelect,children:a.jsx(lg.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(BR,{...t,ref:e})});UR.displayName=Yo;var ls=10,[$R,co]=Kc(Yo),DH="SelectContentImpl",MH=mc("SelectContent.RemoveScroll"),BR=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:T,hideWhenDetached:v,avoidCollisions:b,..._}=t,y=lo(Yo,n),[w,E]=m.useState(null),[P,R]=m.useState(null),S=Et(e,le=>E(le)),[N,k]=m.useState(null),[A,M]=m.useState(null),I=cg(n),[j,V]=m.useState(!1),W=m.useRef(!1);m.useEffect(()=>{if(w)return rR(w)},[w]),QP();const H=m.useCallback(le=>{const[We,...st]=I().map(De=>De.ref.current),[Me]=st.slice(-1),Oe=document.activeElement;for(const De of le)if(De===Oe||(De==null||De.scrollIntoView({block:"nearest"}),De===We&&P&&(P.scrollTop=0),De===Me&&P&&(P.scrollTop=P.scrollHeight),De==null||De.focus(),document.activeElement!==Oe))return},[I,P]),Y=m.useCallback(()=>H([N,w]),[H,N,w]);m.useEffect(()=>{j&&Y()},[j,Y]);const{onOpenChange:U,triggerPointerDownPosRef:F}=y;m.useEffect(()=>{if(w){let le={x:0,y:0};const We=Me=>{var Oe,De;le={x:Math.abs(Math.round(Me.pageX)-(((Oe=F.current)==null?void 0:Oe.x)??0)),y:Math.abs(Math.round(Me.pageY)-(((De=F.current)==null?void 0:De.y)??0))}},st=Me=>{le.x<=10&&le.y<=10?Me.preventDefault():w.contains(Me.target)||U(!1),document.removeEventListener("pointermove",We),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",We),document.addEventListener("pointerup",st,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",We),document.removeEventListener("pointerup",st,{capture:!0})}}},[w,U,F]),m.useEffect(()=>{const le=()=>U(!1);return window.addEventListener("blur",le),window.addEventListener("resize",le),()=>{window.removeEventListener("blur",le),window.removeEventListener("resize",le)}},[U]);const[$,G]=i2(le=>{const We=I().filter(Oe=>!Oe.disabled),st=We.find(Oe=>Oe.ref.current===document.activeElement),Me=a2(We,le,st);Me&&setTimeout(()=>Me.ref.current.focus())}),oe=m.useCallback((le,We,st)=>{const Me=!W.current&&!st;(y.value!==void 0&&y.value===We||Me)&&(k(le),Me&&(W.current=!0))},[y.value]),de=m.useCallback(()=>w==null?void 0:w.focus(),[w]),xe=m.useCallback((le,We,st)=>{const Me=!W.current&&!st;(y.value!==void 0&&y.value===We||Me)&&M(le)},[y.value]),Ne=r==="popper"?vx:zR,lt=Ne===vx?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:T,hideWhenDetached:v,avoidCollisions:b}:{};return a.jsx($R,{scope:n,content:w,viewport:P,onViewportChange:R,itemRefCallback:oe,selectedItem:N,onItemLeave:de,itemTextRefCallback:xe,focusSelectedItem:Y,selectedItemText:A,position:r,isPositioned:j,searchRef:$,children:a.jsx(o_,{as:MH,allowPinchZoom:!0,children:a.jsx(a_,{asChild:!0,trapped:y.open,onMountAutoFocus:le=>{le.preventDefault()},onUnmountAutoFocus:je(s,le=>{var We;(We=y.trigger)==null||We.focus({preventScroll:!0}),le.preventDefault()}),children:a.jsx(Hd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:le=>le.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:a.jsx(Ne,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:le=>le.preventDefault(),..._,...lt,onPlaced:()=>V(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:je(_.onKeyDown,le=>{const We=le.ctrlKey||le.altKey||le.metaKey;if(le.key==="Tab"&&le.preventDefault(),!We&&le.key.length===1&&G(le.key),["ArrowUp","ArrowDown","Home","End"].includes(le.key)){let Me=I().filter(Oe=>!Oe.disabled).map(Oe=>Oe.ref.current);if(["ArrowUp","End"].includes(le.key)&&(Me=Me.slice().reverse()),["ArrowUp","ArrowDown"].includes(le.key)){const Oe=le.target,De=Me.indexOf(Oe);Me=Me.slice(De+1)}setTimeout(()=>H(Me)),le.preventDefault()}})})})})})})});BR.displayName=DH;var OH="SelectItemAlignedPosition",zR=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=lo(Yo,n),o=co(Yo,n),[l,c]=m.useState(null),[u,h]=m.useState(null),f=Et(e,S=>h(S)),p=cg(n),g=m.useRef(!1),T=m.useRef(!0),{viewport:v,selectedItem:b,selectedItemText:_,focusSelectedItem:y}=o,w=m.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&v&&b&&_){const S=i.trigger.getBoundingClientRect(),N=u.getBoundingClientRect(),k=i.valueNode.getBoundingClientRect(),A=_.getBoundingClientRect();if(i.dir!=="rtl"){const Oe=A.left-N.left,De=k.left-Oe,Tt=S.left-De,ge=S.width+Tt,be=Math.max(ge,N.width),it=window.innerWidth-ls,ht=cS(De,[ls,Math.max(ls,it-be)]);l.style.minWidth=ge+"px",l.style.left=ht+"px"}else{const Oe=N.right-A.right,De=window.innerWidth-k.right-Oe,Tt=window.innerWidth-S.right-De,ge=S.width+Tt,be=Math.max(ge,N.width),it=window.innerWidth-ls,ht=cS(De,[ls,Math.max(ls,it-be)]);l.style.minWidth=ge+"px",l.style.right=ht+"px"}const M=p(),I=window.innerHeight-ls*2,j=v.scrollHeight,V=window.getComputedStyle(u),W=parseInt(V.borderTopWidth,10),H=parseInt(V.paddingTop,10),Y=parseInt(V.borderBottomWidth,10),U=parseInt(V.paddingBottom,10),F=W+H+j+U+Y,$=Math.min(b.offsetHeight*5,F),G=window.getComputedStyle(v),oe=parseInt(G.paddingTop,10),de=parseInt(G.paddingBottom,10),xe=S.top+S.height/2-ls,Ne=I-xe,lt=b.offsetHeight/2,le=b.offsetTop+lt,We=W+H+le,st=F-We;if(We<=xe){const Oe=M.length>0&&b===M[M.length-1].ref.current;l.style.bottom="0px";const De=u.clientHeight-v.offsetTop-v.offsetHeight,Tt=Math.max(Ne,lt+(Oe?de:0)+De+Y),ge=We+Tt;l.style.height=ge+"px"}else{const Oe=M.length>0&&b===M[0].ref.current;l.style.top="0px";const Tt=Math.max(xe,W+v.offsetTop+(Oe?oe:0)+lt)+st;l.style.height=Tt+"px",v.scrollTop=We-xe+v.offsetTop}l.style.margin=`${ls}px 0`,l.style.minHeight=$+"px",l.style.maxHeight=I+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,l,u,v,b,_,i.dir,r]);Mn(()=>w(),[w]);const[E,P]=m.useState();Mn(()=>{u&&P(window.getComputedStyle(u).zIndex)},[u]);const R=m.useCallback(S=>{S&&T.current===!0&&(w(),y==null||y(),T.current=!1)},[w,y]);return a.jsx(VH,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:R,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:a.jsx(Ve.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});zR.displayName=OH;var LH="SelectPopperPosition",vx=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=ls,...i}=t,o=ug(n);return a.jsx(Vk,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vx.displayName=LH;var[VH,p_]=Kc(Yo,{}),xx="SelectViewport",WR=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=co(xx,n),o=p_(xx,n),l=Et(e,i.onViewportChange),c=m.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(lg.Slot,{scope:n,children:a.jsx(Ve.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:je(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&f){const g=Math.abs(c.current-h.scrollTop);if(g>0){const T=window.innerHeight-ls*2,v=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),_=Math.max(v,b);if(_<T){const y=_+g,w=Math.min(T,y),E=y-w;f.style.height=w+"px",f.style.bottom==="0px"&&(h.scrollTop=E>0?E:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});WR.displayName=xx;var HR="SelectGroup",[FH,UH]=Kc(HR),$H=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Ei();return a.jsx(FH,{scope:n,id:s,children:a.jsx(Ve.div,{role:"group","aria-labelledby":s,...r,ref:e})})});$H.displayName=HR;var qR="SelectLabel",GR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=UH(qR,n);return a.jsx(Ve.div,{id:s.id,...r,ref:e})});GR.displayName=qR;var Fm="SelectItem",[BH,KR]=Kc(Fm),QR=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,l=lo(Fm,n),c=co(Fm,n),u=l.value===r,[h,f]=m.useState(i??""),[p,g]=m.useState(!1),T=Et(e,y=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,y,r,s)}),v=Ei(),b=m.useRef("touch"),_=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(BH,{scope:n,value:r,disabled:s,textId:v,isSelected:u,onItemTextChange:m.useCallback(y=>{f(w=>w||((y==null?void 0:y.textContent)??"").trim())},[]),children:a.jsx(lg.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:a.jsx(Ve.div,{role:"option","aria-labelledby":v,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:T,onFocus:je(o.onFocus,()=>g(!0)),onBlur:je(o.onBlur,()=>g(!1)),onClick:je(o.onClick,()=>{b.current!=="mouse"&&_()}),onPointerUp:je(o.onPointerUp,()=>{b.current==="mouse"&&_()}),onPointerDown:je(o.onPointerDown,y=>{b.current=y.pointerType}),onPointerMove:je(o.onPointerMove,y=>{var w;b.current=y.pointerType,s?(w=c.onItemLeave)==null||w.call(c):b.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:je(o.onPointerLeave,y=>{var w;y.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:je(o.onKeyDown,y=>{var E;((E=c.searchRef)==null?void 0:E.current)!==""&&y.key===" "||(CH.includes(y.key)&&_(),y.key===" "&&y.preventDefault())})})})})});QR.displayName=Fm;var Pu="SelectItemText",YR=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=lo(Pu,n),l=co(Pu,n),c=KR(Pu,n),u=AH(Pu,n),[h,f]=m.useState(null),p=Et(e,_=>f(_),c.onItemTextChange,_=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,_,c.value,c.disabled)}),g=h==null?void 0:h.textContent,T=m.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:b}=u;return Mn(()=>(v(T),()=>b(T)),[v,b,T]),a.jsxs(a.Fragment,{children:[a.jsx(Ve.span,{id:c.textId,...i,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?tl.createPortal(i.children,o.valueNode):null]})});YR.displayName=Pu;var XR="SelectItemIndicator",ZR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return KR(XR,n).isSelected?a.jsx(Ve.span,{"aria-hidden":!0,...r,ref:e}):null});ZR.displayName=XR;var wx="SelectScrollUpButton",JR=m.forwardRef((t,e)=>{const n=co(wx,t.__scopeSelect),r=p_(wx,t.__scopeSelect),[s,i]=m.useState(!1),o=Et(e,r.onScrollButtonChange);return Mn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(t2,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});JR.displayName=wx;var _x="SelectScrollDownButton",e2=m.forwardRef((t,e)=>{const n=co(_x,t.__scopeSelect),r=p_(_x,t.__scopeSelect),[s,i]=m.useState(!1),o=Et(e,r.onScrollButtonChange);return Mn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(t2,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});e2.displayName=_x;var t2=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=co("SelectScrollButton",n),o=m.useRef(null),l=cg(n),c=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),Mn(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(Ve.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:je(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:je(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:je(s.onPointerLeave,()=>{c()})})}),zH="SelectSeparator",n2=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(Ve.div,{"aria-hidden":!0,...r,ref:e})});n2.displayName=zH;var bx="SelectArrow",WH=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ug(n),i=lo(bx,n),o=co(bx,n);return i.open&&o.position==="popper"?a.jsx(Fk,{...s,...r,ref:e}):null});WH.displayName=bx;var HH="SelectBubbleInput",r2=m.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=m.useRef(null),i=Et(r,s),o=m_(e);return m.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&h){const f=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(f)}},[o,e]),a.jsx(Ve.select,{...n,style:{...Tj,...n.style},ref:i,defaultValue:e})});r2.displayName=HH;function s2(t){return t===""||t===void 0}function i2(t){const e=es(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function a2(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=qH(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function qH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var GH=RR,o2=MR,KH=LR,QH=VR,YH=FR,l2=UR,XH=WR,c2=GR,u2=QR,ZH=YR,JH=ZR,d2=JR,h2=e2,f2=n2;const wt=GH,_t=KH,vt=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(o2,{ref:r,className:ie("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(QH,{asChild:!0,children:a.jsx(Qj,{className:"h-4 w-4 opacity-50"})})]}));vt.displayName=o2.displayName;const m2=m.forwardRef(({className:t,...e},n)=>a.jsx(d2,{ref:n,className:ie("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(UL,{className:"h-4 w-4"})}));m2.displayName=d2.displayName;const p2=m.forwardRef(({className:t,...e},n)=>a.jsx(h2,{ref:n,className:ie("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(Qj,{className:"h-4 w-4"})}));p2.displayName=h2.displayName;const xt=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>a.jsx(YH,{children:a.jsxs(l2,{ref:s,className:ie("relative z-[100] max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx(m2,{}),a.jsx(XH,{className:ie("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(p2,{})]})}));xt.displayName=l2.displayName;const eq=m.forwardRef(({className:t,...e},n)=>a.jsx(c2,{ref:n,className:ie("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));eq.displayName=c2.displayName;const Pe=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(u2,{ref:r,className:ie("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(JH,{children:a.jsx(Kj,{className:"h-4 w-4"})})}),a.jsx(ZH,{children:e})]}));Pe.displayName=u2.displayName;const tq=m.forwardRef(({className:t,...e},n)=>a.jsx(f2,{ref:n,className:ie("-mx-1 my-1 h-px bg-muted",t),...e}));tq.displayName=f2.displayName;const nq=()=>{var w;const t=ni(),[e,n]=m.useState({name:"",email:"",phone:"",department:"",gender:"",password:""}),[r,s]=m.useState(!1),[i,o]=m.useState((w=t.state)!=null&&w.isNewUser?2:1),[l,c]=m.useState(null),{signUp:u,signInWithGoogle:h,signUpWithGoogle:f,user:p}=hn(),{setIsLoading:g}=ii(),{toast:T}=Zn(),v=Uc();m.useEffect(()=>{var E;(E=t.state)!=null&&E.isNewUser&&p&&(c(p),T({title:"Profile Update Required",description:"Please update your profile details to complete registration."}),window.history.replaceState({},document.title))},[t.state,p]),m.useEffect(()=>{p&&i===1&&v("/")},[p,v,i]);const b=async E=>{E.preventDefault(),s(!0),g(!0);try{const{error:P}=await u(e.email,e.password,{name:e.name,department:e.department,gender:e.gender,phone:e.phone});P?T({title:"Registration failed",description:P.message,variant:"destructive"}):(T({title:"Registration successful!",description:"A verification email has been sent to your email address. Please verify it before logging in."}),v("/login"))}catch(P){T({title:"Error",description:P.message,variant:"destructive"})}finally{s(!1),g(!1)}},_=async()=>{s(!0),g(!0);try{const{error:E,user:P,isNewUser:R}=await h();E?T({title:"Google sign-in failed",description:E.message,variant:"destructive"}):P&&R?(c(P),T({title:"Profile Update Required",description:"Please update your profile details to complete registration."}),o(2)):P&&!R&&v("/")}catch(E){T({title:"Error",description:E.message,variant:"destructive"})}finally{s(!1),g(!1)}},y=async E=>{E.preventDefault(),s(!0),g(!0);try{const{error:P}=await f({department:e.department,gender:e.gender});P?T({title:"Registration failed",description:P.message,variant:"destructive"}):(T({title:"Registration successful!",description:"Welcome to SportsBracket!"}),v("/"))}catch(P){T({title:"Error",description:P.message,variant:"destructive"})}finally{s(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30 px-4 py-12",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsxs(Mt,{to:"/",className:"inline-flex items-center space-x-2 mb-4",children:[a.jsx(It,{className:"h-8 w-8 text-primary"}),a.jsx("span",{className:"text-2xl font-bold text-foreground",children:"SportsBracket"})]})}),a.jsxs(Te,{children:[a.jsxs(Ge,{children:[a.jsx(Ke,{children:i===1?"Create Account":"Complete Profile"}),a.jsx(wr,{children:i===1?"Register manually or with Google to participate":"Please provide additional details to complete your registration"})]}),a.jsx(Se,{children:i===1?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"name",children:"Full Name"}),a.jsx(yt,{id:"name",placeholder:"John Doe",value:e.name,onChange:E=>n({...e,name:E.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"email",children:"Email"}),a.jsx(yt,{id:"email",type:"email",placeholder:"john@example.com",value:e.email,onChange:E=>n({...e,email:E.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"department",children:"Department / Class"}),a.jsx(yt,{id:"department",placeholder:"Ex: CSE-A",value:e.department,onChange:E=>n({...e,department:E.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"gender",children:"Gender"}),a.jsxs(wt,{value:e.gender,onValueChange:E=>n({...e,gender:E}),children:[a.jsx(vt,{id:"gender",children:a.jsx(_t,{placeholder:"Select gender"})}),a.jsxs(xt,{children:[a.jsx(Pe,{value:"male",children:"Male"}),a.jsx(Pe,{value:"female",children:"Female"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"password",children:"Password"}),a.jsx(yt,{id:"password",type:"password",placeholder:"******",value:e.password,onChange:E=>n({...e,password:E.target.value}),required:!0})]}),a.jsx(we,{className:"w-full",type:"submit",disabled:r,children:r?"Registering...":"Register"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("span",{className:"w-full border-t"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),a.jsxs(we,{className:"w-full",onClick:_,disabled:r,variant:"outline",type:"button",children:[a.jsx("svg",{className:"mr-2 h-4 w-4","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:a.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"})}),"Google"]}),a.jsxs("div",{className:"text-center text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Already have an account? "}),a.jsx(Mt,{to:"/login",className:"text-primary hover:underline",children:"Login here"})]})]}):a.jsxs("form",{className:"space-y-4",onSubmit:y,children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{children:"Full Name"}),a.jsx(yt,{value:(l==null?void 0:l.displayName)||"",disabled:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{children:"Email"}),a.jsx(yt,{value:(l==null?void 0:l.email)||"",disabled:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"department-google",children:"Department / Class"}),a.jsx(yt,{id:"department-google",placeholder:"Enter your department or class",value:e.department,onChange:E=>n({...e,department:E.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"gender-google",children:"Gender"}),a.jsxs(wt,{value:e.gender,onValueChange:E=>n({...e,gender:E}),children:[a.jsx(vt,{id:"gender-google",children:a.jsx(_t,{placeholder:"Select gender"})}),a.jsxs(xt,{children:[a.jsx(Pe,{value:"male",children:"Male"}),a.jsx(Pe,{value:"female",children:"Female"}),a.jsx(Pe,{value:"other",children:"Other"})]})]})]}),a.jsx(we,{className:"w-full",type:"submit",disabled:r,children:r?"Completing registration...":"Complete Registration"}),a.jsx("div",{className:"text-center",children:a.jsx(we,{variant:"ghost",onClick:()=>o(1),className:"text-sm",type:"button",children:"Back"})})]})})]})]})})},rq=Xn(Ae,"tournaments"),_r=async()=>{const t=Sn(rq,si("created_at","desc"));return(await Ln(t)).docs.map(n=>({id:n.id,...n.data()}))},g2=Xn(Ae,"leaderboard"),Ex=async(t,e)=>{const n=[Qt("tournament_id","==",t)];e&&e!=="ALL"?n.push(Qt("game_id","==",e)):n.push(Qt("game_id","==",null));const r=Sn(g2,...n,si("points","desc"));return(await Ln(r)).docs.map(i=>({id:i.id,...i.data()}))},y2=async t=>{const{tournamentId:e,gameId:n,winnerId:r,loserId:s,winnerName:i,loserName:o,winnerType:l,loserType:c,pointsForWin:u}=t,h=async(f,p,g,T,v)=>{const b=f?`${e}_${f}_${g}`:`${e}_${g}`;await mi(at(Ae,"leaderboard",b),{tournament_id:e,game_id:f,entity_id:g,name:T,entity_type:v,points:Sy(p?u:0),wins:Sy(p?1:0),losses:Sy(p?0:1),updated_at:qe()},{merge:!0})};await h(n,!0,r,i,l),s&&o&&c&&await h(n,!1,s,o,c),await h(null,!0,r,i,l),s&&o&&c&&await h(null,!1,s,o,c)},sq=async t=>{const e=Sn(g2,Qt("tournament_id","==",t)),n=await Ln(e);if(n.empty)return;const r=WP(Ae);n.docs.forEach(s=>{r.delete(s.ref)}),await r.commit()},v2=Xn(Ae,"notifications"),x2=async t=>{const e=Sn(v2,Qt("user_id","==",t),si("created_at","desc"));return(await Ln(e)).docs.map(r=>({id:r.id,...r.data()}))},Za=async t=>{await Gi(v2,{...t,is_read:!1,created_at:qe(),updated_at:qe()})},uS=async t=>{await qi(at(Ae,"notifications",t),{is_read:!0,updated_at:qe()})},dg=Xn(Ae,"participants"),iq=async t=>{const e=await ns(at(Ae,"participants",t));return e.exists()?{id:e.id,...e.data()}:null},Qc=async t=>{const e=[];t.tournamentId&&e.push(Qt("tournament_id","==",t.tournamentId)),t.gameId&&e.push(Qt("game_id","==",t.gameId)),e.push(si("created_at","asc"));const n=Sn(dg,...e);return(await Ln(n)).docs.map(s=>({id:s.id,...s.data()}))},g_=async t=>{const e=Sn(dg,Qt("user_id","==",t));return(await Ln(e)).docs.map(r=>({id:r.id,...r.data()}))},y_=async t=>{if(t.length===0)return[];const e=[];for(let r=0;r<t.length;r+=10)e.push(t.slice(r,r+10));const n=[];for(const r of e){const s=Sn(dg,Qt("team_id","in",r));(await Ln(s)).docs.forEach(o=>n.push({id:o.id,...o.data()}))}return n},w2=async t=>(await Gi(dg,{...t,created_at:qe(),updated_at:qe()})).id,_2=Xn(Ae,"audit_logs"),hg=async t=>{try{await Gi(_2,{...t,created_at:qe(),updated_at:qe()})}catch(e){console.error("Failed to log admin action:",e)}},aq=async(t=100)=>{const e=Sn(_2,si("created_at","desc"),$P(t));return(await Ln(e)).docs.map(r=>({id:r.id,...r.data()}))},Um=Xn(Ae,"matches"),b2=Xn(Ae,"match_results"),$m=async(t,e,n,r,s)=>{for(const i of t){if(!i)continue;const o=await iq(i);if(o){if(o.type==="USER"&&o.user_id)await Za({user_id:o.user_id,title:e,message:n,type:r,payload:s});else if(o.type==="TEAM"&&o.team_id){const l=await ns(at(Ae,"teams",o.team_id));if(l.exists()){const c=l.data();for(const u of c.player_ids||[])await Za({user_id:u,title:e,message:n,type:r,payload:s})}}}}},La=async t=>{const e=[Qt("tournament_id","==",t.tournamentId)];t.gameId&&e.push(Qt("game_id","==",t.gameId));const n=Sn(Um,...e);return(await Ln(n)).docs.map(i=>({id:i.id,...i.data()})).sort((i,o)=>i.round_index!==o.round_index?i.round_index-o.round_index:i.match_order-o.match_order)},v_=async t=>{if(t.length===0)return[];const e=[];for(let s=0;s<t.length;s+=10)e.push(t.slice(s,s+10));const n=[];for(const s of e){const i=Sn(Um,Qt("participant_a_id","in",s)),o=await Ln(i),l=Sn(Um,Qt("participant_b_id","in",s)),c=await Ln(l),u=new Map;o.docs.forEach(h=>u.set(h.id,{id:h.id,...h.data()})),c.docs.forEach(h=>u.set(h.id,{id:h.id,...h.data()})),u.forEach(h=>n.push(h))}return Array.from(new Map(n.map(s=>[s.id,s])).values())},oq=async(t,e)=>{const n=await Gi(Um,{...t,created_at:qe(),updated_at:qe()});return(t.participant_a_id||t.participant_b_id)&&await $m([t.participant_a_id,t.participant_b_id],"Match Scheduled","A new match has been scheduled for you.","MATCH_SCHEDULED",{match_id:n.id}),e&&await hg({admin_id:e.id,admin_name:e.name,action:"MATCH_CREATE",resource_type:"MATCH",resource_id:n.id,details:`Created match between ${t.participant_a_id} and ${t.participant_b_id}`}),n.id},Df=async(t,e,n)=>{if(await qi(at(Ae,"matches",t),{...e,updated_at:qe()}),e.match_time||e.venue){const r=await ns(at(Ae,"matches",t));if(r.exists()){const s=r.data();await $m([s.participant_a_id,s.participant_b_id],"Match Updated","Your match schedule or venue has been updated.","MATCH_UPDATED",{match_id:t})}}n&&await hg({admin_id:n.id,admin_name:n.name,action:"MATCH_UPDATE",resource_type:"MATCH",resource_id:t,details:`Updated match fields: ${Object.keys(e).join(", ")}`})},lq=async(t,e,n)=>{const r=await Gi(b2,{...e,match_id:t,created_at:qe(),updated_at:qe()});await Df(t,{status:"COMPLETED",winner_participant_id:e.winner_participant_id},n);const s=await ns(at(Ae,"matches",t));if(s.exists()){const i=s.data();await $m([e.winner_participant_id],"Victory! ","Congratulations! You won your match.","MATCH_RESULT",{match_id:t,result:"win"});const o=i.participant_a_id===e.winner_participant_id?i.participant_b_id:i.participant_a_id;o&&await $m([o],"Match Completed","Your match has ended. Better luck next time!","MATCH_RESULT",{match_id:t,result:"loss"})}return n&&await hg({admin_id:n.id,admin_name:n.name,action:"MATCH_RESULT_SUBMIT",resource_type:"MATCH",resource_id:t,details:`Submitted result. Winner: ${e.winner_participant_id}`}),r.id},E2=async t=>{if(t.length===0)return[];const e=[];for(let r=0;r<t.length;r+=10)e.push(t.slice(r,r+10));const n=[];for(const r of e){const s=Sn(b2,Qt("match_id","in",r));(await Ln(s)).docs.forEach(o=>n.push({id:o.id,...o.data()}))}return n},cq=Xn(Ae,"games"),Rn=async t=>{const e=[si("created_at","desc")];t&&e.unshift(Qt("tournament_id","==",t));const n=Sn(cq,...e);return(await Ln(n)).docs.map(s=>({id:s.id,...s.data()}))},uq=Xn(Ae,"profiles"),x_=Xn(Ae,"user_roles"),rs=async()=>{const t=Sn(uq,si("created_at","desc"));return(await Ln(t)).docs.map(n=>({id:n.id,...n.data()}))},dq=async t=>{try{const e=await ns(at(x_,t));return e.exists()?e.data():null}catch(e){return console.error("Error fetching user role data:",e),null}},hq=async()=>{try{const t=await rs();return await Promise.all(t.map(async n=>{const r=await dq(n.id);return{...n,roles:(r==null?void 0:r.roles)||[],permissions:r==null?void 0:r.permissions}}))}catch(t){return console.error("Error fetching users with roles:",t),[]}},fq=async(t,e)=>{try{await mi(at(x_,t),{roles:e,updated_at:qe()},{merge:!0})}catch(n){throw console.error("Error updating user role:",n),n}},mq=async(t,e)=>{try{await mi(at(x_,t),{permissions:e,updated_at:qe()},{merge:!0})}catch(n){throw console.error("Error updating admin permissions:",n),n}},T2=Xn(Ae,"teams"),Ki=async t=>{const e=[];t.tournamentId&&e.push(Qt("tournament_id","==",t.tournamentId)),t.gameId&&e.push(Qt("game_id","==",t.gameId)),t.userId&&e.push(Qt("player_ids","array-contains",t.userId));const n=Sn(T2,...e);return(await Ln(n)).docs.map(i=>({id:i.id,...i.data()})).sort((i,o)=>{const l=new Date(i.created_at||0).getTime();return new Date(o.created_at||0).getTime()-l})},dS=async t=>(await Gi(T2,{...t,created_at:qe(),updated_at:qe()})).id,pq=async(t,e)=>{await qi(at(Ae,"teams",t),{...e,updated_at:qe()})},gq=async(t,e)=>{await qi(at(Ae,"teams",t),{player_ids:W7(e),updated_at:qe()})},yq=async t=>{await s_(at(Ae,"teams",t))};var Ry="rovingFocusGroup.onEntryFocus",vq={bubbles:!1,cancelable:!0},uh="RovingFocusGroup",[Tx,S2,xq]=kw(uh),[wq,N2]=ei(uh,[xq]),[_q,bq]=wq(uh),C2=m.forwardRef((t,e)=>a.jsx(Tx.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Tx.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Eq,{...t,ref:e})})}));C2.displayName=uh;var Eq=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,p=m.useRef(null),g=Et(e,p),T=f_(i),[v,b]=Ii({prop:o,defaultProp:l??null,onChange:c,caller:uh}),[_,y]=m.useState(!1),w=es(u),E=S2(n),P=m.useRef(!1),[R,S]=m.useState(0);return m.useEffect(()=>{const N=p.current;if(N)return N.addEventListener(Ry,w),()=>N.removeEventListener(Ry,w)},[w]),a.jsx(_q,{scope:n,orientation:r,dir:T,loop:s,currentTabStopId:v,onItemFocus:m.useCallback(N=>b(N),[b]),onItemShiftTab:m.useCallback(()=>y(!0),[]),onFocusableItemAdd:m.useCallback(()=>S(N=>N+1),[]),onFocusableItemRemove:m.useCallback(()=>S(N=>N-1),[]),children:a.jsx(Ve.div,{tabIndex:_||R===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:je(t.onMouseDown,()=>{P.current=!0}),onFocus:je(t.onFocus,N=>{const k=!P.current;if(N.target===N.currentTarget&&k&&!_){const A=new CustomEvent(Ry,vq);if(N.currentTarget.dispatchEvent(A),!A.defaultPrevented){const M=E().filter(H=>H.focusable),I=M.find(H=>H.active),j=M.find(H=>H.id===v),W=[I,j,...M].filter(Boolean).map(H=>H.ref.current);I2(W,h)}}P.current=!1}),onBlur:je(t.onBlur,()=>y(!1))})})}),j2="RovingFocusGroupItem",k2=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...l}=t,c=Ei(),u=i||c,h=bq(j2,n),f=h.currentTabStopId===u,p=S2(n),{onFocusableItemAdd:g,onFocusableItemRemove:T,currentTabStopId:v}=h;return m.useEffect(()=>{if(r)return g(),()=>T()},[r,g,T]),a.jsx(Tx.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:a.jsx(Ve.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:je(t.onMouseDown,b=>{r?h.onItemFocus(u):b.preventDefault()}),onFocus:je(t.onFocus,()=>h.onItemFocus(u)),onKeyDown:je(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){h.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const _=Nq(b,h.orientation,h.dir);if(_!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let w=p().filter(E=>E.focusable).map(E=>E.ref.current);if(_==="last")w.reverse();else if(_==="prev"||_==="next"){_==="prev"&&w.reverse();const E=w.indexOf(b.currentTarget);w=h.loop?Cq(w,E+1):w.slice(E+1)}setTimeout(()=>I2(w))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:v!=null}):o})})});k2.displayName=j2;var Tq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Sq(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Nq(t,e,n){const r=Sq(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Tq[r]}function I2(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Cq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var jq=C2,kq=k2,fg="Tabs",[Iq,NY]=ei(fg,[N2]),A2=N2(),[Aq,w_]=Iq(fg),P2=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=f_(l),[f,p]=Ii({prop:r,onChange:s,defaultProp:i??"",caller:fg});return a.jsx(Aq,{scope:n,baseId:Ei(),value:f,onValueChange:p,orientation:o,dir:h,activationMode:c,children:a.jsx(Ve.div,{dir:h,"data-orientation":o,...u,ref:e})})});P2.displayName=fg;var R2="TabsList",D2=m.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=w_(R2,n),o=A2(n);return a.jsx(jq,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(Ve.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});D2.displayName=R2;var M2="TabsTrigger",O2=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=w_(M2,n),l=A2(n),c=F2(o.baseId,r),u=U2(o.baseId,r),h=r===o.value;return a.jsx(kq,{asChild:!0,...l,focusable:!s,active:h,children:a.jsx(Ve.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:je(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:je(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:je(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});O2.displayName=M2;var L2="TabsContent",V2=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,l=w_(L2,n),c=F2(l.baseId,r),u=U2(l.baseId,r),h=r===l.value,f=m.useRef(h);return m.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),a.jsx(so,{present:s||h,children:({present:p})=>a.jsx(Ve.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});V2.displayName=L2;function F2(t,e){return`${t}-trigger-${e}`}function U2(t,e){return`${t}-content-${e}`}var Pq=P2,$2=D2,B2=O2,z2=V2;const __=Pq,mg=m.forwardRef(({className:t,...e},n)=>a.jsx($2,{ref:n,className:ie("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));mg.displayName=$2.displayName;const Hr=m.forwardRef(({className:t,...e},n)=>a.jsx(B2,{ref:n,className:ie("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));Hr.displayName=B2.displayName;const qr=m.forwardRef(({className:t,...e},n)=>a.jsx(z2,{ref:n,className:ie("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));qr.displayName=z2.displayName;const Rq=({matches:t,resultsMap:e,participantsMap:n,usersMap:r,teamsMap:s,gameId:i})=>{const o=m.useMemo(()=>t.filter(u=>u.game_id===i),[t,i]),l=m.useMemo(()=>{const u=o.reduce((f,p)=>{const g=p.round_index;return f[g]||(f[g]=[]),f[g].push(p),f},{});return Object.keys(u).map(Number).sort((f,p)=>f-p).map(f=>{var p;return{index:f,name:((p=u[f][0])==null?void 0:p.round_name)||`Round ${f+1}`,matches:u[f].sort((g,T)=>g.match_order-T.match_order)}})},[o]),c=u=>{var f,p;if(!u)return"TBD";const h=n[u];return h?h.type==="USER"&&h.user_id?((f=r[h.user_id])==null?void 0:f.name)||"Unknown User":h.type==="TEAM"&&h.team_id?((p=s[h.team_id])==null?void 0:p.name)||`Team ${h.team_id.slice(-4)}`:"Unknown":"TBD"};return o.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-muted-foreground border-2 border-dashed rounded-xl bg-muted/20",children:[a.jsx(It,{className:"h-12 w-12 mb-4 opacity-20"}),a.jsx("p",{className:"text-lg font-medium",children:"No bracket generated for this game yet"}),a.jsx("p",{className:"text-sm",children:"Admin needs to generate the bracket in Matches Management."})]}):a.jsx("div",{className:"overflow-x-auto pb-12 pt-8",children:a.jsx("div",{className:"inline-flex min-w-full gap-16 px-8 md:px-12",children:l.map((u,h)=>a.jsxs("div",{className:"flex flex-col gap-8 min-w-[280px]",children:[a.jsx("div",{className:"mb-6 text-center",children:a.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-primary/70 px-4 py-1.5 bg-primary/5 rounded-full inline-block border border-primary/10 shadow-sm",children:u.name})}),a.jsx("div",{className:"flex flex-col flex-1 justify-around gap-4",children:u.matches.map(f=>{const p=f.status.toUpperCase()==="COMPLETED",g=p&&f.winner_participant_id===f.participant_a_id,T=p&&f.winner_participant_id===f.participant_b_id,v=e[f.id];return a.jsxs("div",{className:"relative py-4 group",children:[a.jsx(Yw,{children:a.jsxs(Kk,{children:[a.jsx(Qk,{asChild:!0,children:a.jsx(Te,{className:ie("w-64 shadow-lg border-muted/50 overflow-hidden transition-all duration-300 hover:shadow-xl hover:-translate-y-1 hover:border-primary/40",p?"bg-muted/5":"bg-background","relative z-10"),children:a.jsxs(Se,{className:"p-0",children:[a.jsxs("div",{className:ie("flex items-center justify-between px-4 py-3 border-b transition-colors",g?"bg-green-500/10":"hover:bg-muted/50"),children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[a.jsx("span",{className:ie("text-sm font-black truncate",g?"text-green-600":"text-foreground/80",f.participant_a_id?"":"italic opacity-40 font-medium"),children:c(f.participant_a_id)}),g&&a.jsx(It,{className:"h-3.5 w-3.5 text-green-600 shrink-0 animate-bounce"})]}),p&&v&&a.jsx("span",{className:"text-xs font-black text-muted-foreground ml-2"})]}),a.jsx("div",{className:ie("flex items-center justify-between px-4 py-3 transition-colors",T?"bg-green-500/10":"hover:bg-muted/50"),children:a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[a.jsx("span",{className:ie("text-sm font-black truncate",T?"text-green-600":"text-foreground/80",f.participant_b_id?"":"italic opacity-40 font-medium"),children:c(f.participant_b_id)}),T&&a.jsx(It,{className:"h-3.5 w-3.5 text-green-600 shrink-0 animate-bounce"})]})})]})})}),p&&(v==null?void 0:v.score_details)&&a.jsxs(Xw,{side:"top",className:"bg-primary text-primary-foreground font-black text-[10px] uppercase p-2 px-3",children:["SCORE: ",v.score_details]})]})}),h<l.length-1&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute top-1/2 -right-16 w-16 h-[2px] bg-gradient-to-r from-primary/20 to-primary/5 transition-all group-hover:from-primary/40 group-hover:to-primary/10"}),a.jsx("div",{className:"absolute top-1/2 -right-16 translate-x-1/2 w-2 h-2 rounded-full bg-primary/20 border border-primary/10"})]})]},f.id)})})]},u.index))})})},Dq=()=>{var Y,U,F;const[t,e]=m.useState([]),[n,r]=m.useState(""),[s,i]=m.useState(""),[o,l]=m.useState([]),[c,u]=m.useState([]),[h,f]=m.useState([]),[p,g]=m.useState([]),[T,v]=m.useState([]),[b,_]=m.useState([]),[y,w]=m.useState([]),[E,P]=m.useState(!1),{setIsLoading:R}=ii(),[S,N]=m.useState("standings");m.useEffect(()=>{(async()=>{try{const G=await rs();console.log("Users loaded:",G.length),w(G)}catch(G){console.error("Error loading users:",G),w([])}})()},[]),m.useEffect(()=>{(async()=>{try{const G=await _r();console.log("Tournaments loaded:",G),e(G),G.length>0&&r(G[0].id)}catch(G){console.error("Error loading tournaments:",G),e([])}})()},[]),m.useEffect(()=>{(async()=>{try{console.log("Fetching all games...");const G=await Rn();console.log("Games fetched:",G),v(G),G.length>0&&!s&&i("ALL")}catch(G){console.error("Error loading games:",G),v([])}})()},[]),m.useEffect(()=>{if(!n){l([]),u([]),_([]);return}(async()=>{try{R(!0);const[G,oe,de]=await Promise.all([La({tournamentId:n}).catch(xe=>(console.error("Error fetching matches:",xe),[])),Qc({tournamentId:n}).catch(xe=>(console.error("Error fetching participants:",xe),[])),Ki({tournamentId:n}).catch(xe=>(console.error("Error fetching teams:",xe),[]))]);if(u(G),g(oe),_(de),G.length>0){const xe=G.map(Ne=>Ne.id);try{const Ne=await E2(xe);f(Ne)}catch(Ne){console.error("Error fetching match results:",Ne),f([])}}!s&&T.length>0&&i("ALL")}catch(G){console.error("Error loading tournament data:",G),u([]),g([]),_([]),f([])}finally{R(!1)}})()},[n,R]),m.useEffect(()=>{if(!n){l([]);return}(async()=>{P(!0);try{const G=await Ex(n,S==="standings"&&s&&s!=="ALL"?s:void 0);console.log("Leaderboard data loaded:",G),l(G)}catch(G){console.error("Error loading leaderboard data:",G),l([])}finally{P(!1)}})()},[n,s,S]),m.useEffect(()=>{S==="bracket"&&s==="ALL"&&T.length>0&&i(T[0].id)},[S,s,T]);const k=m.useMemo(()=>p.reduce(($,G)=>($[G.id]=G,$),{}),[p]),A=m.useMemo(()=>y.reduce(($,G)=>($[G.id]=G,$),{}),[y]),M=m.useMemo(()=>b.reduce(($,G)=>($[G.id]=G,$),{}),[b]),I=m.useMemo(()=>T.reduce(($,G)=>($[G.id]=G,$),{}),[T]),j=m.useMemo(()=>h.reduce(($,G)=>($[G.match_id]=G,$),{}),[h]),V=$=>{var oe,de;if(!$)return"TBD";const G=k[$];return G?G.type==="USER"&&G.user_id?((oe=A[G.user_id])==null?void 0:oe.name)||"Unknown":G.type==="TEAM"&&G.team_id?((de=M[G.team_id])==null?void 0:de.name)||`Team ${G.team_id.slice(-4)}`:"Unknown":"TBD"},W=o.slice(0,3),H=o.slice(3);return a.jsxs("div",{className:"min-h-screen bg-muted/30 pt-20 md:pt-24 pb-12",children:[a.jsx(i_,{}),a.jsxs("div",{className:"container space-y-8",children:[a.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-end md:justify-between border-b pb-8",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h1",{className:"text-4xl font-black tracking-tight flex items-center gap-3",children:[a.jsx(It,{className:"h-10 w-10 text-yellow-500"}),"TOURNAMENT HUB"]}),a.jsx("p",{className:"text-muted-foreground text-lg font-medium max-w-2xl",children:"Real-time standings and visual brackets for the current competition."})]}),a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsxs("div",{className:"w-full md:w-64",children:[a.jsx("p",{className:"text-[10px] uppercase text-muted-foreground font-black tracking-widest mb-1.5 opacity-70",children:"ACTIVE TOURNAMENT"}),a.jsxs(wt,{value:n,onValueChange:r,disabled:t.length===0,children:[a.jsx(vt,{className:"bg-background border-muted-foreground/20 h-11",children:a.jsx(_t,{placeholder:t.length===0?"No tournaments available":"Select tournament"})}),a.jsx(xt,{children:t.length===0?a.jsx("div",{className:"px-2 py-6 text-center text-sm text-muted-foreground",children:"No tournaments found"}):t.map($=>a.jsx(Pe,{value:$.id,children:$.name},$.id))})]})]}),a.jsxs("div",{className:"w-full md:w-64",children:[a.jsx("p",{className:"text-[10px] uppercase text-muted-foreground font-black tracking-widest mb-1.5 opacity-70",children:S==="standings"?"FILTER STANDINGS":"SELECT GAME"}),a.jsxs(wt,{value:s,onValueChange:i,disabled:!n||T.length===0,children:[a.jsx(vt,{className:"bg-background border-muted-foreground/20 h-11",children:a.jsx(_t,{placeholder:n?T.length===0?"No games available":"Select choice":"Select tournament first"})}),a.jsxs(xt,{children:[(console.log("Rendering games dropdown, games array:",T,"length:",T.length),null),S==="standings"&&a.jsx(Pe,{value:"ALL",children:"Total Standings"}),T.length===0?a.jsx("div",{className:"px-2 py-6 text-center text-sm text-muted-foreground",children:"No games found for this tournament"}):T.map($=>a.jsx(Pe,{value:$.id,children:$.name},$.id))]})]})]})]})]}),a.jsxs(__,{defaultValue:"standings",value:S,onValueChange:N,className:"space-y-8",children:[a.jsx("div",{className:"flex justify-center",children:a.jsxs(mg,{className:"grid w-full max-w-[400px] grid-cols-2 bg-muted/50 p-1 h-12",children:[a.jsxs(Hr,{value:"standings",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground h-10 transition-all font-bold",children:[a.jsx(G1,{className:"h-4 w-4 mr-2"}),"Standings"]}),a.jsxs(Hr,{value:"bracket",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground h-10 transition-all font-bold",children:[a.jsx(ay,{className:"h-4 w-4 mr-2"}),"Visual Bracket"]})]})}),a.jsxs(qr,{value:"standings",className:"space-y-8 animate-in fade-in duration-500 min-h-[500px]",children:[a.jsxs("div",{className:"grid gap-6",children:[a.jsxs(Te,{className:"border-none shadow-xl bg-gradient-to-b from-card to-card/50",children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between border-b bg-muted/10 p-6 px-8",children:[a.jsxs(Ke,{className:"text-xl font-bold flex items-center gap-2",children:[a.jsx(It,{className:"h-5 w-5 text-yellow-500"}),"Top Performers"]}),E&&a.jsx(un,{className:"h-5 w-5 animate-spin text-muted-foreground"})]}),a.jsx(Se,{className:"p-8",children:W.length===0?a.jsx("div",{className:"py-20 text-center",children:a.jsx("p",{className:"text-muted-foreground font-medium",children:n?"No standings data available yet. Check back after matches have been completed.":"Please select a tournament to view standings."})}):a.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:W.map(($,G)=>a.jsxs("div",{className:ie("relative overflow-hidden group rounded-2xl border p-6 flex flex-col transition-all hover:shadow-2xl hover:-translate-y-1",G===0?"bg-gradient-to-br from-yellow-500/10 via-yellow-500/5 to-transparent border-yellow-500/20 ring-1 ring-yellow-500/10":G===1?"bg-gradient-to-br from-slate-300/10 via-slate-300/5 to-transparent border-slate-300/20":"bg-gradient-to-br from-orange-400/10 via-orange-400/5 to-transparent border-orange-400/20"),children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full -mr-16 -mt-16 blur-3xl"}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("span",{className:"text-[10px] font-black uppercase text-muted-foreground tracking-widest bg-muted/50 px-2 py-1 rounded",children:["RANK ",G+1]}),a.jsx(G1,{className:ie("h-8 w-8",G===0?"text-yellow-500 drop-shadow-[0_0_8px_rgba(234,179,8,0.5)]":G===1?"text-slate-400":"text-orange-400")})]}),a.jsx("h3",{className:"text-2xl font-black truncate group-hover:text-primary transition-colors",children:$.name}),a.jsx("p",{className:"text-xs text-muted-foreground font-bold mt-1 uppercase tracking-tighter opacity-70",children:$.entity_type}),a.jsxs("div",{className:"mt-8 pt-6 border-t border-muted-foreground/10 flex items-center justify-between",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-black text-muted-foreground uppercase",children:"Points"}),a.jsx("span",{className:"text-xl font-black text-primary",children:$.points})]}),a.jsxs("div",{className:"flex flex-col text-right",children:[a.jsx("span",{className:"text-[10px] font-black text-muted-foreground uppercase",children:"W/L Record"}),a.jsxs("span",{className:"text-lg font-bold",children:[$.wins,a.jsx("span",{className:"text-muted-foreground mx-1",children:"-"}),$.losses]})]})]})]},$.id))})})]}),H.length>0&&a.jsxs(Te,{className:"border-muted/20 shadow-lg overflow-hidden",children:[a.jsx(Ge,{className:"bg-muted/5 border-b",children:a.jsx(Ke,{className:"text-lg font-bold",children:"Full Leaderboard"})}),a.jsx(Se,{className:"p-0",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left bg-muted/10 border-b",children:[a.jsx("th",{className:"py-4 px-6 text-[10px] font-black text-muted-foreground uppercase tracking-wider pl-8 w-20",children:"RK"}),a.jsx("th",{className:"py-4 px-6 text-[10px] font-black text-muted-foreground uppercase tracking-wider",children:"Entity Name"}),a.jsx("th",{className:"py-4 px-6 text-[10px] font-black text-muted-foreground uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"py-4 px-6 text-[10px] font-black text-muted-foreground uppercase tracking-wider text-right",children:"Wins"}),a.jsx("th",{className:"py-4 px-6 text-[10px] font-black text-muted-foreground uppercase tracking-wider text-right",children:"Losses"}),a.jsx("th",{className:"py-4 px-6 text-[10px] font-black text-muted-foreground uppercase tracking-wider text-right pr-8",children:"Points"})]})}),a.jsx("tbody",{children:H.map(($,G)=>a.jsxs("tr",{className:"border-b last:border-0 hover:bg-primary/5 transition-colors group",children:[a.jsxs("td",{className:"py-4 px-6 pl-8 font-black text-muted-foreground/60 group-hover:text-primary transition-colors",children:["#",$.rank??G+4]}),a.jsx("td",{className:"py-4 px-6 font-black text-foreground",children:$.name}),a.jsx("td",{className:"py-4 px-6",children:a.jsx(pt,{variant:"outline",className:"text-[10px] font-bold uppercase py-0 px-2 border-muted-foreground/20",children:$.entity_type})}),a.jsx("td",{className:"py-4 px-6 text-right font-medium text-green-600",children:$.wins}),a.jsx("td",{className:"py-4 px-6 text-right font-medium text-red-500",children:$.losses}),a.jsx("td",{className:"py-4 px-6 text-right font-black text-primary pr-8",children:$.points})]},$.id))})]})})})]})]}),a.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[a.jsxs(Te,{className:"border-primary/20 bg-primary/5 shadow-inner",children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between pb-4 border-b border-primary/10",children:[a.jsxs(Ke,{className:"text-lg font-black flex items-center gap-2",children:[a.jsx(Zj,{className:"h-5 w-5 text-primary"}),"MATCH TICKER"]}),a.jsx(pt,{variant:"outline",className:"bg-primary/10 text-primary border-primary/20 font-black px-2 py-0.5 animate-pulse",children:"LIVE NOW"})]}),a.jsx(Se,{className:"p-6 space-y-4",children:c.filter($=>$.status.toUpperCase()!=="COMPLETED"&&$.status.toUpperCase()!=="CANCELLED").length===0?a.jsx("div",{className:"py-12 text-center",children:a.jsx("p",{className:"text-sm text-muted-foreground font-medium italic",children:"No active matches at the moment."})}):c.filter($=>$.status.toUpperCase()!=="COMPLETED"&&$.status.toUpperCase()!=="CANCELLED").slice(0,5).map($=>{var G;return a.jsxs("div",{className:"p-5 bg-background rounded-2xl border border-primary/10 shadow-sm transition-all hover:shadow-lg group relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-5",children:a.jsx(ay,{className:"h-12 w-12 text-primary"})}),a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("span",{className:"text-[10px] font-black text-primary uppercase tracking-widest px-2.5 py-1 bg-primary/10 rounded-full border border-primary/5",children:((G=I[$.game_id])==null?void 0:G.name)||"SPORT"}),a.jsx("span",{className:"text-[9px] font-black text-muted-foreground uppercase opacity-50",children:$.round_name})]}),a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("p",{className:"font-black text-base truncate leading-tight group-hover:text-primary transition-colors",children:V($.participant_a_id)})}),a.jsxs("div",{className:"flex flex-col items-center gap-1 shrink-0 px-2",children:[a.jsx("div",{className:"text-[10px] font-black text-muted-foreground/30 italic",children:"VS"}),a.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-muted-foreground font-black bg-muted/50 px-2 py-0.5 rounded-full",children:[a.jsx(rl,{className:"h-3 w-3"}),$.match_time?new Date($.match_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"TBD"]})]}),a.jsx("div",{className:"flex-1 min-w-0 text-right",children:a.jsx("p",{className:"font-black text-base truncate leading-tight group-hover:text-primary transition-colors",children:V($.participant_b_id)})})]})]},$.id)})})]}),a.jsxs(Te,{className:"shadow-lg border-muted/20",children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between pb-4 border-b",children:[a.jsxs(Ke,{className:"text-lg font-black flex items-center gap-2",children:[a.jsx(It,{className:"h-5 w-5 text-yellow-500"}),"RECENT RESULTS"]}),a.jsx(pt,{variant:"secondary",className:"font-black text-[10px]",children:"ALL OVER"})]}),a.jsx(Se,{className:"p-6 space-y-4",children:c.filter($=>$.status.toUpperCase()==="COMPLETED").length===0?a.jsx("div",{className:"py-12 text-center italic text-muted-foreground font-medium",children:"No match results recorded yet."}):c.filter($=>$.status.toUpperCase()==="COMPLETED").slice(0,5).map($=>{var G;return a.jsxs("div",{className:"p-5 bg-muted/20 rounded-2xl border border-transparent shadow-sm transition-all hover:bg-muted/40 hover:border-muted-foreground/10 group",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("span",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest px-2.5 py-1 bg-background rounded-full border border-border",children:((G=I[$.game_id])==null?void 0:G.name)||"SPORT"}),a.jsx("span",{className:"text-[9px] font-bold text-muted-foreground/50",children:$.round_name})]}),a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:ie("flex-1 p-3 rounded-xl transition-all flex flex-col items-center justify-center",$.winner_participant_id===$.participant_a_id?"bg-green-500/10 border border-green-500/20":"opacity-50 grayscale"),children:[a.jsx("p",{className:ie("text-xs font-black text-center mb-1",$.winner_participant_id===$.participant_a_id?"text-green-600":"text-muted-foreground"),children:V($.participant_a_id)}),$.winner_participant_id===$.participant_a_id&&a.jsx(pt,{className:"bg-green-600 hover:bg-green-600 text-[8px] font-black h-4 px-1 leading-none border-none",children:"WINNER"})]}),a.jsx("div",{className:"text-[10px] font-black text-muted-foreground/30 italic",children:"FT"}),a.jsxs("div",{className:ie("flex-1 p-3 rounded-xl transition-all flex flex-col items-center justify-center",$.winner_participant_id===$.participant_b_id?"bg-green-500/10 border border-green-500/20":"opacity-50 grayscale"),children:[a.jsx("p",{className:ie("text-xs font-black text-center mb-1",$.winner_participant_id===$.participant_b_id?"text-green-600":"text-muted-foreground"),children:V($.participant_b_id)}),$.winner_participant_id===$.participant_b_id&&a.jsx(pt,{className:"bg-green-600 hover:bg-green-600 text-[8px] font-black h-4 px-1 leading-none border-none",children:"WINNER"})]})]})]},$.id)})})]})]})]}),a.jsx(qr,{value:"bracket",className:"space-y-8 animate-in zoom-in-95 duration-500",children:a.jsxs(Te,{className:"border-none shadow-2xl bg-card/80 backdrop-blur-sm overflow-hidden min-h-[500px]",children:[a.jsx(Ge,{className:"bg-primary/5 border-b p-8",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(Ke,{className:"text-2xl font-black",children:"TOURNAMENT BRACKET"}),a.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:s?`Visual representation of ${(Y=I[s])==null?void 0:Y.name} single-elimination progress.`:"Select a game to view bracket."})]}),s&&a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(pt,{variant:"outline",className:"bg-background font-bold border-primary/20",children:[(U=I[s])==null?void 0:U.game_type," MATCHES"]}),a.jsxs(pt,{variant:"outline",className:"bg-background font-bold border-primary/20",children:[(F=I[s])==null?void 0:F.players_per_team," PLAYERS PER SIDE"]})]})]})}),a.jsx(Se,{className:"p-0 flex flex-col overflow-hidden",children:s?a.jsx(Rq,{matches:c,resultsMap:j,participantsMap:k,usersMap:A,teamsMap:M,gameId:s}):a.jsxs("div",{className:"flex flex-col items-center justify-center py-40 text-muted-foreground",children:[a.jsx(ay,{className:"h-16 w-16 mb-4 opacity-10"}),a.jsx("p",{className:"text-xl font-bold",children:"Please select a game to view the tournament bracket."})]})})]})})]})]})]})},Mq=t=>t?new Date(t).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}):"TBD",Oq=()=>{const[t,e]=m.useState(""),[n,r]=m.useState(""),[s,i]=m.useState([]),[o,l]=m.useState([]),[c,u]=m.useState([]),[h,f]=m.useState([]),[p,g]=m.useState(!1),{setIsLoading:T}=ii();m.useEffect(()=>{_r().then(_=>{i(_),_.length>0&&e(_[0].id)})},[]),m.useEffect(()=>{if(!t){l([]),u([]);return}const _=async()=>{g(!0);const[y,w,E]=await Promise.all([Rn(t),La({tournamentId:t,gameId:n||void 0}),Qc({tournamentId:t,gameId:n||void 0})]);l(y),u(w),f(E),g(!1),T(!1)};t&&(T(!0),_())},[t,n,T]);const v=m.useMemo(()=>h.reduce((_,y)=>(_[y.id]=y,_),{}),[h]),b=c.filter(_=>_.status!=="COMPLETED");return a.jsxs("div",{className:"min-h-screen bg-muted/30 pt-20 md:pt-24 pb-12",children:[a.jsx(i_,{}),a.jsxs("div",{className:"container space-y-8",children:[a.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm uppercase text-muted-foreground tracking-wide",children:"Live Schedule"}),a.jsx("h1",{className:"text-3xl font-bold",children:"Matches & Fixtures"}),a.jsx("p",{className:"text-muted-foreground mt-1 max-w-2xl",children:"Stay on top of every match happening this week. Filter by tournament or sport to find exact fixtures, venues, and kickoff times."})]}),a.jsxs("div",{className:"w-full md:w-[28rem] flex flex-col gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase text-muted-foreground font-medium mb-1",children:"Tournament"}),a.jsxs(wt,{value:t,onValueChange:e,children:[a.jsx(vt,{children:a.jsx(_t,{placeholder:"Select tournament"})}),a.jsx(xt,{children:s.map(_=>_.id&&a.jsx(Pe,{value:_.id,children:_.name},_.id))})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase text-muted-foreground font-medium mb-1",children:"Game"}),a.jsxs(wt,{value:n,onValueChange:r,disabled:!t,children:[a.jsx(vt,{children:a.jsx(_t,{placeholder:"All games"})}),a.jsxs(xt,{children:[a.jsx(Pe,{value:"",children:"All games"}),o.map(_=>_.id&&a.jsx(Pe,{value:_.id,children:_.name},_.id))]})]})]})]})]}),a.jsxs(Te,{children:[a.jsxs(Ge,{className:"flex items-center justify-between",children:[a.jsx(Ke,{children:"Upcoming & Live Matches"}),p&&a.jsx(un,{className:"h-5 w-5 animate-spin text-muted-foreground"})]}),a.jsx(Se,{children:t?b.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:"No scheduled matches yet. Check back later once brackets are published."}):a.jsx("div",{className:"grid gap-4",children:b.map(_=>{var P;const y=_.participant_a_id?v[_.participant_a_id]:void 0,w=_.participant_b_id?v[_.participant_b_id]:void 0,E=((P=o.find(R=>R.id===_.game_id))==null?void 0:P.name)??"Tournament Game";return a.jsxs("div",{className:"rounded-xl border bg-background p-5",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:E}),a.jsx("h3",{className:"text-lg font-semibold",children:_.round_name})]}),a.jsx(pt,{variant:_.status==="SCHEDULED"?"secondary":"default",children:_.status==="SCHEDULED"?"Scheduled":_.status.toLowerCase()})]}),a.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Participant A"}),a.jsx("p",{className:"text-lg font-medium",children:(y==null?void 0:y.user_id)||(y==null?void 0:y.team_id)||"TBD"})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Participant B"}),a.jsx("p",{className:"text-lg font-medium",children:(w==null?void 0:w.user_id)||(w==null?void 0:w.team_id)||"TBD"})]})]}),a.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-sm text-muted-foreground",children:[a.jsxs("span",{className:"inline-flex items-center gap-2",children:[a.jsx(rl,{className:"h-4 w-4"}),Mq(_.match_time)]}),a.jsxs("span",{className:"inline-flex items-center gap-2",children:[a.jsx(vp,{className:"h-4 w-4"}),_.venue||"Venue TBD"]})]})]},_.id)})}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a tournament to view fixtures."})})]})]})]})},Dy=768;function Lq(){const[t,e]=m.useState(void 0);return m.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Dy-1}px)`),r=()=>{e(window.innerWidth<Dy)};return n.addEventListener("change",r),e(window.innerWidth<Dy),()=>n.removeEventListener("change",r)},[]),!!t}var Vq="Separator",hS="horizontal",Fq=["horizontal","vertical"],W2=m.forwardRef((t,e)=>{const{decorative:n,orientation:r=hS,...s}=t,i=Uq(r)?r:hS,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(Ve.div,{"data-orientation":i,...l,...s,ref:e})});W2.displayName=Vq;function Uq(t){return Fq.includes(t)}var H2=W2;const q2=m.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>a.jsx(H2,{ref:s,decorative:n,orientation:e,className:ie("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));q2.displayName=H2.displayName;const $q=wR,Bq=_R,G2=m.forwardRef(({className:t,...e},n)=>a.jsx(sg,{className:ie("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));G2.displayName=sg.displayName;const zq=nl("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),K2=m.forwardRef(({side:t="right",className:e,children:n,...r},s)=>a.jsxs(Bq,{children:[a.jsx(G2,{}),a.jsxs(ig,{ref:s,className:ie(zq({side:t}),e),...r,children:[n,a.jsxs(bR,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(xp,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));K2.displayName=ig.displayName;const Q2=m.forwardRef(({className:t,...e},n)=>a.jsx(ag,{ref:n,className:ie("text-lg font-semibold text-foreground",t),...e}));Q2.displayName=ag.displayName;const Wq=m.forwardRef(({className:t,...e},n)=>a.jsx(og,{ref:n,className:ie("text-sm text-muted-foreground",t),...e}));Wq.displayName=og.displayName;function fS({className:t,...e}){return a.jsx("div",{className:ie("animate-pulse rounded-md bg-muted",t),...e})}const Hq="sidebar:state",qq=60*60*24*7,Gq="16rem",Kq="18rem",Qq="3rem",Yq="b",Y2=m.createContext(null);function Yc(){const t=m.useContext(Y2);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const b_=m.forwardRef(({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:s,children:i,...o},l)=>{const c=Lq(),[u,h]=m.useState(!1),[f,p]=m.useState(t),g=e??f,T=m.useCallback(y=>{const w=typeof y=="function"?y(g):y;n?n(w):p(w),document.cookie=`${Hq}=${w}; path=/; max-age=${qq}`},[n,g]),v=m.useCallback(()=>c?h(y=>!y):T(y=>!y),[c,T,h]);m.useEffect(()=>{const y=w=>{w.key===Yq&&(w.metaKey||w.ctrlKey)&&(w.preventDefault(),v())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[v]);const b=g?"expanded":"collapsed",_=m.useMemo(()=>({state:b,open:g,setOpen:T,isMobile:c,openMobile:u,setOpenMobile:h,toggleSidebar:v}),[b,g,T,c,u,h,v]);return a.jsx(Y2.Provider,{value:_,children:a.jsx(Yw,{delayDuration:0,children:a.jsx("div",{style:{"--sidebar-width":Gq,"--sidebar-width-icon":Qq,...s},className:ie("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:l,...o,children:i})})})});b_.displayName="SidebarProvider";const E_=m.forwardRef(({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:s,...i},o)=>{const{isMobile:l,state:c,openMobile:u,setOpenMobile:h}=Yc();return n==="none"?a.jsx("div",{className:ie("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...i,children:s}):l?a.jsx($q,{open:u,onOpenChange:h,...i,children:a.jsxs(K2,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":Kq},side:t,children:[a.jsx(Q2,{className:"sr-only",children:"Navigation"}),a.jsx("div",{className:"flex h-full w-full flex-col",children:s})]})}):a.jsxs("div",{ref:o,className:"group peer hidden text-sidebar-foreground md:block","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":e,"data-side":t,children:[a.jsx("div",{className:ie("relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),a.jsx("div",{className:ie("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...i,children:a.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:s})})]})});E_.displayName="Sidebar";const T_=m.forwardRef(({className:t,onClick:e,...n},r)=>{const{toggleSidebar:s}=Yc();return a.jsxs(we,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:ie("h-7 w-7",t),onClick:i=>{e==null||e(i),s()},...n,children:[a.jsx(XL,{}),a.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});T_.displayName="SidebarTrigger";const Xq=m.forwardRef(({className:t,...e},n)=>{const{toggleSidebar:r}=Yc();return a.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:ie("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...e})});Xq.displayName="SidebarRail";const Zq=m.forwardRef(({className:t,...e},n)=>a.jsx("main",{ref:n,className:ie("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...e}));Zq.displayName="SidebarInset";const Jq=m.forwardRef(({className:t,...e},n)=>a.jsx(yt,{ref:n,"data-sidebar":"input",className:ie("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...e}));Jq.displayName="SidebarInput";const eG=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,"data-sidebar":"header",className:ie("flex flex-col gap-2 p-2",t),...e}));eG.displayName="SidebarHeader";const tG=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,"data-sidebar":"footer",className:ie("flex flex-col gap-2 p-2",t),...e}));tG.displayName="SidebarFooter";const nG=m.forwardRef(({className:t,...e},n)=>a.jsx(q2,{ref:n,"data-sidebar":"separator",className:ie("mx-2 w-auto bg-sidebar-border",t),...e}));nG.displayName="SidebarSeparator";const S_=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,"data-sidebar":"content",className:ie("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e}));S_.displayName="SidebarContent";const N_=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,"data-sidebar":"group",className:ie("relative flex w-full min-w-0 flex-col p-2",t),...e}));N_.displayName="SidebarGroup";const C_=m.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const s=e?Dc:"div";return a.jsx(s,{ref:r,"data-sidebar":"group-label",className:ie("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})});C_.displayName="SidebarGroupLabel";const rG=m.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const s=e?Dc:"button";return a.jsx(s,{ref:r,"data-sidebar":"group-action",className:ie("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...n})});rG.displayName="SidebarGroupAction";const j_=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,"data-sidebar":"group-content",className:ie("w-full text-sm",t),...e}));j_.displayName="SidebarGroupContent";const k_=m.forwardRef(({className:t,...e},n)=>a.jsx("ul",{ref:n,"data-sidebar":"menu",className:ie("flex w-full min-w-0 flex-col gap-1",t),...e}));k_.displayName="SidebarMenu";const I_=m.forwardRef(({className:t,...e},n)=>a.jsx("li",{ref:n,"data-sidebar":"menu-item",className:ie("group/menu-item relative",t),...e}));I_.displayName="SidebarMenuItem";const sG=nl("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),A_=m.forwardRef(({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:s,className:i,...o},l)=>{const c=t?Dc:"button",{isMobile:u,state:h}=Yc(),f=a.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":r,"data-active":e,className:ie(sG({variant:n,size:r}),i),...o});return s?(typeof s=="string"&&(s={children:s}),a.jsxs(Kk,{children:[a.jsx(Qk,{asChild:!0,children:f}),a.jsx(Xw,{side:"right",align:"center",hidden:h!=="collapsed"||u,...s})]})):f});A_.displayName="SidebarMenuButton";const iG=m.forwardRef(({className:t,asChild:e=!1,showOnHover:n=!1,...r},s)=>{const i=e?Dc:"button";return a.jsx(i,{ref:s,"data-sidebar":"menu-action",className:ie("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...r})});iG.displayName="SidebarMenuAction";const aG=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:ie("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...e}));aG.displayName="SidebarMenuBadge";const oG=m.forwardRef(({className:t,showIcon:e=!1,...n},r)=>{const s=m.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return a.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:ie("flex h-8 items-center gap-2 rounded-md px-2",t),...n,children:[e&&a.jsx(fS,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),a.jsx(fS,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":s}})]})});oG.displayName="SidebarMenuSkeleton";const lG=m.forwardRef(({className:t,...e},n)=>a.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:ie("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...e}));lG.displayName="SidebarMenuSub";const cG=m.forwardRef(({...t},e)=>a.jsx("li",{ref:e,...t}));cG.displayName="SidebarMenuSubItem";const uG=m.forwardRef(({asChild:t=!1,size:e="md",isActive:n,className:r,...s},i)=>{const o=t?Dc:"a";return a.jsx(o,{ref:i,"data-sidebar":"menu-sub-button","data-size":e,"data-active":n,className:ie("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...s})});uG.displayName="SidebarMenuSubButton";const X2=m.forwardRef(({className:t,activeClassName:e,pendingClassName:n,to:r,...s},i)=>a.jsx(C3,{ref:i,to:r,className:({isActive:o,isPending:l})=>ie(t,o&&e,l&&n),...s}));X2.displayName="NavLink";const dG=[{title:"Overview",url:"/admin",icon:GL,permission:null},{title:"Registrations",url:"/admin/registrations",icon:BL,permission:"registrations"},{title:"Participants",url:"/admin/participants",icon:Ai,permission:"participants"},{title:"Tournaments",url:"/admin/tournaments",icon:It,permission:"tournaments"},{title:"Games",url:"/admin/games",icon:Dw,permission:"games"},{title:"Teams",url:"/admin/teams",icon:nk,permission:"teams"},{title:"Schedule",url:"/admin/schedule",icon:FL,permission:"schedule"},{title:"Matches",url:"/admin/matches",icon:Es,permission:"matches"},{title:"Leaderboard",url:"/admin/leaderboard",icon:Gj,permission:"leaderboard"},{title:"Users",url:"/admin/users",icon:rV,permission:"super_admin"},{title:"Audit Logs",url:"/admin/audit",icon:ek,permission:"audit"}];function hG(){const t=ni(),{isMobile:e,setOpenMobile:n}=Yc(),{isSuperAdmin:r,permissions:s}=hn(),i=()=>{e&&n(!1)},o=dG.filter(l=>r?!0:l.permission==="super_admin"?!1:l.permission?(s==null?void 0:s[l.permission])??!1:!0);return a.jsx(E_,{collapsible:"icon",children:a.jsx(S_,{children:a.jsxs(N_,{children:[a.jsx(C_,{children:"Admin Panel"}),a.jsx(j_,{children:a.jsx(k_,{children:o.map(l=>a.jsx(I_,{children:a.jsx(A_,{asChild:!0,isActive:l.url==="/admin"?t.pathname==="/admin"||t.pathname==="/admin/":t.pathname===l.url,tooltip:l.title,children:a.jsxs(X2,{to:l.url,end:l.url==="/admin",className:"hover:bg-muted/50",activeClassName:"bg-muted text-primary font-medium",onClick:i,children:[a.jsx(l.icon,{className:"h-4 w-4"}),a.jsx("span",{children:l.title})]})})},l.title))})})]})})})}function fG(){const{signOut:t,user:e}=hn();return a.jsxs("header",{className:"sticky top-0 z-50 h-16 border-b bg-card flex items-center justify-between px-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(T_,{}),a.jsxs(Mt,{to:"/admin",className:"flex items-center gap-2",children:[a.jsx(It,{className:"h-6 w-6 text-primary"}),a.jsx("span",{className:"text-lg font-bold",children:"Admin Dashboard"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:e==null?void 0:e.displayName}),a.jsxs(we,{variant:"outline",size:"sm",onClick:t,children:[a.jsx(am,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})}const mG=()=>{const[t,e]=m.useState([]),[n,r]=m.useState([]),[s,i]=m.useState(""),[o,l]=m.useState(!0),[c,u]=m.useState(!1),[h,f]=m.useState(null),[p,g]=m.useState({name:"",game_type:"SINGLE",players_per_team:1,is_active:!0,tournament_id:""}),{toast:T}=Zn(),{setIsLoading:v}=ii();m.useEffect(()=>{v(!0),b()},[v]),m.useEffect(()=>{s?_():e([])},[s]);const b=async()=>{try{const S=await _r();r(S),S.length>0&&!s&&i(S[0].id)}catch(S){T({title:"Error",description:S.message,variant:"destructive"})}finally{v(!1)}},_=async()=>{if(s)try{l(!0);const S=await Rn(s);e(S)}catch(S){T({title:"Error",description:S.message,variant:"destructive"})}finally{l(!1),v(!1)}},y=async S=>{if(S.preventDefault(),!p.tournament_id){T({title:"Error",description:"Please select a tournament",variant:"destructive"});return}try{v(!0),h?(await qi(at(Ae,"games",h),{...p,updated_at:qe()}),T({title:"Game updated successfully"})):(await Gi(Xn(Ae,"games"),{...p,created_at:qe(),updated_at:qe()}),T({title:"Game created successfully"})),u(!1),P();const N=await Rn(s);e(N)}catch(N){T({title:"Error",description:N.message,variant:"destructive"})}finally{v(!1)}},w=S=>{f(S.id),g({name:S.name,game_type:S.game_type,players_per_team:S.players_per_team,is_active:S.is_active,tournament_id:S.tournament_id||s}),u(!0)},E=async S=>{if(confirm("Are you sure you want to delete this game?"))try{v(!0),await s_(at(Ae,"games",S)),T({title:"Game deleted successfully"});const N=await Rn(s);e(N)}catch(N){T({title:"Error",description:N.message,variant:"destructive"})}finally{v(!1)}},P=()=>{g({name:"",game_type:"SINGLE",players_per_team:1,is_active:!0,tournament_id:s}),f(null)},R=S=>{const N=n.find(k=>k.id===S);return(N==null?void 0:N.name)||"Unknown Tournament"};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Games"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Configure sports and game settings"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"w-full md:w-64",children:[a.jsx(Ue,{htmlFor:"tournament-select",className:"text-xs uppercase text-muted-foreground font-medium mb-1 block",children:"Tournament"}),a.jsxs(wt,{value:s,onValueChange:i,children:[a.jsx(vt,{id:"tournament-select",children:a.jsx(_t,{placeholder:"Select tournament"})}),a.jsx(xt,{children:n.map(S=>a.jsx(Pe,{value:S.id,children:S.name},S.id))})]})]}),a.jsxs(_s,{open:c,onOpenChange:S=>{u(S),S&&!h&&g(N=>({...N,tournament_id:s})),S||P()},children:[a.jsx(d_,{asChild:!0,children:a.jsxs(we,{disabled:!s,children:[a.jsx(om,{className:"h-4 w-4 mr-2"}),"Add Game"]})}),a.jsxs(Qr,{children:[a.jsx(Yr,{children:a.jsxs(Xr,{children:[h?"Edit":"Create"," Game"]})}),a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"tournament_id",children:"Tournament"}),a.jsxs(wt,{value:p.tournament_id,onValueChange:S=>g({...p,tournament_id:S}),disabled:!!h,children:[a.jsx(vt,{id:"tournament_id",children:a.jsx(_t,{placeholder:"Select tournament"})}),a.jsx(xt,{children:n.map(S=>a.jsx(Pe,{value:S.id,children:S.name},S.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"name",children:"Game Name"}),a.jsx(yt,{id:"name",value:p.name,onChange:S=>g({...p,name:S.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"game_type",children:"Game Type"}),a.jsxs(wt,{value:p.game_type,onValueChange:S=>g({...p,game_type:S}),children:[a.jsx(vt,{children:a.jsx(_t,{})}),a.jsxs(xt,{children:[a.jsx(Pe,{value:"SINGLE",children:"Single (1v1)"}),a.jsx(Pe,{value:"PAIR",children:"Pair (2v2)"}),a.jsx(Pe,{value:"TEAM",children:"Team"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"players_per_team",children:"Players Per Team"}),a.jsx(yt,{id:"players_per_team",type:"number",min:"1",value:p.players_per_team,onChange:S=>{const N=parseInt(S.target.value);g({...p,players_per_team:isNaN(N)?0:N})},required:!0})]}),a.jsxs(we,{type:"submit",className:"w-full",children:[h?"Update":"Create"," Game"]})]})]})]})]})]}),s?o?a.jsx(Te,{children:a.jsx(Se,{className:"py-8 text-center text-muted-foreground",children:"Loading games..."})}):t.length===0?a.jsx(Te,{children:a.jsx(Se,{className:"py-8 text-center text-muted-foreground",children:'No games found for this tournament. Click "Add Game" to create one.'})}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(S=>a.jsxs(Te,{children:[a.jsx(Ge,{children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx(Ke,{children:S.name}),S.tournament_id&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:R(S.tournament_id)})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(we,{variant:"outline",size:"sm",onClick:()=>w(S),children:a.jsx(Mw,{className:"h-4 w-4"})}),a.jsx(we,{variant:"outline",size:"sm",onClick:()=>E(S.id),children:a.jsx(Lw,{className:"h-4 w-4"})})]})]})}),a.jsxs(Se,{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Type:"}),a.jsx("span",{className:"font-medium",children:S.game_type})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Players:"}),a.jsx("span",{className:"font-medium",children:S.players_per_team})]}),a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${S.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:S.is_active?"Active":"Inactive"})]})]},S.id))}):a.jsx(Te,{children:a.jsx(Se,{className:"py-8 text-center text-muted-foreground",children:"Please select a tournament to view or create games."})})]})};var pg="Checkbox",[pG,CY]=ei(pg),[gG,P_]=pG(pg);function yG(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:h="on",internal_do_not_use_render:f}=t,[p,g]=Ii({prop:n,defaultProp:s??!1,onChange:c,caller:pg}),[T,v]=m.useState(null),[b,_]=m.useState(null),y=m.useRef(!1),w=T?!!o||!!T.closest("form"):!0,E={checked:p,disabled:i,setChecked:g,control:T,setControl:v,name:l,form:o,value:h,hasConsumerStoppedPropagationRef:y,required:u,defaultChecked:Va(s)?!1:s,isFormControl:w,bubbleInput:b,setBubbleInput:_};return a.jsx(gG,{scope:e,...E,children:vG(f)?f(E):r})}var Z2="CheckboxTrigger",J2=m.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:h,setChecked:f,hasConsumerStoppedPropagationRef:p,isFormControl:g,bubbleInput:T}=P_(Z2,t),v=Et(s,h),b=m.useRef(c);return m.useEffect(()=>{const _=i==null?void 0:i.form;if(_){const y=()=>f(b.current);return _.addEventListener("reset",y),()=>_.removeEventListener("reset",y)}},[i,f]),a.jsx(Ve.button,{type:"button",role:"checkbox","aria-checked":Va(c)?"mixed":c,"aria-required":u,"data-state":sD(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:v,onKeyDown:je(e,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:je(n,_=>{f(y=>Va(y)?!0:!y),T&&g&&(p.current=_.isPropagationStopped(),p.current||_.stopPropagation())})})});J2.displayName=Z2;var R_=m.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:h,...f}=t;return a.jsx(yG,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:r,form:h,value:c,internal_do_not_use_render:({isFormControl:p})=>a.jsxs(a.Fragment,{children:[a.jsx(J2,{...f,ref:e,__scopeCheckbox:n}),p&&a.jsx(rD,{__scopeCheckbox:n})]})})});R_.displayName=pg;var eD="CheckboxIndicator",tD=m.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=P_(eD,n);return a.jsx(so,{present:r||Va(i.checked)||i.checked===!0,children:a.jsx(Ve.span,{"data-state":sD(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});tD.displayName=eD;var nD="CheckboxBubbleInput",rD=m.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:h,form:f,bubbleInput:p,setBubbleInput:g}=P_(nD,t),T=Et(n,g),v=m_(i),b=qw(r);m.useEffect(()=>{const y=p;if(!y)return;const w=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(w,"checked").set,R=!s.current;if(v!==i&&P){const S=new Event("click",{bubbles:R});y.indeterminate=Va(i),P.call(y,Va(i)?!1:i),y.dispatchEvent(S)}},[p,v,i,s]);const _=m.useRef(Va(i)?!1:i);return a.jsx(Ve.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??_.current,required:l,disabled:c,name:u,value:h,form:f,...e,tabIndex:-1,ref:T,style:{...e.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});rD.displayName=nD;function vG(t){return typeof t=="function"}function Va(t){return t==="indeterminate"}function sD(t){return Va(t)?"indeterminate":t?"checked":"unchecked"}const Sx=m.forwardRef(({className:t,...e},n)=>a.jsx(R_,{ref:n,className:ie("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:a.jsx(tD,{className:ie("flex items-center justify-center text-current"),children:a.jsx(Kj,{className:"h-4 w-4"})})}));Sx.displayName=R_.displayName;const iD=Xn(Ae,"registrations"),Ks=async t=>{const e=[];t.tournamentId&&e.push(Qt("tournament_id","==",t.tournamentId)),t.gameId&&e.push(Qt("game_id","==",t.gameId)),t.status&&e.push(Qt("status","==",t.status)),t.userId&&e.push(Qt("user_id","==",t.userId));const n=Sn(iD,...e,si("created_at","desc"));return(await Ln(n)).docs.map(s=>({id:s.id,...s.data()}))},xG=async t=>{await Gi(iD,{...t,status:"pending",created_at:qe(),updated_at:qe()})},wG=async(t,e,n)=>{const r=await ns(at(Ae,"registrations",t));if(!r.exists())return;const s=r.data();await qi(at(Ae,"registrations",t),{status:e,updated_at:qe(),processed_by_id:n==null?void 0:n.id,processed_by_name:n==null?void 0:n.name}),await Za({user_id:s.user_id,title:`Registration ${e.charAt(0).toUpperCase()+e.slice(1)}`,message:`Your registration for the game has been ${e}.`,type:"REGISTRATION_UPDATE",payload:{registration_id:t,status:e}}),n&&await hg({admin_id:n.id,admin_name:n.name,action:`REGISTRATION_${e.toUpperCase()}`,resource_type:"REGISTRATION",resource_id:t,details:`Admin ${n.name} ${e} registration for user ${s.user_id}`})},_G=()=>{var L,B;const[t,e]=m.useState([]),[n,r]=m.useState([]),[s,i]=m.useState([]),[o,l]=m.useState([]),[c,u]=m.useState([]),[h,f]=m.useState(""),[p,g]=m.useState(""),[T,v]=m.useState(!0),[b,_]=m.useState(!1),[y,w]=m.useState(!1),[E,P]=m.useState(!1),[R,S]=m.useState(null),[N,k]=m.useState(null),[A,M]=m.useState({name:"",is_pair:!1,status:"pending",tournament_id:"",game_id:""}),[I,j]=m.useState([]),[V,W]=m.useState([]),[H,Y]=m.useState(""),{toast:U}=Zn(),F=s.find(O=>O.id===p),$=(F==null?void 0:F.game_type)==="TEAM",G=(F==null?void 0:F.game_type)==="PAIR",oe=(F==null?void 0:F.game_type)==="SINGLE";m.useEffect(()=>{de(),lt()},[]),m.useEffect(()=>{h?xe():(i([]),g(""))},[h]),m.useEffect(()=>{h&&p?(Ne(),le()):(e([]),u([]))},[h,p]);const de=async()=>{try{const O=await _r();r(O),O.length>0&&!h&&f(O[0].id)}catch(O){U({title:"Error",description:O.message,variant:"destructive"})}},xe=async()=>{if(h)try{const O=await Rn(h);i(O),O.length>0&&!p&&g(O[0].id)}catch(O){U({title:"Error",description:O.message,variant:"destructive"})}},Ne=async()=>{if(!(!h||!p))try{v(!0);const O=await Ki({tournamentId:h,gameId:p});e(O)}catch(O){U({title:"Error",description:O.message,variant:"destructive"})}finally{v(!1)}},lt=async()=>{try{const O=await rs();l(O)}catch(O){U({title:"Error",description:O.message,variant:"destructive"})}},le=async()=>{if(!(!h||!p))try{const O=await Ks({tournamentId:h,gameId:p});u(O)}catch(O){U({title:"Error fetching registrations",description:O.message,variant:"destructive"})}},We=async O=>{if(O.preventDefault(),!A.tournament_id||!A.game_id){U({title:"Error",description:"Please select a tournament and game",variant:"destructive"});return}if(!G&&!A.name.trim()){U({title:"Error",description:"Team name is required",variant:"destructive"});return}try{R?(await pq(R,{name:A.name,is_pair:A.is_pair,status:A.status}),U({title:`${G?"Pair":"Team"} updated successfully`})):(await dS({...A,name:G?`Pair ${Date.now()}`:A.name,player_ids:[]}),U({title:`${G?"Pair":"Team"} created successfully`})),_(!1),ge(),Ne()}catch(Q){U({title:"Error",description:Q.message,variant:"destructive"})}},st=O=>{S(O.id),M({name:O.name,is_pair:O.is_pair,status:O.status,tournament_id:O.tournament_id,game_id:O.game_id}),_(!0)},Me=async O=>{if(confirm("Are you sure you want to delete this team?"))try{await yq(O),U({title:"Team deleted successfully"}),Ne()}catch(Q){U({title:"Error",description:Q.message,variant:"destructive"})}},Oe=O=>{k(O),j(O.player_ids),w(!0)},De=async()=>{if(V.length===2)try{const O=o.find(ne=>ne.id===V[0]),Q=o.find(ne=>ne.id===V[1]),X=O&&Q?`${O.name} & ${Q.name}`:`Pair ${Date.now()}`,re=await dS({tournament_id:h,game_id:p,name:X,is_pair:!0,player_ids:V,status:"confirmed"});await w2({tournament_id:h,game_id:p,type:"TEAM",team_id:re}),U({title:"Pair created successfully"});for(const ne of V)await Za({user_id:ne,title:"Team Assignment",message:`You have been added to a pair for ${it(p)} in ${be(h)}.`,type:"team_assignment"});P(!1),W([]),Ne()}catch(O){U({title:"Error",description:O.message,variant:"destructive"})}},Tt=async()=>{if(N)try{const O=N.player_ids.filter(X=>!I.includes(X));for(const X of O)await qi(at(Ae,"teams",N.id),{player_ids:H7(X),updated_at:qe()});const Q=I.filter(X=>!N.player_ids.includes(X));for(const X of Q)await gq(N.id,X);U({title:"Team players updated successfully"});for(const X of Q)await Za({user_id:X,title:"Team Assignment",message:`You have been added to team ${N.name} for ${it(p)} in ${be(h)}.`,type:"team_assignment"});w(!1),k(null),Ne()}catch(O){U({title:"Error",description:O.message,variant:"destructive"})}},ge=()=>{M({name:"",is_pair:!1,status:"pending",tournament_id:h,game_id:p}),S(null)},be=O=>{const Q=n.find(X=>X.id===O);return(Q==null?void 0:Q.name)||"Unknown Tournament"},it=O=>{const Q=s.find(X=>X.id===O);return(Q==null?void 0:Q.name)||"Unknown Game"},ht=O=>{const Q=o.find(X=>X.id===O);return(Q==null?void 0:Q.name)||"Unknown User"},At=O=>c.some(Q=>Q.user_id===O),Qe=O=>t.find(X=>X.player_ids.includes(O)&&(N?X.id!==N.id:!0));return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Teams"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Create and manage teams for tournaments"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"w-full md:w-64",children:[a.jsx(Ue,{htmlFor:"tournament-select",className:"text-xs uppercase text-muted-foreground font-medium mb-1 block",children:"Tournament"}),a.jsxs(wt,{value:h,onValueChange:f,children:[a.jsx(vt,{id:"tournament-select",children:a.jsx(_t,{placeholder:"Select tournament"})}),a.jsx(xt,{children:n.map(O=>a.jsx(Pe,{value:O.id,children:O.name},O.id))})]})]}),a.jsxs("div",{className:"w-full md:w-64",children:[a.jsx(Ue,{htmlFor:"game-select",className:"text-xs uppercase text-muted-foreground font-medium mb-1 block",children:"Game"}),a.jsxs(wt,{value:p,onValueChange:g,disabled:!h,children:[a.jsx(vt,{id:"game-select",children:a.jsx(_t,{placeholder:"Select game"})}),a.jsx(xt,{children:s.map(O=>a.jsx(Pe,{value:O.id,children:O.name},O.id))})]})]}),a.jsxs(_s,{open:b,onOpenChange:O=>{_(O),O&&!R&&M(Q=>({...Q,tournament_id:h,game_id:p,is_pair:!1})),O||ge()},children:[$&&a.jsx(d_,{asChild:!0,children:a.jsxs(we,{disabled:!h||!p,children:[a.jsx(om,{className:"h-4 w-4 mr-2"}),"Add Team"]})}),a.jsxs(Qr,{children:[a.jsx(Yr,{children:a.jsxs(Xr,{children:[R?"Edit":"Create"," Team"]})}),a.jsxs("form",{onSubmit:We,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"tournament_id",children:"Tournament"}),a.jsxs(wt,{value:A.tournament_id,onValueChange:O=>M({...A,tournament_id:O}),disabled:!!R,children:[a.jsx(vt,{id:"tournament_id",children:a.jsx(_t,{placeholder:"Select tournament"})}),a.jsx(xt,{children:n.map(O=>a.jsx(Pe,{value:O.id,children:O.name},O.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"game_id",children:"Game"}),a.jsxs(wt,{value:A.game_id,onValueChange:O=>M({...A,game_id:O}),disabled:!!R,children:[a.jsx(vt,{id:"game_id",children:a.jsx(_t,{placeholder:"Select game"})}),a.jsx(xt,{children:s.map(O=>a.jsx(Pe,{value:O.id,children:O.name},O.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"name",children:"Team Name"}),a.jsx(yt,{id:"name",value:A.name,onChange:O=>M({...A,name:O.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"status",children:"Status"}),a.jsxs(wt,{value:A.status,onValueChange:O=>M({...A,status:O}),children:[a.jsx(vt,{children:a.jsx(_t,{})}),a.jsxs(xt,{children:[a.jsx(Pe,{value:"pending",children:"Pending"}),a.jsxs(Pe,{value:"confirmed",disabled:R?(((L=t.find(O=>O.id===R))==null?void 0:L.player_ids.length)||0)<((F==null?void 0:F.players_per_team)||1):!0,children:["Confirmed ",R&&(((B=t.find(O=>O.id===R))==null?void 0:B.player_ids.length)||0)<((F==null?void 0:F.players_per_team)||1)?"(Add players first)":""]})]})]})]}),a.jsxs(we,{type:"submit",className:"w-full",children:[R?"Update":"Create"," Team"]})]})]})]}),G&&a.jsxs(we,{disabled:!h||!p,onClick:()=>P(!0),children:[a.jsx(om,{className:"h-4 w-4 mr-2"}),"Add Pair"]})]})]}),!h||!p?a.jsx(Te,{children:a.jsx(Se,{className:"py-8 text-center text-muted-foreground",children:"Please select a tournament and game to view or create teams."})}):oe?a.jsx(Te,{children:a.jsx(Se,{className:"py-8 text-center text-muted-foreground",children:"Single player games don't require team management. Players are managed through registrations."})}):T?a.jsx(Te,{children:a.jsxs(Se,{className:"py-8 text-center text-muted-foreground",children:["Loading ",G?"pairs":"teams","..."]})}):t.length===0?a.jsx(Te,{children:a.jsxs(Se,{className:"py-8 text-center text-muted-foreground",children:["No ",G?"pairs":"teams",' found for this tournament and game. Click "Add ',G?"Pair":"Team",'" to create one.']})}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(O=>a.jsxs(Te,{children:[a.jsx(Ge,{children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx(Ke,{children:O.is_pair?O.player_ids.length===2?`${ht(O.player_ids[0])} & ${ht(O.player_ids[1])}`:`Pair ${O.id.slice(-4)}`:O.name}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[be(O.tournament_id)," - ",it(O.game_id)]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(we,{variant:"outline",size:"sm",onClick:()=>Oe(O),children:a.jsx(Ai,{className:"h-4 w-4"})}),!O.is_pair&&a.jsx(we,{variant:"outline",size:"sm",onClick:()=>st(O),children:a.jsx(Mw,{className:"h-4 w-4"})}),a.jsx(we,{variant:"outline",size:"sm",onClick:()=>Me(O.id),children:a.jsx(Lw,{className:"h-4 w-4"})})]})]})}),a.jsxs(Se,{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Type:"}),a.jsx("span",{className:"font-medium",children:O.is_pair?"Pair":"Team"})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Players:"}),a.jsx("span",{className:"font-medium",children:O.player_ids.length})]}),a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${O.status==="confirmed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:O.status})]})]},O.id))}),a.jsx(_s,{open:E,onOpenChange:O=>{P(O),O||(W([]),Y(""))},children:a.jsxs(Qr,{className:"max-w-2xl",children:[a.jsx(Yr,{children:a.jsx(Xr,{children:"Create Pair"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Select exactly 2 players for this pair",V.length>0&&a.jsxs("span",{className:"font-medium",children:[" (",V.length," selected)"]})]}),a.jsx("div",{className:"space-y-2",children:a.jsx(yt,{placeholder:"Search users by name or email...",value:H,onChange:O=>Y(O.target.value),className:"w-full"})}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:o.filter(O=>(O.name.toLowerCase().includes(H.toLowerCase())||O.email.toLowerCase().includes(H.toLowerCase()))&&At(O.id)).map(O=>{const Q=Qe(O.id),X=!!Q&&!V.includes(O.id)||!V.includes(O.id)&&V.length>=2;return a.jsxs("div",{className:"flex items-center space-x-2 p-2 border-b",children:[a.jsx(Sx,{id:`pair-user-${O.id}`,checked:V.includes(O.id),disabled:X,onCheckedChange:re=>{W(re?ne=>[...ne,O.id]:ne=>ne.filter(q=>q!==O.id))}}),a.jsxs("div",{className:"flex-1",children:[a.jsxs(Ue,{htmlFor:`pair-user-${O.id}`,className:X&&Q?"text-muted-foreground":"",children:[O.name," (",O.email,")"]}),Q&&a.jsxs("p",{className:"text-xs text-red-500",children:["Already in ",Q.is_pair?"a pair":Q.name]})]})]},O.id)})}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(we,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),a.jsx(we,{onClick:De,disabled:V.length!==2,children:"Create Pair"})]})]})]})}),a.jsx(_s,{open:y,onOpenChange:O=>{w(O),O||Y("")},children:a.jsxs(Qr,{className:"max-w-2xl",children:[a.jsx(Yr,{children:a.jsxs(Xr,{children:["Manage Players - ",N!=null&&N.is_pair?N.player_ids.length===2?`${ht(N.player_ids[0])} & ${ht(N.player_ids[1])}`:`Pair ${N.id.slice(-4)}`:N==null?void 0:N.name]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-sm text-muted-foreground",children:[N!=null&&N.is_pair?"Select exactly 2 players for this pair":`Select up to ${(F==null?void 0:F.players_per_team)||1} players for this team`,I.length>0&&a.jsxs("span",{className:"font-medium",children:[" (",I.length," selected)"]})]}),a.jsx("div",{className:"space-y-2",children:a.jsx(yt,{placeholder:"Search users by name or email...",value:H,onChange:O=>Y(O.target.value),className:"w-full"})}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:o.filter(O=>(O.name.toLowerCase().includes(H.toLowerCase())||O.email.toLowerCase().includes(H.toLowerCase()))&&At(O.id)).map(O=>{const Q=Qe(O.id),X=N!=null&&N.is_pair?2:(F==null?void 0:F.players_per_team)||1,re=!!Q&&!I.includes(O.id)||!I.includes(O.id)&&I.length>=X;return a.jsxs("div",{className:"flex items-center space-x-2 p-2 border-b",children:[a.jsx(Sx,{id:`user-${O.id}`,checked:I.includes(O.id),disabled:re,onCheckedChange:ne=>{j(ne?q=>[...q,O.id]:q=>q.filter(se=>se!==O.id))}}),a.jsxs("div",{className:"flex-1",children:[a.jsxs(Ue,{htmlFor:`user-${O.id}`,className:re&&Q?"text-muted-foreground":"",children:[O.name," (",O.email,")"]}),Q&&a.jsxs("p",{className:"text-xs text-red-500",children:["Already in ",Q.is_pair?"a pair":Q.name]})]})]},O.id)})}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(we,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),a.jsx(we,{onClick:Tt,children:"Update Players"})]})]})]})})]})};function an(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Js(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function D_(t,e){const n=an(t);if(isNaN(e))return Js(t,NaN);if(!e)return n;const r=n.getDate(),s=Js(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const i=s.getDate();return r>=i?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const aD=6048e5,bG=864e5;let EG={};function dh(){return EG}function Xo(t,e){var l,c,u,h;const n=dh(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,s=an(t),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Bm(t){return Xo(t,{weekStartsOn:1})}function oD(t){const e=an(t),n=e.getFullYear(),r=Js(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Bm(r),i=Js(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=Bm(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Rd(t){const e=an(t);return e.setHours(0,0,0,0),e}function mS(t){const e=an(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function TG(t,e){const n=Rd(t),r=Rd(e),s=+n-mS(n),i=+r-mS(r);return Math.round((s-i)/bG)}function SG(t){const e=oD(t),n=Js(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Bm(n)}function NG(t){return Js(t,Date.now())}function Dd(t,e){const n=Rd(t),r=Rd(e);return+n==+r}function CG(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Yu(t){if(!CG(t)&&typeof t!="number")return!1;const e=an(t);return!isNaN(Number(e))}function lD(t){const e=an(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function cD(t,e){const n=an(t.start),r=an(t.end);let s=+n>+r;const i=s?+n:+r,o=s?r:n;o.setHours(0,0,0,0);let l=1;const c=[];for(;+o<=i;)c.push(an(o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return s?c.reverse():c}function uD(t){const e=an(t);return e.setDate(1),e.setHours(0,0,0,0),e}function jG(t){const e=an(t),n=Js(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function dD(t,e){var l,c;const n=dh(),r=n.weekStartsOn??((c=(l=n.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??0,s=an(t),i=s.getDay(),o=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}const kG={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},IG=(t,e,n)=>{let r;const s=kG[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function My(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const AG={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},PG={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},RG={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},DG={date:My({formats:AG,defaultWidth:"full"}),time:My({formats:PG,defaultWidth:"full"}),dateTime:My({formats:RG,defaultWidth:"full"})},MG={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},OG=(t,e,n,r)=>MG[t];function vu(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const LG={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},VG={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},FG={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},UG={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$G={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},BG={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},zG=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},WG={ordinalNumber:zG,era:vu({values:LG,defaultWidth:"wide"}),quarter:vu({values:VG,defaultWidth:"wide",argumentCallback:t=>t-1}),month:vu({values:FG,defaultWidth:"wide"}),day:vu({values:UG,defaultWidth:"wide"}),dayPeriod:vu({values:$G,defaultWidth:"wide",formattingValues:BG,defaultFormattingWidth:"wide"})};function xu(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?qG(l,f=>f.test(o)):HG(l,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const h=e.slice(o.length);return{value:u,rest:h}}}function HG(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function qG(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function GG(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const KG=/^(\d+)(th|st|nd|rd)?/i,QG=/\d+/i,YG={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},XG={any:[/^b/i,/^(a|c)/i]},ZG={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},JG={any:[/1/i,/2/i,/3/i,/4/i]},eK={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},nK={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rK={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sK={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},iK={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},aK={ordinalNumber:GG({matchPattern:KG,parsePattern:QG,valueCallback:t=>parseInt(t,10)}),era:xu({matchPatterns:YG,defaultMatchWidth:"wide",parsePatterns:XG,defaultParseWidth:"any"}),quarter:xu({matchPatterns:ZG,defaultMatchWidth:"wide",parsePatterns:JG,defaultParseWidth:"any",valueCallback:t=>t+1}),month:xu({matchPatterns:eK,defaultMatchWidth:"wide",parsePatterns:tK,defaultParseWidth:"any"}),day:xu({matchPatterns:nK,defaultMatchWidth:"wide",parsePatterns:rK,defaultParseWidth:"any"}),dayPeriod:xu({matchPatterns:sK,defaultMatchWidth:"any",parsePatterns:iK,defaultParseWidth:"any"})},oK={code:"en-US",formatDistance:IG,formatLong:DG,formatRelative:OG,localize:WG,match:aK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lK(t){const e=an(t);return TG(e,jG(e))+1}function cK(t){const e=an(t),n=+Bm(e)-+SG(e);return Math.round(n/aD)+1}function hD(t,e){var h,f,p,g;const n=an(t),r=n.getFullYear(),s=dh(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(p=s.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,o=Js(t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=Xo(o,e),c=Js(t,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=Xo(c,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function uK(t,e){var l,c,u,h;const n=dh(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,s=hD(t,e),i=Js(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Xo(i,e)}function dK(t,e){const n=an(t),r=+Xo(n,e)-+uK(n,e);return Math.round(r/aD)+1}function Ct(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const na={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ct(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ct(n+1,2)},d(t,e){return Ct(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ct(t.getHours()%12||12,e.length)},H(t,e){return Ct(t.getHours(),e.length)},m(t,e){return Ct(t.getMinutes(),e.length)},s(t,e){return Ct(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Ct(s,e.length)}},gl={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},pS={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return na.y(t,e)},Y:function(t,e,n,r){const s=hD(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return Ct(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Ct(i,e.length)},R:function(t,e){const n=oD(t);return Ct(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ct(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ct(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ct(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return na.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ct(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=dK(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Ct(s,e.length)},I:function(t,e,n){const r=cK(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ct(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):na.d(t,e)},D:function(t,e,n){const r=lK(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ct(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Ct(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Ct(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Ct(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=gl.noon:r===0?s=gl.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=gl.evening:r>=12?s=gl.afternoon:r>=4?s=gl.morning:s=gl.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return na.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):na.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ct(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ct(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):na.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):na.s(t,e)},S:function(t,e){return na.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return yS(r);case"XXXX":case"XX":return wo(r);case"XXXXX":case"XXX":default:return wo(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return yS(r);case"xxxx":case"xx":return wo(r);case"xxxxx":case"xxx":default:return wo(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+gS(r,":");case"OOOO":default:return"GMT"+wo(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+gS(r,":");case"zzzz":default:return"GMT"+wo(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Ct(r,e.length)},T:function(t,e,n){const r=t.getTime();return Ct(r,e.length)}};function gS(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+Ct(i,2)}function yS(t,e){return t%60===0?(t>0?"-":"+")+Ct(Math.abs(t)/60,2):wo(t,e)}function wo(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Ct(Math.trunc(r/60),2),i=Ct(r%60,2);return n+s+e+i}const vS=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},fD=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},hK=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return vS(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",vS(r,e)).replace("{{time}}",fD(s,e))},fK={p:fD,P:hK},mK=/^D+$/,pK=/^Y+$/,gK=["D","DD","YY","YYYY"];function yK(t){return mK.test(t)}function vK(t){return pK.test(t)}function xK(t,e,n){const r=wK(t,e,n);if(console.warn(r),gK.includes(t))throw new RangeError(r)}function wK(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _K=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,bK=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,EK=/^'([^]*?)'?$/,TK=/''/g,SK=/[a-zA-Z]/;function jr(t,e,n){var h,f,p,g;const r=dh(),s=r.locale??oK,i=r.firstWeekContainsDate??((f=(h=r.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,o=r.weekStartsOn??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??0,l=an(t);if(!Yu(l))throw new RangeError("Invalid time value");let c=e.match(bK).map(T=>{const v=T[0];if(v==="p"||v==="P"){const b=fK[v];return b(T,s.formatLong)}return T}).join("").match(_K).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const v=T[0];if(v==="'")return{isToken:!1,value:NK(T)};if(pS[v])return{isToken:!0,value:T};if(v.match(SK))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:T}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(T=>{if(!T.isToken)return T.value;const v=T.value;(vK(v)||yK(v))&&xK(v,e,String(t));const b=pS[v[0]];return b(l,v,s.localize,u)}).join("")}function NK(t){const e=t.match(EK);return e?e[1].replace(TK,"'"):t}function Nx(t,e){const n=an(t),r=an(e);return+n<+r}function mD(t,e){const n=an(t),r=an(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function zm(t){return Dd(t,NG(t))}function CK(){return Rd(Date.now())}function pD(t,e){return D_(t,-e)}const jK=(t,e)=>{const n=e-t;return n===0?"Final":n===1?"Semi Final":n===2?"Quarter Final":`Round ${t+1}`},kK=t=>Math.pow(2,Math.ceil(Math.log2(Math.max(1,t)))),IK=(t,e=[])=>{var h,f,p;const n=[...t].sort((g,T)=>{if(g.seed&&T.seed)return g.seed-T.seed;if(g.seed)return-1;if(T.seed)return 1;const v=y=>y?typeof y=="string"?new Date(y).getTime():y.toDate?y.toDate().getTime():y instanceof Date?y.getTime():0:0,b=v(g.created_at),_=v(T.created_at);return b-_}),r=n.length,s=kK(r),i=Math.log2(s),o=[],l=new Array(s).fill(null);n.forEach((g,T)=>{l[T]=g});let c=s/2,u=[];for(let g=0;g<i;g++){const T=[];for(let v=0;v<c;v++){const b=((h=e.shift())==null?void 0:h.id)||crypto.randomUUID(),_=v*2,y={id:b,round_index:g,round_name:jK(g,i-1),match_order:v,participant_a_id:g===0?(f=l[_])==null?void 0:f.id:void 0,participant_b_id:g===0?(p=l[_+1])==null?void 0:p.id:void 0};if(u.length){const w=u[v*2],E=u[v*2+1],P=o.find(S=>S.id===w);P&&(P.next_match_id=b,P.winner_slot_in_next="A");const R=o.find(S=>S.id===E);R&&(R.next_match_id=b,R.winner_slot_in_next="B")}o.push(y),T.push(b)}u=T,c=c/2}return o},AK=async(t,e,n)=>{const r=WP(Ae);n.forEach(s=>{const i=at(Ae,"matches",s.id);r.set(i,{tournament_id:t,game_id:e,...s,participant_a_id:s.participant_a_id??null,participant_b_id:s.participant_b_id??null,next_match_id:s.next_match_id??null,winner_slot_in_next:s.winner_slot_in_next??null,status:"SCHEDULED",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{merge:!0})}),await r.commit()},PK=()=>{const{user:t}=hn(),[e,n]=m.useState([]),[r,s]=m.useState([]),[i,o]=m.useState([]),[l,c]=m.useState([]),[u,h]=m.useState([]),[f,p]=m.useState([]),[g,T]=m.useState(""),[v,b]=m.useState(""),[_,y]=m.useState(!1),{toast:w}=Zn();m.useEffect(()=>{_r().then(n),rs().then(h)},[]),m.useEffect(()=>{b("")},[g]),m.useEffect(()=>{(async()=>{if(!g){s([]),o([]),c([]),p([]);return}y(!0);try{const[V,W,H,Y]=await Promise.all([Rn(g),Qc({tournamentId:g,gameId:v||void 0}),La({tournamentId:g,gameId:v||void 0}),Ki({tournamentId:g,gameId:v||void 0})]);s(V),o(W),c(H),p(Y)}catch(V){w({title:"Error loading data",description:V.message,variant:"destructive"}),s([]),o([]),c([]),p([])}finally{y(!1)}})()},[g,v]);const E=m.useMemo(()=>i.reduce((j,V)=>(j[V.id]=V,j),{}),[i]),P=m.useMemo(()=>u.reduce((j,V)=>(j[V.id]=V,j),{}),[u]),R=m.useMemo(()=>f.reduce((j,V)=>(j[V.id]=V,j),{}),[f]),S=j=>{var V,W;return j?j.type==="USER"&&j.user_id?((V=P[j.user_id])==null?void 0:V.name)||"Unknown User":j.type==="TEAM"&&j.team_id?((W=R[j.team_id])==null?void 0:W.name)||"Unknown Team":"Unknown Participant":"TBD"},N=m.useMemo(()=>{const j=new Set;return l.filter(V=>V.status.toUpperCase()==="COMPLETED").forEach(V=>{const W=V.participant_a_id===V.winner_participant_id?V.participant_b_id:V.participant_a_id;if(W){const H=i.find(Y=>Y.id===W);if(H){if(H.type==="USER"&&H.user_id)j.add(H.user_id);else if(H.type==="TEAM"&&H.team_id){const Y=f.find(U=>U.id===H.team_id);Y!=null&&Y.player_ids&&Y.player_ids.forEach(U=>j.add(U))}}}}),j},[l,i,f]),k=m.useMemo(()=>i.filter(j=>{var V;if(j.type==="USER"&&j.user_id&&N.has(j.user_id))return!1;if(j.type==="TEAM"&&j.team_id){const W=f.find(H=>H.id===j.team_id);if((V=W==null?void 0:W.player_ids)!=null&&V.some(H=>N.has(H)))return!1}return!0}),[i,f,N]),A=m.useMemo(()=>l.reduce((j,V)=>(j[V.round_index]||(j[V.round_index]=[]),j[V.round_index].push(V),j),{}),[l]),M=async()=>{if(!g||!v){w({title:"Select tournament and game",description:"Both tournament and game are required to generate bracket.",variant:"destructive"});return}if(i.length<2){w({title:"Not enough participants",description:"At least two participants are required to create a bracket.",variant:"destructive"});return}try{y(!0);const j=IK(k);await AK(g,v,j);const V=await La({tournamentId:g,gameId:v});c(V),w({title:"Bracket generated",description:"Matches created successfully."})}catch(j){w({title:"Generation failed",description:j.message,variant:"destructive"})}finally{y(!1)}},I=async(j,V)=>{try{await lq(j.id,{tournament_id:j.tournament_id,game_id:j.game_id,winner_participant_id:V,score_details:"",points_awarded:{[V]:3},submitted_by:"admin"},{id:(t==null?void 0:t.uid)||"unknown",name:(t==null?void 0:t.displayName)||(t==null?void 0:t.email)||"Admin"}),j.next_match_id&&j.winner_slot_in_next&&await Df(j.next_match_id,j.winner_slot_in_next==="A"?{participant_a_id:V}:{participant_b_id:V},{id:(t==null?void 0:t.uid)||"unknown",name:(t==null?void 0:t.displayName)||(t==null?void 0:t.email)||"Admin"});const W=E[V],H=j.participant_a_id===V?j.participant_b_id:j.participant_a_id,Y=H?E[H]:void 0;W&&await y2({tournamentId:j.tournament_id,gameId:j.game_id,winnerId:V,loserId:H,winnerName:S(W),loserName:Y?S(Y):void 0,winnerType:W.type,loserType:Y==null?void 0:Y.type,pointsForWin:3});const U=await La({tournamentId:g,gameId:v||void 0});c(U),w({title:"Result recorded"})}catch(W){w({title:"Failed to record result",description:W.message,variant:"destructive"})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[a.jsxs("div",{className:"flex flex-col gap-2 w-full sm:w-64",children:[a.jsx("p",{className:"text-sm font-medium",children:"Tournament"}),a.jsxs(wt,{value:g,onValueChange:T,children:[a.jsx(vt,{children:a.jsx(_t,{placeholder:"Select tournament"})}),a.jsx(xt,{children:e.map(j=>a.jsx(Pe,{value:j.id,children:j.name},j.id))})]})]}),a.jsxs("div",{className:"flex flex-col gap-2 w-full sm:w-64",children:[a.jsx("p",{className:"text-sm font-medium",children:"Game"}),a.jsxs(wt,{value:v,onValueChange:b,disabled:!g,children:[a.jsx(vt,{children:a.jsx(_t,{placeholder:"Select game"})}),a.jsx(xt,{children:r.map(j=>a.jsx(Pe,{value:j.id,children:j.name},j.id))})]})]}),a.jsxs(we,{onClick:M,disabled:!v||_,children:[a.jsx(Zj,{className:"h-4 w-4 mr-2"}),"Generate Bracket"]})]}),a.jsxs(Te,{children:[a.jsxs(Ge,{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(Ke,{children:"Match Schedule"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Auto-generated bracket with manual override support."})]}),_&&a.jsx(un,{className:"h-5 w-5 animate-spin text-muted-foreground"})]}),a.jsx(Se,{children:g?l.length===0?a.jsx("p",{className:"text-muted-foreground text-sm",children:"No matches yet. Generate a bracket or create matches manually."}):Object.entries(A).map(([j,V])=>a.jsxs("div",{className:"mb-6",children:[a.jsxs("p",{className:"text-sm font-semibold mb-3 uppercase text-muted-foreground",children:["Round ",Number(j)+1]}),a.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:V.map(W=>{const H=W.participant_a_id?E[W.participant_a_id]:void 0,Y=W.participant_b_id?E[W.participant_b_id]:void 0;return a.jsx(Te,{children:a.jsxs(Se,{className:"space-y-3 pt-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:"Match"}),a.jsx("p",{className:"font-semibold",children:W.round_name})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:`flex items-center justify-between p-2 rounded-md ${W.status.toUpperCase()==="COMPLETED"?W.winner_participant_id===(H==null?void 0:H.id)?"bg-green-100 dark:bg-green-900/30 border border-green-200 dark:border-green-800":"bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 opacity-70":""}`,children:[a.jsx("span",{className:"truncate max-w-[150px] font-medium",title:S(H),children:S(H)}),a.jsx(we,{variant:W.winner_participant_id===(H==null?void 0:H.id)?"default":"outline",size:"sm",disabled:!H||W.status.toUpperCase()==="COMPLETED",onClick:()=>H&&I(W,H.id),className:W.winner_participant_id===(H==null?void 0:H.id)?"bg-green-600 hover:bg-green-700 h-7":"h-7",children:W.winner_participant_id===(H==null?void 0:H.id)?"Winner":"Win"})]}),a.jsxs("div",{className:`flex items-center justify-between p-2 rounded-md ${W.status.toUpperCase()==="COMPLETED"?W.winner_participant_id===(Y==null?void 0:Y.id)?"bg-green-100 dark:bg-green-900/30 border border-green-200 dark:border-green-800":"bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 opacity-70":""}`,children:[a.jsx("span",{className:"truncate max-w-[150px] font-medium",title:S(Y),children:S(Y)}),a.jsx(we,{variant:W.winner_participant_id===(Y==null?void 0:Y.id)?"default":"outline",size:"sm",disabled:!Y||W.status.toUpperCase()==="COMPLETED",onClick:()=>Y&&I(W,Y.id),className:W.winner_participant_id===(Y==null?void 0:Y.id)?"bg-green-600 hover:bg-green-700 h-7":"h-7",children:W.winner_participant_id===(Y==null?void 0:Y.id)?"Winner":"Win"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx(yt,{type:"datetime-local",disabled:W.status.toUpperCase()==="COMPLETED",value:(()=>{var F;if(!W.match_time)return"";let U;return(F=W.match_time)!=null&&F.toDate?U=W.match_time.toDate():W.match_time instanceof Date?U=W.match_time:U=new Date(W.match_time),isNaN(U.getTime())?"":new Date(U.getTime()-U.getTimezoneOffset()*6e4).toISOString().slice(0,16)})(),onChange:U=>{const F=new Date(U.target.value);if(Nx(F,new Date)){w({title:"Invalid date",description:"Cannot set match time in the past.",variant:"destructive"});return}Df(W.id,{match_time:F.toISOString()},{id:(t==null?void 0:t.uid)||"unknown",name:(t==null?void 0:t.displayName)||(t==null?void 0:t.email)||"Admin"})}}),a.jsx(yt,{placeholder:"Venue",disabled:W.status.toUpperCase()==="COMPLETED",value:W.venue||"",onChange:U=>Df(W.id,{venue:U.target.value},{id:(t==null?void 0:t.uid)||"unknown",name:(t==null?void 0:t.displayName)||(t==null?void 0:t.email)||"Admin"})})]})]})},W.id)})})]},j)):a.jsx("p",{className:"text-muted-foreground text-sm",children:"Select a tournament and game to view matches."})})]})]})};var gg="Switch",[RK,jY]=ei(gg),[DK,MK]=RK(gg),gD=m.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:h,...f}=t,[p,g]=m.useState(null),T=Et(e,w=>g(w)),v=m.useRef(!1),b=p?h||!!p.closest("form"):!0,[_,y]=Ii({prop:s,defaultProp:i??!1,onChange:u,caller:gg});return a.jsxs(DK,{scope:n,checked:_,disabled:l,children:[a.jsx(Ve.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":wD(_),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:T,onClick:je(t.onClick,w=>{y(E=>!E),b&&(v.current=w.isPropagationStopped(),v.current||w.stopPropagation())})}),b&&a.jsx(xD,{control:p,bubbles:!v.current,name:r,value:c,checked:_,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});gD.displayName=gg;var yD="SwitchThumb",vD=m.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=MK(yD,n);return a.jsx(Ve.span,{"data-state":wD(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});vD.displayName=yD;var OK="SwitchBubbleInput",xD=m.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const o=m.useRef(null),l=Et(o,i),c=m_(n),u=qw(e);return m.useEffect(()=>{const h=o.current;if(!h)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&g){const T=new Event("click",{bubbles:r});g.call(h,n),h.dispatchEvent(T)}},[c,n,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});xD.displayName=OK;function wD(t){return t?"checked":"unchecked"}var _D=gD,LK=vD;const M_=m.forwardRef(({className:t,...e},n)=>a.jsx(_D,{className:ie("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:a.jsx(LK,{className:ie("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));M_.displayName=_D.displayName;const VK=()=>{const[t,e]=m.useState([]),[n,r]=m.useState(!0),[s,i]=m.useState(!1),[o,l]=m.useState(null),[c,u]=m.useState({name:"",start_date:"",end_date:"",is_active:!0,status:"draft"}),{toast:h}=Zn(),{setIsLoading:f}=ii(),p=y=>{if(!y)return"N/A";let w;if(typeof y=="object"&&y.toDate?w=y.toDate():typeof y=="object"&&y.seconds?w=new Date(y.seconds*1e3):w=new Date(y),isNaN(w.getTime()))return"N/A";const E=String(w.getDate()).padStart(2,"0"),P=String(w.getMonth()+1).padStart(2,"0"),R=w.getFullYear();return`${E}/${P}/${R}`};m.useEffect(()=>{f(!0),g()},[f]);const g=async()=>{try{const y=Sn(Xn(Ae,"tournaments"),si("created_at","desc")),E=(await Ln(y)).docs.map(P=>{const R=P.data();return{id:P.id,name:R.name??"",start_date:R.start_date||"",end_date:R.end_date||"",is_active:R.is_active??!0,status:R.status||(R.is_active?"active":"draft")}});e(E)}catch(y){h({title:"Error",description:y.message,variant:"destructive"})}finally{r(!1),f(!1)}},T=async y=>{y.preventDefault(),f(!0);try{o?(await qi(at(Ae,"tournaments",o),{...c,updated_at:qe()}),h({title:"Tournament updated successfully"})):(await Gi(Xn(Ae,"tournaments"),{...c,created_at:qe(),updated_at:qe()}),h({title:"Tournament created successfully"})),i(!1),_(),g()}catch(w){h({title:"Error",description:w.message,variant:"destructive"})}finally{f(!1)}},v=y=>{l(y.id),u({name:y.name,start_date:y.start_date||"",end_date:y.end_date||"",is_active:y.is_active,status:y.status||"draft"}),i(!0)},b=async y=>{if(confirm("Are you sure you want to delete this tournament?")){f(!0);try{await s_(at(Ae,"tournaments",y)),h({title:"Tournament deleted successfully"}),g()}catch(w){h({title:"Error",description:w.message,variant:"destructive"})}finally{f(!1)}}},_=()=>{u({name:"",start_date:"",end_date:"",is_active:!0,status:"draft"}),l(null)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Tournaments"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage tournament configurations"})]}),a.jsxs(_s,{open:s,onOpenChange:y=>{i(y),y||_()},children:[a.jsx(d_,{asChild:!0,children:a.jsxs(we,{children:[a.jsx(om,{className:"h-4 w-4 mr-2"}),"Add Tournament"]})}),a.jsxs(Qr,{children:[a.jsx(Yr,{children:a.jsxs(Xr,{children:[o?"Edit":"Create"," Tournament"]})}),a.jsxs("form",{onSubmit:T,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"name",children:"Tournament Name"}),a.jsx(yt,{id:"name",value:c.name,onChange:y=>u({...c,name:y.target.value}),required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"start_date",children:"Start Date"}),a.jsx(yt,{id:"start_date",type:"date",value:c.start_date,onChange:y=>u({...c,start_date:y.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"end_date",children:"End Date"}),a.jsx(yt,{id:"end_date",type:"date",value:c.end_date,onChange:y=>u({...c,end_date:y.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"status",children:"Status"}),a.jsxs(wt,{value:c.status,onValueChange:y=>u({...c,status:y}),children:[a.jsx(vt,{id:"status",children:a.jsx(_t,{})}),a.jsxs(xt,{children:[a.jsx(Pe,{value:"draft",children:"Draft"}),a.jsx(Pe,{value:"active",children:"Active"}),a.jsx(Pe,{value:"completed",children:"Completed"})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between space-y-2 pt-8",children:[a.jsx(Ue,{htmlFor:"is_active",children:"Is Publicly Active"}),a.jsx(M_,{id:"is_active",checked:c.is_active,onCheckedChange:y=>u({...c,is_active:y})})]})]}),a.jsxs(we,{type:"submit",className:"w-full",children:[o?"Update":"Create"," Tournament"]})]})]})]})]}),n?a.jsx("p",{children:"Loading..."}):a.jsx("div",{className:"grid gap-4",children:t.map(y=>a.jsxs(Te,{children:[a.jsx(Ge,{children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx(Ke,{children:y.name}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:y.start_date&&y.end_date&&`${p(y.start_date)} - ${p(y.end_date)}`})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(we,{variant:"outline",size:"sm",onClick:()=>v(y),children:a.jsx(Mw,{className:"h-4 w-4"})}),a.jsx(we,{variant:"outline",size:"sm",onClick:()=>b(y.id),children:a.jsx(Lw,{className:"h-4 w-4"})})]})]})}),a.jsxs(Se,{className:"flex gap-4",children:[a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-bold uppercase ${y.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:y.is_active?"Public":"Hidden"}),a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-bold uppercase ${y.status==="active"?"bg-blue-100 text-blue-800":y.status==="completed"?"bg-purple-100 text-purple-800":"bg-yellow-100 text-yellow-800"}`,children:y.status})]})]},y.id))})]})},FK=()=>{const[t,e]=m.useState({activeTournamentsCount:0,activeTournamentName:"Loading...",totalGames:0,registeredPlayers:0,scheduledMatches:0}),[n,r]=m.useState(!0),{setIsLoading:s}=ii();return m.useEffect(()=>{const i=async()=>{try{const[o,l,c]=await Promise.all([_r(),rs(),Rn()]),u=o.filter(p=>p.is_active),h=u[0]||o[0];let f=0;h&&(f=(await La({tournamentId:h.id})).length),e({activeTournamentsCount:u.length,activeTournamentName:h?h.name:"No Tournaments",totalGames:c.length,registeredPlayers:l.length,scheduledMatches:f})}catch(o){console.error("Error fetching dashboard data:",o),e(l=>({...l,activeTournamentName:"Error loading data"}))}finally{r(!1),s(!1)}};s(!0),i()},[s]),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Overview"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Welcome to the Sports Week Admin Dashboard"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[a.jsxs(Te,{children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ke,{className:"text-sm font-medium",children:"Active Tournaments"}),a.jsx(It,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Se,{children:[a.jsx("div",{className:"text-2xl font-bold",children:n?"-":t.activeTournamentsCount}),a.jsx("p",{className:"text-xs text-muted-foreground",children:t.activeTournamentName})]})]}),a.jsxs(Te,{children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ke,{className:"text-sm font-medium",children:"Total Games"}),a.jsx(Dw,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Se,{children:[a.jsx("div",{className:"text-2xl font-bold",children:n?"-":t.totalGames}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all tournaments"})]})]}),a.jsxs(Te,{children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ke,{className:"text-sm font-medium",children:"Registered Players"}),a.jsx(Ai,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Se,{children:[a.jsx("div",{className:"text-2xl font-bold",children:n?"-":t.registeredPlayers}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Total registered users"})]})]}),a.jsxs(Te,{children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ke,{className:"text-sm font-medium",children:"Scheduled Matches"}),a.jsx(Es,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Se,{children:[a.jsx("div",{className:"text-2xl font-bold",children:n?"-":t.scheduledMatches}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"For current tournament"})]})]})]}),a.jsxs(Te,{children:[a.jsx(Ge,{children:a.jsx(Ke,{children:"Quick Start Guide"})}),a.jsxs(Se,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"bg-primary text-primary-foreground rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 font-bold",children:"1"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Create a Tournament"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Set up Sports Week 2025 with start and end dates"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"bg-primary text-primary-foreground rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 font-bold",children:"2"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Add Games"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure games like Chess, Cricket, Volleyball, etc."})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"bg-primary text-primary-foreground rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 font-bold",children:"3"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Create Teams"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Build teams and pairs for various games"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"bg-primary text-primary-foreground rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 font-bold",children:"4"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Schedule Matches"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Create match fixtures with dates, times, and venues"})]})]})]})]})]})},UK=async(t,e)=>{await Za({user_id:t,title:"Game Registration Approved! ",message:`Your registration for "${e.gameName}" in ${e.tournamentName} has been approved. Good luck!`,type:"registration"})},$K=async(t,e)=>{await Za({user_id:t,title:"Game Registration Update",message:`Your registration for "${e.gameName}" in ${e.tournamentName} was not approved. Please contact the admin for more information.`,type:"registration"})},BK={pending:"secondary",approved:"default",rejected:"destructive"},zK=()=>{const{user:t}=hn(),[e,n]=m.useState(""),[r,s]=m.useState(""),[i,o]=m.useState([]),[l,c]=m.useState([]),[u,h]=m.useState([]),[f,p]=m.useState([]),[g,T]=m.useState(!1),{toast:v}=Zn();m.useEffect(()=>{(async()=>{const[P,R]=await Promise.all([_r(),rs()]);o(P),p(R)})()},[]),m.useEffect(()=>{if(!e){c([]),h([]);return}(async()=>{T(!0);const[P,R]=await Promise.all([Rn(e),Ks({tournamentId:e,gameId:r||void 0})]);c(P),h(R),T(!1)})()},[e,r]);const b=m.useMemo(()=>i.find(E=>E.id===e),[i,e]),_=async(E,P)=>{await wG(E.id,P,{id:(t==null?void 0:t.uid)||"unknown",name:(t==null?void 0:t.displayName)||(t==null?void 0:t.email)||"Admin"});const R=l.find(N=>N.id===E.game_id),S=(R==null?void 0:R.name)||"Unknown Game";P==="approved"?(await w2({tournament_id:E.tournament_id,game_id:E.game_id,type:"USER",user_id:E.user_id}),await UK(E.user_id,{tournamentName:(b==null?void 0:b.name)||"Tournament",gameName:S}),console.debug("Participant created/Approved notification sent")):P==="rejected"&&await $K(E.user_id,{tournamentName:(b==null?void 0:b.name)||"Tournament",gameName:S})},y=async(E,P)=>{try{await _(E,P),v({title:`Registration ${P}`,description:P==="approved"?"Player added to participants list.":"Player notified of rejection."});const R=await Ks({tournamentId:E.tournament_id,gameId:r||void 0});h(R)}catch(R){v({title:"Action failed",description:R.message,variant:"destructive"})}},w=async()=>{const E=u.filter(P=>P.status==="pending");if(E.length===0){v({title:"No pending registrations",description:"There are no pending requests to approve."});return}T(!0);try{await Promise.all(E.map(R=>_(R,"approved"))),v({title:"Batch Approval Successful",description:`Approved ${E.length} registrations.`});const P=await Ks({tournamentId:e,gameId:r||void 0});h(P)}catch(P){v({title:"Batch Action failed",description:P.message,variant:"destructive"})}finally{T(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[a.jsxs("div",{className:"flex flex-col gap-2 w-full sm:w-64",children:[a.jsx("p",{className:"text-sm font-medium",children:"Tournament"}),a.jsxs(wt,{value:e,onValueChange:n,children:[a.jsx(vt,{children:a.jsx(_t,{placeholder:"Select tournament"})}),a.jsx(xt,{children:i.map(E=>a.jsx(Pe,{value:E.id,children:E.name},E.id))})]})]}),a.jsxs("div",{className:"flex flex-col gap-2 w-full sm:w-64",children:[a.jsx("p",{className:"text-sm font-medium",children:"Game"}),a.jsxs(wt,{value:r,onValueChange:s,disabled:!e,children:[a.jsx(vt,{children:a.jsx(_t,{placeholder:"All games"})}),a.jsxs(xt,{children:[a.jsx(Pe,{value:"all",children:"All games"}),l.map(E=>a.jsx(Pe,{value:E.id,children:E.name},E.id))]})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(we,{onClick:w,disabled:g||!e||u.filter(E=>E.status==="pending").length===0,children:[g?a.jsx(un,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Approve All showing requests"]})}),a.jsxs(Te,{children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(Ke,{children:"Registrations"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Approve or reject player registrations for the selected tournament."})]}),g&&a.jsx(un,{className:"h-5 w-5 animate-spin text-muted-foreground"})]}),a.jsx(Se,{children:e?u.length===0?a.jsx("p",{className:"text-muted-foreground text-sm",children:"No registrations found."}):a.jsx("div",{className:"border rounded-lg overflow-hidden",children:a.jsx("div",{className:"max-h-[600px] overflow-y-auto overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"sticky top-0 bg-background z-10",children:a.jsxs("tr",{className:"border-b bg-muted/50",children:[a.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm",children:"User"}),a.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm",children:"Email"}),a.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm",children:"Game"}),a.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm",children:"Status"}),a.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm",children:"Actions"})]})}),a.jsx("tbody",{children:u.map(E=>{const P=f.find(S=>S.id===E.user_id),R=l.find(S=>S.id===E.game_id);return a.jsxs("tr",{className:"border-b hover:bg-muted/50 transition-colors",children:[a.jsx("td",{className:"py-3 px-4",children:a.jsx("p",{className:"font-medium",children:(P==null?void 0:P.name)??E.user_id})}),a.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:(P==null?void 0:P.email)??""}),a.jsx("td",{className:"py-3 px-4 text-sm",children:(R==null?void 0:R.name)??"Unknown"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx(pt,{variant:BK[E.status],title:E.processed_by_name?`Processed by: ${E.processed_by_name}`:"Pending review",className:"cursor-help",children:E.status})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("div",{className:"flex items-center gap-2",children:E.status==="pending"&&a.jsxs(a.Fragment,{children:[a.jsx(we,{variant:"outline",size:"sm",onClick:()=>y(E,"approved"),children:"Approve"}),a.jsx(we,{variant:"ghost",size:"sm",className:"text-destructive",onClick:()=>y(E,"rejected"),children:"Reject"})]})})})]},E.id)})})]})})}):a.jsx("p",{className:"text-muted-foreground text-sm",children:"Select a tournament to view registrations."})})]})]})},WK={pending:"secondary",approved:"default",rejected:"destructive"},HK=()=>{const[t,e]=m.useState(""),[n,r]=m.useState("all"),[s,i]=m.useState("all"),[o,l]=m.useState([]),[c,u]=m.useState([]),[h,f]=m.useState([]),[p,g]=m.useState([]),[T,v]=m.useState(!1);Zn();const b=E=>{if(!E)return"N/A";let P;if(typeof E=="object"&&E.toDate?P=E.toDate():typeof E=="object"&&E.seconds?P=new Date(E.seconds*1e3):P=new Date(E),isNaN(P.getTime()))return"N/A";const R=String(P.getDate()).padStart(2,"0"),S=String(P.getMonth()+1).padStart(2,"0"),N=P.getFullYear();return`${R}/${S}/${N}`};m.useEffect(()=>{(async()=>{const[P,R]=await Promise.all([_r(),rs()]);l(P),g(R)})()},[]),m.useEffect(()=>{if(!t){u([]),f([]);return}(async()=>{v(!0);const[P,R]=await Promise.all([Rn(t),Ks({tournamentId:t,gameId:n&&n!=="all"?n:void 0,status:s!=="all"?s:void 0})]);u(P),f(R),v(!1)})()},[t,n,s]);const _=m.useMemo(()=>h,[h]),y=E=>{const P=p.find(R=>R.id===E);return{name:(P==null?void 0:P.name)??E,email:(P==null?void 0:P.email)??""}},w=E=>{var P;return((P=c.find(R=>R.id===E))==null?void 0:P.name)??"Unknown Game"};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[a.jsxs("div",{className:"flex flex-col gap-2 w-full sm:w-64",children:[a.jsx("p",{className:"text-sm font-medium",children:"Tournament"}),a.jsxs(wt,{value:t,onValueChange:e,children:[a.jsx(vt,{children:a.jsx(_t,{placeholder:"Select tournament"})}),a.jsx(xt,{children:o.map(E=>a.jsx(Pe,{value:E.id,children:E.name},E.id))})]})]}),a.jsxs("div",{className:"flex flex-col gap-2 w-full sm:w-64",children:[a.jsx("p",{className:"text-sm font-medium",children:"Game"}),a.jsxs(wt,{value:n,onValueChange:r,disabled:!t,children:[a.jsx(vt,{children:a.jsx(_t,{placeholder:"All games"})}),a.jsxs(xt,{children:[a.jsx(Pe,{value:"all",children:"All games"}),c.map(E=>a.jsx(Pe,{value:E.id,children:E.name},E.id))]})]})]}),a.jsxs("div",{className:"flex flex-col gap-2 w-full sm:w-64",children:[a.jsx("p",{className:"text-sm font-medium",children:"Registration Status"}),a.jsxs(wt,{value:s,onValueChange:i,disabled:!t,children:[a.jsx(vt,{children:a.jsx(_t,{placeholder:"All statuses"})}),a.jsxs(xt,{children:[a.jsx(Pe,{value:"all",children:"All statuses"}),a.jsx(Pe,{value:"approved",children:"Approved only"}),a.jsx(Pe,{value:"pending",children:"Pending only"}),a.jsx(Pe,{value:"rejected",children:"Rejected only"})]})]})]})]}),a.jsxs(Te,{children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(Ke,{children:"Participants List"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"View all user registrations with approval status and game details."})]}),T&&a.jsx(un,{className:"h-5 w-5 animate-spin text-muted-foreground"})]}),a.jsx(Se,{children:t?_.length===0?a.jsx("p",{className:"text-muted-foreground text-sm",children:"No registrations found."}):a.jsx("div",{className:"border rounded-lg overflow-hidden",children:a.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"sticky top-0 bg-background z-10",children:a.jsxs("tr",{className:"border-b bg-muted/50",children:[a.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm",children:"User"}),a.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm",children:"Email"}),a.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm",children:"Game"}),a.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm",children:"Status"}),a.jsx("th",{className:"text-left py-3 px-4 font-semibold text-sm",children:"Registered At"})]})}),a.jsx("tbody",{children:_.map(E=>{const P=y(E.user_id);return a.jsxs("tr",{className:"border-b hover:bg-muted/50 transition-colors",children:[a.jsx("td",{className:"py-3 px-4",children:a.jsx("p",{className:"font-medium",children:P.name})}),a.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:P.email}),a.jsx("td",{className:"py-3 px-4 text-sm",children:w(E.game_id)}),a.jsx("td",{className:"py-3 px-4",children:a.jsx(pt,{variant:WK[E.status],title:E.processed_by_name?`Processed by: ${E.processed_by_name}`:"Pending review",className:"cursor-help",children:E.status})}),a.jsx("td",{className:"py-3 px-4 text-sm text-muted-foreground",children:b(E.created_at)})]},E.id)})})]})})}):a.jsx("p",{className:"text-muted-foreground text-sm",children:"Select a tournament to view participants."})})]}),t&&_.length>0&&a.jsxs(Te,{children:[a.jsx(Ge,{children:a.jsx(Ke,{children:"Summary"})}),a.jsx(Se,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Registrations"}),a.jsx("p",{className:"text-2xl font-bold",children:h.length})]}),a.jsxs("div",{className:"bg-green-50 dark:bg-green-950/20 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Approved"}),a.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:h.filter(E=>E.status==="approved").length})]}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:h.filter(E=>E.status==="pending").length})]}),a.jsxs("div",{className:"bg-red-50 dark:bg-red-950/20 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Rejected"}),a.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:h.filter(E=>E.status==="rejected").length})]})]})})]})]})},qK=()=>{var M;const[t,e]=m.useState([]),[n,r]=m.useState(""),[s,i]=m.useState(""),[o,l]=m.useState([]),[c,u]=m.useState([]),[h,f]=m.useState(!1),{setIsLoading:p}=ii(),[g,T]=m.useState(!1),[v,b]=m.useState([]),[_,y]=m.useState([]),[w,E]=m.useState([]),{toast:P}=Zn();m.useEffect(()=>{_r().then(e),rs().then(b)},[]);const R=m.useMemo(()=>v.reduce((I,j)=>(I[j.id]=j,I),{}),[v]),S=m.useMemo(()=>_.reduce((I,j)=>(I[j.id]=j,I),{}),[_]),N=m.useMemo(()=>w.reduce((I,j)=>(I[j.id]=j,I),{}),[w]),k=I=>{var j,V;return I?I.type==="USER"&&I.user_id?((j=R[I.user_id])==null?void 0:j.name)||"Unknown User":I.type==="TEAM"&&I.team_id?((V=S[I.team_id])==null?void 0:V.name)||`Team ${I.team_id.slice(-4)}`:"Unknown":"Unknown"};m.useEffect(()=>{if(!n){l([]),u([]),i("");return}const I=async()=>{f(!0);try{const[j,V,W]=await Promise.all([Rn(n),Ki({tournamentId:n}),Qc({tournamentId:n})]);u(j),y(V),E(W);const H=await Ex(n,s==="ALL"?void 0:s||void 0);l(H)}catch(j){console.error("Error loading data:",j)}finally{f(!1),p(!1)}};n&&p(!0),I()},[n,s,p]);const A=async()=>{if(n){T(!0);try{P({title:"Recalculating Leaderboard",description:"Processing all completed matches..."}),await sq(n);const j=(await La({tournamentId:n})).filter(W=>W.status.toUpperCase()==="COMPLETED");for(const W of j){if(!W.winner_participant_id)continue;const H=W.winner_participant_id,Y=W.participant_a_id===H?W.participant_b_id:W.participant_a_id,U=N[H],F=Y?N[Y]:void 0;U&&await y2({tournamentId:W.tournament_id,gameId:W.game_id,winnerId:H,loserId:Y,winnerName:k(U),loserName:F?k(F):void 0,winnerType:U.type,loserType:F==null?void 0:F.type,pointsForWin:3})}const V=await Ex(n,s==="ALL"?void 0:s||void 0);l(V),P({title:"Success",description:"Leaderboard has been synchronized with match results."})}catch(I){P({title:"Sync Failed",description:I.message,variant:"destructive"})}finally{T(!1),p(!1)}}};return a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-center justify-between bg-card p-6 rounded-2xl border shadow-sm",children:[a.jsxs("div",{className:"flex flex-wrap gap-4 items-end flex-1",children:[a.jsxs("div",{className:"flex flex-col gap-2 w-full sm:w-64",children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-muted-foreground opacity-70",children:"Tournament"}),a.jsxs(wt,{value:n,onValueChange:r,children:[a.jsx(vt,{className:"bg-muted/30 border-none h-11 font-bold",children:a.jsx(_t,{placeholder:"Select tournament"})}),a.jsx(xt,{children:t.map(I=>a.jsx(Pe,{value:I.id,className:"font-medium",children:I.name},I.id))})]})]}),a.jsxs("div",{className:"flex flex-col gap-2 w-full sm:w-64",children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-muted-foreground opacity-70",children:"Game Filter"}),a.jsxs(wt,{value:s,onValueChange:i,disabled:!n,children:[a.jsx(vt,{className:"bg-muted/30 border-none h-11 font-bold",children:a.jsx(_t,{placeholder:"Tournament Wide"})}),a.jsxs(xt,{children:[a.jsx(Pe,{value:"ALL",className:"font-bold",children:"Total Standings"}),c.map(I=>a.jsx(Pe,{value:I.id,children:I.name},I.id))]})]})]})]}),a.jsxs(we,{onClick:A,disabled:!n||g,variant:"outline",className:"h-11 px-6 font-black border-primary/20 hover:bg-primary/5 transition-all gap-2",children:[g?a.jsx(un,{className:"h-4 w-4 animate-spin"}):a.jsx(ZL,{className:"h-4 w-4"}),"SYNC STANDINGS"]})]}),a.jsxs(Te,{className:"border-none shadow-2xl overflow-hidden bg-gradient-to-b from-card to-card/50",children:[a.jsx(Ge,{className:"border-b bg-muted/10 p-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs(Ke,{className:"text-2xl font-black flex items-center gap-3",children:[a.jsx(It,{className:"h-7 w-7 text-yellow-500"}),"STANDINGS MANAGEMENT"]}),a.jsx(wr,{className:"font-medium",children:s&&s!=="ALL"?`Leaderboard for ${((M=c.find(I=>I.id===s))==null?void 0:M.name)||"Sport"}`:"Overall tournament-wide leaderboard rankings."})]}),h&&a.jsx(un,{className:"h-6 w-6 animate-spin text-primary"})]})}),a.jsx(Se,{className:"p-0",children:n?o.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-32 text-muted-foreground",children:[a.jsx($L,{className:"h-16 w-16 mb-4 opacity-10"}),a.jsx("p",{className:"text-lg font-bold",children:"No leaderboard data found."}),a.jsx("p",{className:"text-sm",children:"Click 'Sync Standings' to generate from match history."})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left bg-muted/10 border-b",children:[a.jsx("th",{className:"py-5 px-8 text-[10px] font-black text-muted-foreground uppercase tracking-[0.2em] w-24",children:"RANK"}),a.jsx("th",{className:"py-5 px-8 text-[10px] font-black text-muted-foreground uppercase tracking-[0.2em]",children:"ENTITY NAME"}),a.jsx("th",{className:"py-5 px-8 text-[10px] font-black text-muted-foreground uppercase tracking-[0.2em]",children:"TYPE"}),a.jsx("th",{className:"py-5 px-8 text-[10px] font-black text-muted-foreground uppercase tracking-[0.2em] text-center",children:"WINS"}),a.jsx("th",{className:"py-5 px-8 text-[10px] font-black text-muted-foreground uppercase tracking-[0.2em] text-center",children:"LOSSES"}),a.jsx("th",{className:"py-5 px-8 text-[10px] font-black text-muted-foreground uppercase tracking-[0.2em] text-right",children:"POINTS"})]})}),a.jsx("tbody",{children:o.map((I,j)=>a.jsxs("tr",{className:"border-b last:border-0 hover:bg-primary/5 transition-all group",children:[a.jsx("td",{className:"py-6 px-8",children:a.jsx("div",{className:ie("w-10 h-10 rounded-full flex items-center justify-center font-black text-sm transition-all",j===0?"bg-yellow-500 text-white shadow-lg shadow-yellow-500/30 scale-110":j===1?"bg-slate-300 text-slate-700":j===2?"bg-orange-300 text-orange-800":"bg-muted text-muted-foreground"),children:I.rank??j+1})}),a.jsxs("td",{className:"py-6 px-8",children:[a.jsx("p",{className:"font-black text-lg group-hover:text-primary transition-colors",children:I.name}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold uppercase tracking-tighter opacity-50",children:["ID: ",I.entity_id]})]}),a.jsx("td",{className:"py-6 px-8",children:a.jsx(pt,{variant:"secondary",className:"font-black text-[10px] px-3 py-1 bg-muted",children:I.entity_type})}),a.jsx("td",{className:"py-6 px-8 text-center",children:a.jsx("span",{className:"text-lg font-bold text-green-600 bg-green-500/10 px-3 py-1 rounded-lg border border-green-500/20",children:I.wins})}),a.jsx("td",{className:"py-6 px-8 text-center",children:a.jsx("span",{className:"text-lg font-bold text-red-500 bg-red-500/10 px-3 py-1 rounded-lg border border-red-500/20",children:I.losses})}),a.jsx("td",{className:"py-6 px-8 text-right",children:a.jsx("span",{className:"text-2xl font-black text-primary",children:I.points})})]},I.id))})]})}):a.jsxs("div",{className:"flex flex-col items-center justify-center py-32 text-muted-foreground",children:[a.jsx(tk,{className:"h-16 w-16 mb-4 opacity-10"}),a.jsx("p",{className:"text-lg font-bold",children:"Please select a tournament to view statistics."})]})})]})]})},GK=()=>{const{user:t}=hn(),[e,n]=m.useState(new Date),[r,s]=m.useState(null),[i,o]=m.useState([]),[l,c]=m.useState([]),[u,h]=m.useState([]),[f,p]=m.useState([]),[g,T]=m.useState([]),[v,b]=m.useState([]),[_,y]=m.useState([]),[w,E]=m.useState(!0),[P,R]=m.useState(!1),{toast:S}=Zn(),[N,k]=m.useState(""),[A,M]=m.useState(""),[I,j]=m.useState(""),[V,W]=m.useState(""),[H,Y]=m.useState(""),[U,F]=m.useState(""),[$,G]=m.useState(!1);m.useEffect(()=>{oe(),Ne()},[]),m.useEffect(()=>{N?de(N):(h([]),M(""))},[N]),m.useEffect(()=>{N&&A?xe(N,A):(T([]),y([]),j(""),W(""))},[N,A]);const oe=async()=>{try{const[q,se,ye]=await Promise.all([_r(),Rn(),rs()]);c(q),p(se),b(ye)}catch(q){console.error("Error loading initial data:",q)}},de=async q=>{try{const se=await Rn(q);h(se)}catch(se){console.error("Error loading games:",se)}},xe=async(q,se)=>{try{const[ye,Xe]=await Promise.all([Ki({tournamentId:q,gameId:se}),Qc({tournamentId:q,gameId:se})]);T(ye),y(Xe)}catch(ye){console.error("Error loading participants/teams:",ye)}},Ne=async()=>{E(!0);try{const q=await _r();if(q.length===0)o([]);else{const se=await Promise.all(q.map(ye=>La({tournamentId:ye.id})));o(se.flat())}}catch(q){console.error("Error loading matches:",q)}finally{E(!1)}},lt=async()=>{if(!r||!N||!A||!I||!V||!H){S({title:"Please fill all fields",variant:"destructive"});return}if(I===V){S({title:"Participants must be different",variant:"destructive"});return}const[q,se]=H.split(":").map(Number),ye=new Date(r);if(ye.setHours(q,se),Nx(ye,new Date)){S({title:"Cannot schedule match in the past",variant:"destructive"});return}G(!0);try{const Xe={tournament_id:N,game_id:A,participant_a_id:I,participant_b_id:V,match_time:ye.toISOString(),status:"SCHEDULED",venue:U,round_index:0,round_name:"Scheduled Match",match_order:0};await oq(Xe,{id:(t==null?void 0:t.uid)||"unknown",name:(t==null?void 0:t.displayName)||(t==null?void 0:t.email)||"Admin"}),S({title:"Match scheduled successfully"}),R(!1),Ne(),le();const tt=_.find(St=>St.id===I),Gt=_.find(St=>St.id===V),Wt=u.find(St=>St.id===A),Dt=async St=>{await Za({user_id:St,title:"New Match Scheduled",message:`A new match for ${(Wt==null?void 0:Wt.name)||"your game"} has been scheduled at ${jr(ye,"PPp")}.`,type:"MATCH_SCHEDULED",payload:{match_id:"new",game_id:A}})},Vn=async St=>{if(St){if(St.type==="USER"&&St.user_id)await Dt(St.user_id);else if(St.type==="TEAM"&&St.team_id){const br=g.find(Jn=>Jn.id===St.team_id);if(br!=null&&br.player_ids)for(const Jn of br.player_ids)await Dt(Jn)}}};await Promise.all([Vn(tt),Vn(Gt)])}catch(Xe){S({title:"Error scheduling match",description:Xe.message,variant:"destructive"})}finally{G(!1)}},le=()=>{j(""),W(""),Y(""),F("")},We=q=>i.filter(se=>{var Xe;if(!se.match_time)return!1;const ye=(Xe=se.match_time)!=null&&Xe.toDate?se.match_time.toDate():new Date(se.match_time);return Yu(ye)?Dd(ye,q):!1}),st=m.useMemo(()=>f.reduce((q,se)=>(q[se.id]=se,q),{}),[f]),Me=m.useMemo(()=>v.reduce((q,se)=>(q[se.id]=se,q),{}),[v]),Oe=m.useMemo(()=>g.reduce((q,se)=>(q[se.id]=se,q),{}),[g]),De=q=>{var se,ye;return q.type==="USER"&&q.user_id?((se=Me[q.user_id])==null?void 0:se.name)||"Unknown User":q.type==="TEAM"&&q.team_id?((ye=Oe[q.team_id])==null?void 0:ye.name)||"Unknown Team":"Unknown"},Tt=uD(e),ge=lD(Tt),be=Xo(Tt),it=dD(ge),ht=cD({start:be,end:it}),At=[];for(let q=0;q<ht.length;q+=7)At.push(ht.slice(q,q+7));const Qe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],L=u.find(q=>q.id===A),B=(L==null?void 0:L.game_type)==="SINGLE",O=B?"Player":"Team",Q=m.useMemo(()=>_.filter(q=>B?q.type==="USER":q.type==="TEAM"),[_,B]),X=m.useMemo(()=>{if(!A)return new Set;const q=new Set;return i.filter(se=>{var ye;return se.game_id===A&&((ye=se.status)==null?void 0:ye.toUpperCase())==="COMPLETED"}).forEach(se=>{const ye=se.participant_a_id===se.winner_participant_id?se.participant_b_id:se.participant_a_id;if(ye){const Xe=_.find(tt=>tt.id===ye);if(Xe){if(Xe.type==="USER"&&Xe.user_id)q.add(Xe.user_id);else if(Xe.type==="TEAM"&&Xe.team_id){const tt=g.find(Gt=>Gt.id===Xe.team_id);tt!=null&&tt.player_ids&&tt.player_ids.forEach(Gt=>q.add(Gt))}}}}),q},[i,A,_,g]),re=m.useMemo(()=>{if(!A)return new Set;const q=new Set;return _.forEach(se=>{var ye;if(se.type==="USER"&&se.user_id&&X.has(se.user_id))q.add(se.id);else if(se.type==="TEAM"&&se.team_id){const Xe=g.find(tt=>tt.id===se.team_id);(ye=Xe==null?void 0:Xe.player_ids)!=null&&ye.some(tt=>X.has(tt))&&q.add(se.id)}}),q},[_,g,X]),ne=m.useMemo(()=>{if(!A)return new Set;const q=new Set;return i.filter(se=>{var ye;return se.game_id===A&&((ye=se.status)==null?void 0:ye.toUpperCase())==="SCHEDULED"}).forEach(se=>{se.participant_a_id&&q.add(se.participant_a_id),se.participant_b_id&&q.add(se.participant_b_id)}),q},[i,A]);return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Matches Schedule"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage and view match schedules"})]})}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-2xl font-semibold",children:jr(e,"MMMM yyyy")}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(we,{variant:"outline",size:"icon",onClick:()=>n(pD(e,1)),children:a.jsx(Yj,{className:"h-4 w-4"})}),a.jsx(we,{variant:"outline",size:"icon",onClick:()=>n(D_(e,1)),children:a.jsx(Xj,{className:"h-4 w-4"})})]})]}),a.jsx(Te,{children:a.jsxs(Se,{className:"p-0",children:[a.jsx("div",{className:"grid grid-cols-7 border-b",children:Qe.map(q=>a.jsx("div",{className:"p-4 text-center font-medium text-sm text-muted-foreground border-r last:border-r-0",children:q},q))}),At.map((q,se)=>a.jsx("div",{className:"grid grid-cols-7 border-b last:border-b-0",children:q.map((ye,Xe)=>{const tt=We(ye),Gt=r&&Dd(ye,r),Wt=mD(ye,e);return a.jsxs("div",{className:`min-h-[120px] p-2 border-r last:border-r-0 transition-colors cursor-pointer hover:bg-muted/50
                                            ${Wt?"":"bg-muted/10 text-muted-foreground"}
                                            ${Gt?"bg-primary/5 ring-1 ring-inset ring-primary":""}
                                            ${zm(ye)?"bg-accent/50":""}
                                        `,onClick:()=>{s(ye),R(!0)},children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:`text-sm font-medium h-7 w-7 flex items-center justify-center rounded-full
                                                ${zm(ye)?"bg-primary text-primary-foreground":""}
                                            `,children:jr(ye,"d")}),tt.length>0&&a.jsx("span",{className:"text-xs font-bold text-primary bg-primary/10 px-1.5 py-0.5 rounded-full",children:tt.length})]}),a.jsxs("div",{className:"space-y-1",children:[tt.slice(0,3).map(Dt=>{var br,Jn;const Vn=(br=Dt.match_time)!=null&&br.toDate?Dt.match_time.toDate():new Date(Dt.match_time),St=((Jn=st[Dt.game_id])==null?void 0:Jn.name)||"Unknown Game";return Yu(Vn)?a.jsxs("div",{className:"text-xs p-1 rounded bg-secondary truncate",children:[jr(Vn,"HH:mm")," - ",St]},Dt.id):null}),tt.length>3&&a.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:["+ ",tt.length-3," more"]})]})]},Xe)})},se))]})}),a.jsx(_s,{open:P,onOpenChange:R,children:a.jsxs(Qr,{className:"max-w-2xl",children:[a.jsx(Yr,{children:a.jsxs(Xr,{children:["Schedule for ",r?jr(r,"MMMM d, yyyy"):""]})}),a.jsxs("div",{className:"grid gap-6 py-4",children:[r&&We(r).length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"font-semibold text-sm text-muted-foreground uppercase",children:"Scheduled Matches"}),We(r).map(q=>{var tt,Gt;const se=(tt=q.match_time)!=null&&tt.toDate?q.match_time.toDate():new Date(q.match_time),ye=Yu(se)?jr(se,"HH:mm"):"TBD",Xe=((Gt=st[q.game_id])==null?void 0:Gt.name)||"Unknown Game";return a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(rl,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{children:ye}),a.jsx("span",{className:"font-medium",children:Xe})]}),q.venue&&a.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[a.jsx(vp,{className:"h-3 w-3"}),q.venue]})]},q.id)})]}),a.jsx("div",{className:"space-y-4 border-t pt-4",children:r&&Nx(r,CK())?a.jsx("div",{className:"p-4 bg-muted/50 rounded-lg text-center text-muted-foreground",children:"Cannot schedule new matches for past dates."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{children:"Tournament"}),a.jsxs(wt,{value:N,onValueChange:k,children:[a.jsx(vt,{children:a.jsx(_t,{placeholder:"Select tournament"})}),a.jsx(xt,{children:l.map(q=>a.jsx(Pe,{value:q.id,children:q.name},q.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{children:"Game"}),a.jsxs(wt,{value:A,onValueChange:M,disabled:!N,children:[a.jsx(vt,{children:a.jsx(_t,{placeholder:"Select game"})}),a.jsx(xt,{children:u.map(q=>a.jsx(Pe,{value:q.id,children:q.name},q.id))})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Ue,{children:[O," A"]}),a.jsxs(wt,{value:I,onValueChange:j,disabled:!A,children:[a.jsx(vt,{children:a.jsx(_t,{placeholder:`Select ${O.toLowerCase()}`})}),a.jsx(xt,{children:Q.map(q=>{const se=ne.has(q.id),ye=re.has(q.id);return a.jsxs(Pe,{value:q.id,disabled:se||ye,children:[De(q),se&&" (Already Scheduled)",ye&&" (Eliminated)"]},q.id)})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Ue,{children:[O," B"]}),a.jsxs(wt,{value:V,onValueChange:W,disabled:!A,children:[a.jsx(vt,{children:a.jsx(_t,{placeholder:`Select ${O.toLowerCase()}`})}),a.jsx(xt,{children:Q.filter(q=>q.id!==I).map(q=>{const se=ne.has(q.id),ye=re.has(q.id);return a.jsxs(Pe,{value:q.id,disabled:se||ye,children:[De(q),se&&" (Already Scheduled)",ye&&" (Eliminated)"]},q.id)})})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{children:"Time"}),a.jsx(yt,{type:"time",value:H,onChange:q=>Y(q.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{children:"Location"}),a.jsx(yt,{placeholder:"Court 1, Field A, etc.",value:U,onChange:q=>F(q.target.value)})]})]}),a.jsxs(we,{onClick:lt,disabled:$||!H||!I||!V,className:"w-full",children:[$?a.jsx(un,{className:"h-4 w-4 animate-spin mr-2"}):null,"Schedule Match"]})]})})]})]})})]})},KK=()=>{const[t,e]=m.useState([]),[n,r]=m.useState(!0),[s,i]=m.useState(null),[o,l]=m.useState(""),[c,u]=m.useState(null),{isAdmin:h,isSuperAdmin:f}=hn(),[p,g]=m.useState(!1),[T,v]=m.useState(null),[b,_]=m.useState({registrations:!1,participants:!1,tournaments:!1,games:!1,teams:!1,schedule:!1,matches:!1,leaderboard:!1,audit:!1});m.useEffect(()=>{y()},[]);const y=async()=>{try{r(!0),i(null);const k=await hq();e(k)}catch(k){console.error("Error loading users:",k),i("Failed to load users. Please try again.")}finally{r(!1)}},w=async(k,A)=>{if(!f){vl.error("Only a Super Admin can change user roles.");return}try{u(k),i(null),await fq(k,[A]),vl.success(`Role updated to ${A}`),e(M=>M.map(I=>I.id===k?{...I,roles:[A]}:I))}catch(M){console.error("Error updating user role:",M),vl.error("Failed to update user role.")}finally{u(null)}},E=k=>{var A,M,I,j,V,W,H,Y,U;v(k),_({registrations:((A=k.permissions)==null?void 0:A.registrations)??!0,participants:((M=k.permissions)==null?void 0:M.participants)??!0,tournaments:((I=k.permissions)==null?void 0:I.tournaments)??!0,games:((j=k.permissions)==null?void 0:j.games)??!0,teams:((V=k.permissions)==null?void 0:V.teams)??!0,schedule:((W=k.permissions)==null?void 0:W.schedule)??!0,matches:((H=k.permissions)==null?void 0:H.matches)??!0,leaderboard:((Y=k.permissions)==null?void 0:Y.leaderboard)??!0,audit:((U=k.permissions)==null?void 0:U.audit)??!0}),g(!0)},P=async()=>{if(T)try{r(!0),await mq(T.id,b),vl.success("Admin permissions updated successfully"),g(!1),y()}catch{vl.error("Failed to update permissions")}finally{r(!1)}},R=t.filter(k=>{var A,M,I;return((A=k.name)==null?void 0:A.toLowerCase().includes(o.toLowerCase()))||((M=k.email)==null?void 0:M.toLowerCase().includes(o.toLowerCase()))||((I=k.department)==null?void 0:I.toLowerCase().includes(o.toLowerCase()))}),S=k=>k.includes("super_admin")?"role-badge super-admin":k.includes("admin")?"role-badge admin":"role-badge player",N=k=>k.includes("super_admin")?"Super Admin":k.includes("admin")?"Admin":"Player";return h?a.jsxs("div",{className:"users-management",children:[a.jsxs("div",{className:"users-header",children:[a.jsxs("div",{className:"header-content",children:[a.jsx("h1",{children:"Users Management"}),a.jsx("p",{className:"subtitle",children:"Manage user roles and permissions"})]}),a.jsxs("div",{className:"header-stats",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-value",children:t.length}),a.jsx("span",{className:"stat-label",children:"Total Users"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-value",children:t.filter(k=>k.roles.includes("admin")||k.roles.includes("super_admin")).length}),a.jsx("span",{className:"stat-label",children:"Admins"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("span",{className:"stat-value",children:t.filter(k=>k.roles.includes("player")).length}),a.jsx("span",{className:"stat-label",children:"Players"})]})]})]}),a.jsxs("div",{className:"users-controls",children:[a.jsxs("div",{className:"search-box",children:[a.jsxs("svg",{className:"search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("path",{d:"m21 21-4.35-4.35"})]}),a.jsx("input",{type:"text",placeholder:"Search by name, email, or department...",value:o,onChange:k=>l(k.target.value),className:"search-input"})]}),a.jsxs("button",{onClick:y,className:"refresh-btn",disabled:n,children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:a.jsx("path",{d:"M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"})}),"Refresh"]})]}),n&&!t.length?a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Loading users..."})]}):a.jsx("div",{className:"table-container",children:a.jsxs("table",{className:"users-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Dept"}),a.jsx("th",{children:"Current Role"}),a.jsx("th",{children:"Change Role"}),a.jsx("th",{children:"Rights"})]})}),a.jsx("tbody",{children:R.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"no-data",children:o?"No users found matching your search.":"No users available."})}):R.map(k=>{var A;return a.jsxs("tr",{children:[a.jsx("td",{className:"user-name",children:a.jsxs("div",{className:"name-cell",children:[a.jsx("div",{className:"avatar",children:((A=k.name)==null?void 0:A.charAt(0).toUpperCase())||"U"}),a.jsx("span",{className:"truncate max-w-[120px]",children:k.name||"N/A"})]})}),a.jsx("td",{className:"truncate max-w-[150px]",children:k.email||"N/A"}),a.jsx("td",{children:k.department||"N/A"}),a.jsx("td",{children:a.jsx("span",{className:S(k.roles),children:N(k.roles)})}),a.jsx("td",{children:a.jsxs("div",{className:"role-selector",children:[a.jsxs("select",{value:k.roles.includes("super_admin")?"super_admin":k.roles.includes("admin")?"admin":"player",onChange:M=>w(k.id,M.target.value),disabled:c===k.id||!f||k.roles.includes("super_admin"),className:"role-select",children:[a.jsx("option",{value:"player",children:"Player"}),a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"super_admin",disabled:!0,children:"Super Admin"})]}),c===k.id&&a.jsx(un,{className:"h-4 w-4 animate-spin ml-2"})]})}),a.jsx("td",{children:k.roles.includes("admin")&&!k.roles.includes("super_admin")?a.jsxs(we,{variant:"outline",size:"sm",className:"h-8 gap-2 border-primary/20 hover:bg-primary/5 hover:text-primary",disabled:!f,onClick:()=>E(k),children:[a.jsx(JL,{className:"h-4 w-4"}),"Set Rights"]}):k.roles.includes("super_admin")?a.jsxs("div",{className:"flex items-center gap-2 text-amber-500 text-xs font-bold",children:[a.jsx(tV,{className:"h-4 w-4"}),"FULL ACCESS"]}):a.jsx("span",{className:"text-muted-foreground text-xs italic",children:"N/A (Player)"})})]},k.id)})})]})}),a.jsx(_s,{open:p,onOpenChange:g,children:a.jsxs(Qr,{className:"max-w-md bg-card border-none shadow-2xl",children:[a.jsxs(Yr,{children:[a.jsxs(Xr,{className:"flex items-center gap-2 text-2xl font-bold",children:[a.jsx(eV,{className:"h-6 w-6 text-primary"}),"Admin Access Rights"]}),a.jsxs("p",{className:"text-muted-foreground mt-1",children:["Set which modules ",a.jsx("span",{className:"text-foreground font-semibold",children:T==null?void 0:T.name})," can manage."]})]}),a.jsx("div",{className:"max-h-[50vh] overflow-y-auto pr-1 py-2 border-y border-border",children:a.jsx("div",{className:"grid gap-2",children:[{id:"registrations",label:"Registrations Management",desc:"Approve & reject participation"},{id:"participants",label:"Participants List",desc:"View global participants list"},{id:"tournaments",label:"Tournaments Management",desc:"Create & edit tournaments"},{id:"games",label:"Games Configuration",desc:"Manage game rules & types"},{id:"teams",label:"Teams Management",desc:"Add teams & manage players"},{id:"schedule",label:"Match Schedule",desc:"Manual match scheduling"},{id:"matches",label:"Bracket / Results",desc:"Manage bracket & submit results"},{id:"leaderboard",label:"Leaderboard Access",desc:"Recalculate & view leaderboard"},{id:"audit",label:"Audit Logs",desc:"View administrative activity trail"}].map(k=>a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-xl hover:bg-muted/50 transition-colors group",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Ue,{htmlFor:`perm-${k.id}`,className:"font-bold text-sm cursor-pointer",children:k.label}),a.jsx("p",{className:"text-[10px] text-muted-foreground",children:k.desc})]}),a.jsx(M_,{id:`perm-${k.id}`,checked:b[k.id],onCheckedChange:A=>_(M=>({...M,[k.id]:A})),className:"data-[state=checked]:bg-primary"})]},k.id))})}),a.jsxs(h_,{className:"gap-3 sm:gap-0 mt-2",children:[a.jsx(we,{variant:"ghost",onClick:()=>g(!1),className:"rounded-xl",children:"Cancel"}),a.jsx(we,{onClick:P,className:"rounded-xl px-8 bg-primary hover:bg-primary/90 shadow-lg shadow-primary/20",children:"Save Permissions"})]})]})})]}):a.jsx("div",{className:"users-management",children:a.jsxs("div",{className:"error-message",children:[a.jsx("h2",{children:"Access Denied"}),a.jsx("p",{children:"You don't have permission to access this page."})]})})},bD=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:n,className:ie("w-full caption-bottom text-sm",t),...e})}));bD.displayName="Table";const ED=m.forwardRef(({className:t,...e},n)=>a.jsx("thead",{ref:n,className:ie("[&_tr]:border-b",t),...e}));ED.displayName="TableHeader";const TD=m.forwardRef(({className:t,...e},n)=>a.jsx("tbody",{ref:n,className:ie("[&_tr:last-child]:border-0",t),...e}));TD.displayName="TableBody";const QK=m.forwardRef(({className:t,...e},n)=>a.jsx("tfoot",{ref:n,className:ie("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));QK.displayName="TableFooter";const Cx=m.forwardRef(({className:t,...e},n)=>a.jsx("tr",{ref:n,className:ie("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));Cx.displayName="TableRow";const El=m.forwardRef(({className:t,...e},n)=>a.jsx("th",{ref:n,className:ie("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));El.displayName="TableHead";const Tl=m.forwardRef(({className:t,...e},n)=>a.jsx("td",{ref:n,className:ie("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Tl.displayName="TableCell";const YK=m.forwardRef(({className:t,...e},n)=>a.jsx("caption",{ref:n,className:ie("mt-4 text-sm text-muted-foreground",t),...e}));YK.displayName="TableCaption";const XK=()=>{const[t,e]=m.useState([]),[n,r]=m.useState(!0),[s,i]=m.useState("");m.useEffect(()=>{(async()=>{try{const h=await aq(200);e(h)}catch(h){console.error("Error loading audit logs:",h)}finally{r(!1)}})()},[]);const o=t.filter(u=>{var h,f,p,g;return((h=u.admin_name)==null?void 0:h.toLowerCase().includes(s.toLowerCase()))||((f=u.action)==null?void 0:f.toLowerCase().includes(s.toLowerCase()))||((p=u.resource_type)==null?void 0:p.toLowerCase().includes(s.toLowerCase()))||((g=u.details)==null?void 0:g.toLowerCase().includes(s.toLowerCase()))}),l=u=>u.includes("CREATE")?"bg-green-500/10 text-green-600 border-green-200":u.includes("DELETE")?"bg-red-500/10 text-red-600 border-red-200":u.includes("UPDATE")?"bg-blue-500/10 text-blue-600 border-blue-200":"bg-slate-500/10 text-slate-600 border-slate-200",c=u=>{if(!u)return"N/A";const h=u.toDate?u.toDate():new Date(u);return jr(h,"MMM d, yyyy HH:mm:ss")};return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Admin Activity Logs"}),a.jsx("p",{className:"text-muted-foreground italic",children:"Track which admin changed what and when."})]}),a.jsx("div",{className:"flex items-center gap-3 w-full md:w-auto",children:a.jsxs("div",{className:"relative w-full md:w-64",children:[a.jsx(tk,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(yt,{placeholder:"Search logs...",className:"pl-9 bg-card",value:s,onChange:u=>i(u.target.value)})]})})]}),a.jsxs(Te,{className:"border-none shadow-xl bg-card/50 backdrop-blur-sm overflow-hidden",children:[a.jsx(Ge,{className:"bg-gradient-to-r from-slate-800 to-slate-900 text-white pb-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-white/10 rounded-lg",children:a.jsx(ek,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx(Ke,{children:"Activity Audit Trail"}),a.jsx("p",{className:"text-slate-300 text-sm mt-1",children:"Showing the most recent administrative actions"})]})]})}),a.jsx(Se,{className:"p-0",children:n?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[a.jsx(un,{className:"h-8 w-8 animate-spin text-primary"}),a.jsx("p",{className:"text-muted-foreground animate-pulse",children:"Retrieving secure logs..."})]}):o.length===0?a.jsx("div",{className:"text-center py-20 bg-muted/20",children:a.jsx("p",{className:"text-muted-foreground",children:"No activity logs found matching your criteria."})}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(bD,{children:[a.jsx(ED,{className:"bg-muted/50",children:a.jsxs(Cx,{children:[a.jsx(El,{className:"font-bold",children:"Timestamp"}),a.jsx(El,{className:"font-bold",children:"Admin"}),a.jsx(El,{className:"font-bold",children:"Action"}),a.jsx(El,{className:"font-bold",children:"Resource"}),a.jsx(El,{className:"font-bold",children:"Details"})]})}),a.jsx(TD,{children:o.map(u=>{var h;return a.jsxs(Cx,{className:"hover:bg-muted/30 transition-colors",children:[a.jsx(Tl,{className:"whitespace-nowrap text-xs font-mono text-muted-foreground",children:c(u.created_at)}),a.jsx(Tl,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-7 w-7 rounded-full bg-primary/10 flex items-center justify-center text-[10px] font-bold text-primary border border-primary/20",children:((h=u.admin_name)==null?void 0:h.charAt(0).toUpperCase())||"A"}),a.jsx("span",{className:"font-semibold text-sm",children:u.admin_name})]})}),a.jsx(Tl,{children:a.jsx(pt,{variant:"outline",className:l(u.action),children:u.action})}),a.jsx(Tl,{children:a.jsx(pt,{variant:"secondary",className:"text-[10px] font-bold uppercase tracking-wider",children:u.resource_type})}),a.jsx(Tl,{className:"text-sm max-w-md truncate",title:u.details,children:u.details})]},u.id)})})]})})})]})]})},ZK=()=>{const{loading:t,isAdmin:e,isSuperAdmin:n,permissions:r}=hn();if(m.useEffect(()=>{const i=document.body,o=i.style.paddingTop;return i.style.paddingTop="0",()=>{i.style.paddingTop=o}},[]),t)return a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"text-lg text-muted-foreground transition-all animate-pulse",children:"Loading secure environment..."})});if(!e)return a.jsx(Tr,{to:"/",replace:!0});const s=i=>n||((r==null?void 0:r[i])??!1);return a.jsx(b_,{children:a.jsxs("div",{className:"min-h-screen flex w-full bg-muted/30",children:[a.jsx(hG,{}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx(fG,{}),a.jsx("main",{className:"flex-1 p-6",children:a.jsxs(n0,{children:[a.jsx(kt,{path:"/",element:a.jsx(FK,{})}),a.jsx(kt,{path:"/registrations",element:s("registrations")?a.jsx(zK,{}):a.jsx(Tr,{to:"/admin"})}),a.jsx(kt,{path:"/participants",element:s("participants")?a.jsx(HK,{}):a.jsx(Tr,{to:"/admin"})}),a.jsx(kt,{path:"/tournaments",element:s("tournaments")?a.jsx(VK,{}):a.jsx(Tr,{to:"/admin"})}),a.jsx(kt,{path:"/games",element:s("games")?a.jsx(mG,{}):a.jsx(Tr,{to:"/admin"})}),a.jsx(kt,{path:"/teams",element:s("teams")?a.jsx(_G,{}):a.jsx(Tr,{to:"/admin"})}),a.jsx(kt,{path:"/schedule",element:s("schedule")?a.jsx(GK,{}):a.jsx(Tr,{to:"/admin"})}),a.jsx(kt,{path:"/matches",element:s("matches")?a.jsx(PK,{}):a.jsx(Tr,{to:"/admin"})}),a.jsx(kt,{path:"/leaderboard",element:s("leaderboard")?a.jsx(qK,{}):a.jsx(Tr,{to:"/admin"})}),a.jsx(kt,{path:"/users",element:n?a.jsx(KK,{}):a.jsx(Tr,{to:"/admin"})}),a.jsx(kt,{path:"/audit",element:s("audit")?a.jsx(XK,{}):a.jsx(Tr,{to:"/admin"})})]})})]})]})})},JK=[{title:"Dashboard",url:"/dashboard",icon:qL},{title:"Register for Games",url:"/dashboard/register",icon:Dw},{title:"My Games",url:"/dashboard/my-games",icon:KL},{title:"Notifications",url:"/dashboard/notifications",icon:Wl},{title:"My Tournaments",url:"/dashboard/tournaments",icon:It},{title:"My Matches",url:"/dashboard/matches",icon:Ow},{title:"Schedule",url:"/dashboard/schedule",icon:Es},{title:"Leaderboard",url:"/leaderboard",icon:Gj},{title:"Profile",url:"/dashboard/profile",icon:rk}];function eQ(){const t=ni(),{isMobile:e,setOpenMobile:n}=Yc(),r=()=>{e&&n(!1)};return a.jsx(E_,{collapsible:"icon",children:a.jsx(S_,{children:a.jsxs(N_,{children:[a.jsx(C_,{children:"Player Panel"}),a.jsx(j_,{children:a.jsx(k_,{children:JK.map(s=>a.jsx(I_,{children:a.jsx(A_,{asChild:!0,isActive:t.pathname===s.url,tooltip:s.title,children:a.jsxs(Mt,{to:s.url,onClick:r,children:[a.jsx(s.icon,{className:"h-4 w-4"}),a.jsx("span",{children:s.title})]})})},s.title))})})]})})})}function tQ(){const{signOut:t,user:e}=hn(),[n,r]=m.useState(""),[s,i]=m.useState(0);return m.useEffect(()=>{(async()=>{if(e!=null&&e.uid)try{const l=await ns(at(Ae,"profiles",e.uid));if(l.exists()){const c=l.data();r(c.name||e.displayName||e.email||"")}else r(e.displayName||e.email||"")}catch(l){console.error("Error fetching profile:",l),r(e.displayName||e.email||"")}})()},[e]),m.useEffect(()=>{const o=async()=>{if(e!=null&&e.uid)try{const u=(await x2(e.uid)).filter(h=>!h.is_read).length;i(u)}catch(c){console.error("Error loading notifications:",c)}};o();const l=setInterval(o,3e4);return()=>clearInterval(l)},[e]),a.jsxs("header",{className:"sticky top-0 z-50 h-16 border-b bg-card flex items-center justify-between px-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(T_,{}),a.jsxs(Mt,{to:"/dashboard",className:"flex items-center gap-2",children:[a.jsx(rk,{className:"h-6 w-6 text-primary"}),a.jsx("span",{className:"text-lg font-bold",children:"Player Dashboard"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Mt,{to:"/dashboard/notifications",children:a.jsxs(we,{variant:"ghost",size:"icon",className:"relative",children:[a.jsx(Wl,{className:"h-5 w-5"}),s>0&&a.jsx(pt,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:s>9?"9+":s})]})}),a.jsx("span",{className:"text-sm text-muted-foreground",children:n}),a.jsxs(we,{variant:"outline",size:"sm",onClick:t,children:[a.jsx(am,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})}var hh=t=>t.type==="checkbox",No=t=>t instanceof Date,nr=t=>t==null;const SD=t=>typeof t=="object";var dn=t=>!nr(t)&&!Array.isArray(t)&&SD(t)&&!No(t),ND=t=>dn(t)&&t.target?hh(t.target)?t.target.checked:t.target.value:t,nQ=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,CD=(t,e)=>t.has(nQ(e)),rQ=t=>{const e=t.constructor&&t.constructor.prototype;return dn(e)&&e.hasOwnProperty("isPrototypeOf")},O_=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function vn(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(O_&&(t instanceof Blob||r))&&(n||dn(t)))if(e=n?[]:{},!n&&!rQ(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=vn(t[s]));else return t;return e}var yg=t=>/^\w*$/.test(t),ln=t=>t===void 0,L_=t=>Array.isArray(t)?t.filter(Boolean):[],V_=t=>L_(t.replace(/["|']|\]/g,"").split(/\.|\[/)),he=(t,e,n)=>{if(!e||!dn(t))return n;const r=(yg(e)?[e]:V_(e)).reduce((s,i)=>nr(s)?s:s[i],t);return ln(r)||r===t?ln(t[e])?n:t[e]:r},Nr=t=>typeof t=="boolean",Nt=(t,e,n)=>{let r=-1;const s=yg(e)?[e]:V_(e),i=s.length,o=i-1;for(;++r<i;){const l=s[r];let c=n;if(r!==o){const u=t[l];c=dn(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const Wm={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ps={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ui={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},jD=J.createContext(null);jD.displayName="HookFormContext";const F_=()=>J.useContext(jD);var kD=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==ps.all&&(e._proxyFormState[o]=!r||ps.all),n&&(n[o]=!0),t[o]}});return s};const U_=typeof window<"u"?J.useLayoutEffect:J.useEffect;function sQ(t){const e=F_(),{control:n=e.control,disabled:r,name:s,exact:i}=t||{},[o,l]=J.useState(n._formState),c=J.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return U_(()=>n._subscribe({name:s,formState:c.current,exact:i,callback:u=>{!r&&l({...n._formState,...u})}}),[s,r,i]),J.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),J.useMemo(()=>kD(o,n,c.current,!1),[o,n])}var Fs=t=>typeof t=="string",ID=(t,e,n,r,s)=>Fs(t)?(r&&e.watch.add(t),he(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),he(n,i))):(r&&(e.watchAll=!0),n),jx=t=>nr(t)||!SD(t);function yi(t,e,n=new WeakSet){if(jx(t)||jx(e))return t===e;if(No(t)&&No(e))return t.getTime()===e.getTime();const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const i of r){const o=t[i];if(!s.includes(i))return!1;if(i!=="ref"){const l=e[i];if(No(o)&&No(l)||dn(o)&&dn(l)||Array.isArray(o)&&Array.isArray(l)?!yi(o,l,n):o!==l)return!1}}return!0}function iQ(t){const e=F_(),{control:n=e.control,name:r,defaultValue:s,disabled:i,exact:o,compute:l}=t||{},c=J.useRef(s),u=J.useRef(l),h=J.useRef(void 0);u.current=l;const f=J.useMemo(()=>n._getWatch(r,c.current),[n,r]),[p,g]=J.useState(u.current?u.current(f):f);return U_(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:T=>{if(!i){const v=ID(r,n._names,T.values||n._formValues,!1,c.current);if(u.current){const b=u.current(v);yi(b,h.current)||(g(b),h.current=b)}else g(v)}}}),[n,i,r,o]),J.useEffect(()=>n._removeUnmounted()),p}function aQ(t){const e=F_(),{name:n,disabled:r,control:s=e.control,shouldUnregister:i,defaultValue:o}=t,l=CD(s._names.array,n),c=J.useMemo(()=>he(s._formValues,n,he(s._defaultValues,n,o)),[s,n,o]),u=iQ({control:s,name:n,defaultValue:c,exact:!0}),h=sQ({control:s,name:n,exact:!0}),f=J.useRef(t),p=J.useRef(s.register(n,{...t.rules,value:u,...Nr(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const g=J.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!he(h.errors,n)},isDirty:{enumerable:!0,get:()=>!!he(h.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!he(h.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!he(h.validatingFields,n)},error:{enumerable:!0,get:()=>he(h.errors,n)}}),[h,n]),T=J.useCallback(y=>p.current.onChange({target:{value:ND(y),name:n},type:Wm.CHANGE}),[n]),v=J.useCallback(()=>p.current.onBlur({target:{value:he(s._formValues,n),name:n},type:Wm.BLUR}),[n,s._formValues]),b=J.useCallback(y=>{const w=he(s._fields,n);w&&y&&(w._f.ref={focus:()=>y.focus&&y.focus(),select:()=>y.select&&y.select(),setCustomValidity:E=>y.setCustomValidity(E),reportValidity:()=>y.reportValidity()})},[s._fields,n]),_=J.useMemo(()=>({name:n,value:u,...Nr(r)||h.disabled?{disabled:h.disabled||r}:{},onChange:T,onBlur:v,ref:b}),[n,r,h.disabled,T,v,b,u]);return J.useEffect(()=>{const y=s._options.shouldUnregister||i;s.register(n,{...f.current.rules,...Nr(f.current.disabled)?{disabled:f.current.disabled}:{}});const w=(E,P)=>{const R=he(s._fields,E);R&&R._f&&(R._f.mount=P)};if(w(n,!0),y){const E=vn(he(s._options.defaultValues,n));Nt(s._defaultValues,n,E),ln(he(s._formValues,n))&&Nt(s._formValues,n,E)}return!l&&s.register(n),()=>{(l?y&&!s._state.action:y)?s.unregister(n):w(n,!1)}},[n,s,l,i]),J.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),J.useMemo(()=>({field:_,formState:h,fieldState:g}),[_,h,g])}const oQ=t=>t.render(aQ(t));var AD=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},Xu=t=>Array.isArray(t)?t:[t],xS=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},dr=t=>dn(t)&&!Object.keys(t).length,$_=t=>t.type==="file",gs=t=>typeof t=="function",Hm=t=>{if(!O_)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},PD=t=>t.type==="select-multiple",B_=t=>t.type==="radio",lQ=t=>B_(t)||hh(t),Oy=t=>Hm(t)&&t.isConnected;function cQ(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=ln(t)?r++:t[e[r++]];return t}function uQ(t){for(const e in t)if(t.hasOwnProperty(e)&&!ln(t[e]))return!1;return!0}function fn(t,e){const n=Array.isArray(e)?e:yg(e)?[e]:V_(e),r=n.length===1?t:cQ(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(dn(r)&&dr(r)||Array.isArray(r)&&uQ(r))&&fn(t,n.slice(0,-1)),t}var RD=t=>{for(const e in t)if(gs(t[e]))return!0;return!1};function qm(t,e={}){const n=Array.isArray(t);if(dn(t)||n)for(const r in t)Array.isArray(t[r])||dn(t[r])&&!RD(t[r])?(e[r]=Array.isArray(t[r])?[]:{},qm(t[r],e[r])):nr(t[r])||(e[r]=!0);return e}function DD(t,e,n){const r=Array.isArray(t);if(dn(t)||r)for(const s in t)Array.isArray(t[s])||dn(t[s])&&!RD(t[s])?ln(e)||jx(n[s])?n[s]=Array.isArray(t[s])?qm(t[s],[]):{...qm(t[s])}:DD(t[s],nr(e)?{}:e[s],n[s]):n[s]=!yi(t[s],e[s]);return n}var wu=(t,e)=>DD(t,e,qm(e));const wS={value:!1,isValid:!1},_S={value:!0,isValid:!0};var MD=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ln(t[0].attributes.value)?ln(t[0].value)||t[0].value===""?_S:{value:t[0].value,isValid:!0}:_S:wS}return wS},OD=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>ln(t)?t:e?t===""?NaN:t&&+t:n&&Fs(t)?new Date(t):r?r(t):t;const bS={isValid:!1,value:null};var LD=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,bS):bS;function ES(t){const e=t.ref;return $_(e)?e.files:B_(e)?LD(t.refs).value:PD(e)?[...e.selectedOptions].map(({value:n})=>n):hh(e)?MD(t.refs).value:OD(ln(e.value)?t.ref.value:e.value,t)}var dQ=(t,e,n,r)=>{const s={};for(const i of t){const o=he(e,i);o&&Nt(s,i,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},Gm=t=>t instanceof RegExp,_u=t=>ln(t)?t:Gm(t)?t.source:dn(t)?Gm(t.value)?t.value.source:t.value:t,TS=t=>({isOnSubmit:!t||t===ps.onSubmit,isOnBlur:t===ps.onBlur,isOnChange:t===ps.onChange,isOnAll:t===ps.all,isOnTouch:t===ps.onTouched});const SS="AsyncFunction";var hQ=t=>!!t&&!!t.validate&&!!(gs(t.validate)&&t.validate.constructor.name===SS||dn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===SS)),fQ=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),NS=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Zu=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=he(t,s);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Zu(l,e))break}else if(dn(l)&&Zu(l,e))break}}};function CS(t,e,n){const r=he(t,n);if(r||yg(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),o=he(e,i),l=he(t,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};s.pop()}return{name:n}}var mQ=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return dr(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||ps.all))},pQ=(t,e,n)=>!t||!e||t===e||Xu(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),gQ=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,yQ=(t,e)=>!L_(he(t,e)).length&&fn(t,e),vQ=(t,e,n)=>{const r=Xu(he(t,n));return Nt(r,"root",e[n]),Nt(t,n,r),t},Mf=t=>Fs(t);function jS(t,e,n="validate"){if(Mf(t)||Array.isArray(t)&&t.every(Mf)||Nr(t)&&!t)return{type:n,message:Mf(t)?t:"",ref:e}}var yl=t=>dn(t)&&!Gm(t)?t:{value:t,message:""},kS=async(t,e,n,r,s,i)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:h,min:f,max:p,pattern:g,validate:T,name:v,valueAsNumber:b,mount:_}=t._f,y=he(n,v);if(!_||e.has(v))return{};const w=l?l[0]:o,E=I=>{s&&w.reportValidity&&(w.setCustomValidity(Nr(I)?"":I||""),w.reportValidity())},P={},R=B_(o),S=hh(o),N=R||S,k=(b||$_(o))&&ln(o.value)&&ln(y)||Hm(o)&&o.value===""||y===""||Array.isArray(y)&&!y.length,A=AD.bind(null,v,r,P),M=(I,j,V,W=ui.maxLength,H=ui.minLength)=>{const Y=I?j:V;P[v]={type:I?W:H,message:Y,ref:o,...A(I?W:H,Y)}};if(i?!Array.isArray(y)||!y.length:c&&(!N&&(k||nr(y))||Nr(y)&&!y||S&&!MD(l).isValid||R&&!LD(l).isValid)){const{value:I,message:j}=Mf(c)?{value:!!c,message:c}:yl(c);if(I&&(P[v]={type:ui.required,message:j,ref:w,...A(ui.required,j)},!r))return E(j),P}if(!k&&(!nr(f)||!nr(p))){let I,j;const V=yl(p),W=yl(f);if(!nr(y)&&!isNaN(y)){const H=o.valueAsNumber||y&&+y;nr(V.value)||(I=H>V.value),nr(W.value)||(j=H<W.value)}else{const H=o.valueAsDate||new Date(y),Y=$=>new Date(new Date().toDateString()+" "+$),U=o.type=="time",F=o.type=="week";Fs(V.value)&&y&&(I=U?Y(y)>Y(V.value):F?y>V.value:H>new Date(V.value)),Fs(W.value)&&y&&(j=U?Y(y)<Y(W.value):F?y<W.value:H<new Date(W.value))}if((I||j)&&(M(!!I,V.message,W.message,ui.max,ui.min),!r))return E(P[v].message),P}if((u||h)&&!k&&(Fs(y)||i&&Array.isArray(y))){const I=yl(u),j=yl(h),V=!nr(I.value)&&y.length>+I.value,W=!nr(j.value)&&y.length<+j.value;if((V||W)&&(M(V,I.message,j.message),!r))return E(P[v].message),P}if(g&&!k&&Fs(y)){const{value:I,message:j}=yl(g);if(Gm(I)&&!y.match(I)&&(P[v]={type:ui.pattern,message:j,ref:o,...A(ui.pattern,j)},!r))return E(j),P}if(T){if(gs(T)){const I=await T(y,n),j=jS(I,w);if(j&&(P[v]={...j,...A(ui.validate,j.message)},!r))return E(j.message),P}else if(dn(T)){let I={};for(const j in T){if(!dr(I)&&!r)break;const V=jS(await T[j](y,n),w,j);V&&(I={...V,...A(j,V.message)},E(V.message),r&&(P[v]=I))}if(!dr(I)&&(P[v]={ref:w,...I},!r))return P}}return E(!0),P};const xQ={mode:ps.onSubmit,reValidateMode:ps.onChange,shouldFocusError:!0};function wQ(t={}){let e={...xQ,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:gs(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=dn(e.defaultValues)||dn(e.values)?vn(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:vn(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...h};const p={array:xS(),state:xS()},g=e.criteriaMode===ps.all,T=L=>B=>{clearTimeout(u),u=setTimeout(L,B)},v=async L=>{if(!e.disabled&&(h.isValid||f.isValid||L)){const B=e.resolver?dr((await S()).errors):await k(r,!0);B!==n.isValid&&p.state.next({isValid:B})}},b=(L,B)=>{!e.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((L||Array.from(l.mount)).forEach(O=>{O&&(B?Nt(n.validatingFields,O,B):fn(n.validatingFields,O))}),p.state.next({validatingFields:n.validatingFields,isValidating:!dr(n.validatingFields)}))},_=(L,B=[],O,Q,X=!0,re=!0)=>{if(Q&&O&&!e.disabled){if(o.action=!0,re&&Array.isArray(he(r,L))){const ne=O(he(r,L),Q.argA,Q.argB);X&&Nt(r,L,ne)}if(re&&Array.isArray(he(n.errors,L))){const ne=O(he(n.errors,L),Q.argA,Q.argB);X&&Nt(n.errors,L,ne),yQ(n.errors,L)}if((h.touchedFields||f.touchedFields)&&re&&Array.isArray(he(n.touchedFields,L))){const ne=O(he(n.touchedFields,L),Q.argA,Q.argB);X&&Nt(n.touchedFields,L,ne)}(h.dirtyFields||f.dirtyFields)&&(n.dirtyFields=wu(s,i)),p.state.next({name:L,isDirty:M(L,B),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Nt(i,L,B)},y=(L,B)=>{Nt(n.errors,L,B),p.state.next({errors:n.errors})},w=L=>{n.errors=L,p.state.next({errors:n.errors,isValid:!1})},E=(L,B,O,Q)=>{const X=he(r,L);if(X){const re=he(i,L,ln(O)?he(s,L):O);ln(re)||Q&&Q.defaultChecked||B?Nt(i,L,B?re:ES(X._f)):V(L,re),o.mount&&v()}},P=(L,B,O,Q,X)=>{let re=!1,ne=!1;const q={name:L};if(!e.disabled){if(!O||Q){(h.isDirty||f.isDirty)&&(ne=n.isDirty,n.isDirty=q.isDirty=M(),re=ne!==q.isDirty);const se=yi(he(s,L),B);ne=!!he(n.dirtyFields,L),se?fn(n.dirtyFields,L):Nt(n.dirtyFields,L,!0),q.dirtyFields=n.dirtyFields,re=re||(h.dirtyFields||f.dirtyFields)&&ne!==!se}if(O){const se=he(n.touchedFields,L);se||(Nt(n.touchedFields,L,O),q.touchedFields=n.touchedFields,re=re||(h.touchedFields||f.touchedFields)&&se!==O)}re&&X&&p.state.next(q)}return re?q:{}},R=(L,B,O,Q)=>{const X=he(n.errors,L),re=(h.isValid||f.isValid)&&Nr(B)&&n.isValid!==B;if(e.delayError&&O?(c=T(()=>y(L,O)),c(e.delayError)):(clearTimeout(u),c=null,O?Nt(n.errors,L,O):fn(n.errors,L)),(O?!yi(X,O):X)||!dr(Q)||re){const ne={...Q,...re&&Nr(B)?{isValid:B}:{},errors:n.errors,name:L};n={...n,...ne},p.state.next(ne)}},S=async L=>{b(L,!0);const B=await e.resolver(i,e.context,dQ(L||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return b(L),B},N=async L=>{const{errors:B}=await S(L);if(L)for(const O of L){const Q=he(B,O);Q?Nt(n.errors,O,Q):fn(n.errors,O)}else n.errors=B;return B},k=async(L,B,O={valid:!0})=>{for(const Q in L){const X=L[Q];if(X){const{_f:re,...ne}=X;if(re){const q=l.array.has(re.name),se=X._f&&hQ(X._f);se&&h.validatingFields&&b([Q],!0);const ye=await kS(X,l.disabled,i,g,e.shouldUseNativeValidation&&!B,q);if(se&&h.validatingFields&&b([Q]),ye[re.name]&&(O.valid=!1,B))break;!B&&(he(ye,re.name)?q?vQ(n.errors,ye,re.name):Nt(n.errors,re.name,ye[re.name]):fn(n.errors,re.name))}!dr(ne)&&await k(ne,B,O)}}return O.valid},A=()=>{for(const L of l.unMount){const B=he(r,L);B&&(B._f.refs?B._f.refs.every(O=>!Oy(O)):!Oy(B._f.ref))&&le(L)}l.unMount=new Set},M=(L,B)=>!e.disabled&&(L&&B&&Nt(i,L,B),!yi($(),s)),I=(L,B,O)=>ID(L,l,{...o.mount?i:ln(B)?s:Fs(L)?{[L]:B}:B},O,B),j=L=>L_(he(o.mount?i:s,L,e.shouldUnregister?he(s,L,[]):[])),V=(L,B,O={})=>{const Q=he(r,L);let X=B;if(Q){const re=Q._f;re&&(!re.disabled&&Nt(i,L,OD(B,re)),X=Hm(re.ref)&&nr(B)?"":B,PD(re.ref)?[...re.ref.options].forEach(ne=>ne.selected=X.includes(ne.value)):re.refs?hh(re.ref)?re.refs.forEach(ne=>{(!ne.defaultChecked||!ne.disabled)&&(Array.isArray(X)?ne.checked=!!X.find(q=>q===ne.value):ne.checked=X===ne.value||!!X)}):re.refs.forEach(ne=>ne.checked=ne.value===X):$_(re.ref)?re.ref.value="":(re.ref.value=X,re.ref.type||p.state.next({name:L,values:vn(i)})))}(O.shouldDirty||O.shouldTouch)&&P(L,X,O.shouldTouch,O.shouldDirty,!0),O.shouldValidate&&F(L)},W=(L,B,O)=>{for(const Q in B){if(!B.hasOwnProperty(Q))return;const X=B[Q],re=L+"."+Q,ne=he(r,re);(l.array.has(L)||dn(X)||ne&&!ne._f)&&!No(X)?W(re,X,O):V(re,X,O)}},H=(L,B,O={})=>{const Q=he(r,L),X=l.array.has(L),re=vn(B);Nt(i,L,re),X?(p.array.next({name:L,values:vn(i)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&O.shouldDirty&&p.state.next({name:L,dirtyFields:wu(s,i),isDirty:M(L,re)})):Q&&!Q._f&&!nr(re)?W(L,re,O):V(L,re,O),NS(L,l)&&p.state.next({...n,name:L}),p.state.next({name:o.mount?L:void 0,values:vn(i)})},Y=async L=>{o.mount=!0;const B=L.target;let O=B.name,Q=!0;const X=he(r,O),re=se=>{Q=Number.isNaN(se)||No(se)&&isNaN(se.getTime())||yi(se,he(i,O,se))},ne=TS(e.mode),q=TS(e.reValidateMode);if(X){let se,ye;const Xe=B.type?ES(X._f):ND(L),tt=L.type===Wm.BLUR||L.type===Wm.FOCUS_OUT,Gt=!fQ(X._f)&&!e.resolver&&!he(n.errors,O)&&!X._f.deps||gQ(tt,he(n.touchedFields,O),n.isSubmitted,q,ne),Wt=NS(O,l,tt);Nt(i,O,Xe),tt?(X._f.onBlur&&X._f.onBlur(L),c&&c(0)):X._f.onChange&&X._f.onChange(L);const Dt=P(O,Xe,tt),Vn=!dr(Dt)||Wt;if(!tt&&p.state.next({name:O,type:L.type,values:vn(i)}),Gt)return(h.isValid||f.isValid)&&(e.mode==="onBlur"?tt&&v():tt||v()),Vn&&p.state.next({name:O,...Wt?{}:Dt});if(!tt&&Wt&&p.state.next({...n}),e.resolver){const{errors:St}=await S([O]);if(re(Xe),Q){const br=CS(n.errors,r,O),Jn=CS(St,r,br.name||O);se=Jn.error,O=Jn.name,ye=dr(St)}}else b([O],!0),se=(await kS(X,l.disabled,i,g,e.shouldUseNativeValidation))[O],b([O]),re(Xe),Q&&(se?ye=!1:(h.isValid||f.isValid)&&(ye=await k(r,!0)));Q&&(X._f.deps&&F(X._f.deps),R(O,ye,se,Dt))}},U=(L,B)=>{if(he(n.errors,B)&&L.focus)return L.focus(),1},F=async(L,B={})=>{let O,Q;const X=Xu(L);if(e.resolver){const re=await N(ln(L)?L:X);O=dr(re),Q=L?!X.some(ne=>he(re,ne)):O}else L?(Q=(await Promise.all(X.map(async re=>{const ne=he(r,re);return await k(ne&&ne._f?{[re]:ne}:ne)}))).every(Boolean),!(!Q&&!n.isValid)&&v()):Q=O=await k(r);return p.state.next({...!Fs(L)||(h.isValid||f.isValid)&&O!==n.isValid?{}:{name:L},...e.resolver||!L?{isValid:O}:{},errors:n.errors}),B.shouldFocus&&!Q&&Zu(r,U,L?X:l.mount),Q},$=L=>{const B={...o.mount?i:s};return ln(L)?B:Fs(L)?he(B,L):L.map(O=>he(B,O))},G=(L,B)=>({invalid:!!he((B||n).errors,L),isDirty:!!he((B||n).dirtyFields,L),error:he((B||n).errors,L),isValidating:!!he(n.validatingFields,L),isTouched:!!he((B||n).touchedFields,L)}),oe=L=>{L&&Xu(L).forEach(B=>fn(n.errors,B)),p.state.next({errors:L?n.errors:{}})},de=(L,B,O)=>{const Q=(he(r,L,{_f:{}})._f||{}).ref,X=he(n.errors,L)||{},{ref:re,message:ne,type:q,...se}=X;Nt(n.errors,L,{...se,...B,ref:Q}),p.state.next({name:L,errors:n.errors,isValid:!1}),O&&O.shouldFocus&&Q&&Q.focus&&Q.focus()},xe=(L,B)=>gs(L)?p.state.subscribe({next:O=>"values"in O&&L(I(void 0,B),O)}):I(L,B,!0),Ne=L=>p.state.subscribe({next:B=>{pQ(L.name,B.name,L.exact)&&mQ(B,L.formState||h,ht,L.reRenderRoot)&&L.callback({values:{...i},...n,...B,defaultValues:s})}}).unsubscribe,lt=L=>(o.mount=!0,f={...f,...L.formState},Ne({...L,formState:f})),le=(L,B={})=>{for(const O of L?Xu(L):l.mount)l.mount.delete(O),l.array.delete(O),B.keepValue||(fn(r,O),fn(i,O)),!B.keepError&&fn(n.errors,O),!B.keepDirty&&fn(n.dirtyFields,O),!B.keepTouched&&fn(n.touchedFields,O),!B.keepIsValidating&&fn(n.validatingFields,O),!e.shouldUnregister&&!B.keepDefaultValue&&fn(s,O);p.state.next({values:vn(i)}),p.state.next({...n,...B.keepDirty?{isDirty:M()}:{}}),!B.keepIsValid&&v()},We=({disabled:L,name:B})=>{(Nr(L)&&o.mount||L||l.disabled.has(B))&&(L?l.disabled.add(B):l.disabled.delete(B))},st=(L,B={})=>{let O=he(r,L);const Q=Nr(B.disabled)||Nr(e.disabled);return Nt(r,L,{...O||{},_f:{...O&&O._f?O._f:{ref:{name:L}},name:L,mount:!0,...B}}),l.mount.add(L),O?We({disabled:Nr(B.disabled)?B.disabled:e.disabled,name:L}):E(L,!0,B.value),{...Q?{disabled:B.disabled||e.disabled}:{},...e.progressive?{required:!!B.required,min:_u(B.min),max:_u(B.max),minLength:_u(B.minLength),maxLength:_u(B.maxLength),pattern:_u(B.pattern)}:{},name:L,onChange:Y,onBlur:Y,ref:X=>{if(X){st(L,B),O=he(r,L);const re=ln(X.value)&&X.querySelectorAll&&X.querySelectorAll("input,select,textarea")[0]||X,ne=lQ(re),q=O._f.refs||[];if(ne?q.find(se=>se===re):re===O._f.ref)return;Nt(r,L,{_f:{...O._f,...ne?{refs:[...q.filter(Oy),re,...Array.isArray(he(s,L))?[{}]:[]],ref:{type:re.type,name:L}}:{ref:re}}}),E(L,!1,void 0,re)}else O=he(r,L,{}),O._f&&(O._f.mount=!1),(e.shouldUnregister||B.shouldUnregister)&&!(CD(l.array,L)&&o.action)&&l.unMount.add(L)}}},Me=()=>e.shouldFocusError&&Zu(r,U,l.mount),Oe=L=>{Nr(L)&&(p.state.next({disabled:L}),Zu(r,(B,O)=>{const Q=he(r,O);Q&&(B.disabled=Q._f.disabled||L,Array.isArray(Q._f.refs)&&Q._f.refs.forEach(X=>{X.disabled=Q._f.disabled||L}))},0,!1))},De=(L,B)=>async O=>{let Q;O&&(O.preventDefault&&O.preventDefault(),O.persist&&O.persist());let X=vn(i);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:re,values:ne}=await S();n.errors=re,X=vn(ne)}else await k(r);if(l.disabled.size)for(const re of l.disabled)fn(X,re);if(fn(n.errors,"root"),dr(n.errors)){p.state.next({errors:{}});try{await L(X,O)}catch(re){Q=re}}else B&&await B({...n.errors},O),Me(),setTimeout(Me);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:dr(n.errors)&&!Q,submitCount:n.submitCount+1,errors:n.errors}),Q)throw Q},Tt=(L,B={})=>{he(r,L)&&(ln(B.defaultValue)?H(L,vn(he(s,L))):(H(L,B.defaultValue),Nt(s,L,vn(B.defaultValue))),B.keepTouched||fn(n.touchedFields,L),B.keepDirty||(fn(n.dirtyFields,L),n.isDirty=B.defaultValue?M(L,vn(he(s,L))):M()),B.keepError||(fn(n.errors,L),h.isValid&&v()),p.state.next({...n}))},ge=(L,B={})=>{const O=L?vn(L):s,Q=vn(O),X=dr(L),re=X?s:Q;if(B.keepDefaultValues||(s=O),!B.keepValues){if(B.keepDirtyValues){const ne=new Set([...l.mount,...Object.keys(wu(s,i))]);for(const q of Array.from(ne))he(n.dirtyFields,q)?Nt(re,q,he(i,q)):H(q,he(re,q))}else{if(O_&&ln(L))for(const ne of l.mount){const q=he(r,ne);if(q&&q._f){const se=Array.isArray(q._f.refs)?q._f.refs[0]:q._f.ref;if(Hm(se)){const ye=se.closest("form");if(ye){ye.reset();break}}}}if(B.keepFieldsRef)for(const ne of l.mount)H(ne,he(re,ne));else r={}}i=e.shouldUnregister?B.keepDefaultValues?vn(s):{}:vn(re),p.array.next({values:{...re}}),p.state.next({values:{...re}})}l={mount:B.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!B.keepIsValid||!!B.keepDirtyValues,o.watch=!!e.shouldUnregister,p.state.next({submitCount:B.keepSubmitCount?n.submitCount:0,isDirty:X?!1:B.keepDirty?n.isDirty:!!(B.keepDefaultValues&&!yi(L,s)),isSubmitted:B.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:X?{}:B.keepDirtyValues?B.keepDefaultValues&&i?wu(s,i):n.dirtyFields:B.keepDefaultValues&&L?wu(s,L):B.keepDirty?n.dirtyFields:{},touchedFields:B.keepTouched?n.touchedFields:{},errors:B.keepErrors?n.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},be=(L,B)=>ge(gs(L)?L(i):L,B),it=(L,B={})=>{const O=he(r,L),Q=O&&O._f;if(Q){const X=Q.refs?Q.refs[0]:Q.ref;X.focus&&(X.focus(),B.shouldSelect&&gs(X.select)&&X.select())}},ht=L=>{n={...n,...L}},Qe={control:{register:st,unregister:le,getFieldState:G,handleSubmit:De,setError:de,_subscribe:Ne,_runSchema:S,_focusError:Me,_getWatch:I,_getDirty:M,_setValid:v,_setFieldArray:_,_setDisabledField:We,_setErrors:w,_getFieldArray:j,_reset:ge,_resetDefaultValues:()=>gs(e.defaultValues)&&e.defaultValues().then(L=>{be(L,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:A,_disableForm:Oe,_subjects:p,_proxyFormState:h,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(L){o=L},get _defaultValues(){return s},get _names(){return l},set _names(L){l=L},get _formState(){return n},get _options(){return e},set _options(L){e={...e,...L}}},subscribe:lt,trigger:F,register:st,handleSubmit:De,watch:xe,setValue:H,getValues:$,reset:be,resetField:Tt,clearErrors:oe,unregister:le,setError:de,setFocus:it,getFieldState:G};return{...Qe,formControl:Qe}}function IS(t={}){const e=J.useRef(void 0),n=J.useRef(void 0),[r,s]=J.useState({isDirty:!1,isValidating:!1,isLoading:gs(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:gs(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!gs(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=wQ(t);e.current={...l,formState:r}}const i=e.current.control;return i._options=t,U_(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),J.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),J.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),J.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),J.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),J.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),J.useEffect(()=>{t.values&&!yi(t.values,n.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),n.current=t.values,s(o=>({...o}))):i._resetDefaultValues()},[i,t.values]),J.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=kD(r,i),e.current}const AS=(t,e,n)=>{if(t&&"reportValidity"in t){const r=he(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},VD=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?AS(r.ref,n,t):r.refs&&r.refs.forEach(s=>AS(s,n,t))}},_Q=(t,e)=>{e.shouldUseNativeValidation&&VD(t,e);const n={};for(const r in t){const s=he(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(bQ(e.names||Object.keys(t),r)){const o=Object.assign({},he(n,r));Nt(o,"root",i),Nt(n,r,o)}else Nt(n,r,i)}return n},bQ=(t,e)=>t.some(n=>n.startsWith(e+"."));var EQ=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(h){return h.errors.forEach(function(f){return t.push(f)})}),e){var c=n[o].types,u=c&&c[r.code];n[o]=AD(o,e,n,s,u?[].concat(u,r.message):r.message)}t.shift()}return n},PS=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return i.shouldUseNativeValidation&&VD({},i),{errors:{},values:n.raw?r:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:_Q(EQ(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},gt;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of i)o[l]=s[l];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(gt||(gt={}));var RS;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(RS||(RS={}));const _e=gt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),oa=t=>{switch(typeof t){case"undefined":return _e.undefined;case"string":return _e.string;case"number":return Number.isNaN(t)?_e.nan:_e.number;case"boolean":return _e.boolean;case"function":return _e.function;case"bigint":return _e.bigint;case"symbol":return _e.symbol;case"object":return Array.isArray(t)?_e.array:t===null?_e.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?_e.promise:typeof Map<"u"&&t instanceof Map?_e.map:typeof Set<"u"&&t instanceof Set?_e.set:typeof Date<"u"&&t instanceof Date?_e.date:_e.object;default:return _e.unknown}},ce=gt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Fi extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return s(this),r}static assert(e){if(!(e instanceof Fi))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,gt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Fi.create=t=>new Fi(t);const kx=(t,e)=>{let n;switch(t.code){case ce.invalid_type:t.received===_e.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ce.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,gt.jsonStringifyReplacer)}`;break;case ce.unrecognized_keys:n=`Unrecognized key(s) in object: ${gt.joinValues(t.keys,", ")}`;break;case ce.invalid_union:n="Invalid input";break;case ce.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${gt.joinValues(t.options)}`;break;case ce.invalid_enum_value:n=`Invalid enum value. Expected ${gt.joinValues(t.options)}, received '${t.received}'`;break;case ce.invalid_arguments:n="Invalid function arguments";break;case ce.invalid_return_type:n="Invalid function return type";break;case ce.invalid_date:n="Invalid date";break;case ce.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:gt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ce.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ce.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ce.custom:n="Invalid input";break;case ce.invalid_intersection_types:n="Intersection results could not be merged";break;case ce.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ce.not_finite:n="Number must be finite";break;default:n=e.defaultError,gt.assertNever(t)}return{message:n}};let TQ=kx;function SQ(){return TQ}const NQ=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let l="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...s,path:i,message:l}};function me(t,e){const n=SQ(),r=NQ({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===kx?void 0:kx].filter(s=>!!s)});t.common.issues.push(r)}class Lr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return $e;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return Lr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return $e;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const $e=Object.freeze({status:"aborted"}),Ru=t=>({status:"dirty",value:t}),ss=t=>({status:"valid",value:t}),DS=t=>t.status==="aborted",MS=t=>t.status==="dirty",Cc=t=>t.status==="valid",Km=t=>typeof Promise<"u"&&t instanceof Promise;var Ee;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ee||(Ee={}));class Ja{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const OS=(t,e)=>{if(Cc(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Fi(t.common.issues);return this._error=n,this._error}}};function Je(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??n??l.defaultError}},description:s}}class dt{get description(){return this._def.description}_getType(e){return oa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:oa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Lr,ctx:{common:e.parent.common,data:e.data,parsedType:oa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Km(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oa(e)},s=this._parseSync({data:e,path:r.path,parent:r});return OS(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oa(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return Cc(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>Cc(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oa(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Km(s)?s:Promise.resolve(s));return OS(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),l=()=>i.addIssue({code:ce.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new kc({schema:this,typeName:Be.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Fa.create(this,this._def)}nullable(){return Ic.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Qs.create(this)}promise(){return Zm.create(this,this._def)}or(e){return Ym.create([this,e],this._def)}and(e){return Xm.create(this,e,this._def)}transform(e){return new kc({...Je(this._def),schema:this,typeName:Be.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Ax({...Je(this._def),innerType:this,defaultValue:n,typeName:Be.ZodDefault})}brand(){return new QQ({typeName:Be.ZodBranded,type:this,...Je(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Px({...Je(this._def),innerType:this,catchValue:n,typeName:Be.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return z_.create(this,e)}readonly(){return Rx.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const CQ=/^c[^\s-]{8,}$/i,jQ=/^[0-9a-z]+$/,kQ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,IQ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,AQ=/^[a-z0-9_-]{21}$/i,PQ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,RQ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,DQ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,MQ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ly;const OQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,LQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,VQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,FQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,UQ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,$Q=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,FD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",BQ=new RegExp(`^${FD}$`);function UD(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function zQ(t){return new RegExp(`^${UD(t)}$`)}function WQ(t){let e=`${FD}T${UD(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function HQ(t,e){return!!((e==="v4"||!e)&&OQ.test(t)||(e==="v6"||!e)&&VQ.test(t))}function qQ(t,e){if(!PQ.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function GQ(t,e){return!!((e==="v4"||!e)&&LQ.test(t)||(e==="v6"||!e)&&FQ.test(t))}class ba extends dt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==_e.string){const i=this._getOrReturnCtx(e);return me(i,{code:ce.invalid_type,expected:_e.string,received:i.parsedType}),$e}const r=new Lr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),me(s,{code:ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),me(s,{code:ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,l=e.data.length<i.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?me(s,{code:ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&me(s,{code:ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")DQ.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"email",code:ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Ly||(Ly=new RegExp(MQ,"u")),Ly.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"emoji",code:ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")IQ.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"uuid",code:ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")AQ.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"nanoid",code:ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")CQ.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"cuid",code:ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")jQ.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"cuid2",code:ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")kQ.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"ulid",code:ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),me(s,{validation:"url",code:ce.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"regex",code:ce.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),me(s,{code:ce.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),me(s,{code:ce.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),me(s,{code:ce.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?WQ(i).test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{code:ce.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?BQ.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{code:ce.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?zQ(i).test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{code:ce.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?RQ.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"duration",code:ce.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?HQ(e.data,i.version)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"ip",code:ce.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?qQ(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"jwt",code:ce.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?GQ(e.data,i.version)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"cidr",code:ce.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?UQ.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"base64",code:ce.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?$Q.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"base64url",code:ce.invalid_string,message:i.message}),r.dirty()):gt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:ce.invalid_string,...Ee.errToObj(r)})}_addCheck(e){return new ba({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ee.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ee.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ee.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ee.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ee.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ee.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ee.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ee.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ee.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ee.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ee.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ee.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ee.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ee.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ee.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ee.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ee.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ee.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ee.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ee.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ee.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ee.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ee.errToObj(n)})}nonempty(e){return this.min(1,Ee.errToObj(e))}trim(){return new ba({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ba({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ba({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ba.create=t=>new ba({checks:[],typeName:Be.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Je(t)});function KQ(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class Md extends dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==_e.number){const i=this._getOrReturnCtx(e);return me(i,{code:ce.invalid_type,expected:_e.number,received:i.parsedType}),$e}let r;const s=new Lr;for(const i of this._def.checks)i.kind==="int"?gt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{code:ce.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),me(r,{code:ce.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),me(r,{code:ce.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?KQ(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),me(r,{code:ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),me(r,{code:ce.not_finite,message:i.message}),s.dirty()):gt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ee.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ee.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ee.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ee.toString(n))}setLimit(e,n,r,s){return new Md({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ee.toString(s)}]})}_addCheck(e){return new Md({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ee.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ee.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ee.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ee.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ee.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ee.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&gt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Md.create=t=>new Md({checks:[],typeName:Be.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Je(t)});class Od extends dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==_e.bigint)return this._getInvalidInput(e);let r;const s=new Lr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),me(r,{code:ce.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),me(r,{code:ce.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),me(r,{code:ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):gt.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return me(n,{code:ce.invalid_type,expected:_e.bigint,received:n.parsedType}),$e}gte(e,n){return this.setLimit("min",e,!0,Ee.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ee.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ee.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ee.toString(n))}setLimit(e,n,r,s){return new Od({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ee.toString(s)}]})}_addCheck(e){return new Od({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ee.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ee.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Od.create=t=>new Od({checks:[],typeName:Be.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Je(t)});class LS extends dt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==_e.boolean){const r=this._getOrReturnCtx(e);return me(r,{code:ce.invalid_type,expected:_e.boolean,received:r.parsedType}),$e}return ss(e.data)}}LS.create=t=>new LS({typeName:Be.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Je(t)});class Qm extends dt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==_e.date){const i=this._getOrReturnCtx(e);return me(i,{code:ce.invalid_type,expected:_e.date,received:i.parsedType}),$e}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return me(i,{code:ce.invalid_date}),$e}const r=new Lr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),me(s,{code:ce.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),me(s,{code:ce.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):gt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Qm({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ee.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ee.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Qm.create=t=>new Qm({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Be.ZodDate,...Je(t)});class VS extends dt{_parse(e){if(this._getType(e)!==_e.symbol){const r=this._getOrReturnCtx(e);return me(r,{code:ce.invalid_type,expected:_e.symbol,received:r.parsedType}),$e}return ss(e.data)}}VS.create=t=>new VS({typeName:Be.ZodSymbol,...Je(t)});class FS extends dt{_parse(e){if(this._getType(e)!==_e.undefined){const r=this._getOrReturnCtx(e);return me(r,{code:ce.invalid_type,expected:_e.undefined,received:r.parsedType}),$e}return ss(e.data)}}FS.create=t=>new FS({typeName:Be.ZodUndefined,...Je(t)});class US extends dt{_parse(e){if(this._getType(e)!==_e.null){const r=this._getOrReturnCtx(e);return me(r,{code:ce.invalid_type,expected:_e.null,received:r.parsedType}),$e}return ss(e.data)}}US.create=t=>new US({typeName:Be.ZodNull,...Je(t)});class $S extends dt{constructor(){super(...arguments),this._any=!0}_parse(e){return ss(e.data)}}$S.create=t=>new $S({typeName:Be.ZodAny,...Je(t)});class BS extends dt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ss(e.data)}}BS.create=t=>new BS({typeName:Be.ZodUnknown,...Je(t)});class eo extends dt{_parse(e){const n=this._getOrReturnCtx(e);return me(n,{code:ce.invalid_type,expected:_e.never,received:n.parsedType}),$e}}eo.create=t=>new eo({typeName:Be.ZodNever,...Je(t)});class zS extends dt{_parse(e){if(this._getType(e)!==_e.undefined){const r=this._getOrReturnCtx(e);return me(r,{code:ce.invalid_type,expected:_e.void,received:r.parsedType}),$e}return ss(e.data)}}zS.create=t=>new zS({typeName:Be.ZodVoid,...Je(t)});class Qs extends dt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==_e.array)return me(n,{code:ce.invalid_type,expected:_e.array,received:n.parsedType}),$e;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,l=n.data.length<s.exactLength.value;(o||l)&&(me(n,{code:o?ce.too_big:ce.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(me(n,{code:ce.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(me(n,{code:ce.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>s.type._parseAsync(new Ja(n,o,n.path,l)))).then(o=>Lr.mergeArray(r,o));const i=[...n.data].map((o,l)=>s.type._parseSync(new Ja(n,o,n.path,l)));return Lr.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Qs({...this._def,minLength:{value:e,message:Ee.toString(n)}})}max(e,n){return new Qs({...this._def,maxLength:{value:e,message:Ee.toString(n)}})}length(e,n){return new Qs({...this._def,exactLength:{value:e,message:Ee.toString(n)}})}nonempty(e){return this.min(1,e)}}Qs.create=(t,e)=>new Qs({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Be.ZodArray,...Je(e)});function Sl(t){if(t instanceof nn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Fa.create(Sl(r))}return new nn({...t._def,shape:()=>e})}else return t instanceof Qs?new Qs({...t._def,type:Sl(t.element)}):t instanceof Fa?Fa.create(Sl(t.unwrap())):t instanceof Ic?Ic.create(Sl(t.unwrap())):t instanceof Zo?Zo.create(t.items.map(e=>Sl(e))):t}class nn extends dt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=gt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==_e.object){const u=this._getOrReturnCtx(e);return me(u,{code:ce.invalid_type,expected:_e.object,received:u.parsedType}),$e}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof eo&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const h=i[u],f=s.data[u];c.push({key:{status:"valid",value:u},value:h._parse(new Ja(s,f,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof eo){const u=this._def.unknownKeys;if(u==="passthrough")for(const h of l)c.push({key:{status:"valid",value:h},value:{status:"valid",value:s.data[h]}});else if(u==="strict")l.length>0&&(me(s,{code:ce.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const h of l){const f=s.data[h];c.push({key:{status:"valid",value:h},value:u._parse(new Ja(s,f,s.path,h)),alwaysSet:h in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const h of c){const f=await h.key,p=await h.value;u.push({key:f,value:p,alwaysSet:h.alwaysSet})}return u}).then(u=>Lr.mergeObjectSync(r,u)):Lr.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Ee.errToObj,new nn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Ee.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new nn({...this._def,unknownKeys:"strip"})}passthrough(){return new nn({...this._def,unknownKeys:"passthrough"})}extend(e){return new nn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new nn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Be.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new nn({...this._def,catchall:e})}pick(e){const n={};for(const r of gt.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new nn({...this._def,shape:()=>n})}omit(e){const n={};for(const r of gt.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new nn({...this._def,shape:()=>n})}deepPartial(){return Sl(this)}partial(e){const n={};for(const r of gt.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new nn({...this._def,shape:()=>n})}required(e){const n={};for(const r of gt.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Fa;)i=i._def.innerType;n[r]=i}return new nn({...this._def,shape:()=>n})}keyof(){return $D(gt.objectKeys(this.shape))}}nn.create=(t,e)=>new nn({shape:()=>t,unknownKeys:"strip",catchall:eo.create(),typeName:Be.ZodObject,...Je(e)});nn.strictCreate=(t,e)=>new nn({shape:()=>t,unknownKeys:"strict",catchall:eo.create(),typeName:Be.ZodObject,...Je(e)});nn.lazycreate=(t,e)=>new nn({shape:t,unknownKeys:"strip",catchall:eo.create(),typeName:Be.ZodObject,...Je(e)});class Ym extends dt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new Fi(l.ctx.common.issues));return me(n,{code:ce.invalid_union,unionErrors:o}),$e}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},h=c._parseSync({data:n.data,path:n.path,parent:u});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new Fi(c));return me(n,{code:ce.invalid_union,unionErrors:l}),$e}}get options(){return this._def.options}}Ym.create=(t,e)=>new Ym({options:t,typeName:Be.ZodUnion,...Je(e)});function Ix(t,e){const n=oa(t),r=oa(e);if(t===e)return{valid:!0,data:t};if(n===_e.object&&r===_e.object){const s=gt.objectKeys(e),i=gt.objectKeys(t).filter(l=>s.indexOf(l)!==-1),o={...t,...e};for(const l of i){const c=Ix(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===_e.array&&r===_e.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],l=e[i],c=Ix(o,l);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===_e.date&&r===_e.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Xm extends dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(DS(i)||DS(o))return $e;const l=Ix(i.value,o.value);return l.valid?((MS(i)||MS(o))&&n.dirty(),{status:n.value,value:l.data}):(me(r,{code:ce.invalid_intersection_types}),$e)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Xm.create=(t,e,n)=>new Xm({left:t,right:e,typeName:Be.ZodIntersection,...Je(n)});class Zo extends dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==_e.array)return me(r,{code:ce.invalid_type,expected:_e.array,received:r.parsedType}),$e;if(r.data.length<this._def.items.length)return me(r,{code:ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),$e;!this._def.rest&&r.data.length>this._def.items.length&&(me(r,{code:ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Ja(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Lr.mergeArray(n,o)):Lr.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Zo({...this._def,rest:e})}}Zo.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Zo({items:t,typeName:Be.ZodTuple,rest:null,...Je(e)})};class WS extends dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==_e.map)return me(r,{code:ce.invalid_type,expected:_e.map,received:r.parsedType}),$e;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([l,c],u)=>({key:s._parse(new Ja(r,l,r.path,[u,"key"])),value:i._parse(new Ja(r,c,r.path,[u,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,h=await c.value;if(u.status==="aborted"||h.status==="aborted")return $e;(u.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(u.value,h.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,h=c.value;if(u.status==="aborted"||h.status==="aborted")return $e;(u.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(u.value,h.value)}return{status:n.value,value:l}}}}WS.create=(t,e,n)=>new WS({valueType:e,keyType:t,typeName:Be.ZodMap,...Je(n)});class Ld extends dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==_e.set)return me(r,{code:ce.invalid_type,expected:_e.set,received:r.parsedType}),$e;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(me(r,{code:ce.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(me(r,{code:ce.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const h of c){if(h.status==="aborted")return $e;h.status==="dirty"&&n.dirty(),u.add(h.value)}return{status:n.value,value:u}}const l=[...r.data.values()].map((c,u)=>i._parse(new Ja(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,n){return new Ld({...this._def,minSize:{value:e,message:Ee.toString(n)}})}max(e,n){return new Ld({...this._def,maxSize:{value:e,message:Ee.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ld.create=(t,e)=>new Ld({valueType:t,minSize:null,maxSize:null,typeName:Be.ZodSet,...Je(e)});class HS extends dt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}HS.create=(t,e)=>new HS({getter:t,typeName:Be.ZodLazy,...Je(e)});class qS extends dt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return me(n,{received:n.data,code:ce.invalid_literal,expected:this._def.value}),$e}return{status:"valid",value:e.data}}get value(){return this._def.value}}qS.create=(t,e)=>new qS({value:t,typeName:Be.ZodLiteral,...Je(e)});function $D(t,e){return new jc({values:t,typeName:Be.ZodEnum,...Je(e)})}class jc extends dt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return me(n,{expected:gt.joinValues(r),received:n.parsedType,code:ce.invalid_type}),$e}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return me(n,{received:n.data,code:ce.invalid_enum_value,options:r}),$e}return ss(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return jc.create(e,{...this._def,...n})}exclude(e,n=this._def){return jc.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}jc.create=$D;class GS extends dt{_parse(e){const n=gt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==_e.string&&r.parsedType!==_e.number){const s=gt.objectValues(n);return me(r,{expected:gt.joinValues(s),received:r.parsedType,code:ce.invalid_type}),$e}if(this._cache||(this._cache=new Set(gt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=gt.objectValues(n);return me(r,{received:r.data,code:ce.invalid_enum_value,options:s}),$e}return ss(e.data)}get enum(){return this._def.values}}GS.create=(t,e)=>new GS({values:t,typeName:Be.ZodNativeEnum,...Je(e)});class Zm extends dt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==_e.promise&&n.common.async===!1)return me(n,{code:ce.invalid_type,expected:_e.promise,received:n.parsedType}),$e;const r=n.parsedType===_e.promise?n.data:Promise.resolve(n.data);return ss(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Zm.create=(t,e)=>new Zm({type:t,typeName:Be.ZodPromise,...Je(e)});class kc extends dt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Be.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{me(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return $e;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?$e:c.status==="dirty"||n.value==="dirty"?Ru(c.value):c});{if(n.value==="aborted")return $e;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?$e:l.status==="dirty"||n.value==="dirty"?Ru(l.value):l}}if(s.type==="refinement"){const o=l=>{const c=s.refinement(l,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?$e:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?$e:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Cc(o))return $e;const l=s.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Cc(o)?Promise.resolve(s.transform(o.value,i)).then(l=>({status:n.value,value:l})):$e);gt.assertNever(s)}}kc.create=(t,e,n)=>new kc({schema:t,typeName:Be.ZodEffects,effect:e,...Je(n)});kc.createWithPreprocess=(t,e,n)=>new kc({schema:e,effect:{type:"preprocess",transform:t},typeName:Be.ZodEffects,...Je(n)});class Fa extends dt{_parse(e){return this._getType(e)===_e.undefined?ss(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Fa.create=(t,e)=>new Fa({innerType:t,typeName:Be.ZodOptional,...Je(e)});class Ic extends dt{_parse(e){return this._getType(e)===_e.null?ss(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ic.create=(t,e)=>new Ic({innerType:t,typeName:Be.ZodNullable,...Je(e)});class Ax extends dt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===_e.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Ax.create=(t,e)=>new Ax({innerType:t,typeName:Be.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Je(e)});class Px extends dt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Km(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Fi(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Fi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Px.create=(t,e)=>new Px({innerType:t,typeName:Be.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Je(e)});class KS extends dt{_parse(e){if(this._getType(e)!==_e.nan){const r=this._getOrReturnCtx(e);return me(r,{code:ce.invalid_type,expected:_e.nan,received:r.parsedType}),$e}return{status:"valid",value:e.data}}}KS.create=t=>new KS({typeName:Be.ZodNaN,...Je(t)});class QQ extends dt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class z_ extends dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?$e:i.status==="dirty"?(n.dirty(),Ru(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?$e:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new z_({in:e,out:n,typeName:Be.ZodPipeline})}}class Rx extends dt{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Cc(s)&&(s.value=Object.freeze(s.value)),s);return Km(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}Rx.create=(t,e)=>new Rx({innerType:t,typeName:Be.ZodReadonly,...Je(e)});nn.lazycreate;var Be;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Be||(Be={}));const Zl=ba.create;eo.create;Qs.create;const BD=nn.create;nn.strictCreate;Ym.create;Xm.create;Zo.create;const YQ=jc.create;Zm.create;Fa.create;Ic.create;const XQ=BD({name:Zl().min(1,"Name is required"),phone:Zl().min(10,"Phone number must be at least 10 digits"),gender:YQ(["male","female","other"],{required_error:"Please select a gender"}),department:Zl().min(1,"Department is required")}),ZQ=BD({currentPassword:Zl().optional(),newPassword:Zl().min(6,"New password must be at least 6 characters"),confirmPassword:Zl().min(6,"Please confirm your new password")}).refine(t=>t.newPassword===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),JQ=()=>{const{user:t}=hn(),{toast:e}=Zn(),[n,r]=m.useState(!0),[s,i]=m.useState(!1),[o,l]=m.useState(!1),[c,u]=m.useState(!1),{setIsLoading:h}=ii(),f=IS({resolver:PS(XQ)}),p=IS({resolver:PS(ZQ)});m.useEffect(()=>{if(t){h(!0),g();const b=t.providerData.some(_=>_.providerId==="password");u(b)}},[t,h]);const g=async()=>{try{const b=await ns(at(Ae,"profiles",t.uid));if(b.exists()){const _=b.data();f.reset({name:_.name||"",phone:_.phone||"",gender:_.gender||"",department:_.department||""})}}catch(b){console.error("Error fetching profile:",b),e({title:"Error",description:"Failed to load profile data",variant:"destructive"})}finally{r(!1),h(!1)}},T=async b=>{if(t){i(!0),h(!0);try{await qi(at(Ae,"profiles",t.uid),{...b,updated_at:qe()}),e({title:"Success",description:"Profile updated successfully"})}catch(_){console.error("Error updating profile:",_),e({title:"Error",description:"Failed to update profile",variant:"destructive"})}finally{i(!1),h(!1)}}},v=async b=>{if(!(!t||!t.email)){l(!0),h(!0);try{if(c){if(!b.currentPassword){p.setError("currentPassword",{message:"Current password is required"}),l(!1);return}const _=Wa.credential(t.email,b.currentPassword);await y$(t,_),await b$(t,b.newPassword)}else{const _=Wa.credential(t.email,b.newPassword);await g$(t,_),u(!0)}e({title:"Success",description:c?"Password changed successfully":"Password set successfully"}),p.reset()}catch(_){console.error("Error changing password:",_);let y="Failed to change password";_.code==="auth/wrong-password"?y="Current password is incorrect":_.code==="auth/weak-password"?y="New password is too weak":_.code==="auth/requires-recent-login"&&(y="Please login again to change password"),e({title:"Error",description:y,variant:"destructive"})}finally{l(!1),h(!1)}}};return n?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx(un,{className:"h-8 w-8 animate-spin"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Profile Management"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your account settings and preferences"})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs(Te,{children:[a.jsxs(Ge,{children:[a.jsx(Ke,{children:"Profile Information"}),a.jsx(wr,{children:"Update your personal details"})]}),a.jsx(Se,{children:a.jsxs("form",{onSubmit:f.handleSubmit(T),className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"name",children:"Full Name"}),a.jsx(yt,{id:"name",...f.register("name"),placeholder:"Enter your full name"}),f.formState.errors.name&&a.jsx("p",{className:"text-sm text-red-500",children:f.formState.errors.name.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"phone",children:"Mobile Number"}),a.jsx(yt,{id:"phone",...f.register("phone"),placeholder:"Enter your mobile number"}),f.formState.errors.phone&&a.jsx("p",{className:"text-sm text-red-500",children:f.formState.errors.phone.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"gender",children:"Gender"}),a.jsx(oQ,{name:"gender",control:f.control,render:({field:b})=>a.jsxs(wt,{value:b.value,onValueChange:b.onChange,children:[a.jsx(vt,{children:a.jsx(_t,{placeholder:"Select gender"})}),a.jsxs(xt,{children:[a.jsx(Pe,{value:"male",children:"Male"}),a.jsx(Pe,{value:"female",children:"Female"}),a.jsx(Pe,{value:"other",children:"Other"})]})]})}),f.formState.errors.gender&&a.jsx("p",{className:"text-sm text-red-500",children:f.formState.errors.gender.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"department",children:"Department"}),a.jsx(yt,{id:"department",...f.register("department"),placeholder:"Enter your department"}),f.formState.errors.department&&a.jsx("p",{className:"text-sm text-red-500",children:f.formState.errors.department.message})]}),a.jsxs(we,{type:"submit",disabled:s,children:[s&&a.jsx(un,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Profile"]})]})})]}),a.jsxs(Te,{children:[a.jsxs(Ge,{children:[a.jsx(Ke,{children:c?"Change Password":"Set Password"}),a.jsx(wr,{children:c?"Update your account password":"Create a password for your account to login with email"})]}),a.jsx(Se,{children:a.jsxs("form",{onSubmit:p.handleSubmit(v),className:"space-y-4",children:[c&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"currentPassword",children:"Current Password"}),a.jsx(yt,{id:"currentPassword",type:"password",...p.register("currentPassword"),placeholder:"Enter current password"}),p.formState.errors.currentPassword&&a.jsx("p",{className:"text-sm text-red-500",children:p.formState.errors.currentPassword.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"newPassword",children:"New Password"}),a.jsx(yt,{id:"newPassword",type:"password",...p.register("newPassword"),placeholder:"Enter new password"}),p.formState.errors.newPassword&&a.jsx("p",{className:"text-sm text-red-500",children:p.formState.errors.newPassword.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ue,{htmlFor:"confirmPassword",children:"Confirm New Password"}),a.jsx(yt,{id:"confirmPassword",type:"password",...p.register("confirmPassword"),placeholder:"Confirm new password"}),p.formState.errors.confirmPassword&&a.jsx("p",{className:"text-sm text-red-500",children:p.formState.errors.confirmPassword.message})]}),a.jsxs(we,{type:"submit",disabled:o,children:[o&&a.jsx(un,{className:"mr-2 h-4 w-4 animate-spin"}),c?"Change Password":"Set Password"]})]})})]})]})]})},eY=nl("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),kr=m.forwardRef(({className:t,variant:e,...n},r)=>a.jsx("div",{ref:r,role:"alert",className:ie(eY({variant:e}),t),...n}));kr.displayName="Alert";const zD=m.forwardRef(({className:t,...e},n)=>a.jsx("h5",{ref:n,className:ie("mb-1 font-medium leading-none tracking-tight",t),...e}));zD.displayName="AlertTitle";const Ir=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ie("text-sm [&_p]:leading-relaxed",t),...e}));Ir.displayName="AlertDescription";const tY=()=>{const{user:t}=hn(),{toast:e}=Zn(),[n,r]=m.useState([]),[s,i]=m.useState(""),[o,l]=m.useState([]),[c,u]=m.useState([]),[h,f]=m.useState(!1),[p,g]=m.useState(!1),T=w=>{if(!w)return"N/A";let E;if(typeof w=="object"&&w.toDate?E=w.toDate():typeof w=="object"&&w.seconds?E=new Date(w.seconds*1e3):E=new Date(w),isNaN(E.getTime()))return"N/A";const P=String(E.getDate()).padStart(2,"0"),R=String(E.getMonth()+1).padStart(2,"0"),S=E.getFullYear();return`${P}/${R}/${S}`};m.useEffect(()=>{(async()=>{f(!0);try{const E=await _r();console.log("Fetched tournaments:",E);const P=E.filter(R=>R.is_active);console.log("Available tournaments:",P),r(P),P.length===0&&e({title:"No Tournaments",description:"No active tournaments found. Please ensure tournaments are created in admin panel."})}catch(E){console.error("Error loading tournaments:",E),e({title:"Error",description:"Failed to load tournaments",variant:"destructive"})}finally{f(!1)}})()},[e]),m.useEffect(()=>{if(!s||!t){l([]),u([]);return}(async()=>{g(!0);try{const[E,P]=await Promise.all([Rn(s),Ks({tournamentId:s})]);console.log("Fetched games for tournament:",s,E),l(E),console.log("User registrations:",P);const R=P.filter(S=>S.user_id===t.uid);console.log("User's registrations:",R),u(R),E.length===0&&e({title:"No Games",description:"No games found in this tournament. Please ensure games are created in admin panel."})}catch(E){console.error("Error loading games:",E),e({title:"Error",description:"Failed to load games",variant:"destructive"})}finally{g(!1)}})()},[s,t,e]);const v=w=>c.find(E=>E.game_id===w),b=async w=>{if(!(!t||!s))try{await xG({tournament_id:s,game_id:w,user_id:t.uid}),e({title:"Registration Submitted",description:"Your registration has been submitted for admin approval."});const P=(await Ks({tournamentId:s})).filter(R=>R.user_id===t.uid);u(P)}catch(E){console.error("Error registering:",E),e({title:"Registration Failed",description:E.message||"Failed to submit registration",variant:"destructive"})}},_=w=>{switch(w){case"SINGLE":return"Single Player";case"PAIR":return"Pair (2 Players)";case"TEAM":return"Team";default:return w}},y=n.find(w=>w.id===s);return h?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx(un,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Register for Games"}),a.jsx("p",{className:"text-muted-foreground",children:"Browse available tournaments and register for games"})]}),a.jsxs(Te,{children:[a.jsxs(Ge,{children:[a.jsx(Ke,{children:"Select Tournament"}),a.jsx(wr,{children:"Choose a tournament to view available games"})]}),a.jsx(Se,{children:n.length===0?a.jsx(kr,{children:a.jsx(Ir,{children:"No active tournaments available at the moment. Please check back later."})}):a.jsxs(wt,{value:s,onValueChange:i,children:[a.jsx(vt,{className:"w-full",children:a.jsx(_t,{placeholder:"Select a tournament"})}),a.jsx(xt,{children:n.map(w=>a.jsx(Pe,{value:w.id,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(It,{className:"h-4 w-4"}),a.jsx("span",{children:w.name}),a.jsx(pt,{variant:"outline",className:"ml-2",children:w.status})]})},w.id))})]})})]}),y&&a.jsxs(Te,{className:"border-primary/20 bg-primary/5",children:[a.jsx(Ge,{children:a.jsxs(Ke,{className:"flex items-center gap-2",children:[a.jsx(It,{className:"h-5 w-5"}),y.name]})}),a.jsxs(Se,{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Es,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground",children:"Start Date:"}),a.jsx("span",{className:"font-medium",children:T(y.start_date)})]}),y.end_date&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Es,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground",children:"End Date:"}),a.jsx("span",{className:"font-medium",children:T(y.end_date)})]})]})]}),s&&a.jsxs(Te,{children:[a.jsxs(Ge,{children:[a.jsx(Ke,{children:"Available Games"}),a.jsxs(wr,{children:[o.length," game",o.length!==1?"s":""," available for registration"]})]}),a.jsx(Se,{children:p?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(un,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):o.length===0?a.jsx(kr,{children:a.jsx(Ir,{children:"No active games available in this tournament yet."})}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o.map(w=>{const E=v(w.id),P=!!E,R=(E==null?void 0:E.status)==="pending",S=(E==null?void 0:E.status)==="approved",N=(E==null?void 0:E.status)==="rejected";return a.jsxs(Te,{className:"relative overflow-hidden",children:[a.jsx(Ge,{children:a.jsxs(Ke,{className:"text-lg flex items-start justify-between",children:[a.jsx("span",{children:w.name}),S&&a.jsx(Rw,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),R&&a.jsx(rl,{className:"h-5 w-5 text-yellow-500 flex-shrink-0"}),N&&a.jsx(Jj,{className:"h-5 w-5 text-red-500 flex-shrink-0"})]})}),a.jsxs(Se,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Ai,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground",children:"Type:"}),a.jsx(pt,{variant:"secondary",children:_(w.game_type)})]}),w.game_type!=="SINGLE"&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Ai,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground",children:"Players per team:"}),a.jsx("span",{className:"font-medium",children:w.players_per_team})]})]}),P&&a.jsx("div",{className:"pt-2",children:a.jsxs(pt,{variant:S?"default":R?"secondary":"destructive",className:"w-full justify-center py-2",children:[S&&" Approved",R&&" Pending Approval",N&&" Rejected"]})}),!P&&a.jsx(we,{className:"w-full",onClick:()=>b(w.id),children:"Register Now"}),N&&a.jsx(we,{className:"w-full",variant:"outline",onClick:()=>b(w.id),children:"Register Again"})]})]},w.id)})})})]}),!s&&n.length>0&&a.jsx(kr,{children:a.jsx(Ir,{children:"Please select a tournament above to view available games."})})]})},nY=()=>{const{user:t}=hn(),{toast:e}=Zn(),[n,r]=m.useState([]),[s,i]=m.useState([]),[o,l]=m.useState([]),[c,u]=m.useState([]),[h,f]=m.useState([]),[p,g]=m.useState(!0),T=S=>{if(!S)return"N/A";let N;if(typeof S=="object"&&S.toDate?N=S.toDate():typeof S=="object"&&S.seconds?N=new Date(S.seconds*1e3):N=new Date(S),isNaN(N.getTime()))return"N/A";const k=String(N.getDate()).padStart(2,"0"),A=String(N.getMonth()+1).padStart(2,"0"),M=N.getFullYear();return`${k}/${A}/${M}`};m.useEffect(()=>{(async()=>{if(t){g(!0);try{const[N,k,A,M,I]=await Promise.all([Ks({}),Rn(),_r(),Ki({userId:t.uid}),rs()]),j=N.filter(V=>V.user_id===t.uid);r(j),l(k),u(A),i(M),f(I)}catch(N){console.error("Error loading data:",N),e({title:"Error",description:"Failed to load your games",variant:"destructive"})}finally{g(!1)}}})()},[t,e]);const v=S=>o.find(N=>N.id===S),b=S=>c.find(N=>N.id===S),_=S=>{var N;return((N=h.find(k=>k.id===S))==null?void 0:N.name)||"Unknown User"},y=S=>{switch(S){case"SINGLE":return"Single Player";case"PAIR":return"Pair (2 Players)";case"TEAM":return"Team";default:return S}},w=n.filter(S=>S.status==="pending"),E=n.filter(S=>S.status==="approved"),P=n.filter(S=>S.status==="rejected"),R=({registration:S})=>{const N=v(S.game_id),k=b(S.tournament_id);return!N||!k?null:a.jsxs(Te,{children:[a.jsx(Ge,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(Ke,{className:"text-lg",children:N.name}),a.jsxs(wr,{className:"flex items-center gap-2",children:[a.jsx(It,{className:"h-4 w-4"}),k.name]})]}),a.jsx("div",{className:"flex flex-col items-end gap-2",children:a.jsxs(pt,{variant:S.status==="approved"?"default":S.status==="pending"?"secondary":"destructive",children:[S.status==="approved"&&a.jsx(Rw,{className:"h-3 w-3 mr-1"}),S.status==="pending"&&a.jsx(rl,{className:"h-3 w-3 mr-1"}),S.status==="rejected"&&a.jsx(Jj,{className:"h-3 w-3 mr-1"}),S.status]})})]})}),a.jsxs(Se,{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ai,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground",children:"Type:"})]}),a.jsx(pt,{variant:"outline",children:y(N.game_type)}),k.start_date&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Es,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground",children:"Start:"})]}),a.jsx("span",{className:"font-medium",children:T(k.start_date)})]})]}),S.notes&&a.jsx("div",{className:"pt-3 border-t",children:a.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.jsx("span",{className:"font-medium",children:"Note:"})," ",S.notes]})}),a.jsxs("div",{className:"pt-2 text-xs text-muted-foreground",children:["Registered on ",T(S.created_at)]})]})]})};return p?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx(un,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"My Games"}),a.jsx("p",{className:"text-muted-foreground",children:"View and manage your game registrations"})]}),n.length===0&&s.length===0?a.jsx(Te,{children:a.jsx(Se,{className:"pt-6",children:a.jsx(kr,{children:a.jsxs(Ir,{className:"text-center",children:["You haven't registered for any games or joined any teams yet. Visit the ",a.jsx("strong",{children:"Register for Games"})," page to get started!"]})})})}):a.jsxs(__,{defaultValue:"all",className:"space-y-4",children:[a.jsxs(mg,{className:"grid w-full grid-cols-5 max-w-3xl",children:[a.jsxs(Hr,{value:"all",children:["All (",n.length,")"]}),a.jsxs(Hr,{value:"teams",children:["Teams (",s.length,")"]}),a.jsxs(Hr,{value:"pending",children:["Pending (",w.length,")"]}),a.jsxs(Hr,{value:"approved",children:["Approved (",E.length,")"]}),a.jsxs(Hr,{value:"rejected",children:["Rejected (",P.length,")"]})]}),a.jsx(qr,{value:"all",className:"space-y-4",children:n.length===0?a.jsx(kr,{children:a.jsx(Ir,{children:"No registrations found."})}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(S=>a.jsx(R,{registration:S},S.id))})}),a.jsx(qr,{value:"teams",className:"space-y-4",children:s.length===0?a.jsx(kr,{children:a.jsx(Ir,{children:"You are not part of any teams yet."})}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.map(S=>{const N=b(S.tournament_id),k=v(S.game_id),A=S.player_ids.filter(M=>M!==(t==null?void 0:t.uid)).map(M=>_(M));return a.jsxs(Te,{children:[a.jsx(Ge,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(Ke,{className:"text-lg",children:S.name}),a.jsxs(wr,{className:"flex items-center gap-2",children:[a.jsx(It,{className:"h-4 w-4"}),N==null?void 0:N.name," - ",k==null?void 0:k.name]})]}),a.jsx(pt,{variant:S.status==="confirmed"?"default":"secondary",children:S.status})]})}),a.jsxs(Se,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground min-w-[60px]",children:[a.jsx(Ai,{className:"h-4 w-4"}),a.jsx("span",{children:"Type:"})]}),a.jsx("span",{className:"font-medium",children:S.is_pair?"Pair":"Team"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(sV,{className:"h-4 w-4"}),a.jsx("span",{children:"Teammates:"})]}),A.length>0?a.jsx("div",{className:"flex flex-wrap gap-2 pl-6",children:A.map((M,I)=>a.jsx(pt,{variant:"outline",className:"bg-muted/50",children:M},I))}):a.jsx("span",{className:"text-sm text-muted-foreground pl-6 italic",children:"No other members yet"})]})]})]},S.id)})})}),a.jsx(qr,{value:"pending",className:"space-y-4",children:w.length===0?a.jsx(kr,{children:a.jsx(Ir,{children:"No pending registrations. All your registrations have been processed."})}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:w.map(S=>a.jsx(R,{registration:S},S.id))})}),a.jsx(qr,{value:"approved",className:"space-y-4",children:E.length===0?a.jsx(kr,{children:a.jsx(Ir,{children:"No approved registrations yet. Check back later!"})}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:E.map(S=>a.jsx(R,{registration:S},S.id))})}),a.jsx(qr,{value:"rejected",className:"space-y-4",children:P.length===0?a.jsx(kr,{children:a.jsx(Ir,{children:"No rejected registrations. Great!"})}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:P.map(S=>a.jsx(R,{registration:S},S.id))})})]})]})},rY=()=>{const{user:t}=hn(),[e,n]=m.useState([]),[r,s]=m.useState([]),[i,o]=m.useState([]),[l,c]=m.useState([]),[u,h]=m.useState([]),[f,p]=m.useState(!0);m.useEffect(()=>{(async()=>{if(t){p(!0);try{const[E,P,R,S]=await Promise.all([Ki({userId:t.uid}),g_(t.uid),Rn(),rs()]),N=E.map(V=>V.id),k=await y_(N),M=[...P,...k].map(V=>V.id),[I,j]=await Promise.all([v_(M),Qc({})]);n(I),s(j),o(E),c(R),h(S)}catch(E){console.error("Error loading matches:",E)}finally{p(!1)}}})()},[t]);const g=m.useMemo(()=>u.reduce((w,E)=>(w[E.id]=E,w),{}),[u]);m.useMemo(()=>[],[]);const T=w=>{var P,R;if(!w)return"TBD";const E=r.find(S=>S.id===w);return E?E.type==="USER"&&E.user_id?((P=g[E.user_id])==null?void 0:P.name)||"User":"Team "+(((R=E.team_id)==null?void 0:R.slice(-4))||""):"Participant"},v=w=>{var E;return((E=l.find(P=>P.id===w))==null?void 0:E.name)||"Unknown Game"},b=w=>{if(!w)return"TBD";const E=w!=null&&w.toDate?w.toDate():new Date(w);return Yu(E)?jr(E,"PPp"):"TBD"},_=e.filter(w=>w.status.toUpperCase()!=="COMPLETED"&&w.status.toUpperCase()!=="CANCELLED"),y=e.filter(w=>w.status.toUpperCase()==="COMPLETED");return f?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(un,{className:"h-8 w-8 animate-spin text-primary"})}):a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"My Matches"}),a.jsx("p",{className:"text-muted-foreground",children:"Detailed view of your scheduled and past matches"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("section",{children:[a.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2 mb-4",children:[a.jsx(Es,{className:"h-5 w-5 text-primary"}),"Upcoming Matches"]}),_.length>0?a.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:_.map(w=>a.jsxs(Te,{className:"hover:shadow-md transition-shadow",children:[a.jsx(Ge,{className:"pb-2",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx(pt,{variant:"outline",className:"mb-2",children:v(w.game_id)}),a.jsx(Ke,{className:"text-lg",children:w.round_name})]}),a.jsx(pt,{children:w.status})]})}),a.jsxs(Se,{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm py-2 border-y",children:[a.jsx("div",{className:"text-center flex-1 font-semibold",children:T(w.participant_a_id)}),a.jsx("div",{className:"px-3 text-muted-foreground font-bold italic",children:"VS"}),a.jsx("div",{className:"text-center flex-1 font-semibold",children:T(w.participant_b_id)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-muted-foreground pt-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rl,{className:"h-4 w-4"}),a.jsx("span",{children:b(w.match_time)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(vp,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:w.venue||"Venue TBD"})]})]})]})]},w.id))}):a.jsx(Te,{className:"bg-muted/50 border-dashed",children:a.jsx(Se,{className:"py-8 text-center text-muted-foreground",children:"No upcoming matches scheduled yet."})})]}),a.jsxs("section",{children:[a.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2 mb-4",children:[a.jsx(It,{className:"h-5 w-5 text-yellow-500"}),"Match History"]}),y.length>0?a.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:y.map(w=>a.jsxs(Te,{className:"bg-muted/20",children:[a.jsx(Ge,{className:"pb-2",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx(pt,{variant:"secondary",className:"mb-2",children:v(w.game_id)}),a.jsx(Ke,{className:"text-lg opacity-80",children:w.round_name})]}),a.jsx(pt,{variant:"outline",className:"bg-green-100 text-green-700 border-green-200",children:"Completed"})]})}),a.jsxs(Se,{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm py-2 border-y",children:[a.jsxs("div",{className:`text-center flex-1 ${w.winner_participant_id===w.participant_a_id?"font-bold text-green-600":"opacity-60"}`,children:[T(w.participant_a_id),w.winner_participant_id===w.participant_a_id&&" "]}),a.jsx("div",{className:"px-3 text-muted-foreground font-bold italic",children:"VS"}),a.jsxs("div",{className:`text-center flex-1 ${w.winner_participant_id===w.participant_b_id?"font-bold text-green-600":"opacity-60"}`,children:[T(w.participant_b_id),w.winner_participant_id===w.participant_b_id&&" "]})]}),a.jsxs("div",{className:"text-center text-xs text-muted-foreground",children:["Match played on ",b(w.match_time)]})]})]},w.id))}):a.jsx(Te,{className:"bg-muted/50 border-dashed",children:a.jsx(Se,{className:"py-8 text-center text-muted-foreground",children:"No past match history available."})})]})]})]})},sY=()=>{const{user:t}=hn(),{toast:e}=Zn(),[n,r]=m.useState([]),[s,i]=m.useState(!0),o=f=>{if(!f)return"N/A";let p;if(typeof f=="object"&&f.toDate?p=f.toDate():typeof f=="object"&&f.seconds?p=new Date(f.seconds*1e3):p=new Date(f),isNaN(p.getTime()))return"N/A";const g=String(p.getDate()).padStart(2,"0"),T=String(p.getMonth()+1).padStart(2,"0"),v=p.getFullYear();return`${g}/${T}/${v}`};m.useEffect(()=>{(async()=>{if(t){i(!0);try{const[p,g]=await Promise.all([Ks({userId:t.uid}),_r()]),T=Array.from(new Set(p.map(b=>b.tournament_id))),v=g.filter(b=>T.includes(b.id)).map(b=>{const _=p.find(y=>y.tournament_id===b.id);return{...b,userStatus:_==null?void 0:_.status}});r(v)}catch(p){console.error("Error loading tournaments:",p),e({title:"Error",description:"Failed to load your tournaments",variant:"destructive"})}finally{i(!1)}}})()},[t,e]);const l=n.filter(f=>f.status==="active"||f.is_active),c=n.filter(f=>f.userStatus==="pending"),u=n.filter(f=>f.status==="completed"),h=({tournament:f})=>{var p,g;return a.jsxs(Te,{className:"overflow-hidden hover:shadow-md transition-shadow",children:[a.jsx("div",{className:ie("h-2 w-full",f.status==="active"?"bg-green-500":f.status==="completed"?"bg-gray-500":"bg-blue-500")}),a.jsx(Ge,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(Ke,{className:"text-xl",children:f.name}),a.jsxs(wr,{className:"flex items-center gap-2",children:[a.jsx(It,{className:"h-4 w-4 text-primary"}),"Tournament"]})]}),a.jsx(pt,{variant:f.status==="active"?"default":"secondary",children:((p=f.status)==null?void 0:p.toUpperCase())||(f.is_active?"ACTIVE":"INACTIVE")})]})}),a.jsxs(Se,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Es,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Start Date"}),a.jsx("p",{className:"font-medium",children:o(f.start_date)})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Es,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"End Date"}),a.jsx("p",{className:"font-medium",children:o(f.end_date)})]})]})]}),a.jsx("div",{className:"pt-4 border-t flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Registration:"}),a.jsx(pt,{variant:f.userStatus==="approved"?"outline":"secondary",className:ie(f.userStatus==="approved"?"text-green-600 border-green-600":f.userStatus==="pending"?"text-amber-600 border-amber-600":"text-red-600 border-red-600"),children:((g=f.userStatus)==null?void 0:g.toUpperCase())||"N/A"})]})})]})]})};return s?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx(un,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"My Tournaments"}),a.jsx("p",{className:"text-muted-foreground",children:"Tournaments you have registered for or participated in"})]}),n.length===0?a.jsx(Te,{children:a.jsx(Se,{className:"pt-6",children:a.jsx(kr,{children:a.jsxs(Ir,{className:"text-center py-8",children:[a.jsx("p",{className:"mb-4",children:"You haven't joined any tournaments yet."}),a.jsx("a",{href:"/dashboard/register",className:"text-primary font-medium hover:underline",children:"Browse available tournaments to join!"})]})})})}):a.jsxs(__,{defaultValue:"all",className:"space-y-4",children:[a.jsxs(mg,{children:[a.jsxs(Hr,{value:"all",children:["All (",n.length,")"]}),a.jsxs(Hr,{value:"active",children:["Active (",l.length,")"]}),a.jsxs(Hr,{value:"pending",children:["Pending (",c.length,")"]}),a.jsxs(Hr,{value:"past",children:["Past (",u.length,")"]})]}),a.jsx(qr,{value:"all",className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map(f=>a.jsx(h,{tournament:f},f.id))}),a.jsx(qr,{value:"active",className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:l.length>0?l.map(f=>a.jsx(h,{tournament:f},f.id)):a.jsx("div",{className:"col-span-full py-12 text-center text-muted-foreground",children:"No active tournaments currently."})}),a.jsx(qr,{value:"pending",className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:c.length>0?c.map(f=>a.jsx(h,{tournament:f},f.id)):a.jsx("div",{className:"col-span-full py-12 text-center text-muted-foreground",children:"No pending registrations."})}),a.jsx(qr,{value:"past",className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:u.length>0?u.map(f=>a.jsx(h,{tournament:f},f.id)):a.jsx("div",{className:"col-span-full py-12 text-center text-muted-foreground",children:"No past tournaments found."})})]})]})},iY=()=>{const{user:t}=hn(),{toast:e}=Zn(),[n,r]=m.useState([]),[s,i]=m.useState(!0),o=async()=>{if(t){i(!0);try{const p=await x2(t.uid);r(p)}catch(p){console.error("Error loading notifications:",p),e({title:"Error",description:"Failed to load notifications",variant:"destructive"})}finally{i(!1)}}};m.useEffect(()=>{o()},[t]);const l=async p=>{try{await uS(p),r(n.map(g=>g.id===p?{...g,is_read:!0}:g)),e({title:"Marked as read",description:"Notification marked as read"})}catch(g){e({title:"Error",description:g.message||"Failed to mark notification as read",variant:"destructive"})}},c=async()=>{try{const p=n.filter(g=>!g.is_read);await Promise.all(p.map(g=>uS(g.id))),r(n.map(g=>({...g,is_read:!0}))),e({title:"All marked as read",description:"All notifications marked as read"})}catch(p){e({title:"Error",description:p.message||"Failed to mark all notifications as read",variant:"destructive"})}},u=p=>{if(!p)return"";let g;if(p!=null&&p.toDate?g=p.toDate():p!=null&&p.seconds?g=new Date(p.seconds*1e3):g=new Date(p),isNaN(g.getTime()))return"Invalid Date";const v=new Date().getTime()-g.getTime(),b=Math.floor(v/6e4),_=Math.floor(v/36e5),y=Math.floor(v/864e5);if(b<1)return"Just now";if(b<60)return`${b} minute${b!==1?"s":""} ago`;if(_<24)return`${_} hour${_!==1?"s":""} ago`;if(y<7)return`${y} day${y!==1?"s":""} ago`;const w=String(g.getDate()).padStart(2,"0"),E=String(g.getMonth()+1).padStart(2,"0"),P=g.getFullYear();return`${w}/${E}/${P}`},h=p=>{switch(p){case"registration":return a.jsx(Rw,{className:"h-5 w-5 text-green-500"});case"match":return a.jsx(Wl,{className:"h-5 w-5 text-blue-500"});default:return a.jsx(Wl,{className:"h-5 w-5 text-muted-foreground"})}},f=n.filter(p=>!p.is_read).length;return s?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx(un,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Notifications"}),a.jsx("p",{className:"text-muted-foreground",children:f>0?`You have ${f} unread notification${f!==1?"s":""}`:"You're all caught up!"})]}),f>0&&a.jsx(we,{variant:"outline",onClick:c,children:"Mark All as Read"})]}),a.jsxs(Te,{children:[a.jsxs(Ge,{children:[a.jsxs(Ke,{className:"flex items-center gap-2",children:[a.jsx(Wl,{className:"h-5 w-5"}),"All Notifications"]}),a.jsx(wr,{children:"Your recent notifications and updates"})]}),a.jsx(Se,{children:n.length===0?a.jsx(kr,{children:a.jsx(Ir,{children:"No notifications yet. You'll receive notifications when your game registrations are approved or when matches are scheduled."})}):a.jsx("div",{className:"space-y-3",children:n.map(p=>a.jsx(Te,{className:`${p.is_read?"opacity-60 hover:opacity-80":"border-primary/50 bg-primary/5"} transition-opacity`,children:a.jsx(Se,{className:"pt-6",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:p.is_read?a.jsx(QL,{className:"h-5 w-5 text-muted-foreground"}):h(p.type)}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-1 flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-semibold",children:p.title}),!p.is_read&&a.jsx(pt,{variant:"default",className:"h-5 px-1.5 text-xs",children:"New"})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:p.message})]}),!p.is_read&&a.jsx(we,{variant:"ghost",size:"sm",onClick:()=>l(p.id),children:"Mark as read"})]}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[a.jsx("span",{children:u(p.created_at)}),p.type&&a.jsx(pt,{variant:"outline",className:"text-xs",children:p.type})]})]})]})})},p.id))})})]})]})},aY=()=>{const{user:t}=hn(),e=Uc(),[n,r]=m.useState(new Date),[s,i]=m.useState(null),[o,l]=m.useState([]),[c,u]=m.useState(!0),[h,f]=m.useState(!1),[p,g]=m.useState([]);m.useState([]);const[T,v]=m.useState([]),[b,_]=m.useState([]);m.useEffect(()=>{(async()=>{if(t){u(!0);try{const[j,V,W]=await Promise.all([Rn(),rs(),Ki({userId:t.uid})]);g(j),v(V),_(W);const H=W.map(oe=>oe.id),[Y,U]=await Promise.all([g_(t.uid),y_(H)]),$=[...Y,...U].map(oe=>oe.id),G=await v_($);l(G)}catch(j){console.error("Error loading schedule:",j)}finally{u(!1)}}})()},[t]);const y=I=>o.filter(j=>{var W;if(!j.match_time)return!1;const V=(W=j.match_time)!=null&&W.toDate?j.match_time.toDate():new Date(j.match_time);return Dd(V,I)}),w=I=>{var j;return((j=p.find(V=>V.id===I))==null?void 0:j.name)||"Unknown Game"},E=()=>{f(!1),e("/dashboard/matches")},P=uD(n),R=lD(P),S=Xo(P),N=dD(R),k=cD({start:S,end:N}),A=[];for(let I=0;I<k.length;I+=7)A.push(k.slice(I,I+7));const M=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"My Schedule"}),a.jsx("p",{className:"text-muted-foreground",children:"View and track your upcoming matches"})]})}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-2xl font-semibold",children:jr(n,"MMMM yyyy")}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(we,{variant:"outline",size:"icon",onClick:()=>r(pD(n,1)),children:a.jsx(Yj,{className:"h-4 w-4"})}),a.jsx(we,{variant:"outline",size:"icon",onClick:()=>r(D_(n,1)),children:a.jsx(Xj,{className:"h-4 w-4"})})]})]}),a.jsx(Te,{children:a.jsxs(Se,{className:"p-0",children:[a.jsx("div",{className:"grid grid-cols-7 border-b",children:M.map(I=>a.jsx("div",{className:"p-4 text-center font-medium text-sm text-muted-foreground border-r last:border-r-0",children:I},I))}),A.map((I,j)=>a.jsx("div",{className:"grid grid-cols-7 border-b last:border-b-0",children:I.map((V,W)=>{const H=y(V),Y=s&&Dd(V,s),U=mD(V,n);return a.jsxs("div",{className:`min-h-[120px] p-2 border-r last:border-r-0 transition-colors cursor-pointer hover:bg-muted/50
                                            ${U?"":"bg-muted/10 text-muted-foreground"}
                                            ${Y?"bg-primary/5 ring-1 ring-inset ring-primary":""}
                                            ${zm(V)?"bg-accent/50":""}
                                        `,onClick:()=>{H.length>0&&(i(V),f(!0))},children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:`text-sm font-medium h-7 w-7 flex items-center justify-center rounded-full
                                                ${zm(V)?"bg-primary text-primary-foreground":""}
                                            `,children:jr(V,"d")}),H.length>0&&a.jsx("span",{className:"text-xs font-bold text-primary bg-primary/10 px-1.5 py-0.5 rounded-full",children:H.length})]}),a.jsxs("div",{className:"space-y-1",children:[H.slice(0,3).map(F=>{var G;const $=(G=F.match_time)!=null&&G.toDate?F.match_time.toDate():new Date(F.match_time);return a.jsxs("div",{className:"text-xs p-1 rounded bg-secondary truncate",children:[jr($,"HH:mm")," - ",w(F.game_id)]},F.id)}),H.length>3&&a.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:["+ ",H.length-3," more"]})]})]},W)})},j))]})}),a.jsx(_s,{open:h,onOpenChange:f,children:a.jsxs(Qr,{className:"max-w-md",children:[a.jsx(Yr,{children:a.jsxs(Xr,{children:["Matches on ",s?jr(s,"MMMM d, yyyy"):""]})}),a.jsx("div",{className:"space-y-4 py-4",children:s&&y(s).map(I=>{var V;const j=(V=I.match_time)!=null&&V.toDate?I.match_time.toDate():new Date(I.match_time);return a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors cursor-pointer",onClick:E,children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(It,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"font-semibold",children:w(I.game_id)})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(rl,{className:"h-3 w-3"}),a.jsx("span",{children:jr(j,"HH:mm")})]}),I.venue&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(vp,{className:"h-3 w-3"}),a.jsx("span",{children:I.venue})]})]}),a.jsx(we,{variant:"ghost",size:"sm",children:"View Details"})]},I.id)})})]})})]})},WD=m.createContext(void 0),oY=({children:t})=>{const{user:e}=hn(),[n,r]=m.useState(typeof window<"u"?Notification.permission:"default"),[s,i]=m.useState(!0),o=async()=>{if(!("Notification"in window)){console.log("This browser does not support desktop notification");return}const l=await Notification.requestPermission();r(l)};return m.useEffect(()=>{if(!e)return;const l=Sn(Xn(Ae,"notifications"),Qt("user_id","==",e.uid),si("created_at","desc"),$P(5)),c=B7(l,u=>{if(s){i(!1);return}u.docChanges().forEach(h=>{if(h.type==="added"){const f=h.doc.data();if(vl.success(f.title,{description:f.message}),Notification.permission==="granted"){const p=new Notification(f.title,{body:f.message,icon:"/pwa-192x192.png",badge:"/favicon.ico",tag:h.doc.id});p.onclick=()=>{window.focus(),p.close()}}}})});return()=>c()},[e,s]),a.jsx(WD.Provider,{value:{permission:n,requestPermission:o},children:t})},lY=()=>{const t=m.useContext(WD);if(t===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return t},cY=()=>{const{user:t,loading:e,isAdmin:n}=hn(),{setIsLoading:r}=ii(),[s,i]=m.useState(""),[o,l]=m.useState({activeTournaments:0,matchesPlayed:0,wins:0,upcomingMatches:0}),[c,u]=m.useState([]),[h,f]=m.useState([]),p=v=>{if(!v)return"N/A";let b;if(typeof v=="object"&&v.toDate?b=v.toDate():b=new Date(v),isNaN(b.getTime()))return"N/A";const _=String(b.getDate()).padStart(2,"0"),y=String(b.getMonth()+1).padStart(2,"0"),w=b.getFullYear();return`${_}/${y}/${w}`};if(m.useEffect(()=>{const v=async()=>{if(t)try{const b=await ns(at(Ae,"profiles",t.uid));if(b.exists()){const F=b.data();i(F.name||t.displayName||t.email||"User")}else i(t.displayName||t.email||"User");const _=await Ks({userId:t.uid}),y=Array.from(new Set(_.map(F=>F.tournament_id))),w=y.map(F=>ns(at(Ae,"tournaments",F))),P=(await Promise.all(w)).map(F=>{if(!F.exists())return null;const $={id:F.id,...F.data()},G=_.find(oe=>oe.tournament_id===F.id);return{...$,userRegistrationStatus:G==null?void 0:G.status}}).filter(F=>F!==null&&(F.is_active||F.status==="active"||F.status==="draft"));u(P);const R=await g_(t.uid),N=(await Ki({userId:t.uid})).map(F=>F.id),k=await y_(N),M=[...R,...k].map(F=>F.id);let I=await v_(M);I.sort((F,$)=>{const G=new Date(F.match_time||F.updated_at||F.created_at||0).getTime();return new Date($.match_time||$.updated_at||$.created_at||0).getTime()-G});const j=I.slice(0,5).map(F=>({title:`Match: ${F.round_name}`,description:`Status: ${F.status}`,date:p(F.match_time||F.created_at)}));if(j.length===0&&_.length>0){const F=[..._].sort(($,G)=>{const oe=new Date($.created_at||0).getTime();return new Date(G.created_at||0).getTime()-oe});j.push(...F.slice(0,5).map($=>({title:"Joined Tournament",description:"Registration Approved",date:p($.created_at)})))}f(j);const V=I.filter(F=>F.status==="COMPLETED").length,W=I.filter(F=>F.status==="SCHEDULED").length,H=I.filter(F=>F.status==="COMPLETED").map(F=>F.id),U=(await E2(H)).filter(F=>M.includes(F.winner_participant_id)).length;l({activeTournaments:y.length,matchesPlayed:V,wins:U,upcomingMatches:W})}catch(b){console.error("Error fetching dashboard data:",b),i(t.displayName||t.email||"User")}finally{r(!1)}};t&&(r(!0),v())},[t,r]),m.useEffect(()=>{const v=document.body,b=v.style.paddingTop;return v.style.paddingTop="0",()=>{v.style.paddingTop=b}},[]),e)return a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"text-lg text-muted-foreground",children:"Loading..."})});if(!t)return a.jsx(Tr,{to:"/login",replace:!0});if(n)return a.jsx(Tr,{to:"/admin",replace:!0});const{permission:g,requestPermission:T}=lY();return a.jsx(b_,{children:a.jsxs("div",{className:"min-h-screen flex w-full bg-muted/30",children:[a.jsx(eQ,{}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx(tQ,{}),a.jsx("main",{className:"flex-1 p-6",children:a.jsxs(n0,{children:[a.jsx(kt,{index:!0,element:a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Player Dashboard"}),a.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",s,"!"]})]}),g==="default"&&a.jsxs(kr,{className:"max-w-md bg-primary/10 border-primary/20 animate-in fade-in slide-in-from-top-4",children:[a.jsx(Wl,{className:"h-4 w-4 text-primary"}),a.jsx(zD,{className:"text-sm font-bold",children:"Stay Updated!"}),a.jsxs(Ir,{className:"text-xs flex flex-col gap-2",children:["Enable push notifications to get alerts for match schedules and results.",a.jsx(we,{size:"sm",onClick:T,className:"w-fit bg-primary hover:bg-primary/90 text-white text-[10px] h-7 px-3",children:"Enable Notifications"})]})]})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4 mb-8",children:[a.jsxs(Te,{children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ke,{className:"text-sm font-medium",children:"Tournaments Joined"}),a.jsx(It,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Se,{children:[a.jsx("div",{className:"text-2xl font-bold",children:o.activeTournaments}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Active tournaments"})]})]}),a.jsxs(Te,{children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ke,{className:"text-sm font-medium",children:"Matches Played"}),a.jsx(Ow,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Se,{children:[a.jsx("div",{className:"text-2xl font-bold",children:o.matchesPlayed}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Total matches"})]})]}),a.jsxs(Te,{children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ke,{className:"text-sm font-medium",children:"Wins"}),a.jsx(It,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Se,{children:[a.jsx("div",{className:"text-2xl font-bold",children:o.wins}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Victories achieved"})]})]}),a.jsx(Mt,{to:"/dashboard/schedule",children:a.jsxs(Te,{className:"hover:bg-muted/50 cursor-pointer transition-colors",children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Ke,{className:"text-sm font-medium",children:"Upcoming Matches"}),a.jsx(Es,{className:"h-4 w-4 text-primary"})]}),a.jsxs(Se,{children:[a.jsx("div",{className:"text-2xl font-bold",children:o.upcomingMatches}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Scheduled matches"})]})]})})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs(Te,{children:[a.jsxs(Ge,{children:[a.jsx(Ke,{children:"Recent Activity"}),a.jsx(wr,{children:"Your latest tournament activities"})]}),a.jsx(Se,{children:h.length>0?a.jsx("div",{className:"space-y-4",children:h.map((v,b)=>a.jsxs("div",{className:"flex items-center justify-between border-b last:border-0 pb-2 last:pb-0",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:v.title}),a.jsx("p",{className:"text-xs text-muted-foreground",children:v.description})]}),a.jsx("span",{className:"text-xs text-muted-foreground",children:v.date})]},b))}):a.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No recent activity yet. Join a tournament to get started!"})})]}),a.jsxs(Te,{children:[a.jsxs(Ge,{children:[a.jsx(Ke,{children:"Current Tournaments"}),a.jsx(wr,{children:"Tournaments you're participating in"})]}),a.jsx(Se,{children:c.length>0?a.jsx("div",{className:"space-y-4",children:c.map(v=>a.jsxs("div",{className:"flex items-center justify-between border-b last:border-0 pb-2 last:pb-0",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:v.name}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx(pt,{variant:v.status==="active"||v.is_active?"default":"secondary",className:"text-[10px] h-5",children:v.status||(v.is_active?"active":"inactive")}),v.userRegistrationStatus&&a.jsx(pt,{variant:v.userRegistrationStatus==="approved"?"outline":"secondary",className:ie("text-[10px] h-5",v.userRegistrationStatus==="approved"?"text-green-600 border-green-600":"text-amber-600 border-amber-600"),children:v.userRegistrationStatus.toUpperCase()})]})]}),a.jsx("div",{className:"text-right",children:a.jsx("p",{className:"text-xs text-muted-foreground",children:p(v.start_date)})})]},v.id))}):a.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No active tournaments. Browse available tournaments to join!"})})]})]})]})}),a.jsx(kt,{path:"register",element:a.jsx(tY,{})}),a.jsx(kt,{path:"my-games",element:a.jsx(nY,{})}),a.jsx(kt,{path:"matches",element:a.jsx(rY,{})}),a.jsx(kt,{path:"schedule",element:a.jsx(aY,{})}),a.jsx(kt,{path:"notifications",element:a.jsx(iY,{})}),a.jsx(kt,{path:"tournaments",element:a.jsx(sY,{})}),a.jsx(kt,{path:"profile",element:a.jsx(JQ,{})})]})})]})]})})},uY=()=>{const t=ni();return m.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),a.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},dY=()=>{const[t,e]=m.useState(null),[n,r]=m.useState(!1),[s,i]=m.useState(!1);m.useEffect(()=>{const c=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;i(c);const u=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone,h=p=>{p.preventDefault(),e(p);const g=sessionStorage.getItem("pwa-prompt-dismissed");!u&&!g&&r(!0)},f=()=>{console.log("PWA was installed"),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",h),window.addEventListener("appinstalled",f),()=>{window.removeEventListener("beforeinstallprompt",h),window.removeEventListener("appinstalled",f)}},[]);const o=async()=>{if(!t)return;await t.prompt();const{outcome:c}=await t.userChoice;c==="accepted"&&r(!1),e(null)},l=()=>{r(!1),sessionStorage.setItem("pwa-prompt-dismissed","true")};return n?a.jsx(_s,{open:n,onOpenChange:r,children:a.jsxs(Qr,{className:"sm:max-w-md bg-white/95 dark:bg-slate-900/95 backdrop-blur-xl border-primary/20 shadow-2xl animate-in fade-in zoom-in duration-300",children:[a.jsxs(Yr,{className:"flex flex-col items-center gap-4 py-4",children:[a.jsxs("div",{className:"w-24 h-24 bg-gradient-to-br from-primary/20 to-secondary/20 rounded-3xl flex items-center justify-center p-4 relative group",children:[a.jsx("div",{className:"absolute inset-0 bg-primary/10 rounded-3xl blur-xl group-hover:blur-2xl transition-all duration-300"}),a.jsx(WL,{className:"w-12 h-12 text-primary relative z-10 animate-bounce"})]}),a.jsx(Xr,{className:"text-3xl font-bold text-center bg-clip-text text-transparent bg-gradient-to-r from-primary via-secondary to-accent",children:"SportsBracket"}),a.jsx(Lm,{className:"text-center text-lg font-medium text-foreground/80",children:"Take your sports management to the next level"}),a.jsx("p",{className:"text-center text-sm text-muted-foreground max-w-[280px]",children:"Install our app for a faster, smoother experience and offline access to your brackets."})]}),s&&a.jsxs("div",{className:"bg-primary/5 border border-primary/10 p-4 rounded-xl text-sm mb-4",children:[a.jsx("p",{className:"font-semibold text-primary mb-2 flex items-center gap-2",children:"How to install on iOS:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-muted-foreground",children:[a.jsxs("li",{children:["Tap the ",a.jsx("span",{className:"font-bold text-foreground",children:"Share"})," button below"]}),a.jsxs("li",{children:["Scroll down to find ",a.jsx("span",{className:"font-bold text-foreground",children:'"Add to Home Screen"'})]}),a.jsxs("li",{children:["Tap ",a.jsx("span",{className:"font-bold text-foreground",children:"Add"})," in the top right"]})]})]}),a.jsxs(h_,{className:"flex flex-col sm:flex-row gap-3 mt-4",children:[a.jsx(we,{variant:"ghost",onClick:l,className:"flex-1 hover:bg-secondary/10 text-muted-foreground font-medium",children:"Maybe later"}),!s&&a.jsx(we,{onClick:o,className:"flex-1 bg-gradient-to-r from-primary to-secondary hover:opacity-90 text-white font-bold shadow-lg shadow-primary/25 transform active:scale-95 transition-all",children:"Install Now"})]})]})}):null},hY=new C6,fY=()=>a.jsx(k6,{client:hY,children:a.jsxs(Yw,{children:[a.jsx($V,{}),a.jsx(xF,{}),a.jsx(dY,{}),a.jsx(T3,{basename:"/",future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:a.jsx(iW,{children:a.jsx(Q7,{children:a.jsx(oY,{children:a.jsxs(n0,{children:[a.jsx(kt,{path:"/",element:a.jsx(sW,{})}),a.jsx(kt,{path:"/leaderboard",element:a.jsx(Dq,{})}),a.jsx(kt,{path:"/schedule",element:a.jsx(Oq,{})}),a.jsx(kt,{path:"/login",element:a.jsx(TH,{})}),a.jsx(kt,{path:"/register",element:a.jsx(nq,{})}),a.jsx(kt,{path:"/dashboard/*",element:a.jsx(cY,{})}),a.jsx(kt,{path:"/admin/*",element:a.jsx(ZK,{})}),a.jsx(kt,{path:"*",element:a.jsx(uY,{})})]})})})})})]})});yj(document.getElementById("root")).render(a.jsx(fY,{}));
